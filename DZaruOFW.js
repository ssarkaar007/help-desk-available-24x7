const __vite__fileDeps=["./Cv836rA9.js","./CkChSNW-.js","./EwZji-g3.js","./OnAibvkV.js","./swiper-vue.Bs3d9ZnH.css","./hero-banner.Dn8qn9Gp.css","./2xw9QLN1.js","./intro-content.BsdU9ULF.css","./RnYLj-Jo.js","./content-well.DYqmTz1u.css","./CHt8cyCs.js","./D7VAZrCq.js","./DE3ZGq8R.js","./PAKlNJ19.js","./review-carousel.D9eQxoXs.css","./DnVJeKrA.js","./DoQ0dPPk.js","./CNRwdRu2.js","./DCU53ubg.js","./CBnp3nFE.js","./CLa8qfpp.js","./DweOskmn.js","./VTFInkyB.js","./CIuyZic-.js","./DUt1gEF9.js","./site-footer.DcygpbFI.css","./CXjXZJXh.js","./gafnzFiD.js","./B7cVHVLi.js","./message.D4_3-x9f.css","./B6WZM6CJ.js","./pv5wYHE0.js","./CG1qBokQ.js","./overlay.-t7vUJRR.css","./alcCTCcY.js","./billing.Cxi9qA_9.css","./N8viiTji.js","./CiSv5DpA.js","./BB3Pgj7p.js","./DnKxEljE.js","./DFuQWLwq.js","./CxAhxM-P.js","./DeRjPn5x.js","./D_37SLr7.js","./collaborators.CJxRnf5Z.css","./D5HE1sKA.js","./D4DrLqXm.js","./C5LARF71.js","./BnlxJIj8.js","./domains.DWoxOLp5.css","./TA9FRXwv.js","./xQvg8WOF.js","./COMgu4yi.js","./CPa7BiPi.js","./DhBUGDF1.js","./CWcDdWGz.js","./ChmWEGRo.js","./J95-4Ltx.js","./email.DZlQvHe9.css","./DhbgLcV4.js","./CKh3aS-l.js","./BevsK2lM.js","./index.CgzDEl8c.css","./mzf1HxSp.js","./leads.B8nlG5f4.css","./DETi3Xix.js","./CASsCMgA.js","./Bgu0R4so.js","./login-form.BH3L7cHi.css","./login.R-SOXsP5.css","./DRSnnXN5.js","./register.CeP92_Ys.css","./D8dsxTVB.js","./BqGm3d0N.js","./DCAIF_cN.js","./DeDWwtJw.js","./sites.dWfF0cnS.css","./BGxlk8V0.js","./support.DSvBcnOR.css","./DrGPCe4B.js","./CV-qE45i.js","./LPlMyxak.js","./BCgjDZDN.js","./9jaxJsNv.js","./options-dropdown.ISxdKz5s.css","./custom-select.CnUg9J7v.css","./DotfdZkG.js","./DsEfWEkU.js","./WbyOIZ8X.js","./DFWq5V-R.js","./BYI96Azq.js","./DQwRwdxs.js","./D5Iu_ZOT.js","./BJ1QUbv3.js","./DNdvmjAH.js","./CxgZXFA1.js","./image-review.4RVvRAQ3.css","./sQcsWnm6.js","./index.BsVfl9Kc.css","./DRRyDfJJ.js","./user-detail.Cv5rKZge.css","./DcJJVI5W.js","./C3JG8jme.js","./eFvjLIGV.js","./user-report.BXVpFe4I.css","./B5ohxQmr.js","./mHlzK8nA.js","./accordion-with-image.DPUw8nGk.css","./C1h88iNw.js","./upsell-grid.IDNBL04O.css","./xzg_x0ag.js","./value-propositions.C96ctOxB.css","./Dhkql4oG.js","./_slug_.BQh7tzDd.css","./DCgAqQCU.js","./wbx7K7_X.js","./pagination.BAmrnf5Q.css","./index.dOE5grau.css","./B1a3usHu.js","./BKsPXlww.js","./_uid_.DqyRrFYf.css","./yTBXuCZ6.js","./DMuI53Cq.js","./contact-form.Bugz3M5q.css","./contact-us.D9b5ALhe.css","./CoQFa8qQ.js","./ChO3-em3.js","./DDeox8JO.js","./template.CqeBB8py.css","./BNVJH_bj.js","./Bf3yjcGW.js","./BtCeGN86.js","./CYsTVKDZ.js","./JXE5uTG5.js","./CV3f7P4w.js","./dzf1clzI.js","./BPRlK0MK.js","./DZXVAwUl.js","./chat-bubble.Cv2ZIBDF.css","./7fHTzyT5.js","./BF9XPWe-.js","./DZOsrBW6.js","./CPmsSt0D.js","./Eeq3L0Fh.js","./CTgTaD9o.js","./FEZGFcYg.js","./DxhoD3C6.js","./Cj3TdTl5.js","./range-slider.q4AsocoA.css","./CIvwh-tv.js","./CB17T4Nx.js","./ispA2wYQ.js","./7CZJ4DMF.js","./5p1aXrsF.js","./gOx48FFm.js","./D5G0vAkX.js","./BZIsDbsA.js","./B9cO3d11.js","./NAJXh2KP.js","./C1phCQCH.js","./CrNXe4yj.js","./C_3_D2Mm.js","./C2Aakn9U.js","./I_8oUHDs.js","./pd7QXhU7.js","./CMVdpos5.js","./_path_.Dbj5SP1u.css","./B81Sc6TJ.js","./B-DcqH2Q.js","./get-started.C10j0lm7.css","./CBu1wBpR.js","./DNHr9Bka.js","./CqPiUm8J.js","./BfPLd6S_.js","./_uid_.D13rVn0v.css","./BcIOkMnQ.js","./pricing.8kgCgzTq.css","./CXAxAV_B.js","./NygPNNYU.js","./Bl6lQ16O.js","./B73rYD8-.js","./_resetId_.3Er6xrp4.css","./B2gB66Yh.js","./CSwPKcnP.js","./CUCXNgFG.js","./site-header.BJFjwAPc.css","./wizard.BxqCDPNj.css","./BVZX38zp.js","./lOQr0rhw.js","./DmZKvJxM.js","./Xmc_OBQF.js","./URgNMimj.js","./iVrYIvJd.js","./gAbPqPdH.js","./BzRmURcV.js","./B2g_S0lp.js","./CqCfbMda.js","./fwH7ysCB.js","./BpLiSvzI.js","./BejReyMV.js","./5Cz58Vfl.js","./BQ-QkzdG.js","./BcvxH5tw.js","./DDLnUBUh.js","./Ctkfr_g_.js","./B4rdMo6x.js","./CGk0kYkq.js","./CHjw8Zgv.js","./BM_KxLg7.js","./BAh9_I0W.js","./BHob8ktf.js","./XKBY6Ra5.js","./1_go7XOA.js","./CHBNiG9q.js","./B72oEGGP.js","./CRVpyP_y.js","./Dou5JDIP.js","./D8FYnBDP.js","./BpIzt9U7.js","./BvglR8aT.js","./BiK6IqgW.js","./Bh_n3RNe.js","./DHppbAcd.js","./ni2N08EA.js","./CwXkoZ4c.js","./CHNhef8t.js","./BeoZxp8r.js","./IGs5Lz5O.js","./D1iB7l4w.js","./get-domain-popup.klLoWUUI.css","./account.Di30SV0Z.css","./B0dabkq8.js","./admin.BxJzLmxp.css","./CVitDulk.js","./authentication.DelmvyiP.css","./Dd008da4.js","./content.s8zxTeBH.css","./8ZDJoHPs.js","./59dyZH9x.js","./empty.1_1DPeq2.css","./nXbM5xKm.js","./error-404.JekaaCis.css","./CupoZTVU.js","./error-500.CNP9nqm1.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var oT=Object.defineProperty;var rT=(n,e,t)=>e in n?oT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Li=(n,e,t)=>(rT(n,typeof e!="symbol"?e+"":e,t),t);import{e as Ta,r as Qi,h as Tf,g as Wo,i as Bt,t as Dc,n as xs,u as Te,v as aT,a as Fe,w as lT,b as yn,o as cT,c as uT,d as dT,s as ji,f as Fc,j as Bn,k as be,l as pt,p as _o,K as hT,m as fT,q as s_,x as Eo,y as Sa,z as ui,A as ps,B as mT,C as o_,D as Sf,E as r_,F as gT,G as pT,H as O,I as bT,J as Af,L as vo,T as wT,M as _T,S as If,N as a_,O as Xe,P as qi,Q as jo,R as mn,U as Kr,V as dg,W as Ru,X as Pf,Y as l_,Z as vT,_ as yT,$ as CT,a0 as kT,a1 as ET,a2 as TT,a3 as ST,a4 as AT}from"./OnAibvkV.js";function IT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const PT=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,xT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,RT=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function LT(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){VT(n);return}return e}function VT(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Zr(n,e={}){if(typeof n!="string")return n;const t=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return t.slice(1,-1);if(t.length<=9){const i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!RT.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(PT.test(n)||xT.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,LT)}return JSON.parse(n)}catch(i){if(e.strict)throw i;return n}}const OT=/#/g,MT=/&/g,BT=/\//g,NT=/=/g,xf=/\+/g,DT=/%5e/gi,FT=/%60/gi,zT=/%7c/gi,HT=/%20/gi;function $T(n){return encodeURI(""+n).replace(zT,"|")}function Fd(n){return $T(typeof n=="string"?n:JSON.stringify(n)).replace(xf,"%2B").replace(HT,"+").replace(OT,"%23").replace(MT,"%26").replace(FT,"`").replace(DT,"^").replace(BT,"%2F")}function Lu(n){return Fd(n).replace(NT,"%3D")}function tc(n=""){try{return decodeURIComponent(""+n)}catch{return""+n}}function UT(n){return tc(n.replace(xf," "))}function WT(n){return tc(n.replace(xf," "))}function jT(n=""){const e={};n[0]==="?"&&(n=n.slice(1));for(const t of n.split("&")){const i=t.match(/([^=]+)=?(.*)/)||[];if(i.length<2)continue;const s=UT(i[1]);if(s==="__proto__"||s==="constructor")continue;const o=WT(i[2]||"");e[s]===void 0?e[s]=o:Array.isArray(e[s])?e[s].push(o):e[s]=[e[s],o]}return e}function qT(n,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(t=>`${Lu(n)}=${Fd(t)}`).join("&"):`${Lu(n)}=${Fd(e)}`:Lu(n)}function GT(n){return Object.keys(n).filter(e=>n[e]!==void 0).map(e=>qT(e,n[e])).filter(Boolean).join("&")}const KT=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,ZT=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,JT=/^([/\\]\s*){2,}[^/\\]/,XT=/^[\s\0]*(blob|data|javascript|vbscript):$/i,YT=/\/$|\/\?|\/#/,QT=/^\.?\//;function es(n,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?KT.test(n):ZT.test(n)||(e.acceptRelative?JT.test(n):!1)}function e5(n){return!!n&&XT.test(n)}function zd(n="",e){return e?YT.test(n):n.endsWith("/")}function Rf(n="",e){if(!e)return(zd(n)?n.slice(0,-1):n)||"/";if(!zd(n,!0))return n||"/";let t=n,i="";const s=n.indexOf("#");s>=0&&(t=n.slice(0,s),i=n.slice(s));const[o,...r]=t.split("?");return((o.endsWith("/")?o.slice(0,-1):o)||"/")+(r.length>0?`?${r.join("?")}`:"")+i}function Hd(n="",e){if(!e)return n.endsWith("/")?n:n+"/";if(zd(n,!0))return n||"/";let t=n,i="";const s=n.indexOf("#");if(s>=0&&(t=n.slice(0,s),i=n.slice(s),!t))return i;const[o,...r]=t.split("?");return o+"/"+(r.length>0?`?${r.join("?")}`:"")+i}function t5(n=""){return n.startsWith("/")}function hg(n=""){return t5(n)?n:"/"+n}function n5(n,e){if(u_(e)||es(n))return n;const t=Rf(e);return n.startsWith(t)?n:zc(t,n)}function fg(n,e){if(u_(e))return n;const t=Rf(e);if(!n.startsWith(t))return n;const i=n.slice(t.length);return i[0]==="/"?i:"/"+i}function c_(n,e){const t=Lf(n),i={...jT(t.search),...e};return t.search=GT(i),s5(t)}function u_(n){return!n||n==="/"}function i5(n){return n&&n!=="/"}function zc(n,...e){let t=n||"";for(const i of e.filter(s=>i5(s)))if(t){const s=i.replace(QT,"");t=Hd(t)+s}else t=i;return t}function d_(...n){var r,a,l,c;const e=/\/(?!\/)/,t=n.filter(Boolean),i=[];let s=0;for(const u of t)if(!(!u||u==="/")){for(const[d,h]of u.split(e).entries())if(!(!h||h===".")){if(h===".."){if(i.length===1&&es(i[0]))continue;i.pop(),s--;continue}if(d===1&&((r=i[i.length-1])!=null&&r.endsWith(":/"))){i[i.length-1]+="/"+h;continue}i.push(h),s++}}let o=i.join("/");return s>=0?(a=t[0])!=null&&a.startsWith("/")&&!o.startsWith("/")?o="/"+o:(l=t[0])!=null&&l.startsWith("./")&&!o.startsWith("./")&&(o="./"+o):o="../".repeat(-1*s)+o,(c=t[t.length-1])!=null&&c.endsWith("/")&&!o.endsWith("/")&&(o+="/"),o}function h_(n,e,t={}){return t.trailingSlash||(n=Hd(n),e=Hd(e)),t.leadingSlash||(n=hg(n),e=hg(e)),t.encoding||(n=tc(n),e=tc(e)),n===e}const f_=Symbol.for("ufo:protocolRelative");function Lf(n="",e){const t=n.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){const[,d,h=""]=t;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!es(n,{acceptRelative:!0}))return mg(n);const[,i="",s,o=""]=n.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,r="",a=""]=o.match(/([^#/?]*)(.*)?/)||[];i==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:c,hash:u}=mg(a);return{protocol:i.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:r,pathname:l,search:c,hash:u,[f_]:!i}}function mg(n=""){const[e="",t="",i=""]=(n.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:t,hash:i}}function s5(n){const e=n.pathname||"",t=n.search?(n.search.startsWith("?")?"":"?")+n.search:"",i=n.hash||"",s=n.auth?n.auth+"@":"",o=n.host||"";return(n.protocol||n[f_]?(n.protocol||"")+"//":"")+s+o+e+t+i}class o5 extends Error{constructor(e,t){super(e,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function r5(n){var l,c,u,d,h;const e=((l=n.error)==null?void 0:l.message)||((c=n.error)==null?void 0:c.toString())||"",t=((u=n.request)==null?void 0:u.method)||((d=n.options)==null?void 0:d.method)||"GET",i=((h=n.request)==null?void 0:h.url)||String(n.request)||"/",s=`[${t}] ${JSON.stringify(i)}`,o=n.response?`${n.response.status} ${n.response.statusText}`:"<no response>",r=`${s}: ${o}${e?` ${e}`:""}`,a=new o5(r,n.error?{cause:n.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(a,f,{get(){return n[f]}});for(const[f,m]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,f,{get(){return n.response&&n.response[m]}});return a}const a5=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function gg(n="GET"){return a5.has(n.toUpperCase())}function l5(n){if(n===void 0)return!1;const e=typeof n;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(n)?!0:n.buffer?!1:n.constructor&&n.constructor.name==="Object"||typeof n.toJSON=="function"}const c5=new Set(["image/svg","application/xml","application/xhtml","application/html"]),u5=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function d5(n=""){if(!n)return"json";const e=n.split(";").shift()||"";return u5.test(e)?"json":c5.has(e)||e.startsWith("text/")?"text":"blob"}function h5(n,e,t=globalThis.Headers){const i={...e,...n};if(e!=null&&e.params&&(n!=null&&n.params)&&(i.params={...e==null?void 0:e.params,...n==null?void 0:n.params}),e!=null&&e.query&&(n!=null&&n.query)&&(i.query={...e==null?void 0:e.query,...n==null?void 0:n.query}),e!=null&&e.headers&&(n!=null&&n.headers)){i.headers=new t((e==null?void 0:e.headers)||{});for(const[s,o]of new t((n==null?void 0:n.headers)||{}))i.headers.set(s,o)}return i}const f5=new Set([408,409,425,429,500,502,503,504]),m5=new Set([101,204,205,304]);function m_(n={}){const{fetch:e=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:i=globalThis.AbortController}=n;async function s(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let u;typeof a.options.retry=="number"?u=a.options.retry:u=gg(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):f5.has(d))){const h=a.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),o(a.request,{...a.options,retry:u-1})}}const c=r5(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,o),c}const o=async function(l,c={}){var f;const u={request:l,options:h5(c,n.defaults,t),response:void 0,error:void 0};u.options.method=(f=u.options.method)==null?void 0:f.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=n5(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=c_(u.request,{...u.options.params,...u.options.query}))),u.options.body&&gg(u.options.method)&&(l5(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new t(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const m=new i;d=setTimeout(()=>m.abort(),u.options.timeout),u.options.signal=m.signal}try{u.response=await e(u.request,u.options)}catch(m){return u.error=m,u.options.onRequestError&&await u.options.onRequestError(u),await s(u)}finally{d&&clearTimeout(d)}if(u.response.body&&!m5.has(u.response.status)&&u.options.method!=="HEAD"){const m=(u.options.parseResponse?"json":u.options.responseType)||d5(u.response.headers.get("content-type")||"");switch(m){case"json":{const g=await u.response.text(),b=u.options.parseResponse||Zr;u.response._data=b(g);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[m]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await s(u)):u.response},r=async function(l,c){return(await o(l,c))._data};return r.raw=o,r.native=(...a)=>e(...a),r.create=(a={})=>m_({...n,defaults:{...n.defaults,...a}}),r}const Vf=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),g5=Vf.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),p5=Vf.Headers,b5=Vf.AbortController,w5=m_({fetch:g5,Headers:p5,AbortController:b5}),_5=w5,v5=()=>{var n;return((n=window==null?void 0:window.__NUXT__)==null?void 0:n.config)||{}},nc=v5().app,y5=()=>nc.baseURL,C5=()=>nc.buildAssetsDir,Of=(...n)=>d_(g_(),C5(),...n),g_=(...n)=>{const e=nc.cdnURL||nc.baseURL;return n.length?d_(e,...n):e};globalThis.__buildAssetsURL=Of,globalThis.__publicAssetsURL=g_;globalThis.$fetch||(globalThis.$fetch=_5.create({baseURL:y5()}));function $d(n,e={},t){for(const i in n){const s=n[i],o=t?`${t}:${i}`:i;typeof s=="object"&&s!==null?$d(s,e,o):typeof s=="function"&&(e[o]=s)}return e}const k5={run:n=>n()},E5=()=>k5,p_=typeof console.createTask<"u"?console.createTask:E5;function T5(n,e){const t=e.shift(),i=p_(t);return n.reduce((s,o)=>s.then(()=>i.run(()=>o(...e))),Promise.resolve())}function S5(n,e){const t=e.shift(),i=p_(t);return Promise.all(n.map(s=>i.run(()=>s(...e))))}function Vu(n,e){for(const t of[...n])t(e)}class A5{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,i={}){if(!e||typeof t!="function")return()=>{};const s=e;let o;for(;this._deprecatedHooks[e];)o=this._deprecatedHooks[e],e=o.to;if(o&&!i.allowDeprecated){let r=o.message;r||(r=`${s} hook has been deprecated`+(o.to?`, please use ${o.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(r)||(console.warn(r),this._deprecatedMessages.add(r))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let i,s=(...o)=>(typeof i=="function"&&i(),i=void 0,s=void 0,t(...o));return i=this.hook(e,s),i}removeHook(e,t){if(this._hooks[e]){const i=this._hooks[e].indexOf(t);i!==-1&&this._hooks[e].splice(i,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const i=this._hooks[e]||[];delete this._hooks[e];for(const s of i)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=$d(e),i=Object.keys(t).map(s=>this.hook(s,t[s]));return()=>{for(const s of i.splice(0,i.length))s()}}removeHooks(e){const t=$d(e);for(const i in t)this.removeHook(i,t[i])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(T5,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(S5,e,...t)}callHookWith(e,t,...i){const s=this._before||this._after?{name:t,args:i,context:{}}:void 0;this._before&&Vu(this._before,s);const o=e(t in this._hooks?[...this._hooks[t]]:[],i);return o instanceof Promise?o.finally(()=>{this._after&&s&&Vu(this._after,s)}):(this._after&&s&&Vu(this._after,s),o)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function b_(){return new A5}function I5(n={}){let e,t=!1;const i=r=>{if(e&&e!==r)throw new Error("Context conflict")};let s;if(n.asyncContext){const r=n.AsyncLocalStorage||globalThis.AsyncLocalStorage;r?s=new r:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const o=()=>{if(s){const r=s.getStore();if(r!==void 0)return r}return e};return{use:()=>{const r=o();if(r===void 0)throw new Error("Context is not available");return r},tryUse:()=>o(),set:(r,a)=>{a||i(r),e=r,t=!0},unset:()=>{e=void 0,t=!1},call:(r,a)=>{i(r),e=r;try{return s?s.run(r,a):a()}finally{t||(e=void 0)}},async callAsync(r,a){e=r;const l=()=>{e=r},c=()=>e===r?l:void 0;Ud.add(c);try{const u=s?s.run(r,a):a();return t||(e=void 0),await u}finally{Ud.delete(c)}}}}function P5(n={}){const e={};return{get(t,i={}){return e[t]||(e[t]=I5({...n,...i})),e[t]}}}const ic=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},pg="__unctx__",x5=ic[pg]||(ic[pg]=P5()),R5=(n,e={})=>x5.get(n,e),bg="__unctx_async_handlers__",Ud=ic[bg]||(ic[bg]=new Set);function Gn(n){const e=[];for(const s of Ud){const o=s();o&&e.push(o)}const t=()=>{for(const s of e)s()};let i=n();return i&&typeof i=="object"&&"catch"in i&&(i=i.catch(s=>{throw t(),s})),[i,t]}const w_=R5("nuxt-app",{asyncContext:!1}),L5="__nuxt_plugin";function V5(n){let e=0;const t={_scope:Ta(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.11.2"},get vue(){return t.vueApp.version}},payload:Qi({data:{},state:{},once:new Set,_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:s=>t._scope.run(()=>B5(t,s)),isHydrating:!0,deferHydration(){if(!t.isHydrating)return()=>{};e++;let s=!1;return()=>{if(!s&&(s=!0,e--,e===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...n};t.hooks=b_(),t.hook=t.hooks.hook,t.callHook=t.hooks.callHook,t.provide=(s,o)=>{const r="$"+s;Qa(t,r,o),Qa(t.vueApp.config.globalProperties,r,o)},Qa(t.vueApp,"$nuxt",t),Qa(t.vueApp.config.globalProperties,"$nuxt",t);{window.addEventListener("nuxt.preloadError",o=>{t.callHook("app:chunkError",{error:o.payload})}),window.useNuxtApp=window.useNuxtApp||xe;const s=t.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});t.hook("app:mounted",s)}const i=t.payload.config;return t.provide("config",i),t}async function O5(n,e){if(e.hooks&&n.hooks.addHooks(e.hooks),typeof e=="function"){const{provide:t}=await n.runWithContext(()=>e(n))||{};if(t&&typeof t=="object")for(const i in t)n.provide(i,t[i])}}async function M5(n,e){const t=[],i=[],s=[],o=[];let r=0;async function a(l){var u;const c=((u=l.dependsOn)==null?void 0:u.filter(d=>e.some(h=>h._name===d)&&!t.includes(d)))??[];if(c.length>0)i.push([new Set(c),l]);else{const d=O5(n,l).then(async()=>{l._name&&(t.push(l._name),await Promise.all(i.map(async([h,f])=>{h.has(l._name)&&(h.delete(l._name),h.size===0&&(r++,await a(f)))})))});l.parallel?s.push(d.catch(h=>o.push(h))):await d}}for(const l of e)await a(l);if(await Promise.all(s),r)for(let l=0;l<r;l++)await Promise.all(s);if(o.length)throw o[0]}function rt(n){if(typeof n=="function")return n;const e=n._name||n.name;return delete n.name,Object.assign(n.setup||(()=>{}),n,{[L5]:!0,_name:e})}function B5(n,e,t){const i=()=>e();return w_.set(n),n.vueApp.runWithContext(i)}function N5(){var e;let n;return Tf()&&(n=(e=Wo())==null?void 0:e.appContext.app.$nuxt),n=n||w_.tryUse(),n||null}function xe(){const n=N5();if(!n)throw new Error("[nuxt] instance unavailable");return n}function Aa(n){return xe().$config}function Qa(n,e,t){Object.defineProperty(n,e,{get:()=>t})}function D5(n,e){if(typeof n!="string")throw new TypeError("argument str must be a string");const t={},i=e||{},s=i.decode||F5;let o=0;for(;o<n.length;){const r=n.indexOf("=",o);if(r===-1)break;let a=n.indexOf(";",o);if(a===-1)a=n.length;else if(a<r){o=n.lastIndexOf(";",r-1)+1;continue}const l=n.slice(o,r).trim();if(i!=null&&i.filter&&!(i!=null&&i.filter(l))){o=a+1;continue}if(t[l]===void 0){let c=n.slice(r+1,a).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),t[l]=z5(c,s)}o=a+1}return t}function F5(n){return n.includes("%")?decodeURIComponent(n):n}function z5(n,e){try{return e(n)}catch{return n}}const el=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function wg(n,e,t){const i=t||{},s=i.encode||encodeURIComponent;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!el.test(n))throw new TypeError("argument name is invalid");const o=s(e);if(o&&!el.test(o))throw new TypeError("argument val is invalid");let r=n+"="+o;if(i.maxAge!==void 0&&i.maxAge!==null){const a=i.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(i.domain){if(!el.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!el.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!H5(i.expires)||Number.isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":{r+="; Priority=Low";break}case"medium":{r+="; Priority=Medium";break}case"high":{r+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:{r+="; SameSite=Strict";break}case"lax":{r+="; SameSite=Lax";break}case"strict":{r+="; SameSite=Strict";break}case"none":{r+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(r+="; Partitioned"),r}function H5(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}const _g=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function sc(n,e){e?e={..._g,...e}:e=_g;const t=__(e);return t.dispatch(n),t.toString()}const $5=Object.freeze(["prototype","__proto__","constructor"]);function __(n){let e="",t=new Map;const i=s=>{e+=s};return{toString(){return e},getContext(){return t},dispatch(s){return n.replacer&&(s=n.replacer(s)),this[s===null?"null":typeof s](s)},object(s){if(s&&typeof s.toJSON=="function")return this.object(s.toJSON());const o=Object.prototype.toString.call(s);let r="";const a=o.length;a<10?r="unknown:["+o+"]":r=o.slice(8,a-1),r=r.toLowerCase();let l=null;if((l=t.get(s))===void 0)t.set(s,t.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(s))return i("buffer:"),i(s.toString("utf8"));if(r!=="object"&&r!=="function"&&r!=="asyncfunction")this[r]?this[r](s):n.ignoreUnknown||this.unkown(s,r);else{let c=Object.keys(s);n.unorderedObjects&&(c=c.sort());let u=[];n.respectType!==!1&&!vg(s)&&(u=$5),n.excludeKeys&&(c=c.filter(h=>!n.excludeKeys(h)),u=u.filter(h=>!n.excludeKeys(h))),i("object:"+(c.length+u.length)+":");const d=h=>{this.dispatch(h),i(":"),n.excludeValues||this.dispatch(s[h]),i(",")};for(const h of c)d(h);for(const h of u)d(h)}},array(s,o){if(o=o===void 0?n.unorderedArrays!==!1:o,i("array:"+s.length+":"),!o||s.length<=1){for(const l of s)this.dispatch(l);return}const r=new Map,a=s.map(l=>{const c=__(n);c.dispatch(l);for(const[u,d]of c.getContext())r.set(u,d);return c.toString()});return t=r,a.sort(),this.array(a,!1)},date(s){return i("date:"+s.toJSON())},symbol(s){return i("symbol:"+s.toString())},unkown(s,o){if(i(o),!!s&&(i(":"),s&&typeof s.entries=="function"))return this.array(Array.from(s.entries()),!0)},error(s){return i("error:"+s.toString())},boolean(s){return i("bool:"+s)},string(s){i("string:"+s.length+":"),i(s)},function(s){i("fn:"),vg(s)?this.dispatch("[native]"):this.dispatch(s.toString()),n.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(s.name)),n.respectFunctionProperties&&this.object(s)},number(s){return i("number:"+s)},xml(s){return i("xml:"+s.toString())},null(){return i("Null")},undefined(){return i("Undefined")},regexp(s){return i("regex:"+s.toString())},uint8array(s){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},uint8clampedarray(s){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},int8array(s){return i("int8array:"),this.dispatch(Array.prototype.slice.call(s))},uint16array(s){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},int16array(s){return i("int16array:"),this.dispatch(Array.prototype.slice.call(s))},uint32array(s){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},int32array(s){return i("int32array:"),this.dispatch(Array.prototype.slice.call(s))},float32array(s){return i("float32array:"),this.dispatch(Array.prototype.slice.call(s))},float64array(s){return i("float64array:"),this.dispatch(Array.prototype.slice.call(s))},arraybuffer(s){return i("arraybuffer:"),this.dispatch(new Uint8Array(s))},url(s){return i("url:"+s.toString())},map(s){i("map:");const o=[...s];return this.array(o,n.unorderedSets!==!1)},set(s){i("set:");const o=[...s];return this.array(o,n.unorderedSets!==!1)},file(s){return i("file:"),this.dispatch([s.name,s.size,s.type,s.lastModfied])},blob(){if(n.ignoreUnknown)return i("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return i("domwindow")},bigint(s){return i("bigint:"+s.toString())},process(){return i("process")},timer(){return i("timer")},pipe(){return i("pipe")},tcp(){return i("tcp")},udp(){return i("udp")},tty(){return i("tty")},statwatcher(){return i("statwatcher")},securecontext(){return i("securecontext")},connection(){return i("connection")},zlib(){return i("zlib")},context(){return i("context")},nodescript(){return i("nodescript")},httpparser(){return i("httpparser")},dataview(){return i("dataview")},signal(){return i("signal")},fsevent(){return i("fsevent")},tlswrap(){return i("tlswrap")}}}const v_="[native code] }",U5=v_.length;function vg(n){return typeof n!="function"?!1:Function.prototype.toString.call(n).slice(-U5)===v_}var W5=Object.defineProperty,j5=(n,e,t)=>e in n?W5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mo=(n,e,t)=>(j5(n,typeof e!="symbol"?e+"":e,t),t);class Wi{constructor(e,t){mo(this,"words"),mo(this,"sigBytes"),e=this.words=e||[],this.sigBytes=t===void 0?e.length*4:t}toString(e){return(e||q5).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const i=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=i<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Wi([...this.words])}}const q5={stringify(n){const e=[];for(let t=0;t<n.sigBytes;t++){const i=n.words[t>>>2]>>>24-t%4*8&255;e.push((i>>>4).toString(16),(i&15).toString(16))}return e.join("")}},G5={stringify(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let i=0;i<n.sigBytes;i+=3){const s=n.words[i>>>2]>>>24-i%4*8&255,o=n.words[i+1>>>2]>>>24-(i+1)%4*8&255,r=n.words[i+2>>>2]>>>24-(i+2)%4*8&255,a=s<<16|o<<8|r;for(let l=0;l<4&&i*8+l*6<n.sigBytes*8;l++)t.push(e.charAt(a>>>6*(3-l)&63))}return t.join("")}},K5={parse(n){const e=n.length,t=[];for(let i=0;i<e;i++)t[i>>>2]|=(n.charCodeAt(i)&255)<<24-i%4*8;return new Wi(t,e)}},Z5={parse(n){return K5.parse(unescape(encodeURIComponent(n)))}};class J5{constructor(){mo(this,"_data",new Wi),mo(this,"_nDataBytes",0),mo(this,"_minBufferSize",0),mo(this,"blockSize",512/32)}reset(){this._data=new Wi,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=Z5.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t,i=this._data.sigBytes/(this.blockSize*4);e?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const s=i*this.blockSize,o=Math.min(s*4,this._data.sigBytes);if(s){for(let r=0;r<s;r+=this.blockSize)this._doProcessBlock(this._data.words,r);t=this._data.words.splice(0,s),this._data.sigBytes-=o}return new Wi(t,o)}}class X5 extends J5{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}var Y5=Object.defineProperty,Q5=(n,e,t)=>e in n?Y5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eS=(n,e,t)=>(Q5(n,e+"",t),t);const yg=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],tS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],rs=[];class nS extends X5{constructor(){super(...arguments),eS(this,"_hash",new Wi([...yg]))}reset(){super.reset(),this._hash=new Wi([...yg])}_doProcessBlock(e,t){const i=this._hash.words;let s=i[0],o=i[1],r=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7];for(let h=0;h<64;h++){if(h<16)rs[h]=e[t+h]|0;else{const E=rs[h-15],C=(E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3,T=rs[h-2],k=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;rs[h]=C+rs[h-7]+k+rs[h-16]}const f=l&c^~l&u,m=s&o^s&r^o&r,g=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),b=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),p=d+b+f+tS[h]+rs[h],w=g+m;d=u,u=c,c=l,l=a+p|0,a=r,r=o,o=s,s=p+w|0}i[0]=i[0]+s|0,i[1]=i[1]+o|0,i[2]=i[2]+r|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+c|0,i[6]=i[6]+u|0,i[7]=i[7]+d|0}finalize(e){super.finalize(e);const t=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(i+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function iS(n){return new nS().finalize(n).toString(G5)}function sS(n,e={}){const t=typeof n=="string"?n:sc(n,e);return iS(t).slice(0,10)}function oS(n,e,t={}){return n===e||sc(n,t)===sc(e,t)}function zne(n,e,t={}){const i=Wd(n,t),s=Wd(e,t);return y_(i,s,t)}function y_(n,e,t={}){var o,r;const i=[],s=new Set([...Object.keys(n.props||{}),...Object.keys(e.props||{})]);if(n.props&&e.props)for(const a of s){const l=n.props[a],c=e.props[a];l&&c?i.push(...y_((o=n.props)==null?void 0:o[a],(r=e.props)==null?void 0:r[a],t)):(l||c)&&i.push(new Cg((c||l).key,l?"removed":"added",c,l))}return s.size===0&&n.hash!==e.hash&&i.push(new Cg((e||n).key,"changed",e,n)),i}function Wd(n,e,t=""){if(n&&typeof n!="object")return new kg(t,n,sc(n,e));const i={},s=[];for(const o in n)i[o]=Wd(n[o],e,t?`${t}.${o}`:o),s.push(i[o].hash);return new kg(t,n,`{${s.join(":")}}`,i)}class Cg{constructor(e,t,i,s){this.key=e,this.type=t,this.newValue=i,this.oldValue=s}toString(){return this.toJSON()}toJSON(){var e;switch(this.type){case"added":return`Added   \`${this.key}\``;case"removed":return`Removed \`${this.key}\``;case"changed":return`Changed \`${this.key}\` from \`${((e=this.oldValue)==null?void 0:e.toString())||"-"}\` to \`${this.newValue.toString()}\``}}}class kg{constructor(e,t,i,s){this.key=e,this.value=t,this.hash=i,this.props=s}toString(){return this.props?`{${Object.keys(this.props).join(",")}}`:JSON.stringify(this.value)}toJSON(){const e=this.key||".";return this.props?`${e}({${Object.keys(this.props).join(",")}})`:`${e}(${this.value})`}}function rS(n,e){return{ctx:{table:n},matchAll:t=>k_(t,n)}}function C_(n){const e={};for(const t in n)e[t]=t==="dynamic"?new Map(Object.entries(n[t]).map(([i,s])=>[i,C_(s)])):new Map(Object.entries(n[t]));return e}function aS(n){return rS(C_(n))}function k_(n,e,t){n.endsWith("/")&&(n=n.slice(0,-1)||"/");const i=[];for(const[o,r]of Eg(e.wildcard))(n===o||n.startsWith(o+"/"))&&i.push(r);for(const[o,r]of Eg(e.dynamic))if(n.startsWith(o+"/")){const a="/"+n.slice(o.length).split("/").splice(2).join("/");i.push(...k_(a,r))}const s=e.static.get(n);return s&&i.push(s),i.filter(Boolean)}function Eg(n){return[...n.entries()].sort((e,t)=>e[0].length-t[0].length)}function Ou(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in n?!1:Symbol.toStringTag in n?Object.prototype.toString.call(n)==="[object Module]":!0}function jd(n,e,t=".",i){if(!Ou(e))return jd(n,{},t,i);const s=Object.assign({},e);for(const o in n){if(o==="__proto__"||o==="constructor")continue;const r=n[o];r!=null&&(i&&i(s,o,r,t)||(Array.isArray(r)&&Array.isArray(s[o])?s[o]=[...r,...s[o]]:Ou(r)&&Ou(s[o])?s[o]=jd(r,s[o],(t?`${t}.`:"")+o.toString(),i):s[o]=r))}return s}function Mf(n){return(...e)=>e.reduce((t,i)=>jd(t,i,"",n),{})}const Hc=Mf(),lS=Mf((n,e,t)=>{if(n[e]!==void 0&&typeof t=="function")return n[e]=t(n[e]),!0});function cS(n,e){try{return e in n}catch{return!1}}class qd extends Error{constructor(t,i={}){super(t,i);Li(this,"statusCode",500);Li(this,"fatal",!1);Li(this,"unhandled",!1);Li(this,"statusMessage");Li(this,"data");Li(this,"cause");i.cause&&!this.cause&&(this.cause=i.cause)}toJSON(){const t={message:this.message,statusCode:Kd(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=E_(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}Li(qd,"__h3_error__",!0);function Gd(n){if(typeof n=="string")return new qd(n);if(uS(n))return n;const e=new qd(n.message??n.statusMessage??"",{cause:n.cause||n});if(cS(n,"stack"))try{Object.defineProperty(e,"stack",{get(){return n.stack}})}catch{try{e.stack=n.stack}catch{}}if(n.data&&(e.data=n.data),n.statusCode?e.statusCode=Kd(n.statusCode,e.statusCode):n.status&&(e.statusCode=Kd(n.status,e.statusCode)),n.statusMessage?e.statusMessage=n.statusMessage:n.statusText&&(e.statusMessage=n.statusText),e.statusMessage){const t=e.statusMessage;E_(e.statusMessage)!==t&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return n.fatal!==void 0&&(e.fatal=n.fatal),n.unhandled!==void 0&&(e.unhandled=n.unhandled),e}function uS(n){var e;return((e=n==null?void 0:n.constructor)==null?void 0:e.__h3_error__)===!0}const dS=/[^\u0009\u0020-\u007E]/g;function E_(n=""){return n.replace(dS,"")}function Kd(n,e=200){return!n||(typeof n=="string"&&(n=Number.parseInt(n,10)),n<100||n>999)?e:n}const T_=Symbol("layout-meta"),Ia=Symbol("route"),Nn=()=>{var n;return(n=xe())==null?void 0:n.$router},Pa=()=>Tf()?Bt(Ia,xe()._route):xe()._route;const hS=(n,e,t={})=>{const i=xe(),s=t.global||typeof n!="string",o=e;if(!o){console.warn("[nuxt] No route middleware passed to `addRouteMiddleware`.",n);return}s?i._middleware.global.push(o):i._middleware.named[n]=o},fS=()=>{try{if(xe()._processingMiddleware)return!0}catch{return!1}return!1},S_=(n,e)=>{n||(n="/");const t=typeof n=="string"?n:c_(n.path||"/",n.query||{})+(n.hash||"");if(e!=null&&e.open){const{target:a="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([u,d])=>d!==void 0).map(([u,d])=>`${u.toLowerCase()}=${d}`).join(", ");return open(t,a,c),Promise.resolve()}const i=(e==null?void 0:e.external)||es(t,{acceptRelative:!0});if(i){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const a=Lf(t).protocol;if(a&&e5(a))throw new Error(`Cannot navigate to a URL with '${a}' protocol.`)}const s=fS();if(!i&&s)return n;const o=Nn(),r=xe();return i?(r._scope.stop(),e!=null&&e.replace?location.replace(t):location.href=t,s?r.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?o.replace(n):o.push(n)},A_="__nuxt_error",$c=()=>Dc(xe().payload,"error"),go=n=>{const e=xa(n);try{const t=xe(),i=$c();t.hooks.callHook("app:error",e),i.value=i.value||e}catch{throw e}return e},mS=async(n={})=>{const e=xe(),t=$c();e.callHook("app:error:cleared",n),n.redirect&&await Nn().replace(n.redirect),t.value=null},gS=n=>!!n&&typeof n=="object"&&A_ in n,xa=n=>{const e=Gd(n);return Object.defineProperty(e,A_,{value:!0,configurable:!1,writable:!1}),e},pS="modulepreload",bS=function(n,e){return n[0]==="."?new URL(n,e).href:n},Tg={},wS=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),r=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(t.map(a=>{if(a=bS(a,i),a in Tg)return;Tg[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":pS,l||(u.as="script",u.crossOrigin=""),u.href=a,r&&u.setAttribute("nonce",r),document.head.appendChild(u),l)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},A=(...n)=>wS(...n).catch(e=>{const t=new Event("nuxt.preloadError");throw t.payload=e,window.dispatchEvent(t),e}),_S=-1,vS=-2,yS=-3,CS=-4,kS=-5,ES=-6;function TS(n,e){return SS(JSON.parse(n),e)}function SS(n,e){if(typeof n=="number")return s(n,!0);if(!Array.isArray(n)||n.length===0)throw new Error("Invalid input");const t=n,i=Array(t.length);function s(o,r=!1){if(o===_S)return;if(o===yS)return NaN;if(o===CS)return 1/0;if(o===kS)return-1/0;if(o===ES)return-0;if(r)throw new Error("Invalid input");if(o in i)return i[o];const a=t[o];if(!a||typeof a!="object")i[o]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],c=e==null?void 0:e[l];if(c)return i[o]=c(s(a[1]));switch(l){case"Date":i[o]=new Date(a[1]);break;case"Set":const u=new Set;i[o]=u;for(let f=1;f<a.length;f+=1)u.add(s(a[f]));break;case"Map":const d=new Map;i[o]=d;for(let f=1;f<a.length;f+=2)d.set(s(a[f]),s(a[f+1]));break;case"RegExp":i[o]=new RegExp(a[1],a[2]);break;case"Object":i[o]=Object(a[1]);break;case"BigInt":i[o]=BigInt(a[1]);break;case"null":const h=Object.create(null);i[o]=h;for(let f=1;f<a.length;f+=2)h[a[f]]=s(a[f+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);i[o]=l;for(let c=0;c<a.length;c+=1){const u=a[c];u!==vS&&(l[c]=s(u))}}else{const l={};i[o]=l;for(const c in a){const u=a[c];l[c]=s(u)}}return i[o]}return s(0)}function AS(n){return Array.isArray(n)?n:[n]}const IS=["title","titleTemplate","script","style","noscript"],Fl=["base","meta","link","style","script","noscript"],PS=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],xS=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],I_=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],RS=typeof window<"u";function Bf(n){let e=9;for(let t=0;t<n.length;)e=Math.imul(e^n.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Sg(n){return n._h||Bf(n._d?n._d:`${n.tag}:${n.textContent||n.innerHTML||""}:${Object.entries(n.props).map(([e,t])=>`${e}:${String(t)}`).join(",")}`)}function P_(n,e){const{props:t,tag:i}=n;if(xS.includes(i))return i;if(i==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const s=["id"];i==="meta"&&s.push("name","property","http-equiv");for(const o of s)if(typeof t[o]<"u"){const r=String(t[o]);return`${i}:${o}:${r}`}return!1}function Ag(n,e){return n==null?e||null:typeof n=="function"?n(e):n}async function LS(n,e,t){const i={tag:n,props:await x_(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[["script","noscript","style"].includes(n)?"innerHTML":"textContent"]:e},["templateParams","titleTemplate"].includes(n))};return I_.forEach(s=>{const o=typeof i.props[s]<"u"?i.props[s]:t[s];typeof o<"u"&&((!["innerHTML","textContent","children"].includes(s)||IS.includes(i.tag))&&(i[s==="children"?"innerHTML":s]=o),delete i.props[s])}),i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(s=>({...i,props:{...i.props,content:s}})):i}function VS(n,e){var i;const t=n==="class"?" ":";";return typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,s])=>s).map(([s,o])=>n==="style"?`${s}:${o}`:s)),(i=Array.isArray(e)?e.join(t):e)==null?void 0:i.split(t).filter(s=>s.trim()).filter(Boolean).join(t)}async function x_(n,e){for(const t of Object.keys(n)){if(["class","style"].includes(t)){n[t]=VS(t,n[t]);continue}if(n[t]instanceof Promise&&(n[t]=await n[t]),!e&&!I_.includes(t)){const i=String(n[t]),s=t.startsWith("data-");i==="true"||i===""?n[t]=s?"true":!0:n[t]||(s&&i==="false"?n[t]="false":delete n[t])}}return n}const OS=10;async function MS(n){const e=[];return Object.entries(n.resolvedInput).filter(([t,i])=>typeof i<"u"&&PS.includes(t)).forEach(([t,i])=>{const s=AS(i);e.push(...s.map(o=>LS(t,o,n)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((t,i)=>(t._e=n._i,n.mode&&(t._m=n.mode),t._p=(n._i<<OS)+i,t))}const Ig={base:-10,title:10},Pg={critical:-80,high:-10,low:20};function oc(n){let e=100;const t=n.tagPriority;return typeof t=="number"?t:(n.tag==="meta"?(n.props["http-equiv"]==="content-security-policy"&&(e=-30),n.props.charset&&(e=-20),n.props.name==="viewport"&&(e=-15)):n.tag==="link"&&n.props.rel==="preconnect"?e=20:n.tag in Ig&&(e=Ig[n.tag]),typeof t=="string"&&t in Pg?e+Pg[t]:e)}const BS=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],xg=["onload","onerror","onabort","onprogress","onloadstart"],Vi="%separator";function zl(n,e,t){if(typeof n!="string"||!n.includes("%"))return n;function i(r){let a;return["s","pageTitle"].includes(r)?a=e.pageTitle:r.includes(".")?a=r.split(".").reduce((l,c)=>l&&l[c]||void 0,e):a=e[r],typeof a<"u"?(a||"").replace(/"/g,'\\"'):!1}let s=n;try{s=decodeURI(n)}catch{}return(s.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(r=>{const a=i(r.slice(1));typeof a=="string"&&(n=n.replace(new RegExp(`\\${r}(\\W|$)`,"g"),(l,c)=>`${a}${c}`).trim())}),n.includes(Vi)&&(n.endsWith(Vi)&&(n=n.slice(0,-Vi.length).trim()),n.startsWith(Vi)&&(n=n.slice(Vi.length).trim()),n=n.replace(new RegExp(`\\${Vi}\\s*\\${Vi}`,"g"),Vi),n=zl(n,{separator:t},t)),n}async function R_(n,e={}){var u;const t=e.document||n.resolvedOptions.document;if(!t||!n.dirty)return;const i={shouldRender:!0,tags:[]};if(await n.hooks.callHook("dom:beforeRender",i),!i.shouldRender)return;const s=(await n.resolveTags()).map(d=>({tag:d,id:Fl.includes(d.tag)?Sg(d):d.tag,shouldRender:!0}));let o=n._dom;if(!o){o={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};for(const d of["body","head"]){const h=(u=t[d])==null?void 0:u.children,f=[];for(const m of[...h].filter(g=>Fl.includes(g.tagName.toLowerCase()))){const g={tag:m.tagName.toLowerCase(),props:await x_(m.getAttributeNames().reduce((w,E)=>({...w,[E]:m.getAttribute(E)}),{})),innerHTML:m.innerHTML};let b=1,p=P_(g);for(;p&&f.find(w=>w._d===p);)p=`${p}:${b++}`;g._d=p||void 0,f.push(g),o.elMap[m.getAttribute("data-hid")||Sg(g)]=m}}}o.pendingSideEffects={...o.sideEffects||{}},o.sideEffects={};function r(d,h,f){const m=`${d}:${h}`;o.sideEffects[m]=f,delete o.pendingSideEffects[m]}function a({id:d,$el:h,tag:f}){const m=f.tag.endsWith("Attrs");o.elMap[d]=h,m||(["textContent","innerHTML"].forEach(g=>{f[g]&&f[g]!==h[g]&&(h[g]=f[g])}),r(d,"el",()=>{var g;(g=o.elMap[d])==null||g.remove(),delete o.elMap[d]}));for(const[g,b]of Object.entries(f._eventHandlers||{}))h.getAttribute(`data-${g}`)!==""&&((f.tag==="bodyAttrs"?t.defaultView:h).addEventListener(g.replace("on",""),b.bind(h)),h.setAttribute(`data-${g}`,""));Object.entries(f.props).forEach(([g,b])=>{const p=`attr:${g}`;if(g==="class")for(const w of(b||"").split(" ").filter(Boolean))m&&r(d,`${p}:${w}`,()=>h.classList.remove(w)),!h.classList.contains(w)&&h.classList.add(w);else if(g==="style")for(const w of(b||"").split(";").filter(Boolean)){const[E,...C]=w.split(":").map(T=>T.trim());r(d,`${p}:${w}:${E}`,()=>{h.style.removeProperty(E)}),h.style.setProperty(E,C.join(":"))}else h.getAttribute(g)!==b&&h.setAttribute(g,b===!0?"":String(b)),m&&r(d,p,()=>h.removeAttribute(g))})}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const d of s){const{tag:h,shouldRender:f,id:m}=d;if(f){if(h.tag==="title"){t.title=h.textContent;continue}d.$el=d.$el||o.elMap[m],d.$el?a(d):Fl.includes(h.tag)&&l.push(d)}}for(const d of l){const h=d.tag.tagPosition||"head";d.$el=t.createElement(d.tag.tag),a(d),c[h]=c[h]||t.createDocumentFragment(),c[h].appendChild(d.$el)}for(const d of s)await n.hooks.callHook("dom:renderTag",d,t,r);c.head&&t.head.appendChild(c.head),c.bodyOpen&&t.body.insertBefore(c.bodyOpen,t.body.firstChild),c.bodyClose&&t.body.appendChild(c.bodyClose),Object.values(o.pendingSideEffects).forEach(d=>d()),n._dom=o,n.dirty=!1,await n.hooks.callHook("dom:rendered",{renders:s})}async function NS(n,e={}){const t=e.delayFn||(i=>setTimeout(i,10));return n._domUpdatePromise=n._domUpdatePromise||new Promise(i=>t(async()=>{await R_(n,e),delete n._domUpdatePromise,i()}))}function DS(n){return e=>{var i,s;const t=((s=(i=e.resolvedOptions.document)==null?void 0:i.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return t&&e.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":function(o){NS(o,n)}}}}}const FS=["templateParams","htmlAttrs","bodyAttrs"],zS={hooks:{"tag:normalise":function({tag:n}){["hid","vmid","key"].forEach(i=>{n.props[i]&&(n.key=n.props[i],delete n.props[i])});const t=P_(n)||(n.key?`${n.tag}:${n.key}`:!1);t&&(n._d=t)},"tags:resolve":function(n){const e={};n.tags.forEach(i=>{const s=(i.key?`${i.tag}:${i.key}`:i._d)||i._p,o=e[s];if(o){let a=i==null?void 0:i.tagDuplicateStrategy;if(!a&&FS.includes(i.tag)&&(a="merge"),a==="merge"){const l=o.props;["class","style"].forEach(c=>{l[c]&&(i.props[c]?(c==="style"&&!l[c].endsWith(";")&&(l[c]+=";"),i.props[c]=`${l[c]} ${i.props[c]}`):i.props[c]=l[c])}),e[s].props={...l,...i.props};return}else if(i._e===o._e){o._duped=o._duped||[],i._d=`${o._d}:${o._duped.length+1}`,o._duped.push(i);return}else if(oc(i)>oc(o))return}const r=Object.keys(i.props).length+(i.innerHTML?1:0)+(i.textContent?1:0);if(Fl.includes(i.tag)&&r===0){delete e[s];return}e[s]=i});const t=[];Object.values(e).forEach(i=>{const s=i._duped;delete i._duped,t.push(i),s&&t.push(...s)}),n.tags=t,n.tags=n.tags.filter(i=>!(i.tag==="meta"&&(i.props.name||i.props.property)&&!i.props.content))}}},HS={mode:"server",hooks:{"tags:resolve":function(n){const e={};n.tags.filter(t=>["titleTemplate","templateParams","title"].includes(t.tag)&&t._m==="server").forEach(t=>{e[t.tag]=t.tag.startsWith("title")?t.textContent:t.props}),Object.keys(e).length&&n.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},$S=["script","link","bodyAttrs"],US=n=>({hooks:{"tags:resolve":function(e){for(const t of e.tags.filter(i=>$S.includes(i.tag)))Object.entries(t.props).forEach(([i,s])=>{i.startsWith("on")&&typeof s=="function"&&(n.ssr&&xg.includes(i)?t.props[i]=`this.dataset.${i}fired = true`:delete t.props[i],t._eventHandlers=t._eventHandlers||{},t._eventHandlers[i]=s)}),n.ssr&&t._eventHandlers&&(t.props.src||t.props.href)&&(t.key=t.key||Bf(t.props.src||t.props.href))},"dom:renderTag":function({$el:e,tag:t}){var i,s;for(const o of Object.keys((e==null?void 0:e.dataset)||{}).filter(r=>xg.some(a=>`${a}fired`===r))){const r=o.replace("fired","");(s=(i=t._eventHandlers)==null?void 0:i[r])==null||s.call(e,new Event(r.replace("on","")))}}}}),WS=["link","style","script","noscript"],jS={hooks:{"tag:normalise":({tag:n})=>{n.key&&WS.includes(n.tag)&&(n.props["data-hid"]=n._h=Bf(n.key))}}},qS={hooks:{"tags:resolve":n=>{const e=t=>{var i;return(i=n.tags.find(s=>s._d===t))==null?void 0:i._p};for(const{prefix:t,offset:i}of BS)for(const s of n.tags.filter(o=>typeof o.tagPriority=="string"&&o.tagPriority.startsWith(t))){const o=e(s.tagPriority.replace(t,""));typeof o<"u"&&(s._p=o+i)}n.tags.sort((t,i)=>t._p-i._p).sort((t,i)=>oc(t)-oc(i))}}},GS={meta:"content",link:"href",htmlAttrs:"lang"},KS=n=>({hooks:{"tags:resolve":e=>{var a;const{tags:t}=e,i=(a=t.find(l=>l.tag==="title"))==null?void 0:a.textContent,s=t.findIndex(l=>l.tag==="templateParams"),o=s!==-1?t[s].props:{},r=o.separator||"|";delete o.separator,o.pageTitle=zl(o.pageTitle||i||"",o,r);for(const l of t.filter(c=>c.processTemplateParams!==!1)){const c=GS[l.tag];c&&typeof l.props[c]=="string"?l.props[c]=zl(l.props[c],o,r):(l.processTemplateParams===!0||["titleTemplate","title"].includes(l.tag))&&["innerHTML","textContent"].forEach(u=>{typeof l[u]=="string"&&(l[u]=zl(l[u],o,r))})}n._templateParams=o,n._separator=r,e.tags=t.filter(l=>l.tag!=="templateParams")}}}),ZS={hooks:{"tags:resolve":n=>{const{tags:e}=n;let t=e.findIndex(s=>s.tag==="titleTemplate");const i=e.findIndex(s=>s.tag==="title");if(i!==-1&&t!==-1){const s=Ag(e[t].textContent,e[i].textContent);s!==null?e[i].textContent=s||e[i].textContent:delete e[i]}else if(t!==-1){const s=Ag(e[t].textContent);s!==null&&(e[t].textContent=s,e[t].tag="title",t=-1)}t!==-1&&delete e[t],n.tags=e.filter(Boolean)}}},JS={hooks:{"tags:afterResolve":function(n){for(const e of n.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&["application/ld+json","application/json"].includes(e.props.type)?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let L_;function XS(n={}){const e=YS(n);return e.use(DS()),L_=e}function Rg(n,e){return!n||n==="server"&&e||n==="client"&&!e}function YS(n={}){const e=b_();e.addHooks(n.hooks||{}),n.document=n.document||(RS?document:void 0);const t=!n.document,i=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let s=0,o=[];const r=[],a={plugins:r,dirty:!1,resolvedOptions:n,hooks:e,headEntries(){return o},use(l){const c=typeof l=="function"?l(a):l;(!c.key||!r.some(u=>u.key===c.key))&&(r.push(c),Rg(c.mode,t)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:s++,input:l,...c};return Rg(u.mode,t)&&(o.push(u),i()),{dispose(){o=o.filter(d=>d._i!==u._i),e.callHook("entries:updated",a),i()},patch(d){o=o.map(h=>(h._i===u._i&&(h.input=u.input=d),h)),i()}}},async resolveTags(){const l={tags:[],entries:[...o]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const d of await MS(c)){const h={tag:d,entry:c,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",h),l.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:t};return[zS,HS,US,jS,qS,KS,ZS,JS,...(n==null?void 0:n.plugins)||[]].forEach(l=>a.use(l)),a.hooks.callHook("init",a),a}function QS(){return L_}const eA=aT.startsWith("3");function tA(n){return typeof n=="function"?n():Te(n)}function rc(n,e=""){if(n instanceof Promise)return n;const t=tA(n);return!n||!t?t:Array.isArray(t)?t.map(i=>rc(i,e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([i,s])=>i==="titleTemplate"||i.startsWith("on")?[i,Te(s)]:[i,rc(s,i)])):t}const nA={hooks:{"entries:resolve":function(n){for(const e of n.entries)e.resolvedInput=rc(e.input)}}},V_="usehead";function iA(n){return{install(t){eA&&(t.config.globalProperties.$unhead=n,t.config.globalProperties.$head=n,t.provide(V_,n))}}.install}function sA(n={}){n.domDelayFn=n.domDelayFn||(t=>xs(()=>setTimeout(()=>t(),0)));const e=XS(n);return e.use(nA),e.install=iA(e),e}const Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jd="__unhead_injection_handler__";function oA(n){Zd[Jd]=n}function rA(){if(Jd in Zd)return Zd[Jd]();const n=Bt(V_);return n||QS()}function aA(n,e={}){const t=e.head||rA();if(t)return t.ssr?t.push(n,e):lA(t,n,e)}function lA(n,e,t={}){const i=Fe(!1),s=Fe({});lT(()=>{s.value=i.value?{}:rc(e)});const o=n.push(s.value,t);return yn(s,a=>{o.patch(a)}),Wo()&&(cT(()=>{o.dispose()}),uT(()=>{i.value=!0}),dT(()=>{i.value=!1})),o}function ii(n){if(typeof n!="object")return n;var e,t,i=Object.prototype.toString.call(n);if(i==="[object Object]"){if(n.constructor!==Object&&typeof n.constructor=="function"){t=new n.constructor;for(e in n)n.hasOwnProperty(e)&&t[e]!==n[e]&&(t[e]=ii(n[e]))}else{t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:ii(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=ii(n[e])}return t}if(i==="[object Array]"){for(e=n.length,t=Array(e);e--;)t[e]=ii(n[e]);return t}return i==="[object Set]"?(t=new Set,n.forEach(function(s){t.add(ii(s))}),t):i==="[object Map]"?(t=new Map,n.forEach(function(s,o){t.set(ii(o),ii(s))}),t):i==="[object Date]"?new Date(+n):i==="[object RegExp]"?(t=new RegExp(n.source,n.flags),t.lastIndex=n.lastIndex,t):i==="[object DataView]"?new n.constructor(ii(n.buffer)):i==="[object ArrayBuffer]"?n.slice(0):i.slice(-6)==="Array]"?new n.constructor(n):n}const cA={nuxt:{buildId:"5be85131-e6dd-4486-afdb-e3af73154503"},icon:{provider:"server",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500},ui:{primary:"green",gray:"cool",colors:["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","primary"],strategy:"merge"}},O_=lS(cA);function Uc(){const n=xe();return n._appConfig||(n._appConfig=Qi(O_)),n._appConfig}const uA=!1,Xd=!1,dA=!1,Hne={componentName:"NuxtLink"},hA={deep:!0},fA={},mA="#__nuxt";let Hl,M_;function gA(){var e;const n=(e=Uc().nuxt)==null?void 0:e.buildId;return Hl=$fetch(Of(`builds/meta/${n}.json`)),Hl.then(t=>{M_=aS(t.matcher)}),Hl}function Wc(){return Hl||gA()}async function Nf(n){return await Wc(),Hc({},...M_.matchAll(n).reverse())}function Lg(n,e={}){const t=bA(n,e),i=xe(),s=i._payloadCache=i._payloadCache||{};return t in s||(s[t]=wA(n).then(o=>o?B_(t).then(r=>r||(delete s[t],null)):(s[t]=null,null))),s[t]}const pA="_payload.json";function bA(n,e={}){var s;const t=new URL(n,"http://localhost");if(t.host!=="localhost"||es(t.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+n);const i=e.hash||(e.fresh?Date.now():(s=Uc().nuxt)==null?void 0:s.buildId);return zc(Aa().app.baseURL,t.pathname,pA+(i?`?${i}`:""))}async function B_(n){const e=fetch(n).then(t=>t.text().then(N_));try{return await e}catch(t){console.warn("[nuxt] Cannot load payload ",n,t)}return null}async function wA(n=Pa().path){if(n=Rf(n),(await Wc()).prerendered.includes(n))return!0;const t=await Nf(n);return!!t.prerender&&!t.redirect}let tl=null;async function _A(){if(tl)return tl;const n=document.getElementById("__NUXT_DATA__");if(!n)return{};const e=await N_(n.textContent||""),t=n.dataset.src?await B_(n.dataset.src):void 0;return tl={...e,...t,...window.__NUXT__},tl}async function N_(n){return await TS(n,xe()._payloadRevivers)}function vA(n,e){xe()._payloadRevivers[n]=e}const Vg={NuxtError:n=>xa(n),EmptyShallowRef:n=>ji(n==="_"?void 0:n==="0n"?BigInt(0):Zr(n)),EmptyRef:n=>Fe(n==="_"?void 0:n==="0n"?BigInt(0):Zr(n)),ShallowRef:n=>ji(n),ShallowReactive:n=>Fc(n),Ref:n=>Fe(n),Reactive:n=>Qi(n)},yA=rt({name:"nuxt:revive-payload:client",order:-30,async setup(n){let e,t;for(const i in Vg)vA(i,Vg[i]);Object.assign(n.payload,([e,t]=Gn(()=>n.runWithContext(_A)),e=await e,t(),e)),window.__NUXT__=n.payload}}),CA=[],kA=rt({name:"nuxt:head",enforce:"pre",setup(n){const e=sA({plugins:CA});oA(()=>xe().vueApp._context.provides.usehead),n.vueApp.use(e);{let t=!0;const i=async()=>{t=!1,await R_(e)};e.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!t}),n.hooks.hook("page:start",()=>{t=!0}),n.hooks.hook("page:finish",()=>{n.isHydrating||i()}),n.hooks.hook("app:error",i),n.hooks.hook("app:suspense:resolve",i)}}});/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const oo=typeof document<"u";function EA(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const ke=Object.assign;function Mu(n,e){const t={};for(const i in e){const s=e[i];t[i]=Zn(s)?s.map(n):n(s)}return t}const Lr=()=>{},Zn=Array.isArray,D_=/#/g,TA=/&/g,SA=/\//g,AA=/=/g,IA=/\?/g,F_=/\+/g,PA=/%5B/g,xA=/%5D/g,z_=/%5E/g,RA=/%60/g,H_=/%7B/g,LA=/%7C/g,$_=/%7D/g,VA=/%20/g;function Df(n){return encodeURI(""+n).replace(LA,"|").replace(PA,"[").replace(xA,"]")}function OA(n){return Df(n).replace(H_,"{").replace($_,"}").replace(z_,"^")}function Yd(n){return Df(n).replace(F_,"%2B").replace(VA,"+").replace(D_,"%23").replace(TA,"%26").replace(RA,"`").replace(H_,"{").replace($_,"}").replace(z_,"^")}function MA(n){return Yd(n).replace(AA,"%3D")}function BA(n){return Df(n).replace(D_,"%23").replace(IA,"%3F")}function NA(n){return n==null?"":BA(n).replace(SA,"%2F")}function Jr(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const DA=/\/$/,FA=n=>n.replace(DA,"");function Bu(n,e,t="/"){let i,s={},o="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),s=n(o)),a>-1&&(i=i||e.slice(0,a),r=e.slice(a,e.length)),i=UA(i??e,t),{fullPath:i+(o&&"?")+o+r,path:i,query:s,hash:Jr(r)}}function zA(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Og(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function HA(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&To(e.matched[i],t.matched[s])&&U_(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function To(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function U_(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!$A(n[t],e[t]))return!1;return!0}function $A(n,e){return Zn(n)?Mg(n,e):Zn(e)?Mg(e,n):n===e}function Mg(n,e){return Zn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function UA(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let o=t.length-1,r,a;for(r=0;r<i.length;r++)if(a=i[r],a!==".")if(a==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+i.slice(r).join("/")}var Xr;(function(n){n.pop="pop",n.push="push"})(Xr||(Xr={}));var Vr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Vr||(Vr={}));function WA(n){if(!n)if(oo){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),FA(n)}const jA=/^[^#]+#/;function qA(n,e){return n.replace(jA,"#")+e}function GA(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const jc=()=>({left:window.scrollX,top:window.scrollY});function KA(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=GA(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Bg(n,e){return(history.state?history.state.position-e:-1)+n}const Qd=new Map;function ZA(n,e){Qd.set(n,e)}function JA(n){const e=Qd.get(n);return Qd.delete(n),e}let XA=()=>location.protocol+"//"+location.host;function W_(n,e){const{pathname:t,search:i,hash:s}=e,o=n.indexOf("#");if(o>-1){let a=s.includes(n.slice(o))?n.slice(o).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Og(l,"")}return Og(t,n)+i+s}function YA(n,e,t,i){let s=[],o=[],r=null;const a=({state:h})=>{const f=W_(n,location),m=t.value,g=e.value;let b=0;if(h){if(t.value=f,e.value=h,r&&r===m){r=null;return}b=g?h.position-g.position:0}else i(f);s.forEach(p=>{p(t.value,m,{delta:b,type:Xr.pop,direction:b?b>0?Vr.forward:Vr.back:Vr.unknown})})};function l(){r=t.value}function c(h){s.push(h);const f=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return o.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(ke({},h.state,{scroll:jc()}),"")}function d(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Ng(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?jc():null}}function QA(n){const{history:e,location:t}=window,i={value:W_(n,t)},s={value:e.state};s.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const d=n.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:XA()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(f){console.error(f),t[u?"replace":"assign"](h)}}function r(l,c){const u=ke({},e.state,Ng(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});o(l,u,!0),i.value=l}function a(l,c){const u=ke({},s.value,e.state,{forward:l,scroll:jc()});o(u.current,u,!0);const d=ke({},Ng(i.value,l,null),{position:u.position+1},c);o(l,d,!1),i.value=l}return{location:i,state:s,push:a,replace:r}}function j_(n){n=WA(n);const e=QA(n),t=YA(n,e.state,e.location,e.replace);function i(o,r=!0){r||t.pauseListeners(),history.go(o)}const s=ke({location:"",base:n,go:i,createHref:qA.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function eI(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),j_(n)}function tI(n){return typeof n=="string"||n&&typeof n=="object"}function q_(n){return typeof n=="string"||typeof n=="symbol"}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},G_=Symbol("");var Dg;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Dg||(Dg={}));function So(n,e){return ke(new Error,{type:n,[G_]:!0},e)}function fi(n,e){return n instanceof Error&&G_ in n&&(e==null||!!(n.type&e))}const Fg="[^/]+?",nI={sensitive:!1,strict:!1,start:!0,end:!0},iI=/[.+*?^${}()[\]/\\]/g;function sI(n,e){const t=ke({},nI,e),i=[];let s=t.start?"^":"";const o=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(t.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(iI,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:g,optional:b,regexp:p}=h;o.push({name:m,repeatable:g,optional:b});const w=p||Fg;if(w!==Fg){f+=10;try{new RegExp(`(${w})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${m}" (${w}): `+C.message)}}let E=g?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(E=b&&c.length<2?`(?:/${E})`:"/"+E),b&&(E+="?"),s+=E,f+=20,b&&(f+=-8),g&&(f+=-20),w===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&(s+="(?:/|$)");const r=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(r),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",m=o[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:m,repeatable:g,optional:b}=f,p=m in c?c[m]:"";if(Zn(p)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const w=Zn(p)?p.join("/"):p;if(!w)if(b)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=w}}return u||"/"}return{re:r,score:i,keys:o,parse:a,stringify:l}}function oI(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function rI(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const o=oI(i[t],s[t]);if(o)return o;t++}if(Math.abs(s.length-i.length)===1){if(zg(i))return 1;if(zg(s))return-1}return s.length-i.length}function zg(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const aI={type:0,value:""},lI=/[a-zA-Z0-9_]/;function cI(n){if(!n)return[[]];if(n==="/")return[[aI]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,i=t;const s=[];let o;function r(){o&&s.push(o),o=[]}let a=0,l,c="",u="";function d(){c&&(t===0?o.push({type:0,value:c}):t===1||t===2||t===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),r()):l===":"?(d(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:lI.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),r(),s}function uI(n,e,t){const i=sI(cI(n.path),t),s=ke(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function dI(n,e){const t=[],i=new Map;e=Ug({strict:!1,end:!0,sensitive:!1},e);function s(u){return i.get(u)}function o(u,d,h){const f=!h,m=hI(u);m.aliasOf=h&&h.record;const g=Ug(e,u),b=[m];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of E)b.push(ke({},m,{components:h?h.record.components:m.components,path:C,aliasOf:h?h.record:m}))}let p,w;for(const E of b){const{path:C}=E;if(d&&C[0]!=="/"){const T=d.record.path,k=T[T.length-1]==="/"?"":"/";E.path=d.record.path+(C&&k+C)}if(p=uI(E,d,g),h?h.alias.push(p):(w=w||p,w!==p&&w.alias.push(p),f&&u.name&&!$g(p)&&r(u.name)),m.children){const T=m.children;for(let k=0;k<T.length;k++)o(T[k],p,h&&h.children[k])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return w?()=>{r(w)}:Lr}function r(u){if(q_(u)){const d=i.get(u);d&&(i.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(r),d.alias.forEach(r))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&i.delete(u.record.name),u.children.forEach(r),u.alias.forEach(r))}}function a(){return t}function l(u){let d=0;for(;d<t.length&&rI(u,t[d])>=0&&(u.record.path!==t[d].record.path||!K_(u,t[d]));)d++;t.splice(d,0,u),u.record.name&&!$g(u)&&i.set(u.record.name,u)}function c(u,d){let h,f={},m,g;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw So(1,{location:u});g=h.record.name,f=ke(Hg(d.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),u.params&&Hg(u.params,h.keys.map(w=>w.name))),m=h.stringify(f)}else if(u.path!=null)m=u.path,h=t.find(w=>w.re.test(m)),h&&(f=h.parse(m),g=h.record.name);else{if(h=d.name?i.get(d.name):t.find(w=>w.re.test(d.path)),!h)throw So(1,{location:u,currentLocation:d});g=h.record.name,f=ke({},d.params,u.params),m=h.stringify(f)}const b=[];let p=h;for(;p;)b.unshift(p.record),p=p.parent;return{name:g,path:m,params:f,matched:b,meta:mI(b)}}return n.forEach(u=>o(u)),{addRoute:o,resolve:c,removeRoute:r,getRoutes:a,getRecordMatcher:s}}function Hg(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function hI(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:fI(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function fI(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function $g(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mI(n){return n.reduce((e,t)=>ke(e,t.meta),{})}function Ug(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function K_(n,e){return e.children.some(t=>t===n||K_(n,t))}function gI(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const o=i[s].replace(F_," "),r=o.indexOf("="),a=Jr(r<0?o:o.slice(0,r)),l=r<0?null:Jr(o.slice(r+1));if(a in e){let c=e[a];Zn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Wg(n){let e="";for(let t in n){const i=n[t];if(t=MA(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Zn(i)?i.map(o=>o&&Yd(o)):[i&&Yd(i)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+t,o!=null&&(e+="="+o))})}return e}function pI(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Zn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const bI=Symbol(""),jg=Symbol(""),qc=Symbol(""),Ff=Symbol(""),eh=Symbol("");function ar(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function zi(n,e,t,i,s,o=r=>r()){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(So(4,{from:t,to:e})):h instanceof Error?l(h):tI(h)?l(So(2,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),a())},u=o(()=>n.call(i&&i.instances[s],e,t,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Nu(n,e,t,i,s=o=>o()){const o=[];for(const r of n)for(const a in r.components){let l=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(wI(l)){const u=(l.__vccOpts||l)[e];u&&o.push(zi(u,t,i,r,a,s))}else{let c=l();o.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${r.path}"`));const d=EA(u)?u.default:u;r.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&zi(f,t,i,r,a,s)()}))}}return o}function wI(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function qg(n){const e=Bt(qc),t=Bt(Ff),i=be(()=>{const l=Te(n.to);return e.resolve(l)}),s=be(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(To.bind(null,u));if(h>-1)return h;const f=Gg(l[c-2]);return c>1&&Gg(u)===f&&d[d.length-1].path!==f?d.findIndex(To.bind(null,l[c-2])):h}),o=be(()=>s.value>-1&&CI(t.params,i.value.params)),r=be(()=>s.value>-1&&s.value===t.matched.length-1&&U_(t.params,i.value.params));function a(l={}){return yI(l)?e[Te(n.replace)?"replace":"push"](Te(n.to)).catch(Lr):Promise.resolve()}return{route:i,href:be(()=>i.value.href),isActive:o,isExactActive:r,navigate:a}}const _I=Bn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qg,setup(n,{slots:e}){const t=Qi(qg(n)),{options:i}=Bt(qc),s=be(()=>({[Kg(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Kg(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&e.default(t);return n.custom?o:pt("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},o)}}}),vI=_I;function yI(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function CI(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!Zn(s)||s.length!==i.length||i.some((o,r)=>o!==s[r]))return!1}return!0}function Gg(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Kg=(n,e,t)=>n??e??t,kI=Bn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=Bt(eh),s=be(()=>n.route||i.value),o=Bt(jg,0),r=be(()=>{let c=Te(o);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=be(()=>s.value.matched[r.value]);_o(jg,be(()=>r.value+1)),_o(bI,a),_o(eh,s);const l=Fe();return yn(()=>[l.value,a.value,n.name],([c,u,d],[h,f,m])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!To(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,d=a.value,h=d&&d.components[u];if(!h)return Zg(t.default,{Component:h,route:c});const f=d.props[u],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,b=pt(h,ke({},m,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Zg(t.default,{Component:b,route:c})||b}}});function Zg(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Z_=kI;function EI(n){const e=dI(n.routes,n),t=n.parseQuery||gI,i=n.stringifyQuery||Wg,s=n.history,o=ar(),r=ar(),a=ar(),l=ji(Hn);let c=Hn;oo&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Mu.bind(null,M=>""+M),d=Mu.bind(null,NA),h=Mu.bind(null,Jr);function f(M,W){let z,q;return q_(M)?(z=e.getRecordMatcher(M),q=W):q=M,e.addRoute(q,z)}function m(M){const W=e.getRecordMatcher(M);W&&e.removeRoute(W)}function g(){return e.getRoutes().map(M=>M.record)}function b(M){return!!e.getRecordMatcher(M)}function p(M,W){if(W=ke({},W||l.value),typeof M=="string"){const y=Bu(t,M,W.path),R=e.resolve({path:y.path},W),H=s.createHref(y.fullPath);return ke(y,R,{params:h(R.params),hash:Jr(y.hash),redirectedFrom:void 0,href:H})}let z;if(M.path!=null)z=ke({},M,{path:Bu(t,M.path,W.path).path});else{const y=ke({},M.params);for(const R in y)y[R]==null&&delete y[R];z=ke({},M,{params:d(y)}),W.params=d(W.params)}const q=e.resolve(z,W),oe=M.hash||"";q.params=u(h(q.params));const _e=zA(i,ke({},M,{hash:OA(oe),path:q.path})),_=s.createHref(_e);return ke({fullPath:_e,hash:oe,query:i===Wg?pI(M.query):M.query||{}},q,{redirectedFrom:void 0,href:_})}function w(M){return typeof M=="string"?Bu(t,M,l.value.path):ke({},M)}function E(M,W){if(c!==M)return So(8,{from:W,to:M})}function C(M){return S(M)}function T(M){return C(ke(w(M),{replace:!0}))}function k(M){const W=M.matched[M.matched.length-1];if(W&&W.redirect){const{redirect:z}=W;let q=typeof z=="function"?z(M):z;return typeof q=="string"&&(q=q.includes("?")||q.includes("#")?q=w(q):{path:q},q.params={}),ke({query:M.query,hash:M.hash,params:q.path!=null?{}:M.params},q)}}function S(M,W){const z=c=p(M),q=l.value,oe=M.state,_e=M.force,_=M.replace===!0,y=k(z);if(y)return S(ke(w(y),{state:typeof y=="object"?ke({},oe,y.state):oe,force:_e,replace:_}),W||z);const R=z;R.redirectedFrom=W;let H;return!_e&&HA(i,q,z)&&(H=So(16,{to:R,from:q}),st(q,q,!0,!1)),(H?Promise.resolve(H):Y(R,q)).catch(J=>fi(J)?fi(J,2)?J:An(J):vt(J,R,q)).then(J=>{if(J){if(fi(J,2))return S(ke({replace:_},w(J.to),{state:typeof J.to=="object"?ke({},oe,J.to.state):oe,force:_e}),W||R)}else J=V(R,q,!0,_,oe);return le(R,q,J),J})}function x(M,W){const z=E(M,W);return z?Promise.reject(z):Promise.resolve()}function N(M){const W=ne.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(M):M()}function Y(M,W){let z;const[q,oe,_e]=TI(M,W);z=Nu(q.reverse(),"beforeRouteLeave",M,W);for(const y of q)y.leaveGuards.forEach(R=>{z.push(zi(R,M,W))});const _=x.bind(null,M,W);return z.push(_),We(z).then(()=>{z=[];for(const y of o.list())z.push(zi(y,M,W));return z.push(_),We(z)}).then(()=>{z=Nu(oe,"beforeRouteUpdate",M,W);for(const y of oe)y.updateGuards.forEach(R=>{z.push(zi(R,M,W))});return z.push(_),We(z)}).then(()=>{z=[];for(const y of _e)if(y.beforeEnter)if(Zn(y.beforeEnter))for(const R of y.beforeEnter)z.push(zi(R,M,W));else z.push(zi(y.beforeEnter,M,W));return z.push(_),We(z)}).then(()=>(M.matched.forEach(y=>y.enterCallbacks={}),z=Nu(_e,"beforeRouteEnter",M,W,N),z.push(_),We(z))).then(()=>{z=[];for(const y of r.list())z.push(zi(y,M,W));return z.push(_),We(z)}).catch(y=>fi(y,8)?y:Promise.reject(y))}function le(M,W,z){a.list().forEach(q=>N(()=>q(M,W,z)))}function V(M,W,z,q,oe){const _e=E(M,W);if(_e)return _e;const _=W===Hn,y=oo?history.state:{};z&&(q||_?s.replace(M.fullPath,ke({scroll:_&&y&&y.scroll},oe)):s.push(M.fullPath,oe)),l.value=M,st(M,W,z,_),An()}let K;function ce(){K||(K=s.listen((M,W,z)=>{if(!Me.listening)return;const q=p(M),oe=k(q);if(oe){S(ke(oe,{replace:!0}),q).catch(Lr);return}c=q;const _e=l.value;oo&&ZA(Bg(_e.fullPath,z.delta),jc()),Y(q,_e).catch(_=>fi(_,12)?_:fi(_,2)?(S(_.to,q).then(y=>{fi(y,20)&&!z.delta&&z.type===Xr.pop&&s.go(-1,!1)}).catch(Lr),Promise.reject()):(z.delta&&s.go(-z.delta,!1),vt(_,q,_e))).then(_=>{_=_||V(q,_e,!1),_&&(z.delta&&!fi(_,8)?s.go(-z.delta,!1):z.type===Xr.pop&&fi(_,20)&&s.go(-1,!1)),le(q,_e,_)}).catch(Lr)}))}let Ce=ar(),re=ar(),He;function vt(M,W,z){An(M);const q=re.list();return q.length?q.forEach(oe=>oe(M,W,z)):console.error(M),Promise.reject(M)}function yt(){return He&&l.value!==Hn?Promise.resolve():new Promise((M,W)=>{Ce.add([M,W])})}function An(M){return He||(He=!M,ce(),Ce.list().forEach(([W,z])=>M?z(M):W()),Ce.reset()),M}function st(M,W,z,q){const{scrollBehavior:oe}=n;if(!oo||!oe)return Promise.resolve();const _e=!z&&JA(Bg(M.fullPath,0))||(q||!z)&&history.state&&history.state.scroll||null;return xs().then(()=>oe(M,W,_e)).then(_=>_&&KA(_)).catch(_=>vt(_,M,W))}const hi=M=>s.go(M);let F;const ne=new Set,Me={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:b,getRoutes:g,resolve:p,options:n,push:C,replace:T,go:hi,back:()=>hi(-1),forward:()=>hi(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:re.add,isReady:yt,install(M){const W=this;M.component("RouterLink",vI),M.component("RouterView",Z_),M.config.globalProperties.$router=W,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>Te(l)}),oo&&!F&&l.value===Hn&&(F=!0,C(s.location).catch(oe=>{}));const z={};for(const oe in Hn)Object.defineProperty(z,oe,{get:()=>l.value[oe],enumerable:!0});M.provide(qc,W),M.provide(Ff,Fc(z)),M.provide(eh,l);const q=M.unmount;ne.add(M),M.unmount=function(){ne.delete(M),ne.size<1&&(c=Hn,K&&K(),K=null,l.value=Hn,F=!1,He=!1),q()}}};function We(M){return M.reduce((W,z)=>W.then(()=>N(z)),Promise.resolve())}return Me}function TI(n,e){const t=[],i=[],s=[],o=Math.max(e.matched.length,n.matched.length);for(let r=0;r<o;r++){const a=e.matched[r];a&&(n.matched.find(c=>To(c,a))?i.push(a):t.push(a));const l=n.matched[r];l&&(e.matched.find(c=>To(c,l))||s.push(l))}return[t,i,s]}function SI(){return Bt(qc)}function J_(){return Bt(Ff)}const AI=(n,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var i;return((i=n.params[t.slice(1)])==null?void 0:i.toString())||""}),th=(n,e)=>{const t=n.route.matched.find(s=>{var o;return((o=s.components)==null?void 0:o.default)===n.Component.type}),i=e??(t==null?void 0:t.meta.key)??(t&&AI(n.route,t));return typeof i=="function"?i(n.route):i},II=(n,e)=>({default:()=>n?pt(hT,n===!0?{}:n,e):e});function zf(n){return Array.isArray(n)?n:[n]}const Du=null,Ft={layout:"account"},zt={layout:"account"},Ht={layout:"account"},$t={layout:"authentication"},Ut={layout:"account"},Wt={layout:"account"},jt={layout:"account"},qt={layout:"authentication"},Gt={layout:"authentication"},Kt={layout:"account"},Zt={layout:"account"},Jt={layout:"admin"},Xt={layout:"admin"},Yt={layout:"admin"},Qt={layout:"admin"},Fu=null,en={layout:"content"},tn={layout:"content"},zu=null,nn={layout:"content"},Hu=null,sn={layout:"content"},on={layout:"empty"},rn={layout:"content"},$u=null,Uu=null,Wu=null,ju=null,qu=null,Gu=null,an={layout:"content"},ln={layout:"content"},Ku=null,cn={layout:"authentication"},un={layout:"empty"},Zu=null,PI={},Jg=[{name:"about-us___en",path:"/about-us",meta:{},alias:[],redirect:Du==null?void 0:Du.redirect,component:()=>A(()=>import("./Cv836rA9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:(Ft==null?void 0:Ft.name)??"account-billing___en",path:(Ft==null?void 0:Ft.path)??"/account/billing",meta:Ft||{},alias:(Ft==null?void 0:Ft.alias)||[],redirect:Ft==null?void 0:Ft.redirect,component:()=>A(()=>import("./CXjXZJXh.js"),__vite__mapDeps([26,27,3,4,2,28,29,30,31,32,33,34,35]),import.meta.url).then(n=>n.default||n)},{name:(zt==null?void 0:zt.name)??"account-collaborators___en",path:(zt==null?void 0:zt.path)??"/account/collaborators",meta:zt||{},alias:(zt==null?void 0:zt.alias)||[],redirect:zt==null?void 0:zt.redirect,component:()=>A(()=>import("./N8viiTji.js"),__vite__mapDeps([36,30,3,4,37,38,39,40,41,42,31,32,33,43,44]),import.meta.url).then(n=>n.default||n)},{name:(Ht==null?void 0:Ht.name)??"account-domains___en",path:(Ht==null?void 0:Ht.path)??"/account/domains",meta:Ht||{},alias:(Ht==null?void 0:Ht.alias)||[],redirect:Ht==null?void 0:Ht.redirect,component:()=>A(()=>import("./D5HE1sKA.js"),__vite__mapDeps([45,46,3,4,30,28,29,2,47,31,32,33,48,37,27,34,49]),import.meta.url).then(n=>n.default||n)},{name:($t==null?void 0:$t.name)??"account-email-confirm___en",path:($t==null?void 0:$t.path)??"/account/email-confirm",meta:$t||{},alias:($t==null?void 0:$t.alias)||[],redirect:$t==null?void 0:$t.redirect,component:()=>A(()=>import("./TA9FRXwv.js"),__vite__mapDeps([50,2,3,4]),import.meta.url).then(n=>n.default||n)},{name:(Ut==null?void 0:Ut.name)??"account-email___en",path:(Ut==null?void 0:Ut.path)??"/account/email",meta:Ut||{},alias:(Ut==null?void 0:Ut.alias)||[],redirect:Ut==null?void 0:Ut.redirect,component:()=>A(()=>import("./xQvg8WOF.js"),__vite__mapDeps([51,42,3,4,28,29,27,52,2,30,53,39,40,41,54,55,56,32,57,58]),import.meta.url).then(n=>n.default||n)},{name:(Wt==null?void 0:Wt.name)??"account___en",path:(Wt==null?void 0:Wt.path)??"/account",meta:Wt||{},alias:(Wt==null?void 0:Wt.alias)||[],redirect:Wt==null?void 0:Wt.redirect,component:()=>A(()=>import("./DhbgLcV4.js"),__vite__mapDeps([59,60,3,4,61,62]),import.meta.url).then(n=>n.default||n)},{name:(jt==null?void 0:jt.name)??"account-leads___en",path:(jt==null?void 0:jt.path)??"/account/leads",meta:jt||{},alias:(jt==null?void 0:jt.alias)||[],redirect:jt==null?void 0:jt.redirect,component:()=>A(()=>import("./mzf1HxSp.js"),__vite__mapDeps([63,31,32,3,4,33,64]),import.meta.url).then(n=>n.default||n)},{name:(qt==null?void 0:qt.name)??"account-login___en",path:(qt==null?void 0:qt.path)??"/account/login",meta:qt||{},alias:(qt==null?void 0:qt.alias)||[],redirect:qt==null?void 0:qt.redirect,component:()=>A(()=>import("./DETi3Xix.js"),__vite__mapDeps([65,66,28,3,4,29,42,31,32,33,67,68,69]),import.meta.url).then(n=>n.default||n)},{name:(Gt==null?void 0:Gt.name)??"account-register___en",path:(Gt==null?void 0:Gt.path)??"/account/register",meta:Gt||{},alias:(Gt==null?void 0:Gt.alias)||[],redirect:Gt==null?void 0:Gt.redirect,component:()=>A(()=>import("./DRSnnXN5.js"),__vite__mapDeps([70,46,3,4,42,67,71]),import.meta.url).then(n=>n.default||n)},{name:(Kt==null?void 0:Kt.name)??"account-sites___en",path:(Kt==null?void 0:Kt.path)??"/account/sites",meta:Kt||{},alias:(Kt==null?void 0:Kt.alias)||[],redirect:Kt==null?void 0:Kt.redirect,component:()=>A(()=>import("./D8dsxTVB.js"),__vite__mapDeps([72,42,3,4,37,60,52,2,73,74,27,28,29,31,32,33,75,46,76]),import.meta.url).then(n=>n.default||n)},{name:(Zt==null?void 0:Zt.name)??"account-support___en",path:(Zt==null?void 0:Zt.path)??"/account/support",meta:Zt||{},alias:(Zt==null?void 0:Zt.alias)||[],redirect:Zt==null?void 0:Zt.redirect,component:()=>A(()=>import("./BGxlk8V0.js"),__vite__mapDeps([77,28,3,4,29,2,27,32,78]),import.meta.url).then(n=>n.default||n)},{name:(Jt==null?void 0:Jt.name)??"admin-image-review___en",path:(Jt==null?void 0:Jt.path)??"/admin/image-review",meta:Jt||{},alias:(Jt==null?void 0:Jt.alias)||[],redirect:Jt==null?void 0:Jt.redirect,component:()=>A(()=>import("./DrGPCe4B.js"),__vite__mapDeps([79,80,81,3,4,82,83,42,84,85,86,87,88,89,90,91,92,93,94,95,57,31,32,33,96]),import.meta.url).then(n=>n.default||n)},{name:(Xt==null?void 0:Xt.name)??"admin___en",path:(Xt==null?void 0:Xt.path)??"/admin",meta:Xt||{},alias:(Xt==null?void 0:Xt.alias)||[],redirect:Xt==null?void 0:Xt.redirect,component:()=>A(()=>import("./sQcsWnm6.js"),__vite__mapDeps([97,3,4,98]),import.meta.url).then(n=>n.default||n)},{name:(Yt==null?void 0:Yt.name)??"admin-user-detail___en",path:(Yt==null?void 0:Yt.path)??"/admin/user-detail",meta:Yt||{},alias:(Yt==null?void 0:Yt.alias)||[],redirect:Yt==null?void 0:Yt.redirect,component:()=>A(()=>import("./DRRyDfJJ.js"),__vite__mapDeps([99,2,3,4,31,32,33,37,100]),import.meta.url).then(n=>n.default||n)},{name:(Qt==null?void 0:Qt.name)??"admin-user-report___en",path:(Qt==null?void 0:Qt.path)??"/admin/user-report",meta:Qt||{},alias:(Qt==null?void 0:Qt.alias)||[],redirect:Qt==null?void 0:Qt.redirect,component:()=>A(()=>import("./DcJJVI5W.js"),__vite__mapDeps([101,102,3,4,103,56,2,31,32,33,104]),import.meta.url).then(n=>n.default||n)},{name:"become-an-affiliate___en",path:"/become-an-affiliate",meta:{},alias:[],redirect:Fu==null?void 0:Fu.redirect,component:()=>A(()=>import("./B5ohxQmr.js"),__vite__mapDeps([105,1,2,3,4,5,6,7,106,81,107,108,109,110,111,8,9,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:(en==null?void 0:en.name)??"blog-slug___en",path:(en==null?void 0:en.path)??"/blog/:slug()",meta:en||{},alias:(en==null?void 0:en.alias)||[],redirect:en==null?void 0:en.redirect,component:()=>A(()=>import("./Dhkql4oG.js"),__vite__mapDeps([112,75,3,4,2,15,16,17,18,19,20,21,22,23,24,25,113]),import.meta.url).then(n=>n.default||n)},{name:(tn==null?void 0:tn.name)??"blog___en",path:(tn==null?void 0:tn.path)??"/blog",meta:tn||{},alias:(tn==null?void 0:tn.alias)||[],redirect:tn==null?void 0:tn.redirect,component:()=>A(()=>import("./DCgAqQCU.js"),__vite__mapDeps([114,1,2,3,4,5,115,116,15,16,17,18,19,20,21,22,23,24,25,117]),import.meta.url).then(n=>n.default||n)},{name:"cart-uid___en",path:"/cart/:uid()",meta:{},alias:[],redirect:zu==null?void 0:zu.redirect,component:()=>A(()=>import("./B1a3usHu.js"),__vite__mapDeps([118,46,3,4,119,53,39,40,2,42,28,29,120]),import.meta.url).then(n=>n.default||n)},{name:(nn==null?void 0:nn.name)??"contact-us___en",path:(nn==null?void 0:nn.path)??"/contact-us",meta:nn||{},alias:(nn==null?void 0:nn.alias)||[],redirect:nn==null?void 0:nn.redirect,component:()=>A(()=>import("./yTBXuCZ6.js"),__vite__mapDeps([121,122,2,3,4,28,29,42,32,123,15,16,17,18,19,20,21,22,23,24,25,124]),import.meta.url).then(n=>n.default||n)},{name:"design-crowd___en",path:"/design-crowd",meta:{},alias:[],redirect:Hu==null?void 0:Hu.redirect,component:()=>A(()=>import("./CoQFa8qQ.js"),__vite__mapDeps([125,1,2,3,4,5,6,7,126,39,40,54,55,41,127,27,128,53,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:(sn==null?void 0:sn.name)??"docs-connect-domain-using-godaddy___en",path:(sn==null?void 0:sn.path)??"/docs/connect-domain-using-godaddy",meta:sn||{},alias:(sn==null?void 0:sn.alias)||[],redirect:sn==null?void 0:sn.redirect,component:()=>A(()=>import("./BNVJH_bj.js"),__vite__mapDeps([129,3,4]),import.meta.url).then(n=>n.default||n)},{name:(on==null?void 0:on.name)??"edit-siteId-path___en",path:(on==null?void 0:on.path)??"/edit/:siteId()/:path()",meta:on||{},alias:(on==null?void 0:on.alias)||[],redirect:on==null?void 0:on.redirect,component:()=>A(()=>import("./Bf3yjcGW.js"),__vite__mapDeps([130,2,3,4,131,52,132,133,134,82,83,42,84,135,73,61,136,137,122,28,29,32,123,31,33,138,75,139,80,81,85,30,140,141,142,143,27,144,74,145,34,48,146,53,39,40,127,55,41,128,38,147,115,116,148,149,150,151,152,153,154,155,54,126,156,157,158,159,37,13,160,161,46,162,163,164,57,165,43,166]),import.meta.url).then(n=>n.default||n)},{name:(rn==null?void 0:rn.name)??"faq___en",path:(rn==null?void 0:rn.path)??"/faq",meta:rn||{},alias:(rn==null?void 0:rn.alias)||[],redirect:rn==null?void 0:rn.redirect,component:()=>A(()=>import("./B81Sc6TJ.js"),__vite__mapDeps([167,15,2,3,4,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:"get-started___en",path:"/get-started",meta:{},alias:[],redirect:$u==null?void 0:$u.redirect,component:()=>A(()=>import("./B-DcqH2Q.js"),__vite__mapDeps([168,1,2,3,4,5,6,7,8,9,110,111,15,16,17,18,19,20,21,22,23,24,25,169]),import.meta.url).then(n=>n.default||n)},{name:"index___en",path:"/",meta:{},alias:[],redirect:Uu==null?void 0:Uu.redirect,component:()=>A(()=>import("./CBu1wBpR.js"),__vite__mapDeps([170,1,2,3,4,5,106,81,107,110,111,108,109,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:"learn-more-about-ai___en",path:"/learn-more-about-ai",meta:{},alias:[],redirect:Wu==null?void 0:Wu.redirect,component:()=>A(()=>import("./DNHr9Bka.js"),__vite__mapDeps([171,1,2,3,4,5,6,7,106,81,107,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:"make-money-using-sitesgpt___en",path:"/make-money-using-sitesgpt",meta:{},alias:[],redirect:ju==null?void 0:ju.redirect,component:()=>A(()=>import("./CqPiUm8J.js"),__vite__mapDeps([172,1,2,3,4,5,6,7,106,81,107,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:"pay-uid___en",path:"/pay/:uid()",meta:{},alias:[],redirect:qu==null?void 0:qu.redirect,component:()=>A(()=>import("./BfPLd6S_.js"),__vite__mapDeps([173,2,3,4,174]),import.meta.url).then(n=>n.default||n)},{name:"pricing___en",path:"/pricing",meta:{},alias:[],redirect:Gu==null?void 0:Gu.redirect,component:()=>A(()=>import("./BcIOkMnQ.js"),__vite__mapDeps([175,1,2,3,4,5,106,81,107,110,111,108,109,15,16,17,18,19,20,21,22,23,24,25,176]),import.meta.url).then(n=>n.default||n)},{name:(an==null?void 0:an.name)??"privacy-policy___en",path:(an==null?void 0:an.path)??"/privacy-policy",meta:an||{},alias:(an==null?void 0:an.alias)||[],redirect:an==null?void 0:an.redirect,component:()=>A(()=>import("./CXAxAV_B.js"),__vite__mapDeps([177,15,2,3,4,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:(ln==null?void 0:ln.name)??"terms-and-conditions___en",path:(ln==null?void 0:ln.path)??"/terms-and-conditions",meta:ln||{},alias:(ln==null?void 0:ln.alias)||[],redirect:ln==null?void 0:ln.redirect,component:()=>A(()=>import("./NygPNNYU.js"),__vite__mapDeps([178,15,2,3,4,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:"the-history-of-ai___en",path:"/the-history-of-ai",meta:{},alias:[],redirect:Ku==null?void 0:Ku.redirect,component:()=>A(()=>import("./Bl6lQ16O.js"),__vite__mapDeps([179,1,2,3,4,5,6,7,106,81,107,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(n=>n.default||n)},{name:(cn==null?void 0:cn.name)??"user-password-reset-resetId___en",path:(cn==null?void 0:cn.path)??"/user/password-reset/:resetId()",meta:cn||{},alias:(cn==null?void 0:cn.alias)||[],redirect:cn==null?void 0:cn.redirect,component:()=>A(()=>import("./B73rYD8-.js"),__vite__mapDeps([180,42,3,4,181]),import.meta.url).then(n=>n.default||n)},{name:(un==null?void 0:un.name)??"wizard___en",path:(un==null?void 0:un.path)??"/wizard",meta:un||{},alias:(un==null?void 0:un.alias)||[],redirect:un==null?void 0:un.redirect,component:()=>A(()=>import("./B2gB66Yh.js"),__vite__mapDeps([182,183,16,3,4,2,184,31,32,33,13,185,75,95,145,34,48,42,146,53,39,40,127,55,41,27,128,38,83,147,115,116,28,29,82,84,148,160,161,136,137,122,123,138,66,67,68,57,186]),import.meta.url).then(n=>n.default||n)},{name:void 0,path:"/sitemap.xml",meta:{},alias:[],redirect:Zu==null?void 0:Zu.redirect,component:PI}],X_=(n,e,t)=>(e=e===!0?{}:e,{default:()=>{var i;return e?pt(n,e,t):(i=t.default)==null?void 0:i.call(t)}});function Xg(n){const e=(n==null?void 0:n.meta.key)??n.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var i;return((i=n.params[t.slice(1)])==null?void 0:i.toString())||""});return typeof e=="function"?e(n):e}function xI(n,e){return n===e||e===Hn?!1:Xg(n)!==Xg(e)?!0:!n.matched.every((i,s)=>{var o,r;return i.components&&i.components.default===((r=(o=e.matched[s])==null?void 0:o.components)==null?void 0:r.default)})}function $ne(n,e=!1){if(n){if(n.nodeName==="#comment"&&n.nodeValue==="[")return Y_(n,[],e);if(e){const t=n.cloneNode(!0);return t.querySelectorAll("[data-island-slot]").forEach(i=>{i.innerHTML=""}),[t.outerHTML]}return[n.outerHTML]}return null}function Y_(n,e=[],t=!1){if(n&&n.nodeName){if(LI(n))return e;if(!RI(n)){const i=n.cloneNode(!0);t&&i.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),e.push(i.outerHTML)}Y_(n.nextSibling,e,t)}return e}function RI(n){return n.nodeName==="#comment"&&n.nodeValue==="["}function LI(n){return n.nodeName==="#comment"&&n.nodeValue==="]"}const VI={scrollBehavior(n,e,t){var c;const i=xe(),s=((c=Nn().options)==null?void 0:c.scrollBehaviorType)??"auto";let o=t||void 0;const r=typeof n.meta.scrollToTop=="function"?n.meta.scrollToTop(n,e):n.meta.scrollToTop;if(!o&&e&&n&&r!==!1&&xI(n,e)&&(o={left:0,top:0}),n.path===e.path)return e.hash&&!n.hash?{left:0,top:0}:n.hash?{el:n.hash,top:Yg(n.hash),behavior:s}:!1;const a=u=>!!(u.meta.pageTransition??Xd),l=a(e)&&a(n)?"page:transition:finish":"page:finish";return new Promise(u=>{i.hooks.hookOnce(l,async()=>{await new Promise(d=>setTimeout(d,0)),n.hash&&(o={el:n.hash,top:Yg(n.hash),behavior:s}),u(o)})})}};function Yg(n){try{const e=document.querySelector(n);if(e)return parseFloat(getComputedStyle(e).scrollMarginTop)}catch{}return 0}const OI={hashMode:!1,scrollBehaviorType:"auto"},dn={...OI,...VI},MI=async n=>{var l;let e,t;if(!((l=n.meta)!=null&&l.validate))return;const i=xe(),s=Nn();if(([e,t]=Gn(()=>Promise.resolve(n.meta.validate(n))),e=await e,t(),e)===!0)return;const r=xa({statusCode:404,statusMessage:`Page Not Found: ${n.fullPath}`,data:{path:n.fullPath}}),a=s.beforeResolve(c=>{if(a(),c===n){const u=s.afterEach(async()=>{u(),await i.runWithContext(()=>go(r)),window.history.pushState({},"",n.fullPath)});return!1}})},Qg=globalThis.requestIdleCallback||(n=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{n(t)},1)}),Une=globalThis.cancelIdleCallback||(n=>{clearTimeout(n)}),Q_=n=>{const e=xe();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Qg(n)}):Qg(n)},BI=n=>n==="defer"||n===!1;function NI(...n){var m;const e=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(e);let[t,i,s={}]=n;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const o=xe(),r=i,a=()=>null,l=()=>o.isHydrating?o.payload.data[t]:o.static.data[t];s.server=s.server??!0,s.default=s.default??a,s.getCachedData=s.getCachedData??l,s.lazy=s.lazy??!1,s.immediate=s.immediate??!0,s.deep=s.deep??hA.deep,s.dedupe=s.dedupe??"cancel";const c=()=>s.getCachedData(t,o)!=null;if(!o._asyncData[t]||!s.immediate){(m=o.payload._errors)[t]??(m[t]=null);const g=s.deep?Fe:ji;o._asyncData[t]={data:g(s.getCachedData(t,o)??s.default()),pending:Fe(!c()),error:Dc(o.payload._errors,t),status:Fe("idle")}}const u={...o._asyncData[t]};u.refresh=u.execute=(g={})=>{if(o._asyncDataPromises[t]){if(BI(g.dedupe??s.dedupe))return o._asyncDataPromises[t];o._asyncDataPromises[t].cancelled=!0}if((g._initial||o.isHydrating&&g._initial!==!1)&&c())return Promise.resolve(s.getCachedData(t,o));u.pending.value=!0,u.status.value="pending";const b=new Promise((p,w)=>{try{p(r(o))}catch(E){w(E)}}).then(async p=>{if(b.cancelled)return o._asyncDataPromises[t];let w=p;s.transform&&(w=await s.transform(p)),s.pick&&(w=FI(w,s.pick)),o.payload.data[t]=w,u.data.value=w,u.error.value=null,u.status.value="success"}).catch(p=>{if(b.cancelled)return o._asyncDataPromises[t];u.error.value=xa(p),u.data.value=Te(s.default()),u.status.value="error"}).finally(()=>{b.cancelled||(u.pending.value=!1,delete o._asyncDataPromises[t])});return o._asyncDataPromises[t]=b,o._asyncDataPromises[t]},u.clear=()=>DI(o,t);const d=()=>u.refresh({_initial:!0}),h=s.server!==!1&&o.payload.serverRendered;{const g=Wo();if(g&&!g._nuxtOnBeforeMountCbs){g._nuxtOnBeforeMountCbs=[];const w=g._nuxtOnBeforeMountCbs;fT(()=>{w.forEach(E=>{E()}),w.splice(0,w.length)}),s_(()=>w.splice(0,w.length))}h&&o.isHydrating&&(u.error.value||c())?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):g&&(o.payload.serverRendered&&o.isHydrating||s.lazy)&&s.immediate?g._nuxtOnBeforeMountCbs.push(d):s.immediate&&d();const b=Sa();if(s.watch){const w=yn(s.watch,()=>u.refresh());b&&Eo(w)}const p=o.hook("app:data:refresh",async w=>{(!w||w.includes(t))&&await u.refresh()});b&&Eo(p)}const f=Promise.resolve(o._asyncDataPromises[t]).then(()=>u);return Object.assign(f,u),f}function DI(n,e){e in n.payload.data&&(n.payload.data[e]=void 0),e in n.payload._errors&&(n.payload._errors[e]=null),n._asyncData[e]&&(n._asyncData[e].data.value=void 0,n._asyncData[e].error.value=null,n._asyncData[e].pending.value=!1,n._asyncData[e].status.value="idle"),e in n._asyncDataPromises&&(n._asyncDataPromises[e].cancelled=!0,n._asyncDataPromises[e]=void 0)}function FI(n,e){const t={};for(const i of e)t[i]=n[i];return t}const zI="$s";function Gc(...n){const e=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(e);const[t,i]=n;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(i!==void 0&&typeof i!="function")throw new Error("[nuxt] [useState] init must be a function: "+i);const s=zI+t,o=xe(),r=Dc(o.payload.state,s);if(r.value===void 0&&i){const a=i();if(ui(a))return o.payload.state[s]=a,a;r.value=a}return r}function HI(n,e,t){const[i={},s]=typeof e=="string"?[{},e]:[e,t],o=be(()=>ps(n)),r=i.key||sS([s,typeof o.value=="string"?o.value:"",...$I(i)]);if(!r||typeof r!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+r);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const a=r===s?"$f"+r:r;if(!i.baseURL&&typeof o.value=="string"&&o.value[0]==="/"&&o.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:u,transform:d,pick:h,watch:f,immediate:m,getCachedData:g,deep:b,dedupe:p,...w}=i,E=Qi({...fA,...w,cache:typeof i.cache=="boolean"?void 0:i.cache}),C={server:l,lazy:c,default:u,transform:d,pick:h,immediate:m,getCachedData:g,deep:b,dedupe:p,watch:f===!1?[]:[E,o,...f||[]]};let T;return NI(a,()=>{var N;(N=T==null?void 0:T.abort)==null||N.call(T),T=typeof AbortController<"u"?new AbortController:{};const S=ps(i.timeout);return S&&setTimeout(()=>T.abort(),S),(i.$fetch||globalThis.$fetch)(o.value,{signal:T.signal,...E})},C)}function $I(n){var t;const e=[((t=ps(n.method))==null?void 0:t.toUpperCase())||"GET",ps(n.baseURL)];for(const i of[n.params||n.query]){const s=ps(i);if(!s)continue;const o={};for(const[r,a]of Object.entries(s))o[ps(r)]=ps(a);e.push(o)}return e}const UI={path:"/",watch:!0,decode:n=>Zr(decodeURIComponent(n)),encode:n=>encodeURIComponent(typeof n=="string"?n:JSON.stringify(n))},WI=void 0;function jI(n,e){var l;const t={...UI,...e},i=ep(t)||{};let s;t.maxAge!==void 0?s=t.maxAge*1e3:t.expires&&(s=t.expires.getTime()-Date.now());const o=s!==void 0&&s<=0,r=ii(o?void 0:i[n]??((l=t.default)==null?void 0:l.call(t))),a=s&&!o?KI(r,s,t.watch&&t.watch!=="shallow"):Fe(r);{let c=null;try{!WI&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${n}`))}catch{}const u=()=>{t.readonly||oS(a.value,i[n])||(GI(n,a.value,t),i[n]=ii(a.value),c==null||c.postMessage({value:t.encode(a.value)}))},d=f=>{var g;const m=f.refresh?(g=ep(t))==null?void 0:g[n]:t.decode(f.value);h=!0,i[n]=a.value=m,xs(()=>{h=!1})};let h=!1;Sa()&&Eo(()=>{h=!0,u(),c==null||c.close()}),c&&(c.onmessage=({data:f})=>d(f)),t.watch?yn(a,()=>{h||u()},{deep:t.watch!=="shallow"}):u()}return a}function ep(n={}){return D5(document.cookie,n)}function qI(n,e,t={}){return e==null?wg(n,e,{...t,maxAge:-1}):wg(n,e,t)}function GI(n,e,t={}){document.cookie=qI(n,e,t)}const tp=2147483647;function KI(n,e,t){let i,s,o=0;const r=t?Fe(n):{value:n};return Sa()&&Eo(()=>{s==null||s(),clearTimeout(i)}),mT((a,l)=>{t&&(s=yn(r,l));function c(){clearTimeout(i);const u=e-o,d=u<tp?u:tp;i=setTimeout(()=>{if(o+=d,o<e)return c();r.value=void 0,l()},d)}return{get(){return a(),r.value},set(u){c(),r.value=u,l()}}})}function ZI(n={}){const e=n.path||window.location.pathname;let t={};try{t=Zr(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(n.force||(t==null?void 0:t.path)!==e||(t==null?void 0:t.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(n.ttl??1e4)}))}catch{}if(n.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:xe().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const JI=!1,XI=!0;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let ev;const Ra=n=>ev=n,tv=Symbol();function np(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Or;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Or||(Or={}));function YI(){const n=Ta(!0),e=n.run(()=>Fe({}));let t=[],i=[];const s=o_({install(o){Ra(s),s._a=o,o.provide(tv,s),o.config.globalProperties.$pinia=s,i.forEach(r=>t.push(r)),i=[]},use(o){return!this._a&&!JI?i.push(o):t.push(o),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return s}const QI=()=>{};function ip(n,e,t,i=QI){n.push(e);const s=()=>{const o=n.indexOf(e);o>-1&&(n.splice(o,1),i())};return!t&&Sa()&&Eo(s),s}function Ks(n,...e){n.slice().forEach(t=>{t(...e)})}const eP=n=>n();function nv(n,e){n instanceof Map&&e instanceof Map&&e.forEach((t,i)=>n.set(i,t)),n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],s=n[t];np(s)&&np(i)&&n.hasOwnProperty(t)&&!ui(i)&&!Sf(i)?n[t]=nv(s,i):n[t]=i}return n}const{assign:Ni}=Object;function tP(n){return!!(ui(n)&&n.effect)}function nP(n,e,t,i){const{state:s,actions:o,getters:r}=e,a=t.state.value[n];let l;function c(){a||(t.state.value[n]=s?s():{});const u=gT(t.state.value[n]);return Ni(u,o,Object.keys(r||{}).reduce((d,h)=>(d[h]=o_(be(()=>{Ra(t);const f=t._s.get(n);return r[h].call(f,f)})),d),{}))}return l=iP(n,c,e,t,i,!0),l}function iP(n,e,t={},i,s,o){let r;const a=Ni({actions:{}},t),l={deep:!0};let c,u,d=[],h=[],f;const m=i.state.value[n];Fe({});let g;function b(x){let N;c=u=!1,typeof x=="function"?(x(i.state.value[n]),N={type:Or.patchFunction,storeId:n,events:f}):(nv(i.state.value[n],x),N={type:Or.patchObject,payload:x,storeId:n,events:f});const Y=g=Symbol();xs().then(()=>{g===Y&&(c=!0)}),u=!0,Ks(d,N,i.state.value[n])}const p=function(){const{state:N}=t,Y=N?N():{};this.$patch(le=>{Ni(le,Y)})};function w(){r.stop(),d=[],h=[],i._s.delete(n)}function E(x,N){return function(){Ra(i);const Y=Array.from(arguments),le=[],V=[];function K(re){le.push(re)}function ce(re){V.push(re)}Ks(h,{args:Y,name:x,store:T,after:K,onError:ce});let Ce;try{Ce=N.apply(this&&this.$id===n?this:T,Y)}catch(re){throw Ks(V,re),re}return Ce instanceof Promise?Ce.then(re=>(Ks(le,re),re)).catch(re=>(Ks(V,re),Promise.reject(re))):(Ks(le,Ce),Ce)}}const C={_p:i,$id:n,$onAction:ip.bind(null,h),$patch:b,$reset:p,$subscribe(x,N={}){const Y=ip(d,x,N.detached,()=>le()),le=r.run(()=>yn(()=>i.state.value[n],V=>{(N.flush==="sync"?u:c)&&x({storeId:n,type:Or.direct,events:f},V)},Ni({},l,N)));return Y},$dispose:w},T=Qi(C);i._s.set(n,T);const k=i._a&&i._a.runWithContext||eP,S=i._e.run(()=>(r=Ta(),k(()=>r.run(e))));for(const x in S){const N=S[x];if(!(ui(N)&&!tP(N)||Sf(N))){if(typeof N=="function"){const Y=E(x,N);S[x]=Y,a.actions[x]=N}}}return Ni(T,S),Ni(r_(T),S),Object.defineProperty(T,"$state",{get:()=>i.state.value[n],set:x=>{b(N=>{Ni(N,x)})}}),i._p.forEach(x=>{Ni(T,r.run(()=>x({store:T,app:i._a,pinia:i,options:a})))}),m&&o&&t.hydrate&&t.hydrate(T.$state,m),c=!0,u=!0,T}function iv(n,e,t){let i,s;typeof n=="string"?(i=n,s=e):(s=n,i=n.id);function o(r,a){const l=Tf();return r=r||(l?Bt(tv,null):null),r&&Ra(r),r=ev,r._s.has(i)||nP(i,s,r),r._s.get(i)}return o.$id=i,o}function Wne(n){{n=r_(n);const e={};for(const t in n){const i=n[t];(ui(i)||Sf(i))&&(e[t]=Dc(n,t))}return e}}function sP(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function jne(n){if(!n)return null;if(typeof n!="string")throw new Error("Input must be a string");return n.trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").toLowerCase()}function qne(n){try{return btoa(atob(n))==n}catch{return!1}}function Gne(n){if(!n)return null;if(typeof n!="string")throw new Error("Input must be a string");return n.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function Kne(n,e,t){let i=null;return function(...o){function r(){i=null,n.apply(this,o)}window.clearTimeout(i),i=window.setTimeout(r,e)}}function Zne(n,e){if(!n.filename||!n.source||!e.width&&!e.height)return n;if(n.source==="pexels"){let t=n.filename;const i=[];return e.crop&&i.push("fit=crop"),e.width&&i.push(`w=${e.width}`),e.height&&i.push(`h=${e.height}`),i.length>0&&(t+=`?${i.join("&")}`),t}if(n.source==="sitesgpt"){const t=n.filename,i=t.lastIndexOf("/");let s=t.substring(0,i),o=t.substring(i+1);o=encodeURIComponent(o);const r=e.width??e.height,a=e.height??e.width;return e.crop||(s+="/fit-in"),s+=`/${r}x${a}`,`${s}/${o}`}if(n.source==="cloudinary"||n.source==="stock"){const t=e.width??e.height,i=e.height??e.width,s=n.crop??e.crop;if(!t&&!i)return n.filename;const o=n.filename.split("/upload/");let r=`${o[0]}/upload/`;const a=o[1];return s==="crop"||s===!0?(r+="c_fill",n.gravity?r+=`,g_${n.gravity}`:r+=",g_auto"):r+="c_limit",t&&(r+=`,w_${t}`),i&&(r+=`,h_${i}`),`${r}/${a}`}return n.filename}function Jne(n){let e=n;return e?(typeof e=="string"&&(e=e.split(",")),e=Array.isArray(e)?e.map(t=>Number(t)):[e],e):[]}const sv=iv({id:"message-store",state:()=>({messages:[]}),actions:{add(n,e="notice",t=!0,i=5e3){const s=sP();this.messages.push({id:s,message:n,type:e}),t&&setTimeout(()=>{this.remove(s)},i)},remove(n){const e=this.messages.findIndex(t=>t.id===n);e<0||this.messages.splice(e,1)},clearAll(){this.messages=[]}}}),oP=n=>{sv().clearAll()},Xne=iv({id:"user-store",state:()=>({user:{}}),actions:{updateUser(n){this.user=n}},getters:{isLoggedIn:n=>n!=null&&n.user?!!Object.keys(n.user).length:!1}}),rP=async()=>{},aP=async n=>{let e,t;const i=Aa(),s=jI("token");let o;if(i.public.sitesGptGeneric==="false"?o=([e,t]=Gn(()=>cP(s,n)),e=await e,t(),e):o=([e,t]=Gn(()=>lP(s,n)),e=await e,t(),e),o)return S_(o)};async function lP(n,e){const t=["/account/register","/account/login"];return n.value?!t.includes(e.path)&&(e.path.includes("/account")&&e.path!=="/account/domains"&&e.path!=="/account/billing"&&e.path!=="/account/collaborators"&&e.path!=="/account/support"||e.path.includes("/user")||e.path.includes("/edit"))?!1:"/account/sites":t.includes(e.path)?!1:"/account/login"}async function cP(n,e){const t=["/account/register","/account/login"],i=["/","/account/register","/account/login","/account/email-confirm","/wizard","/about-us","/learn-more-about-ai","/become-an-affiliate","/make-money-using-sitesgpt","/the-history-of-ai","/pricing","/terms-and-conditions","/faq","/privacy-policy","/contact-us","/get-started","/blog"];if(n.value&&t.includes(e.path))return"/account/sites";if(e.path.includes("/admin"))return await uP(n.value)?!1:"/";if(i.includes(e.path)||n.value||e.path.includes("/blog")||e.path.includes("/edit")||e.path.includes("/user/password-reset"))return;let s="/account/register";return e.path.includes("/cart")&&(s="/account/login"),e&&(Object.keys(e.query),s+="?",s+=`redirect=${btoa(e.fullPath)}`),s}async function uP(n){const{data:e}=await HI("/api/user/has-admin",{method:"POST",body:{token:n}},"$eELHlIYMBh");return!!e.value.hasAdmin}const dP=async n=>{let e,t;const i=([e,t]=Gn(()=>Nf(n.path)),e=await e,t(),e);if(i.redirect)return es(i.redirect,{acceptRelative:!0})?(window.location.href=i.redirect,!1):i.redirect},hP=[MI,oP,rP,aP,dP],Mr={};function fP(n,e,t){const{pathname:i,search:s,hash:o}=e,r=n.indexOf("#");if(r>-1){const c=o.includes(n.slice(r))?n.slice(r).length:1;let u=o.slice(c);return u[0]!=="/"&&(u="/"+u),fg(u,"")}const a=fg(i,n),l=!t||h_(a,t,{trailingSlash:!0})?a:t;return l+(l.includes("?")?"":s)+o}const mP=rt({name:"nuxt:router",enforce:"pre",async setup(n){var b,p;let e,t,i=Aa().app.baseURL;dn.hashMode&&!i.includes("#")&&(i+="#");const s=((b=dn.history)==null?void 0:b.call(dn,i))??(dn.hashMode?eI(i):j_(i)),o=((p=dn.routes)==null?void 0:p.call(dn,Jg))??Jg;let r;const a=EI({...dn,scrollBehavior:(w,E,C)=>{if(E===Hn){r=C;return}if(dn.scrollBehavior){if(a.options.scrollBehavior=dn.scrollBehavior,"scrollRestoration"in window.history){const T=a.beforeEach(()=>{T(),window.history.scrollRestoration="manual"})}return dn.scrollBehavior(w,Hn,r||C)}},history:s,routes:o});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),n.vueApp.use(a);const l=ji(a.currentRoute.value);a.afterEach((w,E)=>{l.value=E}),Object.defineProperty(n.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const c=fP(i,window.location,n.payload.path),u=ji(a.currentRoute.value),d=()=>{u.value=a.currentRoute.value};n.hook("page:finish",d),a.afterEach((w,E)=>{var C,T,k,S;((T=(C=w.matched[0])==null?void 0:C.components)==null?void 0:T.default)===((S=(k=E.matched[0])==null?void 0:k.components)==null?void 0:S.default)&&d()});const h={};for(const w in u.value)Object.defineProperty(h,w,{get:()=>u.value[w]});n._route=Fc(h),n._middleware=n._middleware||{global:[],named:{}};try{[e,t]=Gn(()=>a.isReady()),await e,t()}catch(w){[e,t]=Gn(()=>n.runWithContext(()=>go(w))),await e,t()}const f=c!==a.currentRoute.value.fullPath?a.resolve(c):a.currentRoute.value;d();const m=n.payload.state._layout;a.beforeEach(async(w,E)=>{var C;await n.callHook("page:loading:start"),w.meta=Qi(w.meta),n.isHydrating&&m&&!pT(w.meta.layout)&&(w.meta.layout=m),n._processingMiddleware=!0;{const T=new Set([...hP,...n._middleware.global]);for(const k of w.matched){const S=k.meta.middleware;if(S)for(const x of zf(S))T.add(x)}{const k=await n.runWithContext(()=>Nf(w.path));if(k.appMiddleware)for(const S in k.appMiddleware)k.appMiddleware[S]?T.add(S):T.delete(S)}for(const k of T){const S=typeof k=="string"?n._middleware.named[k]||await((C=Mr[k])==null?void 0:C.call(Mr).then(N=>N.default||N)):k;if(!S)throw new Error(`Unknown route middleware: '${k}'.`);const x=await n.runWithContext(()=>S(w,E));if(!n.payload.serverRendered&&n.isHydrating&&(x===!1||x instanceof Error)){const N=x||Gd({statusCode:404,statusMessage:`Page Not Found: ${c}`});return await n.runWithContext(()=>go(N)),!1}if(x!==!0&&(x||x===!1))return x}}}),a.onError(async()=>{delete n._processingMiddleware,await n.callHook("page:loading:end")});const g=$c();return a.afterEach(async(w,E,C)=>{delete n._processingMiddleware,!n.isHydrating&&g.value&&await n.runWithContext(mS),C&&await n.callHook("page:loading:end"),w.matched.length===0&&await n.runWithContext(()=>go(Gd({statusCode:404,fatal:!1,statusMessage:`Page not found: ${w.fullPath}`,data:{path:w.fullPath}})))}),n.hooks.hookOnce("app:created",async()=>{try{"name"in f&&(f.name=void 0),await a.replace({...f,force:!0}),a.options.scrollBehavior=dn.scrollBehavior}catch(w){await n.runWithContext(()=>go(w))}}),{provide:{router:a}}}}),gP=rt({name:"nuxt-site-config:init",enforce:"pre",async setup(n){const e=Gc("site-config");let t={};return t=e.value||window.__NUXT_SITE_CONFIG__,{provide:{nuxtSiteConfig:t}}}}),pP=rt({name:"nuxt:payload",setup(n){Nn().beforeResolve(async(e,t)=>{if(e.path===t.path)return;const i=await Lg(e.path);i&&Object.assign(n.static.data,i.data)}),Q_(()=>{var e;n.hooks.hook("link:prefetch",async t=>{Lf(t).protocol||await Lg(t)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(Wc,1e3)})}}),bP=rt(n=>{let e;async function t(){const i=await Wc();e&&clearTimeout(e),e=setTimeout(t,1e3*60*60);try{const s=await $fetch(Of("builds/latest.json")+`?${Date.now()}`);s.id!==i.id&&n.hooks.callHook("app:manifest:update",s)}catch{}}Q_(()=>{e=setTimeout(t,1e3*60*60)})}),wP=rt(n=>{const e=YI();return n.vueApp.use(e),Ra(e),n.payload&&n.payload.pinia&&(e.state.value=n.payload.pinia),{provide:{pinia:e}}}),_P=O(()=>A(()=>import("./BVZX38zp.js"),__vite__mapDeps([187,3,4]),import.meta.url).then(n=>n.default||n.default||n)),vP=O(()=>A(()=>import("./lOQr0rhw.js"),__vite__mapDeps([188,3,4]),import.meta.url).then(n=>n.default||n.default||n)),yP=O(()=>A(()=>import("./DmZKvJxM.js"),__vite__mapDeps([189,3,4]),import.meta.url).then(n=>n.default||n.default||n)),CP=O(()=>A(()=>import("./Xmc_OBQF.js"),__vite__mapDeps([190,3,4]),import.meta.url).then(n=>n.default||n.default||n)),kP=O(()=>A(()=>import("./BJ1QUbv3.js"),__vite__mapDeps([93,3,4]),import.meta.url).then(n=>n.default||n.default||n)),EP=O(()=>A(()=>import("./BZIsDbsA.js"),__vite__mapDeps([156,3,4]),import.meta.url).then(n=>n.default||n.default||n)),TP=O(()=>A(()=>import("./URgNMimj.js"),__vite__mapDeps([191,3,4]),import.meta.url).then(n=>n.default||n.default||n)),SP=O(()=>A(()=>import("./DFWq5V-R.js"),__vite__mapDeps([89,3,4]),import.meta.url).then(n=>n.default||n.default||n)),AP=O(()=>A(()=>import("./CxgZXFA1.js"),__vite__mapDeps([95,3,4]),import.meta.url).then(n=>n.default||n.default||n)),IP=O(()=>A(()=>import("./iVrYIvJd.js"),__vite__mapDeps([192,3,4]),import.meta.url).then(n=>n.default||n.default||n)),PP=O(()=>A(()=>import("./ispA2wYQ.js"),__vite__mapDeps([151,3,4]),import.meta.url).then(n=>n.default||n.default||n)),xP=O(()=>A(()=>import("./DZOsrBW6.js"),__vite__mapDeps([141,3,4]),import.meta.url).then(n=>n.default||n.default||n)),RP=O(()=>A(()=>Promise.resolve().then(()=>fne),void 0,import.meta.url).then(n=>n.default||n.default||n)),LP=O(()=>A(()=>import("./D4DrLqXm.js"),__vite__mapDeps([46,3,4]),import.meta.url).then(n=>n.default||n.default||n)),VP=O(()=>A(()=>import("./LPlMyxak.js"),__vite__mapDeps([81,3,4]),import.meta.url).then(n=>n.default||n.default||n)),OP=O(()=>A(()=>import("./DeDWwtJw.js"),__vite__mapDeps([75,3,4]),import.meta.url).then(n=>n.default||n.default||n)),MP=O(()=>A(()=>import("./C1phCQCH.js"),__vite__mapDeps([159,3,4]),import.meta.url).then(n=>n.default||n.default||n)),BP=O(()=>A(()=>import("./alcCTCcY.js"),__vite__mapDeps([34,3,4]),import.meta.url).then(n=>n.default||n.default||n)),NP=O(()=>A(()=>Promise.resolve().then(()=>yne),void 0,import.meta.url).then(n=>n.default||n.default||n)),DP=O(()=>A(()=>import("./BtCeGN86.js"),__vite__mapDeps([131,3,4]),import.meta.url).then(n=>n.default||n.default||n)),FP=O(()=>A(()=>import("./gAbPqPdH.js"),__vite__mapDeps([193,3,4]),import.meta.url).then(n=>n.default||n.default||n)),zP=O(()=>A(()=>import("./CTgTaD9o.js"),__vite__mapDeps([144,3,4]),import.meta.url).then(n=>n.default||n.default||n)),HP=O(()=>A(()=>import("./BzRmURcV.js"),__vite__mapDeps([194,3,4]),import.meta.url).then(n=>n.default||n.default||n)),$P=O(()=>A(()=>import("./B2g_S0lp.js"),__vite__mapDeps([195,3,4]),import.meta.url).then(n=>n.default||n.default||n)),UP=O(()=>A(()=>import("./CqCfbMda.js"),__vite__mapDeps([196,3,4]),import.meta.url).then(n=>n.default||n.default||n)),WP=O(()=>A(()=>import("./7fHTzyT5.js"),__vite__mapDeps([139,3,4]),import.meta.url).then(n=>n.default||n.default||n)),jP=O(()=>A(()=>import("./BKsPXlww.js"),__vite__mapDeps([119,3,4]),import.meta.url).then(n=>n.default||n.default||n)),qP=O(()=>A(()=>import("./CiSv5DpA.js"),__vite__mapDeps([37,3,4]),import.meta.url).then(n=>n.default||n.default||n)),GP=O(()=>A(()=>import("./DCAIF_cN.js"),__vite__mapDeps([74,3,4]),import.meta.url).then(n=>n.default||n.default||n)),KP=O(()=>A(()=>import("./fwH7ysCB.js"),__vite__mapDeps([197,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ZP=O(()=>A(()=>import("./BpLiSvzI.js"),__vite__mapDeps([198,3,4]),import.meta.url).then(n=>n.default||n.default||n)),JP=O(()=>A(()=>import("./D5Iu_ZOT.js"),__vite__mapDeps([92,3,4]),import.meta.url).then(n=>n.default||n.default||n)),XP=O(()=>A(()=>import("./Eeq3L0Fh.js"),__vite__mapDeps([143,3,4]),import.meta.url).then(n=>n.default||n.default||n)),YP=O(()=>A(()=>import("./BF9XPWe-.js"),__vite__mapDeps([140,3,4]),import.meta.url).then(n=>n.default||n.default||n)),QP=O(()=>A(()=>import("./JXE5uTG5.js"),__vite__mapDeps([133,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ex=O(()=>A(()=>import("./CKh3aS-l.js"),__vite__mapDeps([60,3,4]),import.meta.url).then(n=>n.default||n.default||n)),tx=O(()=>A(()=>import("./B9cO3d11.js"),__vite__mapDeps([157,3,4]),import.meta.url).then(n=>n.default||n.default||n)),nx=O(()=>A(()=>import("./pd7QXhU7.js"),__vite__mapDeps([164,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ix=O(()=>A(()=>import("./BejReyMV.js"),__vite__mapDeps([199,3,4]),import.meta.url).then(n=>n.default||n.default||n)),sx=O(()=>A(()=>import("./C3JG8jme.js"),__vite__mapDeps([102,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ox=O(()=>A(()=>Promise.resolve().then(()=>bne),void 0,import.meta.url).then(n=>n.default||n.default||n)),rx=O(()=>A(()=>import("./NAJXh2KP.js"),__vite__mapDeps([158,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ax=O(()=>A(()=>import("./BqGm3d0N.js"),__vite__mapDeps([73,3,4]),import.meta.url).then(n=>n.default||n.default||n)),lx=O(()=>A(()=>import("./BYI96Azq.js"),__vite__mapDeps([90,3,4]),import.meta.url).then(n=>n.default||n.default||n)),cx=O(()=>A(()=>import("./CNRwdRu2.js"),__vite__mapDeps([17,3,4]),import.meta.url).then(n=>n.default||n.default||n)),ux=O(()=>A(()=>import("./DotfdZkG.js"),__vite__mapDeps([86,3,4]),import.meta.url).then(n=>n.default||n.default||n)),dx=O(()=>A(()=>import("./DsEfWEkU.js"),__vite__mapDeps([87,3,4]),import.meta.url).then(n=>n.default||n.default||n)),hx=O(()=>A(()=>import("./CB17T4Nx.js"),__vite__mapDeps([150,3,4]),import.meta.url).then(n=>n.default||n.default||n)),fx=O(()=>A(()=>import("./5Cz58Vfl.js"),__vite__mapDeps([200,3,4]),import.meta.url).then(n=>n.default||n.default||n)),mx=O(()=>A(()=>import("./BQ-QkzdG.js"),__vite__mapDeps([201,3,4]),import.meta.url).then(n=>n.default||n.default||n)),gx=O(()=>A(()=>import("./BcvxH5tw.js"),__vite__mapDeps([202,3,4]),import.meta.url).then(n=>n.default||n.default||n)),px=O(()=>A(()=>import("./WbyOIZ8X.js"),__vite__mapDeps([88,3,4]),import.meta.url).then(n=>n.default||n.default||n)),bx=O(()=>A(()=>import("./DDLnUBUh.js"),__vite__mapDeps([203,3,4]),import.meta.url).then(n=>n.default||n.default||n)),wx=O(()=>A(()=>import("./Ctkfr_g_.js"),__vite__mapDeps([204,3,4]),import.meta.url).then(n=>n.default||n.default||n)),_x=O(()=>A(()=>Promise.resolve().then(()=>_ne),void 0,import.meta.url).then(n=>n.default||n.default||n)),vx=O(()=>A(()=>import("./DCU53ubg.js"),__vite__mapDeps([18,3,4]),import.meta.url).then(n=>n.default||n.default||n)),yx=O(()=>A(()=>import("./7CZJ4DMF.js"),__vite__mapDeps([152,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Cx=O(()=>A(()=>import("./D5G0vAkX.js"),__vite__mapDeps([155,3,4]),import.meta.url).then(n=>n.default||n.default||n)),kx=O(()=>A(()=>import("./B4rdMo6x.js"),__vite__mapDeps([205,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Ex=O(()=>A(()=>import("./CV3f7P4w.js"),__vite__mapDeps([134,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Tx=O(()=>A(()=>import("./DeRjPn5x.js"),__vite__mapDeps([42,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Sx=O(()=>A(()=>import("./DoQ0dPPk.js"),__vite__mapDeps([16,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Ax=O(()=>A(()=>import("./C_3_D2Mm.js"),__vite__mapDeps([161,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Ix=O(()=>A(()=>import("./CGk0kYkq.js"),__vite__mapDeps([206,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Px=O(()=>A(()=>import("./CHjw8Zgv.js"),__vite__mapDeps([207,3,4]),import.meta.url).then(n=>n.default||n.default||n)),xx=O(()=>A(()=>import("./BM_KxLg7.js"),__vite__mapDeps([208,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Rx=O(()=>A(()=>import("./CUCXNgFG.js"),__vite__mapDeps([184,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Lx=O(()=>A(()=>import("./CIvwh-tv.js"),__vite__mapDeps([149,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Vx=O(()=>A(()=>import("./BAh9_I0W.js"),__vite__mapDeps([209,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Ox=O(()=>A(()=>import("./CYsTVKDZ.js"),__vite__mapDeps([132,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Mx=O(()=>A(()=>import("./dzf1clzI.js"),__vite__mapDeps([135,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Bx=O(()=>A(()=>import("./5p1aXrsF.js"),__vite__mapDeps([153,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Nx=O(()=>A(()=>import("./BHob8ktf.js"),__vite__mapDeps([210,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Dx=O(()=>A(()=>import("./XKBY6Ra5.js"),__vite__mapDeps([211,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Fx=O(()=>A(()=>import("./1_go7XOA.js"),__vite__mapDeps([212,3,4]),import.meta.url).then(n=>n.default||n.default||n)),zx=O(()=>A(()=>import("./BnlxJIj8.js"),__vite__mapDeps([48,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Hx=O(()=>A(()=>import("./CBnp3nFE.js"),__vite__mapDeps([19,3,4]),import.meta.url).then(n=>n.default||n.default||n)),$x=O(()=>A(()=>import("./gafnzFiD.js"),__vite__mapDeps([27,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Ux=O(()=>A(()=>import("./CHBNiG9q.js"),__vite__mapDeps([213,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Wx=O(()=>A(()=>import("./D7VAZrCq.js"),__vite__mapDeps([11,3,4]),import.meta.url).then(n=>n.default||n.default||n)),jx=O(()=>A(()=>import("./DNdvmjAH.js"),__vite__mapDeps([94,3,4]),import.meta.url).then(n=>n.default||n.default||n)),qx=O(()=>A(()=>import("./B72oEGGP.js"),__vite__mapDeps([214,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Gx=O(()=>A(()=>import("./ChmWEGRo.js"),__vite__mapDeps([56,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Kx=O(()=>A(()=>import("./eFvjLIGV.js"),__vite__mapDeps([103,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Zx=O(()=>A(()=>import("./BevsK2lM.js"),__vite__mapDeps([61,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Jx=O(()=>A(()=>import("./CRVpyP_y.js"),__vite__mapDeps([215,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Xx=O(()=>A(()=>import("./9jaxJsNv.js"),__vite__mapDeps([83,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Yx=O(()=>A(()=>import("./B6WZM6CJ.js"),__vite__mapDeps([30,3,4]),import.meta.url).then(n=>n.default||n.default||n)),Qx=O(()=>A(()=>import("./CLa8qfpp.js"),__vite__mapDeps([20,3,4]),import.meta.url).then(n=>n.default||n.default||n)),e3=O(()=>A(()=>import("./Dou5JDIP.js"),__vite__mapDeps([216,3,4]),import.meta.url).then(n=>n.default||n.default||n)),t3=O(()=>A(()=>import("./D8FYnBDP.js"),__vite__mapDeps([217,3,4]),import.meta.url).then(n=>n.default||n.default||n)),n3=O(()=>A(()=>import("./DE3ZGq8R.js"),__vite__mapDeps([12,3,4]),import.meta.url).then(n=>n.default||n.default||n)),i3=O(()=>A(()=>import("./C2Aakn9U.js"),__vite__mapDeps([162,3,4]),import.meta.url).then(n=>n.default||n.default||n)),s3=O(()=>A(()=>import("./CMVdpos5.js"),__vite__mapDeps([165,3,4]),import.meta.url).then(n=>n.default||n.default||n)),o3=O(()=>A(()=>import("./DZXVAwUl.js"),__vite__mapDeps([137,3,4]),import.meta.url).then(n=>n.default||n.default||n)),r3=O(()=>A(()=>import("./BpIzt9U7.js"),__vite__mapDeps([218,3,4]),import.meta.url).then(n=>n.default||n.default||n)),a3=O(()=>A(()=>import("./BvglR8aT.js"),__vite__mapDeps([219,3,4]),import.meta.url).then(n=>n.default||n.default||n)),l3=O(()=>A(()=>import("./BiK6IqgW.js"),__vite__mapDeps([220,3,4]),import.meta.url).then(n=>n.default||n.default||n)),c3=O(()=>A(()=>import("./Bh_n3RNe.js"),__vite__mapDeps([221,3,4]),import.meta.url).then(n=>n.default||n.default||n)),u3=O(()=>A(()=>import("./DHppbAcd.js"),__vite__mapDeps([222,3,4]),import.meta.url).then(n=>n.default||n.default||n)),d3=O(()=>A(()=>import("./ni2N08EA.js"),__vite__mapDeps([223,3,4]),import.meta.url).then(n=>n.default||n.default||n)),h3=O(()=>A(()=>import("./CwXkoZ4c.js"),__vite__mapDeps([224,3,4]),import.meta.url).then(n=>n.default||n.default||n)),f3=O(()=>A(()=>import("./DweOskmn.js"),__vite__mapDeps([21,3,4]),import.meta.url).then(n=>n.default||n.default||n)),m3=O(()=>A(()=>import("./C5LARF71.js"),__vite__mapDeps([47,3,4]),import.meta.url).then(n=>n.default||n.default||n)),g3=O(()=>A(()=>import("./VTFInkyB.js"),__vite__mapDeps([22,3,4]),import.meta.url).then(n=>n.default||n.default||n)),p3=O(()=>A(()=>import("./CIuyZic-.js"),__vite__mapDeps([23,3,4]),import.meta.url).then(n=>n.default||n.default||n)),b3=O(()=>A(()=>import("./gOx48FFm.js"),__vite__mapDeps([154,3,4]),import.meta.url).then(n=>n.default||n.default||n)),w3=O(()=>A(()=>import("./DQwRwdxs.js"),__vite__mapDeps([91,3,4]),import.meta.url).then(n=>n.default||n.default||n)),_3=O(()=>A(()=>import("./COMgu4yi.js"),__vite__mapDeps([52,3,4]),import.meta.url).then(n=>n.default||n.default||n)),v3=O(()=>A(()=>import("./DxhoD3C6.js"),__vite__mapDeps([146,3,4]),import.meta.url).then(n=>n.default||n.default||n)),y3=O(()=>A(()=>import("./CHNhef8t.js"),__vite__mapDeps([225,3,4]),import.meta.url).then(n=>n.default||n.default||n)),C3=O(()=>A(()=>import("./I_8oUHDs.js"),__vite__mapDeps([163,3,4]),import.meta.url).then(n=>n.default||n.default||n)),k3=O(()=>A(()=>import("./Cj3TdTl5.js"),__vite__mapDeps([147,3,4]),import.meta.url).then(n=>n.default||n.default||n)),E3=O(()=>A(()=>Promise.resolve().then(()=>gne),void 0,import.meta.url).then(n=>n.default||n.default||n)),T3=O(()=>A(()=>import("./BeoZxp8r.js"),__vite__mapDeps([226,3,4]),import.meta.url).then(n=>n.default||n.default||n)),S3=O(()=>A(()=>import("./CPmsSt0D.js"),__vite__mapDeps([142,3,4]),import.meta.url).then(n=>n.default||n.default||n)),A3=O(()=>A(()=>import("./CrNXe4yj.js"),__vite__mapDeps([160,3,4]),import.meta.url).then(n=>n.default||n.default||n)),I3=O(()=>A(()=>import("./DUt1gEF9.js"),__vite__mapDeps([24,3,4]),import.meta.url).then(n=>n.default||n.default||n)),P3=O(()=>A(()=>import("./DFuQWLwq.js"),__vite__mapDeps([40,3,4]),import.meta.url).then(n=>n.default||n.default||n)),x3=[["Svgo1",_P],["Svgo2",vP],["Svgo3",yP],["Svgo4",CP],["SvgoAKey",kP],["SvgoAi",EP],["SvgoArrowDown",TP],["SvgoArrowLeft",SP],["SvgoArrowRight",AP],["SvgoArrowUp",IP],["SvgoBold",PP],["SvgoCaretRight",xP],["SvgoCheckCircle",RP],["SvgoCheck",LP],["SvgoChevronDown",VP],["SvgoChevronLeft",OP],["SvgoChevronRight",MP],["SvgoClear",BP],["SvgoClose",NP],["SvgoCloudUpload",DP],["SvgoCode",FP],["SvgoConfig",zP],["SvgoContentImageRight",HP],["SvgoCostEffective",$P],["SvgoCustomize",UP],["SvgoDashboard",WP],["SvgoDecagram",jP],["SvgoDelete",qP],["SvgoDesign",GP],["SvgoDevices",KP],["SvgoDiscount",ZP],["SvgoDownKey",JP],["SvgoDrag",XP],["SvgoEarth",YP],["SvgoEditSections",QP],["SvgoEdit",ex],["SvgoElfsight",tx],["SvgoEllipses",nx],["SvgoEnvelope",ix],["SvgoEraser",sx],["SvgoErrorCircle",ox],["SvgoEyeOff",rx],["SvgoEye",ax],["SvgoFKey",lx],["SvgoFacebook",cx],["SvgoFactory",ux],["SvgoFolder",dx],["SvgoFont",hx],["SvgoFooter",fx],["SvgoGoogleAnalytics",mx],["SvgoImageReview",gx],["SvgoImageSize",px],["SvgoImage",bx],["SvgoImages",wx],["SvgoInfo",_x],["SvgoInstagram",vx],["SvgoItalic",yx],["SvgoLink",Cx],["SvgoLinkedin",kx],["SvgoList",Ex],["SvgoLoading",Tx],["SvgoLogo",Sx],["SvgoMan",Ax],["SvgoMapPin",Ix],["SvgoMegaphone",Px],["SvgoMenuOpened",xx],["SvgoMenu",Rx],["SvgoMinus",Lx],["SvgoMultimedia",Vx],["SvgoNetwork",Ox],["SvgoNewPage",Mx],["SvgoOl",Bx],["SvgoPage",Nx],["SvgoPaint",Dx],["SvgoParagraph",Fx],["SvgoPencil",zx],["SvgoPinterest",Hx],["SvgoPlus",$x],["SvgoQuestion",Ux],["SvgoQuote",Wx],["SvgoRKey",jx],["SvgoReddit",qx],["SvgoRefresh",Gx],["SvgoReturn",Kx],["SvgoSave",Zx],["SvgoScalable",Jx],["SvgoSearch",Xx],["SvgoSettings",Yx],["SvgoSnapchat",Qx],["SvgoSpeed",e3],["SvgoSquare",t3],["SvgoStarFull",n3],["SvgoStar",i3],["SvgoStopwatch",s3],["SvgoSupport",o3],["SvgoTallRectangle",r3],["SvgoTarget",a3],["SvgoTextBubbles",l3],["SvgoTextWithBackground",c3],["SvgoThreeColumn",u3],["SvgoThumbDown",d3],["SvgoThumbUp",h3],["SvgoTiktok",f3],["SvgoTransfer",m3],["SvgoTwitch",g3],["SvgoTwitter",p3],["SvgoUl",b3],["SvgoUpKey",w3],["SvgoUpgrade",_3],["SvgoUpload",v3],["SvgoUptime",y3],["SvgoUser",C3],["SvgoVideo",k3],["SvgoWarning",E3],["SvgoWideRectangle",T3],["SvgoWidget",S3],["SvgoWoman",A3],["SvgoYoutube",I3],["Icon",P3]],R3=rt({name:"nuxt:global-components",setup(n){for(const[e,t]of x3)n.vueApp.component(e,t),n.vueApp.component("Lazy"+e,t)}}),Ui={account:()=>A(()=>import("./IGs5Lz5O.js"),__vite__mapDeps([227,183,16,3,4,2,184,31,32,33,13,185,136,137,122,28,29,42,123,138,15,17,18,19,20,21,22,23,24,25,220,34,207,43,228,46,229,230]),import.meta.url).then(n=>n.default||n),admin:()=>A(()=>import("./B0dabkq8.js"),__vite__mapDeps([231,16,3,4,2,139,202,83,103,232]),import.meta.url).then(n=>n.default||n),authentication:()=>A(()=>import("./CVitDulk.js"),__vite__mapDeps([233,183,16,3,4,2,184,31,32,33,13,185,234]),import.meta.url).then(n=>n.default||n),content:()=>A(()=>import("./Dd008da4.js"),__vite__mapDeps([235,183,16,3,4,2,184,31,32,33,13,185,228,46,43,229,236]),import.meta.url).then(n=>n.default||n),default:()=>A(()=>import("./8ZDJoHPs.js"),__vite__mapDeps([237,183,16,3,4,2,184,31,32,33,13,185,228,46,43,229]),import.meta.url).then(n=>n.default||n),empty:()=>A(()=>import("./59dyZH9x.js"),__vite__mapDeps([238,3,4,239]),import.meta.url).then(n=>n.default||n)},L3=rt({name:"nuxt:prefetch",setup(n){const e=Nn();n.hooks.hook("app:mounted",()=>{e.beforeEach(async t=>{var s;const i=(s=t==null?void 0:t.meta)==null?void 0:s.layout;i&&typeof Ui[i]=="function"&&await Ui[i]()})}),n.hooks.hook("link:prefetch",t=>{if(es(t))return;const i=e.resolve(t);if(!i)return;const s=i.meta.layout;let o=zf(i.meta.middleware);o=o.filter(r=>typeof r=="string");for(const r of o)typeof Mr[r]=="function"&&Mr[r]();s&&typeof Ui[s]=="function"&&Ui[s]()})}}),V3=Symbol("nuxt-ui.slideover"),O3=rt(n=>{const e=ji({component:"div",props:{}});n.vueApp.provide(V3,e)}),M3=Symbol("nuxt-ui.modal"),B3=rt(n=>{const e=ji({component:"div",props:{}});n.vueApp.provide(M3,e)}),Hf="-",N3=n=>{const e=F3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:r=>{const a=r.split(Hf);return a[0]===""&&a.length!==1&&a.shift(),ov(a,e)||D3(r)},getConflictingClassGroupIds:(r,a)=>{const l=t[r]||[];return a&&i[r]?[...l,...i[r]]:l}}},ov=(n,e)=>{var r;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?ov(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Hf);return(r=e.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},sp=/^\[(.+)\]$/,D3=n=>{if(sp.test(n)){const e=sp.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},F3=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return H3(Object.entries(n.classGroups),t).forEach(([o,r])=>{nh(r,i,o,e)}),i},nh=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:op(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(z3(s)){nh(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,r])=>{nh(r,op(e,o),t,i)})})},op=(n,e)=>{let t=n;return e.split(Hf).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},z3=n=>n.isThemeGetter,H3=(n,e)=>e?n.map(([t,i])=>{const s=i.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([r,a])=>[e+r,a])):o);return[t,s]}):n,$3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(o,r)=>{t.set(o,r),e++,e>n&&(e=0,i=t,t=new Map)};return{get(o){let r=t.get(o);if(r!==void 0)return r;if((r=i.get(o))!==void 0)return s(o,r),r},set(o,r){t.has(o)?t.set(o,r):s(o,r)}}},rv="!",U3=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,s=e[0],o=e.length,r=a=>{const l=[];let c=0,u=0,d;for(let b=0;b<a.length;b++){let p=a[b];if(c===0){if(p===s&&(i||a.slice(b,b+o)===e)){l.push(a.slice(u,b)),u=b+o;continue}if(p==="/"){d=b;continue}}p==="["?c++:p==="]"&&c--}const h=l.length===0?a:a.substring(u),f=h.startsWith(rv),m=f?h.substring(1):h,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:r}):r},W3=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},j3=n=>({cache:$3(n.cacheSize),parseClassName:U3(n),...N3(n)}),q3=/\s+/,G3=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s}=e,o=[],r=n.trim().split(q3);let a="";for(let l=r.length-1;l>=0;l-=1){const c=r[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=t(c);let m=!!f,g=i(m?h.substring(0,f):h);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=i(h),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const b=W3(u).join(":"),p=d?b+rv:b,w=p+g;if(o.includes(w))continue;o.push(w);const E=s(g,m);for(let C=0;C<E.length;++C){const T=E[C];o.push(p+T)}a=c+(a.length>0?" "+a:a)}return a};function K3(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=av(e))&&(i&&(i+=" "),i+=t);return i}const av=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=av(n[i]))&&(t&&(t+=" "),t+=e);return t};function rp(n,...e){let t,i,s,o=r;function r(l){const c=e.reduce((u,d)=>d(u),n());return t=j3(c),i=t.cache.get,s=t.cache.set,o=a,a(l)}function a(l){const c=i(l);if(c)return c;const u=G3(l,t);return s(l,u),u}return function(){return o(K3.apply(null,arguments))}}const Be=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},lv=/^\[(?:([a-z-]+):)?(.+)\]$/i,Z3=/^\d+\/\d+$/,J3=new Set(["px","full","screen"]),X3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mi=n=>yo(n)||J3.has(n)||Z3.test(n),Oi=n=>qo(n,"length",cR),yo=n=>!!n&&!Number.isNaN(Number(n)),Ju=n=>qo(n,"number",yo),lr=n=>!!n&&Number.isInteger(Number(n)),nR=n=>n.endsWith("%")&&yo(n.slice(0,-1)),ie=n=>lv.test(n),Mi=n=>X3.test(n),iR=new Set(["length","size","percentage"]),sR=n=>qo(n,iR,cv),oR=n=>qo(n,"position",cv),rR=new Set(["image","url"]),aR=n=>qo(n,rR,dR),lR=n=>qo(n,"",uR),cr=()=>!0,qo=(n,e,t)=>{const i=lv.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},cR=n=>Y3.test(n)&&!Q3.test(n),cv=()=>!1,uR=n=>eR.test(n),dR=n=>tR.test(n),ap=()=>{const n=Be("colors"),e=Be("spacing"),t=Be("blur"),i=Be("brightness"),s=Be("borderColor"),o=Be("borderRadius"),r=Be("borderSpacing"),a=Be("borderWidth"),l=Be("contrast"),c=Be("grayscale"),u=Be("hueRotate"),d=Be("invert"),h=Be("gap"),f=Be("gradientColorStops"),m=Be("gradientColorStopPositions"),g=Be("inset"),b=Be("margin"),p=Be("opacity"),w=Be("padding"),E=Be("saturate"),C=Be("scale"),T=Be("sepia"),k=Be("skew"),S=Be("space"),x=Be("translate"),N=()=>["auto","contain","none"],Y=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto",ie,e],V=()=>[ie,e],K=()=>["",mi,Oi],ce=()=>["auto",yo,ie],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],He=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],vt=()=>["start","end","center","between","around","evenly","stretch"],yt=()=>["","0",ie],An=()=>["auto","avoid","all","avoid-page","page","left","right","column"],st=()=>[yo,ie];return{cacheSize:500,separator:":",theme:{colors:[cr],spacing:[mi,Oi],blur:["none","",Mi,ie],brightness:st(),borderColor:[n],borderRadius:["none","","full",Mi,ie],borderSpacing:V(),borderWidth:K(),contrast:st(),grayscale:yt(),hueRotate:st(),invert:yt(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[nR,Oi],inset:le(),margin:le(),opacity:st(),padding:V(),saturate:st(),scale:st(),sepia:yt(),skew:st(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",ie]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":An()}],"break-before":[{"break-before":An()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),ie]}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lr,ie]}],basis:[{basis:le()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ie]}],grow:[{grow:yt()}],shrink:[{shrink:yt()}],order:[{order:["first","last","none",lr,ie]}],"grid-cols":[{"grid-cols":[cr]}],"col-start-end":[{col:["auto",{span:["full",lr,ie]},ie]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[cr]}],"row-start-end":[{row:["auto",{span:[lr,ie]},ie]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ie]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...vt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...vt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...vt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ie,e]}],"min-w":[{"min-w":[ie,e,"min","max","fit"]}],"max-w":[{"max-w":[ie,e,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[ie,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ie,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ie,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ie,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Oi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ju]}],"font-family":[{font:[cr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ie]}],"line-clamp":[{"line-clamp":["none",yo,Ju]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mi,ie]}],"list-image":[{"list-image":["none",ie]}],"list-style-type":[{list:["none","disc","decimal",ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mi,Oi]}],"underline-offset":[{"underline-offset":["auto",mi,ie]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),oR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aR]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[mi,ie]}],"outline-w":[{outline:[mi,Oi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[mi,Oi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Mi,lR]}],"shadow-color":[{shadow:[cr]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...He(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":He()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Mi,ie]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[r]}],"border-spacing-x":[{"border-spacing-x":[r]}],"border-spacing-y":[{"border-spacing-y":[r]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ie]}],duration:[{duration:st()}],ease:[{ease:["linear","in","out","in-out",ie]}],delay:[{delay:st()}],animate:[{animate:["none","spin","ping","pulse","bounce",ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[lr,ie]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ie]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[mi,Oi,Ju]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hR=(n,{cacheSize:e,prefix:t,separator:i,experimentalParseClassName:s,extend:o={},override:r={}})=>{Ar(n,"cacheSize",e),Ar(n,"prefix",t),Ar(n,"separator",i),Ar(n,"experimentalParseClassName",s);for(const a in r)fR(n[a],r[a]);for(const a in o)mR(n[a],o[a]);return n},Ar=(n,e,t)=>{t!==void 0&&(n[e]=t)},fR=(n,e)=>{if(e)for(const t in e)Ar(n,t,e[t])},mR=(n,e)=>{if(e)for(const t in e){const i=e[t];i!==void 0&&(n[t]=(n[t]||[]).concat(i))}},gR=(n,...e)=>typeof n=="function"?rp(ap,n,...e):rp(()=>hR(ap(),n),...e);function Yne(n,e){const t={...n};for(const i of e)delete t[i];return t}function lp(n,e,t){typeof e=="string"&&(e=e.split(".").map(s=>{const o=Number(s);return Number.isNaN(o)?s:o}));let i=n;for(const s of e){if(i==null)return t;i=i[s]}return i!==void 0?i:t}var i_;const pR=gR(Hc({extend:{classGroups:{icons:[n=>n.startsWith("i-")]}}},(i_=O_.ui)==null?void 0:i_.tailwindMerge)),bR=Mf((n,e,t,i)=>{if(i==="default"||i.startsWith("default.")||i==="popper"||i.startsWith("popper.")||i.endsWith("avatar")&&e==="size"||i.endsWith("chip")&&e==="size"||i.endsWith("badge")&&e==="size"||e==="color"||e==="variant")return!1;if(typeof n[e]=="string"&&typeof t=="string"&&n[e]&&t)return n[e]=pR(n[e],t),!0});function Qne(n,...e){return n==="override"?Hc({},...e):bR({},...e)}const uv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function cp(n){return uv.test(n)?wR(n):n}function wR(n){const e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,r){return s+s+o+o+r+r});const t=uv.exec(n);return t?`${Number.parseInt(t[1],16)} ${Number.parseInt(t[2],16)} ${Number.parseInt(t[3],16)}`:null}function eie(n){const e=Number.parseFloat(n);return Number.isNaN(e)?n:e}const _R="inherit",vR="currentColor",yR="transparent",CR="#000",kR="#fff",ER={50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},TR={50:"rgb(var(--color-gray-50) / <alpha-value>)",100:"rgb(var(--color-gray-100) / <alpha-value>)",200:"rgb(var(--color-gray-200) / <alpha-value>)",300:"rgb(var(--color-gray-300) / <alpha-value>)",400:"rgb(var(--color-gray-400) / <alpha-value>)",500:"rgb(var(--color-gray-500) / <alpha-value>)",600:"rgb(var(--color-gray-600) / <alpha-value>)",700:"rgb(var(--color-gray-700) / <alpha-value>)",800:"rgb(var(--color-gray-800) / <alpha-value>)",900:"rgb(var(--color-gray-900) / <alpha-value>)",950:"rgb(var(--color-gray-950) / <alpha-value>)"},SR={50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},AR={50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},IR={50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},PR={50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},xR={50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},RR={50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},LR={50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},VR={50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},OR={50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},MR={50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},BR={50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},NR={50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},DR={50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},FR={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},zR={50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},HR={50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},$R={50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},UR={50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},WR={50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},jR={50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},qR={50:"rgb(var(--color-primary-50) / <alpha-value>)",100:"rgb(var(--color-primary-100) / <alpha-value>)",200:"rgb(var(--color-primary-200) / <alpha-value>)",300:"rgb(var(--color-primary-300) / <alpha-value>)",400:"rgb(var(--color-primary-400) / <alpha-value>)",500:"rgb(var(--color-primary-500) / <alpha-value>)",600:"rgb(var(--color-primary-600) / <alpha-value>)",700:"rgb(var(--color-primary-700) / <alpha-value>)",800:"rgb(var(--color-primary-800) / <alpha-value>)",900:"rgb(var(--color-primary-900) / <alpha-value>)",950:"rgb(var(--color-primary-950) / <alpha-value>)",DEFAULT:"rgb(var(--color-primary-DEFAULT) / <alpha-value>)"},GR={50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},nl={inherit:_R,current:vR,transparent:yR,black:CR,white:kR,slate:ER,gray:TR,zinc:SR,neutral:AR,stone:IR,red:PR,orange:xR,amber:RR,yellow:LR,lime:VR,green:OR,emerald:MR,teal:BR,cyan:NR,sky:DR,blue:FR,indigo:zR,violet:HR,purple:$R,fuchsia:UR,pink:WR,rose:jR,primary:qR,cool:GR},KR=rt(()=>{const n=Uc(),e=xe(),t=be(()=>{const s=lp(nl,n.ui.primary),o=lp(nl,n.ui.gray);return s||console.warn(`[@nuxt/ui] Primary color '${n.ui.primary}' not found in Tailwind config`),o||console.warn(`[@nuxt/ui] Gray color '${n.ui.gray}' not found in Tailwind config`),`:root {
${Object.entries(s||nl.green).map(([r,a])=>`--color-primary-${r}: ${cp(a)};`).join(`
`)}
--color-primary-DEFAULT: var(--color-primary-500);

${Object.entries(o||nl.cool).map(([r,a])=>`--color-gray-${r}: ${cp(a)};`).join(`
`)}
}

.dark {
  --color-primary-DEFAULT: var(--color-primary-400);
}
`}),i={style:[{innerHTML:()=>t.value,tagPriority:-2,id:"nuxt-ui-colors"}]};if(e.isHydrating&&!e.payload.serverRendered){const s=document.createElement("style");s.innerHTML=t.value,s.setAttribute("data-nuxt-ui-colors",""),document.head.appendChild(s),i.script=[{innerHTML:"document.head.removeChild(document.querySelector('[data-nuxt-ui-colors]'))"}]}aA(i)}),ZR="__NUXT_COLOR_MODE__",Xu="nuxt-color-mode",JR="localStorage",gi=window[ZR]||{},XR=rt(n=>{const e=Gc("color-mode",()=>Qi({preference:gi.preference,value:gi.value,unknown:!1,forced:!1})).value;Nn().afterEach(o=>{const r=o.meta.colorMode;r&&r!=="system"?(e.value=r,e.forced=!0):(r==="system"&&console.warn("You cannot force the colorMode to system at the page level."),e.forced=!1,e.value=e.preference==="system"?gi.getColorScheme():e.preference)});let t;function i(){t||!window.matchMedia||(t=window.matchMedia("(prefers-color-scheme: dark)"),t.addEventListener("change",()=>{!e.forced&&e.preference==="system"&&(e.value=gi.getColorScheme())}))}function s(o,r){var a,l;switch(o){case"cookie":window.document.cookie=Xu+"="+r;break;case"sessionStorage":(a=window.sessionStorage)==null||a.setItem(Xu,r);break;case"localStorage":default:(l=window.localStorage)==null||l.setItem(Xu,r)}}yn(()=>e.preference,o=>{e.forced||(o==="system"?(e.value=gi.getColorScheme(),i()):e.value=o,s(JR,o))},{immediate:!0}),yn(()=>e.value,(o,r)=>{gi.removeColorScheme(r),gi.addColorScheme(o)}),e.preference==="system"&&i(),n.hook("app:mounted",()=>{e.unknown&&(e.preference=gi.preference,e.value=gi.value,e.unknown=!1)}),n.provide("colorMode",e)}),dv=/^[a-z0-9]+(-[a-z0-9]+)*$/,La=(n,e,t,i="")=>{const s=n.split(":");if(n.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;i=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const a=s.pop(),l=s.pop(),c={provider:s.length>0?s[0]:i,prefix:l,name:a};return e&&!$l(c)?null:c}const o=s[0],r=o.split("-");if(r.length>1){const a={provider:i,prefix:r.shift(),name:r.join("-")};return e&&!$l(a)?null:a}if(t&&i===""){const a={provider:i,prefix:"",name:o};return e&&!$l(a,t)?null:a}return null},$l=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1,hv=Object.freeze({left:0,top:0,width:16,height:16}),ac=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Go=Object.freeze({...hv,...ac}),ih=Object.freeze({...Go,body:"",hidden:!1});function YR(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const i=((n.rotate||0)+(e.rotate||0))%4;return i&&(t.rotate=i),t}function up(n,e){const t=YR(n,e);for(const i in ih)i in ac?i in n&&!(i in t)&&(t[i]=ac[i]):i in e?t[i]=e[i]:i in n&&(t[i]=n[i]);return t}function QR(n,e){const t=n.icons,i=n.aliases||Object.create(null),s=Object.create(null);function o(r){if(t[r])return s[r]=[];if(!(r in s)){s[r]=null;const a=i[r]&&i[r].parent,l=a&&o(a);l&&(s[r]=[a].concat(l))}return s[r]}return Object.keys(t).concat(Object.keys(i)).forEach(o),s}function e4(n,e,t){const i=n.icons,s=n.aliases||Object.create(null);let o={};function r(a){o=up(i[a]||s[a],o)}return r(e),t.forEach(r),up(n,o)}function fv(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(s=>{e(s,null),t.push(s)});const i=QR(n);for(const s in i){const o=i[s];o&&(e(s,e4(n,s,o)),t.push(s))}return t}const t4={provider:"",aliases:{},not_found:{},...hv};function Yu(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function mv(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Yu(n,t4))return null;const t=e.icons;for(const s in t){const o=t[s];if(!s||typeof o.body!="string"||!Yu(o,ih))return null}const i=e.aliases||Object.create(null);for(const s in i){const o=i[s],r=o.parent;if(!s||typeof r!="string"||!t[r]&&!i[r]||!Yu(o,ih))return null}return e}const dp=Object.create(null);function n4(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function ks(n,e){const t=dp[n]||(dp[n]=Object.create(null));return t[e]||(t[e]=n4(n,e))}function gv(n,e){return mv(e)?fv(e,(t,i)=>{i?n.icons[t]=i:n.missing.add(t)}):[]}function i4(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}let Yr=!1;function pv(n){return typeof n=="boolean"&&(Yr=n),Yr}function $f(n){const e=typeof n=="string"?La(n,!0,Yr):n;if(e){const t=ks(e.provider,e.prefix),i=e.name;return t.icons[i]||(t.missing.has(i)?null:void 0)}}function s4(n,e){const t=La(n,!0,Yr);if(!t)return!1;const i=ks(t.provider,t.prefix);return e?i4(i,t.name,e):(i.missing.add(t.name),!0)}function o4(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),Yr&&!e&&!n.prefix){let s=!1;return mv(n)&&(n.prefix="",fv(n,(o,r)=>{s4(o,r)&&(s=!0)})),s}const t=n.prefix;if(!$l({provider:e,prefix:t,name:"a"}))return!1;const i=ks(e,t);return!!gv(i,n)}function tie(n){const e=$f(n);return e&&{...Go,...e}}const bv=Object.freeze({width:null,height:null}),wv=Object.freeze({...bv,...ac}),r4=/(-?[0-9.]*[0-9]+[0-9.]*)/g,a4=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function hp(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const i=n.split(r4);if(i===null||!i.length)return n;const s=[];let o=i.shift(),r=a4.test(o);for(;;){if(r){const a=parseFloat(o);isNaN(a)?s.push(o):s.push(Math.ceil(a*e*t)/t)}else s.push(o);if(o=i.shift(),o===void 0)return s.join("");r=!r}}function l4(n,e="defs"){let t="";const i=n.indexOf("<"+e);for(;i>=0;){const s=n.indexOf(">",i),o=n.indexOf("</"+e);if(s===-1||o===-1)break;const r=n.indexOf(">",o);if(r===-1)break;t+=n.slice(s+1,o).trim(),n=n.slice(0,i).trim()+n.slice(r+1)}return{defs:t,content:n}}function c4(n,e){return n?"<defs>"+n+"</defs>"+e:e}function u4(n,e,t){const i=l4(n);return c4(i.defs,e+i.content+t)}const d4=n=>n==="unset"||n==="undefined"||n==="none";function h4(n,e){const t={...Go,...n},i={...wv,...e},s={left:t.left,top:t.top,width:t.width,height:t.height};let o=t.body;[t,i].forEach(g=>{const b=[],p=g.hFlip,w=g.vFlip;let E=g.rotate;p?w?E+=2:(b.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),b.push("scale(-1 1)"),s.top=s.left=0):w&&(b.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),b.push("scale(1 -1)"),s.top=s.left=0);let C;switch(E<0&&(E-=Math.floor(E/4)*4),E=E%4,E){case 1:C=s.height/2+s.top,b.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:b.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:C=s.width/2+s.left,b.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}E%2===1&&(s.left!==s.top&&(C=s.left,s.left=s.top,s.top=C),s.width!==s.height&&(C=s.width,s.width=s.height,s.height=C)),b.length&&(o=u4(o,'<g transform="'+b.join(" ")+'">',"</g>"))});const r=i.width,a=i.height,l=s.width,c=s.height;let u,d;r===null?(d=a===null?"1em":a==="auto"?c:a,u=hp(d,l/c)):(u=r==="auto"?l:r,d=a===null?hp(u,c/l):a==="auto"?c:a);const h={},f=(g,b)=>{d4(b)||(h[g]=b.toString())};f("width",u),f("height",d);const m=[s.left,s.top,l,c];return h.viewBox=m.join(" "),{attributes:h,viewBox:m,body:o}}const f4=/\sid="(\S+)"/g,m4="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let g4=0;function p4(n,e=m4){const t=[];let i;for(;i=f4.exec(n);)t.push(i[1]);if(!t.length)return n;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(o=>{const r=typeof e=="function"?e(o):e+(g4++).toString(),a=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+r+s+"$3")}),n=n.replace(new RegExp(s,"g"),""),n}const sh=Object.create(null);function _v(n,e){sh[n]=e}function oh(n){return sh[n]||sh[""]}function Uf(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const Kc=Object.create(null),ur=["https://api.simplesvg.com","https://api.unisvg.com"],Ul=[];for(;ur.length>0;)ur.length===1||Math.random()>.5?Ul.push(ur.shift()):Ul.push(ur.pop());Kc[""]=Uf({resources:["https://api.iconify.design"].concat(Ul)});function vv(n,e){const t=Uf(e);return t===null?!1:(Kc[n]=t,!0)}function Zc(n){return Kc[n]}function b4(){return Object.keys(Kc)}const w4=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let lc=w4();function _4(n){lc=n}function v4(){return lc}function y4(n,e){const t=Zc(n);if(!t)return 0;let i;if(!t.maxURL)i=0;else{let s=0;t.resources.forEach(r=>{s=Math.max(s,r.length)});const o=e+".json?icons=";i=t.maxURL-s-t.path.length-o.length}return i}function C4(n){return n===404}const k4=(n,e,t)=>{const i=[],s=y4(n,e),o="icons";let r={type:o,provider:n,prefix:e,icons:[]},a=0;return t.forEach((l,c)=>{a+=l.length+1,a>=s&&c>0&&(i.push(r),r={type:o,provider:n,prefix:e,icons:[]},a=l.length),r.icons.push(l)}),i.push(r),i};function E4(n){if(typeof n=="string"){const e=Zc(n);if(e)return e.path}return"/"}const T4=(n,e,t)=>{if(!lc){t("abort",424);return}let i=E4(e.provider);switch(e.type){case"icons":{const o=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});i+=o+".json?"+l.toString();break}case"custom":{const o=e.uri;i+=o.slice(0,1)==="/"?o.slice(1):o;break}default:t("abort",400);return}let s=503;lc(n+i).then(o=>{const r=o.status;if(r!==200){setTimeout(()=>{t(C4(r)?"abort":"next",r)});return}return s=501,o.json()}).then(o=>{if(typeof o!="object"||o===null){setTimeout(()=>{o===404?t("abort",o):t("next",s)});return}setTimeout(()=>{t("success",o)})}).catch(()=>{t("next",s)})},S4={prepare:k4,send:T4};function A4(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((s,o)=>s.provider!==o.provider?s.provider.localeCompare(o.provider):s.prefix!==o.prefix?s.prefix.localeCompare(o.prefix):s.name.localeCompare(o.name));let i={provider:"",prefix:"",name:""};return n.forEach(s=>{if(i.name===s.name&&i.prefix===s.prefix&&i.provider===s.provider)return;i=s;const o=s.provider,r=s.prefix,a=s.name,l=t[o]||(t[o]=Object.create(null)),c=l[r]||(l[r]=ks(o,r));let u;a in c.icons?u=e.loaded:r===""||c.missing.has(a)?u=e.missing:u=e.pending;const d={provider:o,prefix:r,name:a};u.push(d)}),e}function yv(n,e){n.forEach(t=>{const i=t.loaderCallbacks;i&&(t.loaderCallbacks=i.filter(s=>s.id!==e))})}function I4(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const i=n.provider,s=n.prefix;e.forEach(o=>{const r=o.icons,a=r.pending.length;r.pending=r.pending.filter(l=>{if(l.prefix!==s)return!0;const c=l.name;if(n.icons[c])r.loaded.push({provider:i,prefix:s,name:c});else if(n.missing.has(c))r.missing.push({provider:i,prefix:s,name:c});else return t=!0,!0;return!1}),r.pending.length!==a&&(t||yv([n],o.id),o.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),o.abort))})}))}let P4=0;function x4(n,e,t){const i=P4++,s=yv.bind(null,t,i);if(!e.pending.length)return s;const o={id:i,icons:e,callback:n,abort:s};return t.forEach(r=>{(r.loaderCallbacks||(r.loaderCallbacks=[])).push(o)}),s}function R4(n,e=!0,t=!1){const i=[];return n.forEach(s=>{const o=typeof s=="string"?La(s,e,t):s;o&&i.push(o)}),i}var L4={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function V4(n,e,t,i){const s=n.resources.length,o=n.random?Math.floor(Math.random()*s):n.index;let r;if(n.random){let k=n.resources.slice(0);for(r=[];k.length>1;){const S=Math.floor(Math.random()*k.length);r.push(k[S]),k=k.slice(0,S).concat(k.slice(S+1))}r=r.concat(k)}else r=n.resources.slice(o).concat(n.resources.slice(0,o));const a=Date.now();let l="pending",c=0,u,d=null,h=[],f=[];typeof i=="function"&&f.push(i);function m(){d&&(clearTimeout(d),d=null)}function g(){l==="pending"&&(l="aborted"),m(),h.forEach(k=>{k.status==="pending"&&(k.status="aborted")}),h=[]}function b(k,S){S&&(f=[]),typeof k=="function"&&f.push(k)}function p(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:b,abort:g}}function w(){l="failed",f.forEach(k=>{k(void 0,u)})}function E(){h.forEach(k=>{k.status==="pending"&&(k.status="aborted")}),h=[]}function C(k,S,x){const N=S!=="success";switch(h=h.filter(Y=>Y!==k),l){case"pending":break;case"failed":if(N||!n.dataAfterTimeout)return;break;default:return}if(S==="abort"){u=x,w();return}if(N){u=x,h.length||(r.length?T():w());return}if(m(),E(),!n.random){const Y=n.resources.indexOf(k.resource);Y!==-1&&Y!==n.index&&(n.index=Y)}l="completed",f.forEach(Y=>{Y(x)})}function T(){if(l!=="pending")return;m();const k=r.shift();if(k===void 0){if(h.length){d=setTimeout(()=>{m(),l==="pending"&&(E(),w())},n.timeout);return}w();return}const S={status:"pending",resource:k,callback:(x,N)=>{C(S,x,N)}};h.push(S),c++,d=setTimeout(T,n.rotate),t(k,e,S.callback)}return setTimeout(T),p}function Cv(n){const e={...L4,...n};let t=[];function i(){t=t.filter(a=>a().status==="pending")}function s(a,l,c){const u=V4(e,a,l,(d,h)=>{i(),c&&c(d,h)});return t.push(u),u}function o(a){return t.find(l=>a(l))||null}return{query:s,find:o,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:i}}function fp(){}const Qu=Object.create(null);function O4(n){if(!Qu[n]){const e=Zc(n);if(!e)return;const t=Cv(e),i={config:e,redundancy:t};Qu[n]=i}return Qu[n]}function kv(n,e,t){let i,s;if(typeof n=="string"){const o=oh(n);if(!o)return t(void 0,424),fp;s=o.send;const r=O4(n);r&&(i=r.redundancy)}else{const o=Uf(n);if(o){i=Cv(o);const r=n.resources?n.resources[0]:"",a=oh(r);a&&(s=a.send)}}return!i||!s?(t(void 0,424),fp):i.query(e,s,t)().abort}function mp(){}function M4(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,I4(n)}))}function B4(n){const e=[],t=[];return n.forEach(i=>{(i.match(dv)?e:t).push(i)}),{valid:e,invalid:t}}function dr(n,e,t){function i(){const s=n.pendingIcons;e.forEach(o=>{s&&s.delete(o),n.icons[o]||n.missing.add(o)})}if(t&&typeof t=="object")try{if(!gv(n,t).length){i();return}}catch(s){console.error(s)}i(),M4(n)}function gp(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function N4(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:i}=n,s=n.iconsToLoad;if(delete n.iconsToLoad,!s||!s.length)return;const o=n.loadIcon;if(n.loadIcons&&(s.length>1||!o)){gp(n.loadIcons(s,i,t),u=>{dr(n,s,u)});return}if(o){s.forEach(u=>{const d=o(u,i,t);gp(d,h=>{const f=h?{prefix:i,icons:{[u]:h}}:null;dr(n,[u],f)})});return}const{valid:r,invalid:a}=B4(s);if(a.length&&dr(n,a,null),!r.length)return;const l=i.match(dv)?oh(t):null;if(!l){dr(n,r,null);return}l.prepare(t,i,r).forEach(u=>{kv(t,u,d=>{dr(n,u.icons,d)})})}))}const Ev=(n,e)=>{const t=R4(n,!0,pv()),i=A4(t);if(!i.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(i.loaded,i.missing,i.pending,mp)}),()=>{l=!1}}const s=Object.create(null),o=[];let r,a;return i.pending.forEach(l=>{const{provider:c,prefix:u}=l;if(u===a&&c===r)return;r=c,a=u,o.push(ks(c,u));const d=s[c]||(s[c]=Object.create(null));d[u]||(d[u]=[])}),i.pending.forEach(l=>{const{provider:c,prefix:u,name:d}=l,h=ks(c,u),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(d)||(f.add(d),s[c][u].push(d))}),o.forEach(l=>{const c=s[l.provider][l.prefix];c.length&&N4(l,c)}),e?x4(e,i,o):mp},nie=n=>new Promise((e,t)=>{const i=typeof n=="string"?La(n,!0):n;if(!i){t(n);return}Ev([i||n],s=>{if(s.length&&i){const o=$f(i);if(o){e({...Go,...o});return}}t(n)})});function D4(n,e,t){ks("",e).loadIcons=n}function F4(n,e){const t={...n};for(const i in e){const s=e[i],o=typeof s;i in bv?(s===null||s&&(o==="string"||o==="number"))&&(t[i]=s):o===typeof t[i]&&(t[i]=i==="rotate"?s%4:s)}return t}const z4=/[\s,]+/;function H4(n,e){e.split(z4).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function $4(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function i(s){for(;s<0;)s+=4;return s%4}if(t===""){const s=parseInt(n);return isNaN(s)?0:i(s)}else if(t!==n){let s=0;switch(t){case"%":s=25;break;case"deg":s=90}if(s){let o=parseFloat(n.slice(0,n.length-t.length));return isNaN(o)?0:(o=o/s,o%1===0?i(o):0)}}return e}function U4(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)t+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function W4(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function j4(n){return"data:image/svg+xml,"+W4(n)}function q4(n){return'url("'+j4(n)+'")'}const pp={...wv,inline:!1},G4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},K4={display:"inline-block"},rh={backgroundColor:"currentColor"},Tv={backgroundColor:"transparent"},bp={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},wp={webkitMask:rh,mask:rh,background:Tv};for(const n in wp){const e=wp[n];for(const t in bp)e[n+t]=bp[t]}const Wl={};["horizontal","vertical"].forEach(n=>{const e=n.slice(0,1)+"Flip";Wl[n+"-flip"]=e,Wl[n.slice(0,1)+"-flip"]=e,Wl[n+"Flip"]=e});function _p(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}const vp=(n,e)=>{const t=F4(pp,e),i={...G4},s=e.mode||"svg",o={},r=e.style,a=typeof r=="object"&&!(r instanceof Array)?r:{};for(let g in e){const b=e[g];if(b!==void 0)switch(g){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[g]=b===!0||b==="true"||b===1;break;case"flip":typeof b=="string"&&H4(t,b);break;case"color":o.color=b;break;case"rotate":typeof b=="string"?t[g]=$4(b):typeof b=="number"&&(t[g]=b);break;case"ariaHidden":case"aria-hidden":b!==!0&&b!=="true"&&delete i["aria-hidden"];break;default:{const p=Wl[g];p?(b===!0||b==="true"||b===1)&&(t[p]=!0):pp[g]===void 0&&(i[g]=b)}}}const l=h4(n,t),c=l.attributes;if(t.inline&&(o.verticalAlign="-0.125em"),s==="svg"){i.style={...o,...a},Object.assign(i,c);let g=0,b=e.id;return typeof b=="string"&&(b=b.replace(/-/g,"_")),i.innerHTML=p4(l.body,b?()=>b+"ID"+g++:"iconifyVue"),pt("svg",i)}const{body:u,width:d,height:h}=n,f=s==="mask"||(s==="bg"?!1:u.indexOf("currentColor")!==-1),m=U4(u,{...c,width:d+"",height:h+""});return i.style={...o,"--svg":q4(m),width:_p(c.width),height:_p(c.height),...K4,...f?rh:Tv,...a},pt("span",i)};pv(!0);_v("",S4);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!o4(i))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const i="IconifyProviders["+t+"] is invalid.";try{const s=e[t];if(typeof s!="object"||!s||s.resources===void 0)continue;vv(t,s)||console.error(i)}catch{console.error(i)}}}}const Z4={...Go,body:""},iie=Bn({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(n,e,t){if(typeof n=="object"&&n!==null&&typeof n.body=="string")return this._name="",this.abortLoading(),{data:n};let i;if(typeof n!="string"||(i=La(n,!1,!0))===null)return this.abortLoading(),null;let s=$f(i);if(!s)return(!this._loadingIcon||this._loadingIcon.name!==n)&&(this.abortLoading(),this._name="",s!==null&&(this._loadingIcon={name:n,abort:Ev([i],()=>{this.counter++})})),null;if(this.abortLoading(),this._name!==n&&(this._name=n,e&&e(n)),t){s=Object.assign({},s);const r=t(s.body,i.name,i.prefix,i.provider);typeof r=="string"&&(s.body=r)}const o=["iconify"];return i.prefix!==""&&o.push("iconify--"+i.prefix),i.provider!==""&&o.push("iconify--"+i.provider),{data:s,classes:o}}},render(){this.counter;const n=this.$attrs,e=this.iconMounted||n.ssr?this.getIcon(n.icon,n.onLoad,n.customise):null;if(!e)return vp(Z4,n);let t=n;return e.classes&&(t={...n,class:(typeof n.class=="string"?n.class+" ":"")+e.classes.join(" ")}),vp({...Go,...e.data},t)}}),J4={getAPIConfig:Zc,setAPIModule:_v,sendAPIQuery:kv,setFetch:_4,getFetch:v4,listAPIProviders:b4},X4=rt({name:"@nuxt/icon",setup(){var s,o;const n=Aa(),e=Uc().icon;J4.setFetch($fetch.native);const t=[];if(e.provider==="server"){const r=((o=(s=n.app)==null?void 0:s.baseURL)==null?void 0:o.replace(/\/$/,""))??"";t.push(r+(e.localApiEndpoint||"/api/_nuxt_icon")),(e.fallbackToApi===!0||e.fallbackToApi==="client-only")&&t.push(e.iconifyApiEndpoint)}else t.push(e.iconifyApiEndpoint);async function i(r,a){try{const l=await $fetch(t[0]+"/"+a+".json",{query:{icons:r.join(",")}});if(!l||l.prefix!==a||!l.icons)throw new Error("Invalid data"+JSON.stringify(l));return l}catch(l){return console.error("Failed to load custom icons",l),null}}vv("",{resources:t});for(const r of e.customCollections||[])r&&D4(i,r)}}),Y4=365*24*60*60*1e3,Q4="viewportState";function e7(n,e){const t=be({get(){return e.value||n.fallbackBreakpoint},set(d){if(e.value=d,n.cookieName&&typeof window<"u"){const h=new Date;h.setTime(h.getTime()+Y4),document.cookie=`${n.cookieName}=${e.value}; SameSite=Strict; Secure; Expires=${h.toUTCString()}; Path=/`}}}),i=be(()=>{const d=n.breakpoints||{},h=Object.keys(d).sort((g,b)=>d[g]-d[b]),f={};let m=h.length;for(;m--;){const g=h[m],b=d[g],p=d[h[m+1]];let w="";m>0?w=`(min-width: ${b}px)`:w="(min-width: 1px)",p&&(w+=` and (max-width: ${p-1}px)`),f[g]={mediaQuery:w,size:b}}return f}),s=be(()=>Object.keys(i.value));return{breakpoint:t,breakpointValue:o,isGreaterThan:r,isGreaterOrEquals:a,isLessThan:l,match:c,matches:u,queries:i};function o(d){return(n.breakpoints||{})[d]}function r(d){const h=s.value.indexOf(t.value),f=s.value.indexOf(d);return f===-1?!1:f>h}function a(d){return r(d)||c(d)}function l(d){const h=s.value.indexOf(t.value),f=s.value.indexOf(d);return f===-1?!1:f<h}function c(d){return t.value===d}function u(...d){return d.includes(t.value)}}async function t7(n,e){try{if(n&&n in this.breakpoints)return n;const{default:t}=await A(()=>import("./oJ-wCiL6.js").then(o=>o.u),[],import.meta.url),i=new t(e),{type:s=""}=i.getDevice();return s in this.defaultBreakpoints?this.defaultBreakpoints[s]:this.fallbackBreakpoint}catch(t){return console.error(t),this.fallbackBreakpoint}}function n7(n){return n.length?Object.fromEntries(n.split(/; */).map(e=>e.split("=",2))):{}}const ed={breakpoints:{mobile:576,tablet:768,desktop:992,large:1200,wide:1400},cookieName:"viewport",defaultBreakpoints:{desktop:"desktop",mobile:"mobile",tablet:"tablet"},fallbackBreakpoint:"desktop"},i7=rt(async n=>{var a,l,c;let e,t;const i=Gc(Q4,"$wIwkKHrtxN"),s=e7(ed,i);if(n.hook("app:mounted",()=>{for(const u in s.queries.value){const{mediaQuery:d}=s.queries.value[u],h=window.matchMedia(d);h.matches&&(s.breakpoint.value=u),h.onchange=f=>{f.matches&&(s.breakpoint.value=u)}}}),i.value)return n.provide("viewport",s);let o="",r="";if(typeof window>"u"){const u=(c=(l=(a=n==null?void 0:n.ssrContext)==null?void 0:a.event)==null?void 0:l.req)==null?void 0:c.headers;u!=null&&(o=u.cookie,r=u["user-agent"])}else o=document.cookie,r=navigator.userAgent;return typeof o!="string"&&(o=""),o=n7(o)[ed.cookieName],i.value=([e,t]=Gn(()=>t7.call(ed,o,r)),e=await e,t(),e),n.provide("viewport",s)}),s7=rt(()=>{});/*!
  * shared v9.3.0-beta.24
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const ah=typeof window<"u",Rs=(n,e=!1)=>e?Symbol.for(n):Symbol(n),o7=(n,e,t)=>r7({l:n,k:e,s:t}),r7=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ct=n=>typeof n=="number"&&isFinite(n),a7=n=>Av(n)==="[object Date]",cc=n=>Av(n)==="[object RegExp]",Jc=n=>he(n)&&Object.keys(n).length===0;function l7(n,e){typeof console<"u"&&(console.warn("[intlify] "+n),e&&console.warn(e.stack))}const bt=Object.assign;let yp;const Wf=()=>yp||(yp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cp(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const c7=Object.prototype.hasOwnProperty;function jf(n,e){return c7.call(n,e)}const Je=Array.isArray,it=n=>typeof n=="function",G=n=>typeof n=="string",Ke=n=>typeof n=="boolean",ge=n=>n!==null&&typeof n=="object",Sv=Object.prototype.toString,Av=n=>Sv.call(n),he=n=>{if(!ge(n))return!1;const e=Object.getPrototypeOf(n);return e===null||e.constructor===Object},u7=n=>n==null?"":Je(n)||he(n)&&n.toString===Sv?JSON.stringify(n,null,2):String(n);function qf(n,e=""){return n.reduce((t,i,s)=>s===0?t+i:t+e+i,"")}/*!
  * message-compiler v9.3.0-beta.24
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function d7(n,e,t){return{line:n,column:e,offset:t}}function lh(n,e,t){return{start:n,end:e}}const pe={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function Xc(n,e,t={}){const{domain:i,messages:s,args:o}=t,r=n,a=new SyntaxError(String(r));return a.code=n,e&&(a.location=e),a.domain=i,a}function h7(n){throw n}const pi=" ",f7="\r",It=`
`,m7="\u2028",g7="\u2029";function p7(n){const e=n;let t=0,i=1,s=1,o=0;const r=S=>e[S]===f7&&e[S+1]===It,a=S=>e[S]===It,l=S=>e[S]===g7,c=S=>e[S]===m7,u=S=>r(S)||a(S)||l(S)||c(S),d=()=>t,h=()=>i,f=()=>s,m=()=>o,g=S=>r(S)||l(S)||c(S)?It:e[S],b=()=>g(t),p=()=>g(t+o);function w(){return o=0,u(t)&&(i++,s=0),r(t)&&t++,t++,s++,e[t]}function E(){return r(t+o)&&o++,o++,e[t+o]}function C(){t=0,i=1,s=1,o=0}function T(S=0){o=S}function k(){const S=t+o;for(;S!==t;)w();o=0}return{index:d,line:h,column:f,peekOffset:m,charAt:g,currentChar:b,currentPeek:p,next:w,peek:E,reset:C,resetPeek:T,skipToPeek:k}}const Bi=void 0,kp="'",b7="tokenizer";function w7(n,e={}){const t=e.location!==!1,i=p7(n),s=()=>i.index(),o=()=>d7(i.line(),i.column(),i.index()),r=o(),a=s(),l={currentType:14,offset:a,startLoc:r,endLoc:r,lastType:14,lastOffset:a,lastStartLoc:r,lastEndLoc:r,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(_,y,R,...H){const J=c();if(y.column+=R,y.offset+=R,u){const de=t?lh(J.startLoc,y):null,Tt=Xc(_,de,{domain:b7,args:H});u(Tt)}}function h(_,y,R){_.endLoc=o(),_.currentType=y;const H={type:y};return t&&(H.loc=lh(_.startLoc,_.endLoc)),R!=null&&(H.value=R),H}const f=_=>h(_,14);function m(_,y){return _.currentChar()===y?(_.next(),y):(d(pe.EXPECTED_TOKEN,o(),0,y),"")}function g(_){let y="";for(;_.currentPeek()===pi||_.currentPeek()===It;)y+=_.currentPeek(),_.peek();return y}function b(_){const y=g(_);return _.skipToPeek(),y}function p(_){if(_===Bi)return!1;const y=_.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y===95}function w(_){if(_===Bi)return!1;const y=_.charCodeAt(0);return y>=48&&y<=57}function E(_,y){const{currentType:R}=y;if(R!==2)return!1;g(_);const H=p(_.currentPeek());return _.resetPeek(),H}function C(_,y){const{currentType:R}=y;if(R!==2)return!1;g(_);const H=_.currentPeek()==="-"?_.peek():_.currentPeek(),J=w(H);return _.resetPeek(),J}function T(_,y){const{currentType:R}=y;if(R!==2)return!1;g(_);const H=_.currentPeek()===kp;return _.resetPeek(),H}function k(_,y){const{currentType:R}=y;if(R!==8)return!1;g(_);const H=_.currentPeek()===".";return _.resetPeek(),H}function S(_,y){const{currentType:R}=y;if(R!==9)return!1;g(_);const H=p(_.currentPeek());return _.resetPeek(),H}function x(_,y){const{currentType:R}=y;if(!(R===8||R===12))return!1;g(_);const H=_.currentPeek()===":";return _.resetPeek(),H}function N(_,y){const{currentType:R}=y;if(R!==10)return!1;const H=()=>{const de=_.currentPeek();return de==="{"?p(_.peek()):de==="@"||de==="%"||de==="|"||de===":"||de==="."||de===pi||!de?!1:de===It?(_.peek(),H()):p(de)},J=H();return _.resetPeek(),J}function Y(_){g(_);const y=_.currentPeek()==="|";return _.resetPeek(),y}function le(_){const y=g(_),R=_.currentPeek()==="%"&&_.peek()==="{";return _.resetPeek(),{isModulo:R,hasSpace:y.length>0}}function V(_,y=!0){const R=(J=!1,de="",Tt=!1)=>{const In=_.currentPeek();return In==="{"?de==="%"?!1:J:In==="@"||!In?de==="%"?!0:J:In==="%"?(_.peek(),R(J,"%",!0)):In==="|"?de==="%"||Tt?!0:!(de===pi||de===It):In===pi?(_.peek(),R(!0,pi,Tt)):In===It?(_.peek(),R(!0,It,Tt)):!0},H=R();return y&&_.resetPeek(),H}function K(_,y){const R=_.currentChar();return R===Bi?Bi:y(R)?(_.next(),R):null}function ce(_){return K(_,R=>{const H=R.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H>=48&&H<=57||H===95||H===36})}function Ce(_){return K(_,R=>{const H=R.charCodeAt(0);return H>=48&&H<=57})}function re(_){return K(_,R=>{const H=R.charCodeAt(0);return H>=48&&H<=57||H>=65&&H<=70||H>=97&&H<=102})}function He(_){let y="",R="";for(;y=Ce(_);)R+=y;return R}function vt(_){b(_);const y=_.currentChar();return y!=="%"&&d(pe.EXPECTED_TOKEN,o(),0,y),_.next(),"%"}function yt(_){let y="";for(;;){const R=_.currentChar();if(R==="{"||R==="}"||R==="@"||R==="|"||!R)break;if(R==="%")if(V(_))y+=R,_.next();else break;else if(R===pi||R===It)if(V(_))y+=R,_.next();else{if(Y(_))break;y+=R,_.next()}else y+=R,_.next()}return y}function An(_){b(_);let y="",R="";for(;y=ce(_);)R+=y;return _.currentChar()===Bi&&d(pe.UNTERMINATED_CLOSING_BRACE,o(),0),R}function st(_){b(_);let y="";return _.currentChar()==="-"?(_.next(),y+=`-${He(_)}`):y+=He(_),_.currentChar()===Bi&&d(pe.UNTERMINATED_CLOSING_BRACE,o(),0),y}function hi(_){b(_),m(_,"'");let y="",R="";const H=de=>de!==kp&&de!==It;for(;y=K(_,H);)y==="\\"?R+=F(_):R+=y;const J=_.currentChar();return J===It||J===Bi?(d(pe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,o(),0),J===It&&(_.next(),m(_,"'")),R):(m(_,"'"),R)}function F(_){const y=_.currentChar();switch(y){case"\\":case"'":return _.next(),`\\${y}`;case"u":return ne(_,y,4);case"U":return ne(_,y,6);default:return d(pe.UNKNOWN_ESCAPE_SEQUENCE,o(),0,y),""}}function ne(_,y,R){m(_,y);let H="";for(let J=0;J<R;J++){const de=re(_);if(!de){d(pe.INVALID_UNICODE_ESCAPE_SEQUENCE,o(),0,`\\${y}${H}${_.currentChar()}`);break}H+=de}return`\\${y}${H}`}function Me(_){b(_);let y="",R="";const H=J=>J!=="{"&&J!=="}"&&J!==pi&&J!==It;for(;y=K(_,H);)R+=y;return R}function We(_){let y="",R="";for(;y=ce(_);)R+=y;return R}function M(_){const y=(R=!1,H)=>{const J=_.currentChar();return J==="{"||J==="%"||J==="@"||J==="|"||!J||J===pi?H:J===It?(H+=J,_.next(),y(R,H)):(H+=J,_.next(),y(!0,H))};return y(!1,"")}function W(_){b(_);const y=m(_,"|");return b(_),y}function z(_,y){let R=null;switch(_.currentChar()){case"{":return y.braceNest>=1&&d(pe.NOT_ALLOW_NEST_PLACEHOLDER,o(),0),_.next(),R=h(y,2,"{"),b(_),y.braceNest++,R;case"}":return y.braceNest>0&&y.currentType===2&&d(pe.EMPTY_PLACEHOLDER,o(),0),_.next(),R=h(y,3,"}"),y.braceNest--,y.braceNest>0&&b(_),y.inLinked&&y.braceNest===0&&(y.inLinked=!1),R;case"@":return y.braceNest>0&&d(pe.UNTERMINATED_CLOSING_BRACE,o(),0),R=q(_,y)||f(y),y.braceNest=0,R;default:let J=!0,de=!0,Tt=!0;if(Y(_))return y.braceNest>0&&d(pe.UNTERMINATED_CLOSING_BRACE,o(),0),R=h(y,1,W(_)),y.braceNest=0,y.inLinked=!1,R;if(y.braceNest>0&&(y.currentType===5||y.currentType===6||y.currentType===7))return d(pe.UNTERMINATED_CLOSING_BRACE,o(),0),y.braceNest=0,oe(_,y);if(J=E(_,y))return R=h(y,5,An(_)),b(_),R;if(de=C(_,y))return R=h(y,6,st(_)),b(_),R;if(Tt=T(_,y))return R=h(y,7,hi(_)),b(_),R;if(!J&&!de&&!Tt)return R=h(y,13,Me(_)),d(pe.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,R.value),b(_),R;break}return R}function q(_,y){const{currentType:R}=y;let H=null;const J=_.currentChar();switch((R===8||R===9||R===12||R===10)&&(J===It||J===pi)&&d(pe.INVALID_LINKED_FORMAT,o(),0),J){case"@":return _.next(),H=h(y,8,"@"),y.inLinked=!0,H;case".":return b(_),_.next(),h(y,9,".");case":":return b(_),_.next(),h(y,10,":");default:return Y(_)?(H=h(y,1,W(_)),y.braceNest=0,y.inLinked=!1,H):k(_,y)||x(_,y)?(b(_),q(_,y)):S(_,y)?(b(_),h(y,12,We(_))):N(_,y)?(b(_),J==="{"?z(_,y)||H:h(y,11,M(_))):(R===8&&d(pe.INVALID_LINKED_FORMAT,o(),0),y.braceNest=0,y.inLinked=!1,oe(_,y))}}function oe(_,y){let R={type:14};if(y.braceNest>0)return z(_,y)||f(y);if(y.inLinked)return q(_,y)||f(y);switch(_.currentChar()){case"{":return z(_,y)||f(y);case"}":return d(pe.UNBALANCED_CLOSING_BRACE,o(),0),_.next(),h(y,3,"}");case"@":return q(_,y)||f(y);default:if(Y(_))return R=h(y,1,W(_)),y.braceNest=0,y.inLinked=!1,R;const{isModulo:J,hasSpace:de}=le(_);if(J)return de?h(y,0,yt(_)):h(y,4,vt(_));if(V(_))return h(y,0,yt(_));break}return R}function _e(){const{currentType:_,offset:y,startLoc:R,endLoc:H}=l;return l.lastType=_,l.lastOffset=y,l.lastStartLoc=R,l.lastEndLoc=H,l.offset=s(),l.startLoc=o(),i.currentChar()===Bi?h(l,14):oe(i,l)}return{nextToken:_e,currentOffset:s,currentPosition:o,context:c}}const _7="parser",v7=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function y7(n,e,t){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(e||t,16);return i<=55295||i>=57344?String.fromCodePoint(i):"�"}}}function C7(n={}){const e=n.location!==!1,{onError:t}=n;function i(p,w,E,C,...T){const k=p.currentPosition();if(k.offset+=C,k.column+=C,t){const S=e?lh(E,k):null,x=Xc(w,S,{domain:_7,args:T});t(x)}}function s(p,w,E){const C={type:p};return e&&(C.start=w,C.end=w,C.loc={start:E,end:E}),C}function o(p,w,E,C){e&&(p.end=w,p.loc&&(p.loc.end=E))}function r(p,w){const E=p.context(),C=s(3,E.offset,E.startLoc);return C.value=w,o(C,p.currentOffset(),p.currentPosition()),C}function a(p,w){const E=p.context(),{lastOffset:C,lastStartLoc:T}=E,k=s(5,C,T);return k.index=parseInt(w,10),p.nextToken(),o(k,p.currentOffset(),p.currentPosition()),k}function l(p,w){const E=p.context(),{lastOffset:C,lastStartLoc:T}=E,k=s(4,C,T);return k.key=w,p.nextToken(),o(k,p.currentOffset(),p.currentPosition()),k}function c(p,w){const E=p.context(),{lastOffset:C,lastStartLoc:T}=E,k=s(9,C,T);return k.value=w.replace(v7,y7),p.nextToken(),o(k,p.currentOffset(),p.currentPosition()),k}function u(p){const w=p.nextToken(),E=p.context(),{lastOffset:C,lastStartLoc:T}=E,k=s(8,C,T);return w.type!==12?(i(p,pe.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),k.value="",o(k,C,T),{nextConsumeToken:w,node:k}):(w.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,ti(w)),k.value=w.value||"",o(k,p.currentOffset(),p.currentPosition()),{node:k})}function d(p,w){const E=p.context(),C=s(7,E.offset,E.startLoc);return C.value=w,o(C,p.currentOffset(),p.currentPosition()),C}function h(p){const w=p.context(),E=s(6,w.offset,w.startLoc);let C=p.nextToken();if(C.type===9){const T=u(p);E.modifier=T.node,C=T.nextConsumeToken||p.nextToken()}switch(C.type!==10&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(C)),C=p.nextToken(),C.type===2&&(C=p.nextToken()),C.type){case 11:C.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(C)),E.key=d(p,C.value||"");break;case 5:C.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(C)),E.key=l(p,C.value||"");break;case 6:C.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(C)),E.key=a(p,C.value||"");break;case 7:C.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(C)),E.key=c(p,C.value||"");break;default:i(p,pe.UNEXPECTED_EMPTY_LINKED_KEY,w.lastStartLoc,0);const T=p.context(),k=s(7,T.offset,T.startLoc);return k.value="",o(k,T.offset,T.startLoc),E.key=k,o(E,T.offset,T.startLoc),{nextConsumeToken:C,node:E}}return o(E,p.currentOffset(),p.currentPosition()),{node:E}}function f(p){const w=p.context(),E=w.currentType===1?p.currentOffset():w.offset,C=w.currentType===1?w.endLoc:w.startLoc,T=s(2,E,C);T.items=[];let k=null;do{const N=k||p.nextToken();switch(k=null,N.type){case 0:N.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(N)),T.items.push(r(p,N.value||""));break;case 6:N.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(N)),T.items.push(a(p,N.value||""));break;case 5:N.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(N)),T.items.push(l(p,N.value||""));break;case 7:N.value==null&&i(p,pe.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,ti(N)),T.items.push(c(p,N.value||""));break;case 8:const Y=h(p);T.items.push(Y.node),k=Y.nextConsumeToken||null;break}}while(w.currentType!==14&&w.currentType!==1);const S=w.currentType===1?w.lastOffset:p.currentOffset(),x=w.currentType===1?w.lastEndLoc:p.currentPosition();return o(T,S,x),T}function m(p,w,E,C){const T=p.context();let k=C.items.length===0;const S=s(1,w,E);S.cases=[],S.cases.push(C);do{const x=f(p);k||(k=x.items.length===0),S.cases.push(x)}while(T.currentType!==14);return k&&i(p,pe.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),o(S,p.currentOffset(),p.currentPosition()),S}function g(p){const w=p.context(),{offset:E,startLoc:C}=w,T=f(p);return w.currentType===14?T:m(p,E,C,T)}function b(p){const w=w7(p,bt({},n)),E=w.context(),C=s(0,E.offset,E.startLoc);return e&&C.loc&&(C.loc.source=p),C.body=g(w),n.onCacheKey&&(C.cacheKey=n.onCacheKey(p)),E.currentType!==14&&i(w,pe.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,p[E.offset]||""),o(C,w.currentOffset(),w.currentPosition()),C}return{parse:b}}function ti(n){if(n.type===14)return"EOF";const e=(n.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function k7(n,e={}){const t={ast:n,helpers:new Set};return{context:()=>t,helper:o=>(t.helpers.add(o),o)}}function Ep(n,e){for(let t=0;t<n.length;t++)Gf(n[t],e)}function Gf(n,e){switch(n.type){case 1:Ep(n.cases,e),e.helper("plural");break;case 2:Ep(n.items,e);break;case 6:Gf(n.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function E7(n,e={}){const t=k7(n);t.helper("normalize"),n.body&&Gf(n.body,t);const i=t.context();n.helpers=Array.from(i.helpers)}function T7(n){const e=n.body;return e.type===2?Tp(e):e.cases.forEach(t=>Tp(t)),n}function Tp(n){if(n.items.length===1){const e=n.items[0];(e.type===3||e.type===9)&&(n.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<n.items.length;t++){const i=n.items[t];if(!(i.type===3||i.type===9)||i.value==null)break;e.push(i.value)}if(e.length===n.items.length){n.static=qf(e);for(let t=0;t<n.items.length;t++){const i=n.items[t];(i.type===3||i.type===9)&&delete i.value}}}}function S7(n,e){const{sourceMap:t,filename:i,breakLineCode:s,needIndent:o}=e,r=e.location!==!1,a={filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:o,indentLevel:0};r&&n.loc&&(a.source=n.loc.source);const l=()=>a;function c(b,p){a.code+=b}function u(b,p=!0){const w=p?s:"";c(o?w+"  ".repeat(b):w)}function d(b=!0){const p=++a.indentLevel;b&&u(p)}function h(b=!0){const p=--a.indentLevel;b&&u(p)}function f(){u(a.indentLevel)}return{context:l,push:c,indent:d,deindent:h,newline:f,helper:b=>`_${b}`,needIndent:()=>a.needIndent}}function A7(n,e){const{helper:t}=n;n.push(`${t("linked")}(`),Ao(n,e.key),e.modifier?(n.push(", "),Ao(n,e.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function I7(n,e){const{helper:t,needIndent:i}=n;n.push(`${t("normalize")}([`),n.indent(i());const s=e.items.length;for(let o=0;o<s&&(Ao(n,e.items[o]),o!==s-1);o++)n.push(", ");n.deindent(i()),n.push("])")}function P7(n,e){const{helper:t,needIndent:i}=n;if(e.cases.length>1){n.push(`${t("plural")}([`),n.indent(i());const s=e.cases.length;for(let o=0;o<s&&(Ao(n,e.cases[o]),o!==s-1);o++)n.push(", ");n.deindent(i()),n.push("])")}}function x7(n,e){e.body?Ao(n,e.body):n.push("null")}function Ao(n,e){const{helper:t}=n;switch(e.type){case 0:x7(n,e);break;case 1:P7(n,e);break;case 2:I7(n,e);break;case 6:A7(n,e);break;case 8:n.push(JSON.stringify(e.value),e);break;case 7:n.push(JSON.stringify(e.value),e);break;case 5:n.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:n.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:n.push(JSON.stringify(e.value),e);break;case 3:n.push(JSON.stringify(e.value),e);break}}const R7=(n,e={})=>{const t=G(e.mode)?e.mode:"normal",i=G(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,o=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,r=e.needIndent?e.needIndent:t!=="arrow",a=n.helpers||[],l=S7(n,{mode:t,filename:i,sourceMap:s,breakLineCode:o,needIndent:r});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(r),a.length>0&&(l.push(`const { ${qf(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Ao(l,n),l.deindent(r),l.push("}"),delete n.helpers;const{code:c,map:u}=l.context();return{ast:n,code:c,map:u?u.toJSON():void 0}};function L7(n,e={}){const t=bt({},e),i=!!t.jit,s=t.optimize==null?!0:t.optimize,r=C7(t).parse(n);return i?(s&&T7(r),{ast:r,code:""}):(E7(r,t),R7(r,t))}/*!
  * devtools-if v9.3.0-beta.24
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const Iv={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.3.0-beta.24
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function V7(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Wf().__INTLIFY_PROD_DEVTOOLS__=!1)}const ts=[];ts[0]={w:[0],i:[3,0],"[":[4],o:[7]};ts[1]={w:[1],".":[2],"[":[4],o:[7]};ts[2]={w:[2],i:[3,0],0:[3,0]};ts[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ts[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ts[5]={"'":[4,0],o:8,l:[5,0]};ts[6]={'"':[4,0],o:8,l:[6,0]};const O7=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function M7(n){return O7.test(n)}function B7(n){const e=n.charCodeAt(0),t=n.charCodeAt(n.length-1);return e===t&&(e===34||e===39)?n.slice(1,-1):n}function N7(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function D7(n){const e=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:M7(e)?B7(e):"*"+e}function F7(n){const e=[];let t=-1,i=0,s=0,o,r,a,l,c,u,d;const h=[];h[0]=()=>{r===void 0?r=a:r+=a},h[1]=()=>{r!==void 0&&(e.push(r),r=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,i=4,h[0]();else{if(s=0,r===void 0||(r=D7(r),r===!1))return!1;h[1]()}};function f(){const m=n[t+1];if(i===5&&m==="'"||i===6&&m==='"')return t++,a="\\"+m,h[0](),!0}for(;i!==null;)if(t++,o=n[t],!(o==="\\"&&f())){if(l=N7(o),d=ts[i],c=d[l]||d.l||8,c===8||(i=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=o,u()===!1))))return;if(i===7)return e}}const Sp=new Map;function z7(n,e){return ge(n)?n[e]:null}function H7(n,e){if(!ge(n))return null;let t=Sp.get(e);if(t||(t=F7(e),t&&Sp.set(e,t)),!t)return null;const i=t.length;let s=n,o=0;for(;o<i;){const r=s[t[o]];if(r===void 0)return null;s=r,o++}return s}const $7=n=>n,U7=n=>"",W7="text",j7=n=>n.length===0?"":qf(n),q7=u7;function Ap(n,e){return n=Math.abs(n),e===2?n?n>1?1:0:1:n?Math.min(n,2):0}function G7(n){const e=ct(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(ct(n.named.count)||ct(n.named.n))?ct(n.named.count)?n.named.count:ct(n.named.n)?n.named.n:e:e}function K7(n,e){e.count||(e.count=n),e.n||(e.n=n)}function Z7(n={}){const e=n.locale,t=G7(n),i=ge(n.pluralRules)&&G(e)&&it(n.pluralRules[e])?n.pluralRules[e]:Ap,s=ge(n.pluralRules)&&G(e)&&it(n.pluralRules[e])?Ap:void 0,o=p=>p[i(t,p.length,s)],r=n.list||[],a=p=>r[p],l=n.named||{};ct(n.pluralIndex)&&K7(t,l);const c=p=>l[p];function u(p){const w=it(n.messages)?n.messages(p):ge(n.messages)?n.messages[p]:!1;return w||(n.parent?n.parent.message(p):U7)}const d=p=>n.modifiers?n.modifiers[p]:$7,h=he(n.processor)&&it(n.processor.normalize)?n.processor.normalize:j7,f=he(n.processor)&&it(n.processor.interpolate)?n.processor.interpolate:q7,m=he(n.processor)&&G(n.processor.type)?n.processor.type:W7,b={list:a,named:c,plural:o,linked:(p,...w)=>{const[E,C]=w;let T="text",k="";w.length===1?ge(E)?(k=E.modifier||k,T=E.type||T):G(E)&&(k=E||k):w.length===2&&(G(E)&&(k=E||k),G(C)&&(T=C||T));const S=u(p)(b),x=T==="vnode"&&Je(S)&&k?S[0]:S;return k?d(k)(x,T):x},message:u,type:m,interpolate:f,normalize:h};return b}let Qr=null;function J7(n){Qr=n}function X7(n,e,t){Qr&&Qr.emit(Iv.I18nInit,{timestamp:Date.now(),i18n:n,version:e,meta:t})}const Y7=Q7(Iv.FunctionTranslate);function Q7(n){return e=>Qr&&Qr.emit(n,e)}function eL(n,e,t){return[...new Set([t,...Je(e)?e:ge(e)?Object.keys(e):G(e)?[e]:[t]])]}function Pv(n,e,t){const i=G(t)?t:Kf,s=n;s.__localeChainCache||(s.__localeChainCache=new Map);let o=s.__localeChainCache.get(i);if(!o){o=[];let r=[t];for(;Je(r);)r=Ip(o,r,e);const a=Je(e)||!he(e)?e:e.default?e.default:null;r=G(a)?[a]:a,Je(r)&&Ip(o,r,!1),s.__localeChainCache.set(i,o)}return o}function Ip(n,e,t){let i=!0;for(let s=0;s<e.length&&Ke(i);s++){const o=e[s];G(o)&&(i=tL(n,e[s],t))}return i}function tL(n,e,t){let i;const s=e.split("-");do{const o=s.join("-");i=nL(n,o,t),s.splice(-1,1)}while(s.length&&i===!0);return i}function nL(n,e,t){let i=!1;if(!n.includes(e)&&(i=!0,e)){i=e[e.length-1]!=="!";const s=e.replace(/!/g,"");n.push(s),(Je(t)||he(t))&&t[s]&&(i=t[s])}return i}const iL="9.3.0-beta.24",Yc=-1,Kf="en-US",Pp="",xp=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function sL(){return{upper:(n,e)=>e==="text"&&G(n)?n.toUpperCase():e==="vnode"&&ge(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,e)=>e==="text"&&G(n)?n.toLowerCase():e==="vnode"&&ge(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,e)=>e==="text"&&G(n)?xp(n):e==="vnode"&&ge(n)&&"__v_isVNode"in n?xp(n.children):n}}let xv;function oL(n){xv=n}let Rv;function rL(n){Rv=n}let Lv;function aL(n){Lv=n}let Vv=null;const Rp=n=>{Vv=n},lL=()=>Vv;let Ov=null;const Lp=n=>{Ov=n},cL=()=>Ov;let Vp=0;function uL(n={}){const e=G(n.version)?n.version:iL,t=G(n.locale)?n.locale:Kf,i=Je(n.fallbackLocale)||he(n.fallbackLocale)||G(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:t,s=he(n.messages)?n.messages:{[t]:{}},o=he(n.datetimeFormats)?n.datetimeFormats:{[t]:{}},r=he(n.numberFormats)?n.numberFormats:{[t]:{}},a=bt({},n.modifiers||{},sL()),l=n.pluralRules||{},c=it(n.missing)?n.missing:null,u=Ke(n.missingWarn)||cc(n.missingWarn)?n.missingWarn:!0,d=Ke(n.fallbackWarn)||cc(n.fallbackWarn)?n.fallbackWarn:!0,h=!!n.fallbackFormat,f=!!n.unresolving,m=it(n.postTranslation)?n.postTranslation:null,g=he(n.processor)?n.processor:null,b=Ke(n.warnHtmlMessage)?n.warnHtmlMessage:!0,p=!!n.escapeParameter,w=it(n.messageCompiler)?n.messageCompiler:xv,E=it(n.messageResolver)?n.messageResolver:Rv||z7,C=it(n.localeFallbacker)?n.localeFallbacker:Lv||eL,T=ge(n.fallbackContext)?n.fallbackContext:void 0,k=it(n.onWarn)?n.onWarn:l7,S=n,x=ge(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,N=ge(S.__numberFormatters)?S.__numberFormatters:new Map,Y=ge(S.__meta)?S.__meta:{};Vp++;const le={version:e,cid:Vp,locale:t,fallbackLocale:i,messages:s,modifiers:a,pluralRules:l,missing:c,missingWarn:u,fallbackWarn:d,fallbackFormat:h,unresolving:f,postTranslation:m,processor:g,warnHtmlMessage:b,escapeParameter:p,messageCompiler:w,messageResolver:E,localeFallbacker:C,fallbackContext:T,onWarn:k,__meta:Y};return le.datetimeFormats=o,le.numberFormats=r,le.__datetimeFormatters=x,le.__numberFormatters=N,__INTLIFY_PROD_DEVTOOLS__&&X7(le,e,Y),le}function Zf(n,e,t,i,s){const{missing:o,onWarn:r}=n;if(o!==null){const a=o(n,t,e,s);return G(a)?a:e}else return e}function hr(n,e,t){const i=n;i.__localeChainCache=new Map,n.localeFallbacker(n,t,e)}function td(n){return t=>dL(t,n)}function dL(n,e){return e.body.type===1?n.plural(e.body.cases.reduce((t,i)=>[...t,Op(n,i)],[])):Op(n,e.body)}function Op(n,e){if(e.static)return n.type==="text"?e.static:n.normalize([e.static]);{const t=e.items.reduce((i,s)=>[...i,ch(n,s)],[]);return n.normalize(t)}}function ch(n,e){switch(e.type){case 3:return e.value;case 9:return e.value;case 4:return n.interpolate(n.named(e.key));case 5:return n.interpolate(n.list(e.index));case 6:return n.linked(ch(n,e.key),e.modifier?ch(n,e.modifier):void 0,n.type);case 7:return e.value;case 8:return e.value;default:throw new Error(`unhandled node type on format message part: ${e.type}`)}}let Mv=pe.__EXTEND_POINT__;const il=()=>++Mv,po={INVALID_ARGUMENT:Mv,INVALID_DATE_ARGUMENT:il(),INVALID_ISO_DATE_ARGUMENT:il(),NOT_SUPPORT_AST:il(),__EXTEND_POINT__:il()};function bo(n){return Xc(n,null,void 0)}const hL=n=>n;let sl=Object.create(null);function fL(n,e={}){let t=!1;const i=e.onError||h7;return e.onError=s=>{t=!0,i(s)},{...L7(n,e),detectError:t}}function mL(n,e={}){if(G(n)){Ke(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||hL)(n),s=sl[i];if(s)return s;const{ast:o,detectError:r}=fL(n,{...e,location:!1,jit:!0}),a=td(o);return r?a:sl[i]=a}else{const t=n.cacheKey;if(t){const i=sl[t];return i||(sl[t]=td(n))}else return td(n)}}const Mp=()=>"",$n=n=>it(n),ea=n=>ge(n)&&n.type===0&&"body"in n;function Bp(n,...e){const{fallbackFormat:t,postTranslation:i,unresolving:s,messageCompiler:o,fallbackLocale:r,messages:a}=n,[l,c]=uh(...e),u=Ke(c.missingWarn)?c.missingWarn:n.missingWarn,d=Ke(c.fallbackWarn)?c.fallbackWarn:n.fallbackWarn,h=Ke(c.escapeParameter)?c.escapeParameter:n.escapeParameter,f=!!c.resolvedMessage,m=G(c.default)||Ke(c.default)?Ke(c.default)?o?l:()=>l:c.default:t?o?l:()=>l:"",g=t||m!=="",b=G(c.locale)?c.locale:n.locale;h&&gL(c);let[p,w,E]=f?[l,b,a[b]||{}]:Bv(n,l,b,r,d,u),C=p,T=l;if(!f&&!(G(C)||ea(C)||$n(C))&&g&&(C=m,T=C),!f&&(!(G(C)||ea(C)||$n(C))||!G(w)))return s?Yc:l;let k=!1;const S=()=>{k=!0},x=$n(C)?C:Nv(n,l,w,C,T,S);if(k)return C;const N=wL(n,w,E,c),Y=Z7(N),le=pL(n,x,Y),V=i?i(le,l):le;if(__INTLIFY_PROD_DEVTOOLS__){const K={timestamp:Date.now(),key:G(l)?l:$n(C)?C.key:"",locale:w||($n(C)?C.locale:""),format:G(C)?C:$n(C)?C.source:"",message:V};K.meta=bt({},n.__meta,lL()||{}),Y7(K)}return V}function gL(n){Je(n.list)?n.list=n.list.map(e=>G(e)?Cp(e):e):ge(n.named)&&Object.keys(n.named).forEach(e=>{G(n.named[e])&&(n.named[e]=Cp(n.named[e]))})}function Bv(n,e,t,i,s,o){const{messages:r,onWarn:a,messageResolver:l,localeFallbacker:c}=n,u=c(n,i,t);let d={},h,f=null;const m="translate";for(let g=0;g<u.length&&(h=u[g],d=r[h]||{},(f=l(d,e))===null&&(f=d[e]),!(G(f)||ea(f)||$n(f)));g++){const b=Zf(n,e,h,o,m);b!==e&&(f=b)}return[f,h,d]}function Nv(n,e,t,i,s,o){const{messageCompiler:r,warnHtmlMessage:a}=n;if($n(i)){const c=i;return c.locale=c.locale||t,c.key=c.key||e,c}if(r==null){const c=()=>i;return c.locale=t,c.key=e,c}const l=r(i,bL(n,t,s,i,a,o));return l.locale=t,l.key=e,l.source=i,l}function pL(n,e,t){return e(t)}function uh(...n){const[e,t,i]=n,s={};if(!G(e)&&!ct(e)&&!$n(e)&&!ea(e))throw bo(po.INVALID_ARGUMENT);const o=ct(e)?String(e):($n(e),e);return ct(t)?s.plural=t:G(t)?s.default=t:he(t)&&!Jc(t)?s.named=t:Je(t)&&(s.list=t),ct(i)?s.plural=i:G(i)?s.default=i:he(i)&&bt(s,i),[o,s]}function bL(n,e,t,i,s,o){return{warnHtmlMessage:s,onError:r=>{throw o&&o(r),r},onCacheKey:r=>o7(e,t,r)}}function wL(n,e,t,i){const{modifiers:s,pluralRules:o,messageResolver:r,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=n,h={locale:e,modifiers:s,pluralRules:o,messages:f=>{let m=r(t,f);if(m==null&&u){const[,,g]=Bv(u,f,e,a,l,c);m=r(g,f)}if(G(m)||ea(m)){let g=!1;const p=Nv(n,f,e,m,f,()=>{g=!0});return g?Mp:p}else return $n(m)?m:Mp}};return n.processor&&(h.processor=n.processor),i.list&&(h.list=i.list),i.named&&(h.named=i.named),ct(i.plural)&&(h.pluralIndex=i.plural),h}function Np(n,...e){const{datetimeFormats:t,unresolving:i,fallbackLocale:s,onWarn:o,localeFallbacker:r}=n,{__datetimeFormatters:a}=n,[l,c,u,d]=dh(...e),h=Ke(u.missingWarn)?u.missingWarn:n.missingWarn;Ke(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,m=G(u.locale)?u.locale:n.locale,g=r(n,s,m);if(!G(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let b={},p,w=null;const E="datetime format";for(let k=0;k<g.length&&(p=g[k],b=t[p]||{},w=b[l],!he(w));k++)Zf(n,l,p,h,E);if(!he(w)||!G(p))return i?Yc:l;let C=`${p}__${l}`;Jc(d)||(C=`${C}__${JSON.stringify(d)}`);let T=a.get(C);return T||(T=new Intl.DateTimeFormat(p,bt({},w,d)),a.set(C,T)),f?T.formatToParts(c):T.format(c)}const Dv=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function dh(...n){const[e,t,i,s]=n,o={};let r={},a;if(G(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw bo(po.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw bo(po.INVALID_ISO_DATE_ARGUMENT)}}else if(a7(e)){if(isNaN(e.getTime()))throw bo(po.INVALID_DATE_ARGUMENT);a=e}else if(ct(e))a=e;else throw bo(po.INVALID_ARGUMENT);return G(t)?o.key=t:he(t)&&Object.keys(t).forEach(l=>{Dv.includes(l)?r[l]=t[l]:o[l]=t[l]}),G(i)?o.locale=i:he(i)&&(r=i),he(s)&&(r=s),[o.key||"",a,o,r]}function Dp(n,e,t){const i=n;for(const s in t){const o=`${e}__${s}`;i.__datetimeFormatters.has(o)&&i.__datetimeFormatters.delete(o)}}function Fp(n,...e){const{numberFormats:t,unresolving:i,fallbackLocale:s,onWarn:o,localeFallbacker:r}=n,{__numberFormatters:a}=n,[l,c,u,d]=hh(...e),h=Ke(u.missingWarn)?u.missingWarn:n.missingWarn;Ke(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,m=G(u.locale)?u.locale:n.locale,g=r(n,s,m);if(!G(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let b={},p,w=null;const E="number format";for(let k=0;k<g.length&&(p=g[k],b=t[p]||{},w=b[l],!he(w));k++)Zf(n,l,p,h,E);if(!he(w)||!G(p))return i?Yc:l;let C=`${p}__${l}`;Jc(d)||(C=`${C}__${JSON.stringify(d)}`);let T=a.get(C);return T||(T=new Intl.NumberFormat(p,bt({},w,d)),a.set(C,T)),f?T.formatToParts(c):T.format(c)}const Fv=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function hh(...n){const[e,t,i,s]=n,o={};let r={};if(!ct(e))throw bo(po.INVALID_ARGUMENT);const a=e;return G(t)?o.key=t:he(t)&&Object.keys(t).forEach(l=>{Fv.includes(l)?r[l]=t[l]:o[l]=t[l]}),G(i)?o.locale=i:he(i)&&(r=i),he(s)&&(r=s),[o.key||"",a,o,r]}function zp(n,e,t){const i=n;for(const s in t){const o=`${e}__${s}`;i.__numberFormatters.has(o)&&i.__numberFormatters.delete(o)}}V7();/*!
  * vue-i18n v9.3.0-beta.24
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const _L="9.3.0-beta.24";function vL(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Wf().__INTLIFY_PROD_DEVTOOLS__=!1)}let zv=pe.__EXTEND_POINT__;const Pt=()=>++zv,Cn={UNEXPECTED_RETURN_TYPE:zv,INVALID_ARGUMENT:Pt(),MUST_BE_CALL_SETUP_TOP:Pt(),NOT_INSTALLED:Pt(),NOT_AVAILABLE_IN_LEGACY_MODE:Pt(),REQUIRED_VALUE:Pt(),INVALID_VALUE:Pt(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Pt(),NOT_INSTALLED_WITH_PROVIDE:Pt(),UNEXPECTED_ERROR:Pt(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Pt(),BRIDGE_SUPPORT_VUE_2_ONLY:Pt(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Pt(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Pt(),__EXTEND_POINT__:Pt()};function Vn(n,...e){return Xc(n,null,void 0)}const fh=Rs("__translateVNode"),mh=Rs("__datetimeParts"),gh=Rs("__numberParts"),yL=Rs("__setPluralRules"),CL=Rs("__injectWithOption");function ph(n){if(!ge(n))return n;for(const e in n)if(jf(n,e))if(!e.includes("."))ge(n[e])&&ph(n[e]);else{const t=e.split("."),i=t.length-1;let s=n,o=!1;for(let r=0;r<i;r++){if(t[r]in s||(s[t[r]]={}),!ge(s[t[r]])){o=!0;break}s=s[t[r]]}o||(s[t[i]]=n[e],delete n[e]),ge(s[t[i]])&&ph(s[t[i]])}return n}function Hv(n,e){const{messages:t,__i18n:i,messageResolver:s,flatJson:o}=e,r=he(t)?t:Je(i)?{}:{[n]:{}};if(Je(i)&&i.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(r[l]=r[l]||{},Br(c,r[l])):Br(c,r)}else G(a)&&Br(JSON.parse(a),r)}),s==null&&o)for(const a in r)jf(r,a)&&ph(r[a]);return r}const ol=n=>!ge(n)||Je(n);function Br(n,e){if(ol(n)||ol(e))throw Vn(Cn.INVALID_VALUE);for(const t in n)jf(n,t)&&(ol(n[t])||ol(e[t])?e[t]=n[t]:Br(n[t],e[t]))}function $v(n){return n.type}function kL(n,e,t){let i=ge(e.messages)?e.messages:{};"__i18nGlobal"in t&&(i=Hv(n.locale.value,{messages:i,__i18n:t.__i18nGlobal}));const s=Object.keys(i);s.length&&s.forEach(o=>{n.mergeLocaleMessage(o,i[o])});{if(ge(e.datetimeFormats)){const o=Object.keys(e.datetimeFormats);o.length&&o.forEach(r=>{n.mergeDateTimeFormat(r,e.datetimeFormats[r])})}if(ge(e.numberFormats)){const o=Object.keys(e.numberFormats);o.length&&o.forEach(r=>{n.mergeNumberFormat(r,e.numberFormats[r])})}}}function Hp(n){return vo(wT,null,n,0)}const $p="__INTLIFY_META__";let Up=0;function Wp(n){return(e,t,i,s)=>n(t,i,Wo()||void 0,s)}const EL=()=>{const n=Wo();let e=null;return n&&(e=$v(n)[$p])?{[$p]:e}:null};function Uv(n={},e){const{__root:t}=n,i=t===void 0;let s=Ke(n.inheritLocale)?n.inheritLocale:!0;const o=Fe(t&&s?t.locale.value:G(n.locale)?n.locale:Kf),r=Fe(t&&s?t.fallbackLocale.value:G(n.fallbackLocale)||Je(n.fallbackLocale)||he(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:o.value),a=Fe(Hv(o.value,n)),l=Fe(he(n.datetimeFormats)?n.datetimeFormats:{[o.value]:{}}),c=Fe(he(n.numberFormats)?n.numberFormats:{[o.value]:{}});let u=t?t.missingWarn:Ke(n.missingWarn)||cc(n.missingWarn)?n.missingWarn:!0,d=t?t.fallbackWarn:Ke(n.fallbackWarn)||cc(n.fallbackWarn)?n.fallbackWarn:!0,h=t?t.fallbackRoot:Ke(n.fallbackRoot)?n.fallbackRoot:!0,f=!!n.fallbackFormat,m=it(n.missing)?n.missing:null,g=it(n.missing)?Wp(n.missing):null,b=it(n.postTranslation)?n.postTranslation:null,p=t?t.warnHtmlMessage:Ke(n.warnHtmlMessage)?n.warnHtmlMessage:!0,w=!!n.escapeParameter;const E=t?t.modifiers:he(n.modifiers)?n.modifiers:{};let C=n.pluralRules||t&&t.pluralRules,T;T=(()=>{i&&Lp(null);const L={version:_L,locale:o.value,fallbackLocale:r.value,messages:a.value,modifiers:E,pluralRules:C,missing:g===null?void 0:g,missingWarn:u,fallbackWarn:d,fallbackFormat:f,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:p,escapeParameter:w,messageResolver:n.messageResolver,__meta:{framework:"vue"}};L.datetimeFormats=l.value,L.numberFormats=c.value,L.__datetimeFormatters=he(T)?T.__datetimeFormatters:void 0,L.__numberFormatters=he(T)?T.__numberFormatters:void 0;const D=uL(L);return i&&Lp(D),D})(),hr(T,o.value,r.value);function S(){return[o.value,r.value,a.value,l.value,c.value]}const x=be({get:()=>o.value,set:L=>{o.value=L,T.locale=o.value}}),N=be({get:()=>r.value,set:L=>{r.value=L,T.fallbackLocale=r.value,hr(T,o.value,L)}}),Y=be(()=>a.value),le=be(()=>l.value),V=be(()=>c.value);function K(){return it(b)?b:null}function ce(L){b=L,T.postTranslation=L}function Ce(){return m}function re(L){L!==null&&(g=Wp(L)),m=L,T.missing=g}const He=(L,D,St,At,xu,Ya)=>{S();let Gs;if(__INTLIFY_PROD_DEVTOOLS__)try{Rp(EL()),i||(T.fallbackContext=t?cL():void 0),Gs=L(T)}finally{Rp(null),i||(T.fallbackContext=void 0)}else Gs=L(T);if(ct(Gs)&&Gs===Yc){const[sT,Nne]=D();return t&&h?At(t):xu(sT)}else{if(Ya(Gs))return Gs;throw Vn(Cn.UNEXPECTED_RETURN_TYPE)}};function vt(...L){return He(D=>Reflect.apply(Bp,null,[D,...L]),()=>uh(...L),"translate",D=>Reflect.apply(D.t,D,[...L]),D=>D,D=>G(D))}function yt(...L){const[D,St,At]=L;if(At&&!ge(At))throw Vn(Cn.INVALID_ARGUMENT);return vt(D,St,bt({resolvedMessage:!0},At||{}))}function An(...L){return He(D=>Reflect.apply(Np,null,[D,...L]),()=>dh(...L),"datetime format",D=>Reflect.apply(D.d,D,[...L]),()=>Pp,D=>G(D))}function st(...L){return He(D=>Reflect.apply(Fp,null,[D,...L]),()=>hh(...L),"number format",D=>Reflect.apply(D.n,D,[...L]),()=>Pp,D=>G(D))}function hi(L){return L.map(D=>G(D)||ct(D)||Ke(D)?Hp(String(D)):D)}const ne={normalize:hi,interpolate:L=>L,type:"vnode"};function Me(...L){return He(D=>{let St;const At=D;try{At.processor=ne,St=Reflect.apply(Bp,null,[At,...L])}finally{At.processor=null}return St},()=>uh(...L),"translate",D=>D[fh](...L),D=>[Hp(D)],D=>Je(D))}function We(...L){return He(D=>Reflect.apply(Fp,null,[D,...L]),()=>hh(...L),"number format",D=>D[gh](...L),()=>[],D=>G(D)||Je(D))}function M(...L){return He(D=>Reflect.apply(Np,null,[D,...L]),()=>dh(...L),"datetime format",D=>D[mh](...L),()=>[],D=>G(D)||Je(D))}function W(L){C=L,T.pluralRules=C}function z(L,D){const St=G(D)?D:o.value,At=_e(St);return T.messageResolver(At,L)!==null}function q(L){let D=null;const St=Pv(T,r.value,o.value);for(let At=0;At<St.length;At++){const xu=a.value[St[At]]||{},Ya=T.messageResolver(xu,L);if(Ya!=null){D=Ya;break}}return D}function oe(L){const D=q(L);return D??(t?t.tm(L)||{}:{})}function _e(L){return a.value[L]||{}}function _(L,D){a.value[L]=D,T.messages=a.value}function y(L,D){a.value[L]=a.value[L]||{},Br(D,a.value[L]),T.messages=a.value}function R(L){return l.value[L]||{}}function H(L,D){l.value[L]=D,T.datetimeFormats=l.value,Dp(T,L,D)}function J(L,D){l.value[L]=bt(l.value[L]||{},D),T.datetimeFormats=l.value,Dp(T,L,D)}function de(L){return c.value[L]||{}}function Tt(L,D){c.value[L]=D,T.numberFormats=c.value,zp(T,L,D)}function In(L,D){c.value[L]=bt(c.value[L]||{},D),T.numberFormats=c.value,zp(T,L,D)}Up++,t&&ah&&(yn(t.locale,L=>{s&&(o.value=L,T.locale=L,hr(T,o.value,r.value))}),yn(t.fallbackLocale,L=>{s&&(r.value=L,T.fallbackLocale=L,hr(T,o.value,r.value))}));const je={id:Up,locale:x,fallbackLocale:N,get inheritLocale(){return s},set inheritLocale(L){s=L,L&&t&&(o.value=t.locale.value,r.value=t.fallbackLocale.value,hr(T,o.value,r.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:Y,get modifiers(){return E},get pluralRules(){return C||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(L){u=L,T.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(L){d=L,T.fallbackWarn=d},get fallbackRoot(){return h},set fallbackRoot(L){h=L},get fallbackFormat(){return f},set fallbackFormat(L){f=L,T.fallbackFormat=f},get warnHtmlMessage(){return p},set warnHtmlMessage(L){p=L,T.warnHtmlMessage=L},get escapeParameter(){return w},set escapeParameter(L){w=L,T.escapeParameter=L},t:vt,getLocaleMessage:_e,setLocaleMessage:_,mergeLocaleMessage:y,getPostTranslationHandler:K,setPostTranslationHandler:ce,getMissingHandler:Ce,setMissingHandler:re,[yL]:W};return je.datetimeFormats=le,je.numberFormats=V,je.rt=yt,je.te=z,je.tm=oe,je.d=An,je.n=st,je.getDateTimeFormat=R,je.setDateTimeFormat=H,je.mergeDateTimeFormat=J,je.getNumberFormat=de,je.setNumberFormat=Tt,je.mergeNumberFormat=In,je[CL]=n.__injectWithOption,je[fh]=Me,je[mh]=M,je[gh]=We,je}const Jf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function TL({slots:n},e){return e.length===1&&e[0]==="default"?(n.default?n.default():[]).reduce((i,s)=>[...i,...s.type===Af?s.children:[s]],[]):e.reduce((t,i)=>{const s=n[i];return s&&(t[i]=s()),t},{})}function Wv(n){return Af}const SL=Bn({name:"i18n-t",props:bt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>ct(n)||!isNaN(n)}},Jf),setup(n,e){const{slots:t,attrs:i}=e,s=n.i18n||Qc({useScope:n.scope,__useComponent:!0});return()=>{const o=Object.keys(t).filter(d=>d!=="_"),r={};n.locale&&(r.locale=n.locale),n.plural!==void 0&&(r.plural=G(n.plural)?+n.plural:n.plural);const a=TL(e,o),l=s[fh](n.keypath,a,r),c=bt({},i),u=G(n.tag)||ge(n.tag)?n.tag:Wv();return pt(u,c,l)}}}),jp=SL;function AL(n){return Je(n)&&!G(n[0])}function jv(n,e,t,i){const{slots:s,attrs:o}=e;return()=>{const r={part:!0};let a={};n.locale&&(r.locale=n.locale),G(n.format)?r.key=n.format:ge(n.format)&&(G(n.format.key)&&(r.key=n.format.key),a=Object.keys(n.format).reduce((h,f)=>t.includes(f)?bt({},h,{[f]:n.format[f]}):h,{}));const l=i(n.value,r,a);let c=[r.key];Je(l)?c=l.map((h,f)=>{const m=s[h.type],g=m?m({[h.type]:h.value,index:f,parts:l}):[h.value];return AL(g)&&(g[0].key=`${h.type}-${f}`),g}):G(l)&&(c=[l]);const u=bt({},o),d=G(n.tag)||ge(n.tag)?n.tag:Wv();return pt(d,u,c)}}const IL=Bn({name:"i18n-n",props:bt({value:{type:Number,required:!0},format:{type:[String,Object]}},Jf),setup(n,e){const t=n.i18n||Qc({useScope:"parent",__useComponent:!0});return jv(n,e,Fv,(...i)=>t[gh](...i))}}),qp=IL,PL=Bn({name:"i18n-d",props:bt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Jf),setup(n,e){const t=n.i18n||Qc({useScope:"parent",__useComponent:!0});return jv(n,e,Dv,(...i)=>t[mh](...i))}}),Gp=PL;function xL(n,e){const t=n;if(n.mode==="composition")return t.__getInstance(e)||n.global;{const i=t.__getInstance(e);return i!=null?i.__composer:n.global.__composer}}function RL(n){const e=r=>{const{instance:a,modifiers:l,value:c}=r;if(!a||!a.$)throw Vn(Cn.UNEXPECTED_ERROR);const u=xL(n,a.$),d=Kp(c);return[Reflect.apply(u.t,u,[...Zp(d)]),u]};return{created:(r,a)=>{const[l,c]=e(a);ah&&n.global===c&&(r.__i18nWatcher=yn(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),r.__composer=c,r.textContent=l},unmounted:r=>{ah&&r.__i18nWatcher&&(r.__i18nWatcher(),r.__i18nWatcher=void 0,delete r.__i18nWatcher),r.__composer&&(r.__composer=void 0,delete r.__composer)},beforeUpdate:(r,{value:a})=>{if(r.__composer){const l=r.__composer,c=Kp(a);r.textContent=Reflect.apply(l.t,l,[...Zp(c)])}},getSSRProps:r=>{const[a]=e(r);return{textContent:a}}}}function Kp(n){if(G(n))return{path:n};if(he(n)){if(!("path"in n))throw Vn(Cn.REQUIRED_VALUE,"path");return n}else throw Vn(Cn.INVALID_VALUE)}function Zp(n){const{path:e,locale:t,args:i,choice:s,plural:o}=n,r={},a=i||{};return G(t)&&(r.locale=t),ct(s)&&(r.plural=s),ct(o)&&(r.plural=o),[e,a,r]}function LL(n,e,...t){const i=he(t[0])?t[0]:{},s=!!i.useI18nComponentName;(Ke(i.globalInstall)?i.globalInstall:!0)&&([s?"i18n":jp.name,"I18nT"].forEach(r=>n.component(r,jp)),[qp.name,"I18nN"].forEach(r=>n.component(r,qp)),[Gp.name,"I18nD"].forEach(r=>n.component(r,Gp))),n.directive("t",RL(e))}const VL=Rs("global-vue-i18n");function OL(n={},e){const t=Ke(n.globalInjection)?n.globalInjection:!0,i=!0,s=new Map,[o,r]=ML(n),a=Rs("");function l(d){return s.get(d)||null}function c(d,h){s.set(d,h)}function u(d){s.delete(d)}{const d={get mode(){return"composition"},get allowComposition(){return i},async install(h,...f){if(h.__VUE_I18N_SYMBOL__=a,h.provide(h.__VUE_I18N_SYMBOL__,d),he(f[0])){const g=f[0];d.__composerExtend=g.__composerExtend,d.__vueI18nExtend=g.__vueI18nExtend}t&&WL(h,d.global),LL(h,d,...f);const m=h.unmount;h.unmount=()=>{d.dispose(),m()}},get global(){return r},dispose(){o.stop()},__instances:s,__getInstance:l,__setInstance:c,__deleteInstance:u};return d}}function Qc(n={}){const e=Wo();if(e==null)throw Vn(Cn.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Vn(Cn.NOT_INSTALLED);const t=BL(e),i=DL(t),s=$v(e),o=NL(n,s);if(o==="global")return kL(i,n,s),i;if(o==="parent"){let l=FL(t,e,n.__useComponent);return l==null&&(l=i),l}const r=t;let a=r.__getInstance(e);if(a==null){const l=bt({},n);"__i18n"in s&&(l.__i18n=s.__i18n),i&&(l.__root=i),a=Uv(l),r.__composerExtend&&r.__composerExtend(a),HL(r,e),r.__setInstance(e,a)}return a}function ML(n,e,t){const i=Ta();{const s=i.run(()=>Uv(n));if(s==null)throw Vn(Cn.UNEXPECTED_ERROR);return[i,s]}}function BL(n){{const e=Bt(n.isCE?VL:n.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Vn(n.isCE?Cn.NOT_INSTALLED_WITH_PROVIDE:Cn.UNEXPECTED_ERROR);return e}}function NL(n,e){return Jc(n)?"__i18n"in e?"local":"global":n.useScope?n.useScope:"local"}function DL(n){return n.mode==="composition"?n.global:n.global.__composer}function FL(n,e,t=!1){let i=null;const s=e.root;let o=zL(e,t);for(;o!=null;){const r=n;if(n.mode==="composition"&&(i=r.__getInstance(o)),i!=null||s===o)break;o=o.parent}return i}function zL(n,e=!1){return n==null?null:e&&n.vnode.ctx||n.parent}function HL(n,e,t){bT(()=>{},e),s_(()=>{n.__deleteInstance(e)},e)}const $L=["locale","fallbackLocale","availableLocales"],UL=["t","rt","d","n","tm","te"];function WL(n,e){const t=Object.create(null);$L.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s)throw Vn(Cn.UNEXPECTED_ERROR);const o=ui(s.value)?{get(){return s.value.value},set(r){s.value.value=r}}:{get(){return s.get&&s.get()}};Object.defineProperty(t,i,o)}),n.config.globalProperties.$i18n=t,UL.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s||!s.value)throw Vn(Cn.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${i}`,s)})}vL();oL(mL);rL(H7);aL(Pv);if(__INTLIFY_PROD_DEVTOOLS__){const n=Wf();n.__INTLIFY__=!0,J7(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const qv={PREFIX:"prefix",PREFIX_EXCEPT_DEFAULT:"prefix_except_default",PREFIX_AND_DEFAULT:"prefix_and_default",NO_PREFIX:"no_prefix"},jL="",qL=qv.PREFIX_EXCEPT_DEFAULT,GL=!1,KL="___",ZL="default",JL="ltr",XL="",Gv="";/*!
  * shared v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const YL=(n,e=!1)=>e?Symbol.for(n):Symbol(n),eu=Object.assign,Kv=Array.isArray,bh=n=>typeof n=="function",Io=n=>typeof n=="string",QL=n=>typeof n=="symbol",Xf=n=>n!==null&&typeof n=="object",e6=/\/$|\/\?/;function wh(n="",e=!1){return e?e6.test(n):n.endsWith("/")}function t6(n="",e=!1){if(!e)return(wh(n)?n.slice(0,-1):n)||"/";if(!wh(n,!0))return n||"/";const[t,...i]=n.split("?");return(t.slice(0,-1)||"/")+(i.length>0?`?${i.join("?")}`:"")}function n6(n="",e=!1){if(!e)return n.endsWith("/")?n:n+"/";if(wh(n,!0))return n||"/";const[t,...i]=n.split("?");return t+"/"+(i.length>0?`?${i.join("?")}`:"")}const i6=typeof window<"u";function Zv(n,e){typeof console<"u"&&console.warn("[vue-i18n-routing] "+n)}function s6(n){n=n||[];const e=[];for(const t of n)Io(t)?e.push({code:t}):e.push(t);return e}function Ls(n){return n!=null&&"global"in n&&"mode"in n}function Ko(n){return n!=null&&!("__composer"in n)&&ui(n.locale)}function Gi(n){return n!=null&&"__composer"in n}function Va(n){return n!=null&&!("__composer"in n)&&!ui(n.locale)}function tu(n){return n!=null&&("__VUE_I18N_BRIDGE__"in n||"_sync"in n)}function ta(n){return Ls(n)?Ko(n.global)?n.global:n.global.__composer:Gi(n)?n.__composer:n}function nu(n){const e=Ls(n)?n.global:n;return Ko(e)?e.locale.value:(Va(e)||Gi(e)||tu(e),e.locale)}function o6(n){const e=Ls(n)?n.global:n;return Ko(e)?e.locales.value:(Va(e)||Gi(e)||tu(e),e.locales)}function r6(n){const e=Ls(n)?n.global:n;return Ko(e)?e.localeCodes.value:(Va(e)||Gi(e)||tu(e),e.localeCodes)}function Jv(n,e){const t=Ls(n)?n.global:n;if(Ko(t))t.locale.value=e;else if(Va(t)||Gi(t)||tu(t))t.locale=e;else throw new Error("TODO:")}function Xv(n){return Io(n)?n:QL(n)?n.toString():"(null)"}function Jp(n,e,{defaultLocale:t,strategy:i,routesNameSeparator:s,defaultLocaleRouteNameSuffix:o}){let r=Xv(n)+(i==="no_prefix"?"":s+e);return e===t&&i==="prefix_and_default"&&(r+=s+o),r}function Xp(n,e){return bh(n)?n(e):n}function a6(n,e){const t=[];for(const[i,s]of e.entries()){const o=n.find(r=>r.iso.toLowerCase()===s.toLowerCase());if(o){t.push({code:o.code,score:1-i/e.length});break}}for(const[i,s]of e.entries()){const o=s.split("-")[0].toLowerCase(),r=n.find(a=>a.iso.split("-")[0].toLowerCase()===o);if(r){t.push({code:r.code,score:.999-i/e.length});break}}return t}const l6=a6;function c6(n,e){return n.score===e.score?e.code.length-n.code.length:e.score-n.score}const u6=c6;function d6(n,e,{matcher:t=l6,comparer:i=u6}={}){const s=[];for(const r of n){const{code:a}=r,l=r.iso||a;s.push({code:a,iso:l})}const o=t(s,e);return o.length>1&&o.sort(i),o.length?o[0].code:""}function as(n){return function(){return Reflect.apply(n,{getRouteBaseName:this.getRouteBaseName,localePath:this.localePath,localeRoute:this.localeRoute,localeLocation:this.localeLocation,resolveRoute:this.resolveRoute,switchLocalePath:this.switchLocalePath,localeHead:this.localeHead,i18n:this.$i18n,route:this.$route,router:this.$router},arguments)}}function h6(n,{locales:e=[],localeCodes:t=[],baseUrl:i=XL,hooks:s={},context:o={}}={}){const r=Ta(),a=n.install;return n.install=(l,...c)=>{const u=g6(c[0])?eu({},c[0]):{inject:!0};u.inject==null&&(u.inject=!0);const d=u.__composerExtend;if(u.__composerExtend=g=>{const b=ta(n);g.locales=be(()=>b.locales.value),g.localeCodes=be(()=>b.localeCodes.value),g.baseUrl=be(()=>b.baseUrl.value),bh(d)&&Reflect.apply(d,u,[g])},Gi(n.global)){const g=u.__vueI18nExtend;u.__vueI18nExtend=b=>{Yp(b,s.onExtendVueI18n),bh(g)&&Reflect.apply(g,u,[b])}}c[0]=u,Reflect.apply(a,n,[l,...c]);const h=ta(n);r.run(()=>f6(h,{locales:e,localeCodes:t,baseUrl:i,hooks:s,context:o})),Gi(n.global)&&Yp(n.global,s.onExtendVueI18n);const f=l,m=n.mode==="composition"?f.config.globalProperties.$i18n:null;if(m&&m6(m,h,s.onExtendExportedGlobal),u.inject&&l.mixin({methods:{resolveRoute:as(iu),localePath:as(Yf),localeRoute:as(Qf),localeLocation:as(k6),switchLocalePath:as(na),getRouteBaseName:as(Po),localeHead:as(ey)}}),f.unmount){const g=f.unmount;f.unmount=()=>{r.stop(),g()}}},r}function f6(n,e){const{locales:t,localeCodes:i,baseUrl:s,context:o}=e,r=Fe(t),a=Fe(i),l=Fe("");n.locales=be(()=>r.value),n.localeCodes=be(()=>a.value),n.baseUrl=be(()=>l.value),i6?yn(n.locale,()=>{l.value=Xp(s,o)},{immediate:!0}):l.value=Xp(s,o),e.hooks&&e.hooks.onExtendComposer&&e.hooks.onExtendComposer(n)}function m6(n,e,t){const i=[{locales:{get(){return e.locales.value}},localeCodes:{get(){return e.localeCodes.value}},baseUrl:{get(){return e.baseUrl.value}}}];t&&i.push(t(e));for(const s of i)for(const[o,r]of Object.entries(s))Object.defineProperty(n,o,r)}function Yp(n,e){const t=ta(n),i=[{locales:{get(){return t.locales.value}},localeCodes:{get(){return t.localeCodes.value}},baseUrl:{get(){return t.baseUrl.value}}}];e&&i.push(e(t));for(const s of i)for(const[o,r]of Object.entries(s))Object.defineProperty(n,o,r)}function g6(n){return Xf(n)&&("inject"in n||"__composerExtend"in n||"__vueI18nExtend"in n)}const _h=YL("vue-i18n-routing-gor");function p6(n,e){n[_h]?Zv("already registered global options"):n[_h]=e}function b6(n){var e;return(e=n[_h])!=null?e:{}}function vh(n){return new RegExp(`^/(${n.join("|")})(?:/|$)`,"i")}function w6(n,e,t){const i=`(${n.join("|")})`,s=`(?:${e}${t})?`,o=new RegExp(`${e}${i}${s}$`,"i"),r=vh(n);return l=>{if(Xf(l)){if(l.name){const u=(Io(l.name)?l.name:l.name.toString()).match(o);if(u&&u.length>1)return u[1]}else if(l.path){const c=l.path.match(r);if(c&&c.length>1)return c[1]}}else if(Io(l)){const c=l.match(r);if(c&&c.length>1)return c[1]}return""}}function Oa(n,e,{defaultLocale:t=jL,defaultDirection:i=JL,defaultLocaleRouteNameSuffix:s=ZL,routesNameSeparator:o=KL,strategy:r=qL,trailingSlash:a=GL,localeCodes:l=[],prefixable:c=Yv,switchLocalePathIntercepter:u=Qv,dynamicRouteParamsKey:d=Gv}={}){const h=b6(n);return{defaultLocale:e.defaultLocale||h.defaultLocale||t,defaultDirection:e.defaultDirection||h.defaultDirection||i,defaultLocaleRouteNameSuffix:e.defaultLocaleRouteNameSuffix||h.defaultLocaleRouteNameSuffix||s,routesNameSeparator:e.routesNameSeparator||h.routesNameSeparator||o,strategy:e.strategy||h.strategy||r,trailingSlash:e.trailingSlash||h.trailingSlash||a,localeCodes:e.localeCodes||h.localeCodes||l,prefixable:e.prefixable||h.prefixable||c,switchLocalePathIntercepter:e.switchLocalePathIntercepter||h.switchLocalePathIntercepter||u,dynamicRouteParamsKey:e.dynamicRouteParamsKey||h.dynamicRouteParamsKey||d}}function _6(n,e){return[n.slice(0,e),n.slice(e)]}function v6(n,e,t,i){if(t==="prefix"){if(Kv(e.matched)&&e.matched.length>0)return e.matched[0];const[s,o]=_6(e.path,1),r=`${s}${i}${o===""?o:`/${o}`}`,a=n.options.routes.find(l=>l.path===r);if(a==null)return e;{const l=eu({},e,a);return l.path=r,n.resolve(l)}}else return n.resolve(e)}const y6=new Set(["prefix_and_default","prefix_except_default"]);function C6(n){const{currentLocale:e,defaultLocale:t,strategy:i}=n;return!(e===t&&y6.has(i))&&i!=="no_prefix"}const Yv=C6;function Po(n){const e=this.router,{routesNameSeparator:t}=Oa(e,this),i=n!=null?ui(n)?Te(n):n:this.route;return i==null||!i.name?void 0:Xv(i.name).split(t)[0]}function Yf(n,e){const t=iu.call(this,n,e);return t==null?"":t.redirectedFrom||t.fullPath}function Qf(n,e){const t=iu.call(this,n,e);return t??void 0}function k6(n,e){const t=iu.call(this,n,e);return t??void 0}function iu(n,e){const t=this.router,i=this.i18n,s=e||nu(i),{routesNameSeparator:o,defaultLocale:r,defaultLocaleRouteNameSuffix:a,strategy:l,trailingSlash:c,prefixable:u}=Oa(t,this);let d=n;Io(n)&&(d[0]==="/"?d={path:n}:d={name:n});let h=eu({},d);if(h.path&&!h.name){let f=null;try{f=v6(t,h,l,s)}catch{}const m=f,g=Po.call(this,m);Io(g)?(h={name:Jp(g,s,{defaultLocale:r,strategy:l,routesNameSeparator:o,defaultLocaleRouteNameSuffix:a}),params:m.params,query:m.query,hash:m.hash},h.state=m.state):(u({currentLocale:s,defaultLocale:r,strategy:l})&&(h.path=`/${s}${h.path}`),h.path=c?n6(h.path,!0):t6(h.path,!0))}else!h.name&&!h.path&&(h.name=Po.call(this,this.route)),h.name=Jp(h.name,s,{defaultLocale:r,strategy:l,routesNameSeparator:o,defaultLocaleRouteNameSuffix:a});try{const f=t.resolve(h);return(XI?f.name:f.route.name)?f:t.resolve(n)}catch(f){if(f.type===1)return null}}const Qv=n=>n;function E6(n,e){const t={};if(e===Gv)return t;const i=n.meta;return ui(i)?i.value[e]||t:i[e]||t}function na(n){const e=this.route,t=Po.call(this,e);if(!t)return"";const{switchLocalePathIntercepter:i,dynamicRouteParamsKey:s}=Oa(this.router,this),{params:o,...r}=e,a=E6(e,s)[n]||{},l={name:t,params:{...o,...a}},c=eu({},r,l);let u=Yf.call(this,c,n);return u=i(u,n),u}function ey({addDirAttribute:n=!1,addSeoAttributes:e=!1,identifierAttribute:t="hid"}={}){const i=this.router,s=this.i18n,{defaultDirection:o}=Oa(i,this),r={htmlAttrs:{},link:[],meta:[]};if(s.locales==null||s.baseUrl==null)return r;const a=nu(s),l=o6(s),c=s6(l).find(h=>h.code===a)||{code:a},u=c.iso,d=c.dir||o;return n&&(r.htmlAttrs.dir=d),e&&a&&s.locales&&(u&&(r.htmlAttrs.lang=u),T6.call(this,l,Te(s.baseUrl),r.link,t),S6.call(this,Te(s.baseUrl),r.link,r.meta,t,e),A6(c,u,r.meta,t),I6(l,u,r.meta,t)),r}function T6(n,e,t,i){const s=this.router,{defaultLocale:o,strategy:r}=Oa(s,this);if(r===qv.NO_PREFIX)return;const a=new Map;for(const l of n){const c=l.iso;if(!c){Zv("Locale ISO code is required to generate alternate link");continue}const[u,d]=c.split("-");u&&d&&(l.isCatchallLocale||!a.has(u))&&a.set(u,l),a.set(c,l)}for(const[l,c]of a.entries()){const u=na.call(this,c.code);u&&t.push({[i]:`i18n-alt-${l}`,rel:"alternate",href:yh(u,e),hreflang:l})}if(o){const l=na.call(this,o);l&&t.push({[i]:"i18n-xd",rel:"alternate",href:yh(l,e),hreflang:"x-default"})}}function S6(n,e,t,i,s){const o=this.route,r=Qf.call(this,{...o,name:Po.call(this,o)});if(r){let a=yh(r.path,n);const l=Xf(s)&&s.canonicalQueries||[];if(l.length){const c=r.query,u=new URLSearchParams;for(const h of l)if(h in c){const f=c[h];Kv(f)?f.forEach(m=>u.append(h,m||"")):u.append(h,f||"")}const d=u.toString();d&&(a=`${a}?${d}`)}e.push({[i]:"i18n-can",rel:"canonical",href:a}),t.push({[i]:"i18n-og-url",property:"og:url",content:a})}}function A6(n,e,t,i){n&&e&&t.push({[i]:"i18n-og",property:"og:locale",content:ty(e)})}function I6(n,e,t,i){const s=n.filter(o=>{const r=o.iso;return r&&r!==e});if(s.length){const o=s.map(r=>({[i]:`i18n-og-alt-${r.iso}`,property:"og:locale:alternate",content:ty(r.iso)}));t.push(...o)}}function ty(n){return(n||"").replace(/-/g,"_")}function yh(n,e){return n.match(/^https?:\/\//)?n:e+n}function P6(n,e){const{router:t,route:i,i18n:s,defaultLocale:o,strategy:r,defaultLocaleRouteNameSuffix:a,trailingSlash:l,routesNameSeparator:c}=n;return function(...u){return Reflect.apply(e,{router:t,route:i,i18n:s,defaultLocale:o,strategy:r,defaultLocaleRouteNameSuffix:a,trailingSlash:l,routesNameSeparator:c},u)}}function x6({router:n=SI(),route:e=J_(),i18n:t=Qc(),defaultLocale:i=void 0,defaultLocaleRouteNameSuffix:s=void 0,routesNameSeparator:o=void 0,strategy:r=void 0,trailingSlash:a=void 0}={}){return P6({router:n,route:e,i18n:t,defaultLocale:i,defaultLocaleRouteNameSuffix:s,routesNameSeparator:o,strategy:r,trailingSlash:a},na)}const Zs=["en"],R6={},L6=async n=>{var s;const e=Object({});e.experimental=Object({jsTsFormatResource:!1}),e.compilation=Object({jit:!0,strictMessage:!0,escapeHtml:!1});const i=await(async o=>{const r=await o().then(a=>a.default||a);return typeof r=="object"?r:typeof r=="function"?await r():{}})(()=>A(()=>import("./CejtcvUI.js"),[],import.meta.url));return e.vueI18n=i,(s=e.vueI18n).messages??(s.messages={}),e.locales=["en"],e.defaultLocale="en",e.defaultDirection="ltr",e.routesNameSeparator="___",e.trailingSlash=!1,e.defaultLocaleRouteNameSuffix="default",e.strategy="prefix_except_default",e.lazy=!1,e.langDir=null,e.rootRedirect=null,e.detectBrowserLanguage=Object({alwaysRedirect:!1,cookieCrossOrigin:!1,cookieDomain:null,cookieKey:"i18n_redirected",cookieSecure:!1,fallbackLocale:"",redirectOn:"root",useCookie:!0}),e.differentDomains=!1,e.baseUrl="",e.dynamicRouteParams=!1,e.customRoutes="page",e.pages=Object({}),e.skipSettingLocaleOnNavigate=!1,e.types="composition",e.debug=!1,e},gn=Object({experimental:Object({jsTsFormatResource:!1}),compilation:Object({jit:!0,strictMessage:!0,escapeHtml:!1}),vueI18n:"",locales:[],defaultLocale:"",defaultDirection:"ltr",routesNameSeparator:"___",trailingSlash:!1,defaultLocaleRouteNameSuffix:"default",strategy:"prefix_except_default",lazy:!1,langDir:null,rootRedirect:null,detectBrowserLanguage:Object({alwaysRedirect:!1,cookieCrossOrigin:!1,cookieDomain:null,cookieKey:"i18n_redirected",cookieSecure:!1,fallbackLocale:"",redirectOn:"root",useCookie:!0}),differentDomains:!1,baseUrl:"",dynamicRouteParams:!1,customRoutes:"page",pages:Object({}),skipSettingLocaleOnNavigate:!1,types:"composition",debug:!1}),Ch=Object({__normalizedLocales:[Object({code:"en",iso:"en"})]}),ny="@nuxtjs/i18n",V6=!1;/*! js-cookie v3.0.5 | MIT */function rl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var O6={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function kh(n,e){function t(s,o,r){if(!(typeof document>"u")){r=rl({},e,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in r)r[l]&&(a+="; "+l,r[l]!==!0&&(a+="="+r[l].split(";")[0]));return document.cookie=s+"="+n.write(o,s)+a}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var o=document.cookie?document.cookie.split("; "):[],r={},a=0;a<o.length;a++){var l=o[a].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(r[u]=n.read(c,u),s===u)break}catch{}}return s?r[s]:r}}return Object.create({set:t,get:i,remove:function(s,o){t(s,"",rl({},o,{expires:-1}))},withAttributes:function(s){return kh(this.converter,rl({},this.attributes,s))},withConverter:function(s){return kh(rl({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var iy=kh(O6,{path:"/"});function uc(n){return ny+" "+n}function M6(n){return n!=null&&("__VUE_I18N_BRIDGE__"in n||"_sync"in n)}function su(n,e,...t){const i=Ls(n)?n.global:n,[s,o]=[i,i[e]];return Reflect.apply(o,s,[...t])}function B6(n,e){const t=Ls(n)?n.global:n;return Ko(t)?t[e].value:(Va(t)||Gi(t)||M6(t),t[e])}function Qp(n,e,t){Object.defineProperty(n,e,{get:()=>t})}function N6(n,e){return function(){return Reflect.apply(e,{i18n:n.$i18n,getRouteBaseName:n.$getRouteBaseName,localePath:n.$localePath,localeRoute:n.$localeRoute,switchLocalePath:n.$switchLocalePath,localeHead:n.$localeHead,route:n.$router.currentRoute.value,router:n.$router},arguments)}}function Eh(n,e,t){for(const i in n)Je(n[i])?(Je(e[i])||(e[i]=[]),n[i].forEach((s,o)=>{if(!e[i][o]){const r={};Eh(s,r),e[i].push(r)}})):ge(n[i])?(ge(e[i])||(e[i]={}),Eh(n[i],e[i])):e[i]=n[i]}async function eb(n,e,t){var o,r;const i=(o=n.$config.public)==null?void 0:o.i18n;let s=null;try{const a=await e().then(l=>l.default||l);it(a)?(r=i.experimental)!=null&&r.jsTsFormatResource?s=await a(t):console.warn(uc("Not support js / ts extension format as default. you can do enable with `i18n.experimental.jsTsFormatResource: true` (experimental)")):s=a}catch(a){console.error(uc("Failed locale loading: "+a.message))}return s}const al=[],Js=new Map;async function dc(n,e,t){if(al.includes(e))al.includes(e)||console.warn(uc("Could not find "+e+" locale code in localeMessages"));else{const i=R6[e];if(i!=null){if(i.length===1){const{key:s,load:o}=i[0];let r=null;Js.has(s)?r=Js.get(s):(r=await eb(n,o,e),r!=null&&Js.set(s,r)),r!=null&&(t(e,r),al.push(e))}else if(i.length>1){const s={};for(const{key:o,load:r}of i){let a=null;Js.has(o)?a=Js.get(o):(a=await eb(n,r,e),a!=null&&Js.set(o,a)),a!=null&&Eh(a,s)}t(e,s),al.push(e)}}}}function sy(n,e){let t;return navigator.languages&&(t=d6(n.__normalizedLocales,navigator.languages)),t}function em(n,{useCookie:e=gn.detectBrowserLanguage.useCookie,cookieKey:t=gn.detectBrowserLanguage.cookieKey,localeCodes:i=[]}={}){if(e){let s;if(s=iy.get(t),s&&i.includes(s))return s}}function D6(n,e,{useCookie:t=gn.detectBrowserLanguage.useCookie,cookieKey:i=gn.detectBrowserLanguage.cookieKey,cookieDomain:s=gn.detectBrowserLanguage.cookieDomain,cookieSecure:o=gn.detectBrowserLanguage.cookieSecure,cookieCrossOrigin:r=gn.detectBrowserLanguage.cookieCrossOrigin}={}){if(!t)return;const a=new Date,l={expires:new Date(a.setDate(a.getDate()+365)),path:"/",sameSite:r?"none":"lax",secure:r||o};s&&(l.domain=s),iy.set(i,n,l)}const F6={locale:"",stat:!1,reason:"unknown",from:"unknown"};function z6(n,e,t,i,s,o=[],r=""){const{strategy:a}=t,{ssg:l,callType:c,firstAccess:u}=s;if(!u)return{locale:"",stat:!1,reason:"first_access_only"};const{redirectOn:d,alwaysRedirect:h,useCookie:f,fallbackLocale:m}=t.detectBrowserLanguage,g=G(n)?n:n.path;if(a!=="no_prefix"){if(d==="root"){if(g!=="/")return{locale:"",stat:!1,reason:"not_redirect_on_root"}}else if(d==="no prefix"&&!h&&g.match(vh(o)))return{locale:"",stat:!1,reason:"not_redirect_on_no_prefix"}}let b="unknown",p,w;f&&(w=p=em(e,{...t.detectBrowserLanguage,localeCodes:o}),b="cookie"),w||(w=sy(i),b="navigator_or_header");const E=w||m;!w&&m&&(b="fallback");const C=r||t.vueI18n.locale;if(E&&(!f||h||!p)){if(a==="no_prefix")return{locale:E,stat:!0,from:b};if(c==="setup"&&E!==C)return{locale:E,stat:!0,from:b};if(h){const T=g==="/",k=d==="all",S=d==="no prefix"&&!g.match(vh(o));if(T||k||S)return{locale:E,stat:!0,from:b}}}return l==="ssg_setup"&&E?{locale:E,stat:!0,from:b}:(b==="navigator_or_header"||b==="cookie")&&E?{locale:E,stat:!0,from:b}:{locale:"",stat:!1,reason:"not_found_match"}}function H6(){let n;return n=window.location.host,n}function $6(n){let e=H6()||"";if(e){const t=n.find(i=>i.domain===e);if(t)return t.code;e=""}return e}function oy(n,e,t){const i=e.find(s=>s.code===n);if(i&&i.domain){if(es(i.domain))return i.domain;let s;return s=window.location.protocol.split(":")[0],s+"://"+i.domain}console.warn(uc("Could not find domain name for locale "+n))}function U6(n,e){return su(n,"setLocaleCookie",e)}function W6(n,e,t){return su(n,"mergeLocaleMessage",e,t)}function j6(n,e,t,i,s){return su(n,"onBeforeLanguageSwitch",e,t,i,s)}function q6(n,e,t){return su(n,"onLanguageSwitched",e,t)}function ry(n,e){let t=[];if(Je(n))t=n;else if(ge(n)){const i=[...e,"default"];for(const s of i)n[s]&&(t=[...t,...n[s].filter(Boolean)])}else G(n)&&e.every(i=>i!==n)&&t.push(n);return t}async function G6(n,e,t){const{defaultLocale:i,initialLocale:s,localeCodes:o,fallbackLocale:r,langDir:a,lazy:l}=t,c=(u,d)=>{const h=e[u]||{};e[u]={...h,...d}};if(a){if(l&&r){const d=ry(r,[i,s]);await Promise.all(d.map(h=>dc(n,h,c)))}const u=l?[...new Set().add(i).add(s)]:o;await Promise.all(u.map(d=>dc(n,d,c)))}return e}async function tb(n,e,t,{useCookie:i=gn.detectBrowserLanguage.useCookie,skipSettingLocaleOnNavigate:s=gn.skipSettingLocaleOnNavigate,differentDomains:o=gn.differentDomains,initial:r=!1,lazy:a=!1,langDir:l=null}={}){let c=!1;const u=nu(t);if(!n)return[c,u];if(!r&&o)return[c,u];if(u===n)return[c,u];const d=await j6(t,u,n,r,e),h=r6(t);if(d&&h&&h.includes(d)){if(d===u)return[c,u];n=d}if(l){const f=B6(t,"fallbackLocale");if(a){const m=(g,b)=>W6(t,g,b);if(f){const g=ry(f,[n]);await Promise.all(g.map(b=>dc(e,b,m)))}await dc(e,n,m)}}return s?[c,u]:(i&&U6(t,n),Jv(t,n),await q6(t,u,n),c=!0,[c,u])}function nb(n,e,t,i,s,o,r,a=[]){const{strategy:l,defaultLocale:c,differentDomains:u}=i,d=it(s)?s():s,{locale:h,stat:f,reason:m,from:g}=i.detectBrowserLanguage?z6(n,e,i,Ch,o,a,d):F6;if(m==="detect_ignore_on_ssg")return d;if((g==="navigator_or_header"||g==="cookie"||g==="fallback")&&h)return h;let b=h;return b||(u?b=$6(r):l!=="no_prefix"?b=t(n):i.detectBrowserLanguage||(b=d)),!b&&i.detectBrowserLanguage&&i.detectBrowserLanguage.useCookie&&(b=em(e,{...i.detectBrowserLanguage,localeCodes:a})||""),b||(b=c||""),b}function ib(n,e,t,i,s){const{strategy:o,differentDomains:r}=s;let a="";if(!r&&o!=="no_prefix"&&o!=="prefix_and_default"&&i(n.to)!==t){const{fullPath:l}=n.to,c=e.$switchLocalePath(t)||e.$localePath(l,t);G(c)&&c&&!h_(c,l)&&!c.startsWith("//")&&(a=n.from&&n.from.fullPath===c?"":c)}if(r||V6){const c=x6({i18n:ta(e.$i18n),route:n.to,router:e.$router})(t);G(c)&&(a=c)}return a}function K6(n){return ge(n)&&"path"in n&&"statusCode"in n}const Z6=()=>Gc(ny+":redirect",()=>"");function sb(n,e){return S_(n,{redirectCode:e})}async function ob(n,{status:e=301,rootRedirect:t=gn.rootRedirect,differentDomains:i=gn.differentDomains,skipSettingLocaleOnNavigate:s=gn.skipSettingLocaleOnNavigate,enableNavigate:o=!1}={}){const{i18n:r,locale:a,route:l}=n;let{redirectPath:c}=n;if(l.path==="/"&&t)return G(t)?c="/"+t:K6(t)&&(c="/"+t.path,e=t.statusCode),sb(c,e);if(!(s&&(r.__pendingLocale=a,r.__pendingLocalePromise=new Promise(u=>{r.__resolvePendingLocalePromise=u}),!o))){if(i){const u=Z6();u.value!==c&&(u.value="",window.location.assign(c))}else if(c)return sb(c,e)}}function J6(n,e){Qp(n,"$i18n",e.global);for(const t of[["getRouteBaseName",Po],["localePath",Yf],["localeRoute",Qf],["switchLocalePath",na],["localeHead",ey]])Qp(n,"$"+t[0],N6(n,t[1]))}function X6(n){return e=>Yv(e)&&!n}function Y6(n,e,t){return(i,s)=>{if(n){const o=oy(s,e);return o?zc(o,i):i}else return Qv(i)}}function Q6(n,e){return t=>{var l,c;if(it(n))return n(t);const{differentDomains:i,localeCodeLoader:s,normalizedLocales:o}=e,r=it(s)?s():s;if(i&&r){const u=oy(r,o,e.nuxt);if(u)return u}const a=(c=(l=t.$config)==null?void 0:l.public)==null?void 0:c.i18n;return a!=null&&a.baseUrl?a.baseUrl:n}}const eV=rt(async n=>{let e,t;const i=Nn(),s=Pa(),{vueApp:o}=n,r=n,a=([e,t]=Gn(()=>L6()),e=await e,t(),e),l=a.detectBrowserLanguage&&a.detectBrowserLanguage.useCookie,{__normalizedLocales:c}=Ch,{defaultLocale:u,differentDomains:d,skipSettingLocaleOnNavigate:h,lazy:f,langDir:m,routesNameSeparator:g,defaultLocaleRouteNameSuffix:b,strategy:p,rootRedirect:w}=a;a.baseUrl=Q6(a.baseUrl,{differentDomains:d,nuxt:r,localeCodeLoader:u,normalizedLocales:c});const E=w6(Zs,g,b),C=a.vueI18n;C.messages=C.messages||{},C.fallbackLocale=C.fallbackLocale??!1,p6(i,{...a,dynamicRouteParamsKey:"nuxtI18n",switchLocalePathIntercepter:Y6(d,c),prefixable:X6(d)});const T=V=>V||C.locale||"en-US";let k=nb(s,n.ssrContext,E,a,T(u),{ssg:"normal",callType:"setup",firstAccess:!0},c,Zs);C.messages=([e,t]=Gn(()=>G6(r,C.messages,{...a,initialLocale:k,fallbackLocale:C.fallbackLocale,localeCodes:Zs})),e=await e,t(),e),k=T(k);const S=OL({...C,locale:k});let x=!0;const N=V=>k!==V&&x;h6(S,{locales:a.locales,localeCodes:Zs,baseUrl:a.baseUrl,context:r,hooks:{onExtendComposer(V){V.strategy=p,V.localeProperties=be(()=>c.find(K=>K.code===V.locale.value)||{code:V.locale.value}),V.setLocale=async K=>{const ce=N(K),[Ce]=await tb(K,r,S,{useCookie:l,differentDomains:d,initial:ce,skipSettingLocaleOnNavigate:h,lazy:f,langDir:m});Ce&&ce&&(x=!1);const re=ib({to:s},r,K,E,a);await ob({i18n:S,redirectPath:re,locale:K,route:s},{differentDomains:d,skipSettingLocaleOnNavigate:h,rootRedirect:w,enableNavigate:!0})},V.differentDomains=d,V.defaultLocale=u,V.getBrowserLocale=()=>sy(Ch,n.ssrContext),V.getLocaleCookie=()=>em(n.ssrContext,{...a.detectBrowserLanguage,localeCodes:Zs}),V.setLocaleCookie=K=>D6(K,n.ssrContext,a.detectBrowserLanguage||void 0),V.onBeforeLanguageSwitch=(K,ce,Ce,re)=>n.callHook("i18n:beforeLocaleSwitch",{oldLocale:K,newLocale:ce,initialSetup:Ce,context:re}),V.onLanguageSwitched=(K,ce)=>n.callHook("i18n:localeSwitched",{oldLocale:K,newLocale:ce}),V.finalizePendingLocaleChange=async()=>{S.__pendingLocale&&(Jv(S,S.__pendingLocale),S.__resolvePendingLocalePromise&&await S.__resolvePendingLocalePromise(),S.__pendingLocale=void 0)},V.waitForPendingLocaleChange=async()=>{S.__pendingLocale&&S.__pendingLocalePromise&&await S.__pendingLocalePromise}},onExtendExportedGlobal(V){return{strategy:{get(){return V.strategy}},localeProperties:{get(){return V.localeProperties.value}},setLocale:{get(){return async K=>Reflect.apply(V.setLocale,V,[K])}},differentDomains:{get(){return V.differentDomains}},defaultLocale:{get(){return V.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(V.getBrowserLocale,V,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(V.getLocaleCookie,V,[])}},setLocaleCookie:{get(){return K=>Reflect.apply(V.setLocaleCookie,V,[K])}},onBeforeLanguageSwitch:{get(){return(K,ce,Ce,re)=>Reflect.apply(V.onBeforeLanguageSwitch,V,[K,ce,Ce,re])}},onLanguageSwitched:{get(){return(K,ce)=>Reflect.apply(V.onLanguageSwitched,V,[K,ce])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(V.finalizePendingLocaleChange,V,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(V.waitForPendingLocaleChange,V,[])}}}},onExtendVueI18n(V){return{strategy:{get(){return V.strategy}},localeProperties:{get(){return V.localeProperties.value}},setLocale:{get(){return async K=>Reflect.apply(V.setLocale,V,[K])}},differentDomains:{get(){return V.differentDomains}},defaultLocale:{get(){return V.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(V.getBrowserLocale,V,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(V.getLocaleCookie,V,[])}},setLocaleCookie:{get(){return K=>Reflect.apply(V.setLocaleCookie,V,[K])}},onBeforeLanguageSwitch:{get(){return(K,ce,Ce,re)=>Reflect.apply(V.onBeforeLanguageSwitch,V,[K,ce,Ce,re])}},onLanguageSwitched:{get(){return(K,ce)=>Reflect.apply(V.onLanguageSwitched,V,[K,ce])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(V.finalizePendingLocaleChange,V,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(V.waitForPendingLocaleChange,V,[])}}}}}});const Y={__composerExtend:V=>{const K=ta(S);V.strategy=K.strategy,V.localeProperties=be(()=>K.localeProperties.value),V.setLocale=K.setLocale,V.differentDomains=K.differentDomains,V.getBrowserLocale=K.getBrowserLocale,V.getLocaleCookie=K.getLocaleCookie,V.setLocaleCookie=K.setLocaleCookie,V.onBeforeLanguageSwitch=K.onBeforeLanguageSwitch,V.onLanguageSwitched=K.onLanguageSwitched,V.finalizePendingLocaleChange=K.finalizePendingLocaleChange,V.waitForPendingLocaleChange=K.waitForPendingLocaleChange}};o.use(S,Y),J6(r,S);let le=0;hS("locale-changing",async(V,K)=>{let ce,Ce;const re=nb(V,n.ssrContext,E,a,()=>nu(S)||T(u),{ssg:"normal",callType:"routing",firstAccess:le===0},c,Zs),He=N(re),[vt]=([ce,Ce]=Gn(()=>tb(re,r,S,{useCookie:l,differentDomains:d,initial:He,skipSettingLocaleOnNavigate:h,lazy:f,langDir:m})),ce=await ce,Ce(),ce);vt&&He&&(x=!1);const yt=ib({to:V,from:K},r,re,E,a);return le++,ob({i18n:S,redirectPath:yt,locale:re,route:V},{differentDomains:d,skipSettingLocaleOnNavigate:h,rootRedirect:w})},{global:!0})}),tV=rt({name:"nuxt:chunk-reload",setup(n){const e=Nn(),t=Aa(),i=new Set;e.beforeEach(()=>{i.clear()}),n.hook("app:chunkError",({error:o})=>{i.add(o)});function s(o){const a="href"in o&&o.href[0]==="#"?t.app.baseURL+o.href:zc(t.app.baseURL,o.fullPath);ZI({path:a,persistState:!0})}n.hook("app:manifest:update",()=>{e.beforeResolve(s)}),e.onError((o,r)=>{i.has(o)&&s(r)})}});var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nV(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var ay={exports:{}};const iV=nV(_T);/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(n,e){(function(t,i){n.exports=i(iV)})(self,t=>(()=>{var i={976:a=>{a.exports=t}},s={};function o(a){var l=s[a];if(l!==void 0)return l.exports;var c=s[a]={exports:{}};return i[a](c,c.exports,o),c.exports}o.d=(a,l)=>{for(var c in l)o.o(l,c)&&!o.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},o.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l);var r={};return(()=>{o.d(r,{default:()=>hi});var a=o(976);const l=function(F){var ne=typeof F;return F!=null&&(ne=="object"||ne=="function")},c=typeof ll=="object"&&ll&&ll.Object===Object&&ll;var u=typeof self=="object"&&self&&self.Object===Object&&self;const d=c||u||Function("return this")(),h=function(){return d.Date.now()};var f=/\s/;const m=function(F){for(var ne=F.length;ne--&&f.test(F.charAt(ne)););return ne};var g=/^\s+/;const b=function(F){return F&&F.slice(0,m(F)+1).replace(g,"")},p=d.Symbol;var w=Object.prototype,E=w.hasOwnProperty,C=w.toString,T=p?p.toStringTag:void 0;const k=function(F){var ne=E.call(F,T),Me=F[T];try{F[T]=void 0;var We=!0}catch{}var M=C.call(F);return We&&(ne?F[T]=Me:delete F[T]),M};var S=Object.prototype.toString;const x=function(F){return S.call(F)};var N=p?p.toStringTag:void 0;const Y=function(F){return F==null?F===void 0?"[object Undefined]":"[object Null]":N&&N in Object(F)?k(F):x(F)},le=function(F){return F!=null&&typeof F=="object"},V=function(F){return typeof F=="symbol"||le(F)&&Y(F)=="[object Symbol]"};var K=/^[-+]0x[0-9a-f]+$/i,ce=/^0b[01]+$/i,Ce=/^0o[0-7]+$/i,re=parseInt;const He=function(F){if(typeof F=="number")return F;if(V(F))return NaN;if(l(F)){var ne=typeof F.valueOf=="function"?F.valueOf():F;F=l(ne)?ne+"":ne}if(typeof F!="string")return F===0?F:+F;F=b(F);var Me=ce.test(F);return Me||Ce.test(F)?re(F.slice(2),Me?2:8):K.test(F)?NaN:+F};var vt=Math.max,yt=Math.min;const An=function(F,ne,Me){var We,M,W,z,q,oe,_e=0,_=!1,y=!1,R=!0;if(typeof F!="function")throw new TypeError("Expected a function");function H(L){var D=We,St=M;return We=M=void 0,_e=L,z=F.apply(St,D)}function J(L){return _e=L,q=setTimeout(Tt,ne),_?H(L):z}function de(L){var D=L-oe;return oe===void 0||D>=ne||D<0||y&&L-_e>=W}function Tt(){var L=h();if(de(L))return In(L);q=setTimeout(Tt,function(D){var St=ne-(D-oe);return y?yt(St,W-(D-_e)):St}(L))}function In(L){return q=void 0,R&&We?H(L):(We=M=void 0,z)}function je(){var L=h(),D=de(L);if(We=arguments,M=this,oe=L,D){if(q===void 0)return J(oe);if(y)return clearTimeout(q),q=setTimeout(Tt,ne),H(oe)}return q===void 0&&(q=setTimeout(Tt,ne)),z}return ne=He(ne)||0,l(Me)&&(_=!!Me.leading,W=(y="maxWait"in Me)?vt(He(Me.maxWait)||0,ne):W,R="trailing"in Me?!!Me.trailing:R),je.cancel=function(){q!==void 0&&clearTimeout(q),_e=0,We=oe=M=q=void 0},je.flush=function(){return q===void 0?z:In(h())},je},st=(0,a.defineComponent)({name:"Ckeditor",model:{prop:"modelValue",event:"update:modelValue"},props:{editor:{type:Function,required:!0},config:{type:Object,default:()=>({})},modelValue:{type:String,default:""},tagName:{type:String,default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},emits:["ready","destroy","blur","focus","input","update:modelValue"],data:()=>({instance:null,lastEditorData:null}),watch:{modelValue(F){this.instance&&F!==this.lastEditorData&&this.instance.data.set(F)},disabled(F){F?this.instance.enableReadOnlyMode("Integration Sample"):this.instance.disableReadOnlyMode("Integration Sample")}},created(){const{CKEDITOR_VERSION:F}=window;if(F){const[ne]=F.split(".").map(Number);ne<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')},mounted(){const F=Object.assign({},this.config);this.modelValue&&(F.initialData=this.modelValue),this.editor.create(this.$el,F).then(ne=>{this.instance=(0,a.markRaw)(ne),this.setUpEditorEvents(),this.modelValue!==F.initialData&&ne.data.set(this.modelValue),this.disabled&&ne.enableReadOnlyMode("Integration Sample"),this.$emit("ready",ne)}).catch(ne=>{console.error(ne)})},beforeUnmount(){this.instance&&(this.instance.destroy(),this.instance=null),this.$emit("destroy",this.instance)},methods:{setUpEditorEvents(){const F=this.instance,ne=An(Me=>{if(this.disableTwoWayDataBinding)return;const We=this.lastEditorData=F.data.get();this.$emit("update:modelValue",We,Me,F),this.$emit("input",We,Me,F)},300,{leading:!0});F.model.document.on("change:data",ne),F.editing.view.document.on("focus",Me=>{this.$emit("focus",Me,F)}),F.editing.view.document.on("blur",Me=>{this.$emit("blur",Me,F)})}},render(){return(0,a.h)(this.tagName)}});if(!a.version||!a.version.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const hi={install(F){F.component("Ckeditor",st)},component:st}})(),r=r.default})())})(ay);var sV=ay.exports;const oV=tm(sV);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zo({emitter:n,activator:e,callback:t,contextElements:i}){n.listenTo(document,"mousedown",(s,o)=>{if(!e())return;const r=typeof o.composedPath=="function"?o.composedPath():[],a=typeof i=="function"?i():i;for(const l of a)if(l.contains(o.target)||r.includes(l))return;t()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nm(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jo({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function im({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:s}){const o=typeof i=="number"?()=>i:i;n.set("arrowright",r((c,u)=>s==="rtl"?l(c,u.length):a(c,u.length))),n.set("arrowleft",r((c,u)=>s==="rtl"?a(c,u.length):l(c,u.length))),n.set("arrowup",r((c,u)=>{let d=c-o();return d<0&&(d=c+o()*Math.floor(u.length/o()),d>u.length-1&&(d-=o())),d})),n.set("arrowdown",r((c,u)=>{let d=c+o();return d>u.length-1&&(d=c%o()),d}));function r(c){return u=>{const d=t.find(m=>m.element===e.focusedElement),h=t.getIndex(d),f=c(h,t);t.get(f).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rV(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const ls=rV(),ee={isMac:ly(ls),isWindows:aV(ls),isGecko:lV(ls),isSafari:cV(ls),isiOS:uV(ls),isAndroid:dV(ls),isBlink:hV(ls),features:{isRegExpUnicodePropertySupported:fV()}};function ly(n){return n.indexOf("macintosh")>-1}function aV(n){return n.indexOf("windows")>-1}function lV(n){return!!n.match(/gecko\/\d+/)}function cV(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function uV(n){return!!n.match(/iphone|ipad/i)||ly(n)&&navigator.maxTouchPoints>0}function dV(n){return n.indexOf("android")>-1}function hV(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function fV(){let n=!1;try{n="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cy(n,e,t,i){t=t||function(l,c){return l===c};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),r=mV(s,o,t);return i?pV(r,o.length):gV(o,r)}function mV(n,e,t){const i=rb(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=ab(n,i),o=ab(e,i),r=rb(s,o,t),a=n.length-r,l=e.length-r;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function rb(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function ab(n,e){return n.slice(e).reverse()}function gV(n,e){const t=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:o}=e;return o-i>0&&t.push({index:i,type:"insert",values:n.slice(i,o)}),s-i>0&&t.push({index:i+(o-i),type:"delete",howMany:s-i}),t}function pV(n,e){const{firstIndex:t,lastIndexOld:i,lastIndexNew:s}=n;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),s-t>0&&(o=o.concat(Array(s-t).fill("insert"))),i-t>0&&(o=o.concat(Array(i-t).fill("delete"))),s<e&&(o=o.concat(Array(e-s).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Nr(n,e,t){t=t||function(g,b){return g===b};const i=n.length,s=e.length;if(i>200||s>200||i+s>300)return Nr.fastDiff(n,e,t,!0);let o,r;if(s<i){const g=n;n=e,e=g,o="delete",r="insert"}else o="insert",r="delete";const a=n.length,l=e.length,c=l-a,u={},d={};function h(g){const b=(d[g-1]!==void 0?d[g-1]:-1)+1,p=d[g+1]!==void 0?d[g+1]:-1,w=b>p?-1:1;u[g+w]&&(u[g]=u[g+w].slice(0)),u[g]||(u[g]=[]),u[g].push(b>p?o:r);let E=Math.max(b,p),C=E-g;for(;C<a&&E<l&&t(n[C],e[E]);)C++,E++,u[g].push("equal");return E}let f=0,m;do{for(m=-f;m<c;m++)d[m]=h(m);for(m=c+f;m>c;m--)d[m]=h(m);d[c]=h(c),f++}while(d[c]!==l);return u[c].slice(1)}Nr.fastDiff=cy;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lb(){return function n(){n.called=!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ai{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=lb(),this.off=lb()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ct=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Nt(){const n=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,i=Math.random()*4294967296>>>0;return"e"+Ct[n>>0&255]+Ct[n>>8&255]+Ct[n>>16&255]+Ct[n>>24&255]+Ct[e>>0&255]+Ct[e>>8&255]+Ct[e>>16&255]+Ct[e>>24&255]+Ct[t>>0&255]+Ct[t>>8&255]+Ct[t>>16&255]+Ct[t>>24&255]+Ct[i>>0&255]+Ct[i>>8&255]+Ct[i>>16&255]+Ct[i>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bn={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bV(n,e){const t=bn.get(e.priority);for(let i=0;i<n.length;i++)if(bn.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wV="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class v extends Error{constructor(e,t,i){super(_V(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new v(e.message,t);throw i.stack=e.stack,i}}function ae(n,e){console.warn(...vV(n,e))}function uy(n){return`
Read more: ${wV}#error-${n}`}function _V(n,e){const t=new WeakSet,s=e?` ${JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=uy(n);return n+s+o}function vV(n,e){const t=uy(n);return e?[n,e,t]:[n,t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yV="41.3.1",CV=new Date(2024,3,16);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new v("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=yV;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ro=Symbol("listeningTo"),Th=Symbol("emitterId"),bi=Symbol("delegations"),dy=Pe(Object);function Pe(n){if(!n)return dy;class e extends n{on(i,s,o){this.listenTo(this,i,s,o)}once(i,s,o){let r=!1;const a=(l,...c)=>{r||(r=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,i,a,o)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,o,r={}){let a,l;this[ro]||(this[ro]={});const c=this[ro];nd(i)||hy(i);const u=nd(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(o),SV(this,i,s,o,r)}stopListening(i,s,o){const r=this[ro];let a=i&&nd(i);const l=r&&a?r[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!r||i&&!l||s&&!c))if(o)id(this,i,s,o),c.indexOf(o)!==-1&&(c.length===1?delete l.callbacks[s]:id(this,i,s,o));else if(c){for(;o=c.pop();)id(this,i,s,o);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(i,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[ro]}}fire(i,...s){try{const o=i instanceof Ai?i:new Ai(this,i),r=o.name;let a=my(this,r);if(o.path.push(this),a){const c=[o,...s];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),o.off.called&&(delete o.off.called,this._removeEventListener(r,a[u].callback)),!o.stop.called);u++);}const l=this[bi];if(l){const c=l.get(r),u=l.get("*");c&&cb(c,o,s),u&&cb(u,o,s)}return o.return}catch(o){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(o,this)}}delegate(...i){return{to:(s,o)=>{this[bi]||(this[bi]=new Map),i.forEach(r=>{const a=this[bi].get(r);a?a.set(s,o):this[bi].set(r,new Map([[s,o]]))})}}}stopDelegating(i,s){if(this[bi])if(!i)this[bi].clear();else if(!s)this[bi].delete(i);else{const o=this[bi].get(i);o&&o.delete(s)}}_addEventListener(i,s,o){TV(this,i);const r=Sh(this,i),a=bn.get(o.priority),l={callback:s,priority:a};for(const c of r)bV(c,l)}_removeEventListener(i,s){const o=Sh(this,i);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Pe[n]=dy.prototype[n]});function kV(n,e){const t=n[ro];return t&&t[e]?t[e].emitter:null}function hy(n,e){n[Th]||(n[Th]=e||Nt())}function nd(n){return n[Th]}function fy(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function EV(){return{callbacks:[],childEvents:[]}}function TV(n,e){const t=fy(n);if(t[e])return;let i=e,s=null;const o=[];for(;i!==""&&!t[i];)t[i]=EV(),o.push(t[i]),s&&t[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const r of o)r.callbacks=t[i].callbacks.slice();t[i].childEvents.push(s)}}function Sh(n,e){const t=fy(n)[e];if(!t)return[];let i=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const o=Sh(n,t.childEvents[s]);i=i.concat(o)}return i}function my(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?my(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function cb(n,e,t){for(let[i,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const o=new Ai(e.source,s);o.path=[...e.path],i.fire(o,...t)}}function SV(n,e,t,i,s){e._addEventListener?e._addEventListener(t,i,s):n._addEventListener.call(e,t,i,s)}function id(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}var gy=typeof global=="object"&&global&&global.Object===Object&&global,AV=typeof self=="object"&&self&&self.Object===Object&&self,Qn=gy||AV||Function("return this")(),li=Qn.Symbol,py=Object.prototype,IV=py.hasOwnProperty,PV=py.toString,fr=li?li.toStringTag:void 0;function xV(n){var e=IV.call(n,fr),t=n[fr];try{n[fr]=void 0;var i=!0}catch{}var s=PV.call(n);return i&&(e?n[fr]=t:delete n[fr]),s}var RV=Object.prototype,LV=RV.toString;function VV(n){return LV.call(n)}var OV="[object Null]",MV="[object Undefined]",ub=li?li.toStringTag:void 0;function ns(n){return n==null?n===void 0?MV:OV:ub&&ub in Object(n)?xV(n):VV(n)}function On(n){return n!=null&&typeof n=="object"}var BV="[object Symbol]";function ou(n){return typeof n=="symbol"||On(n)&&ns(n)==BV}function NV(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var kn=Array.isArray,DV=1/0,db=li?li.prototype:void 0,hb=db?db.toString:void 0;function by(n){if(typeof n=="string")return n;if(kn(n))return NV(n,by)+"";if(ou(n))return hb?hb.call(n):"";var e=n+"";return e=="0"&&1/n==-DV?"-0":e}var FV=/\s/;function zV(n){for(var e=n.length;e--&&FV.test(n.charAt(e)););return e}var HV=/^\s+/;function $V(n){return n&&n.slice(0,zV(n)+1).replace(HV,"")}function Re(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var fb=NaN,UV=/^[-+]0x[0-9a-f]+$/i,WV=/^0b[01]+$/i,jV=/^0o[0-7]+$/i,qV=parseInt;function mb(n){if(typeof n=="number")return n;if(ou(n))return fb;if(Re(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Re(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=$V(n);var t=WV.test(n);return t||jV.test(n)?qV(n.slice(2),t?2:8):UV.test(n)?fb:+n}function Hi(n){return n}var GV="[object AsyncFunction]",KV="[object Function]",ZV="[object GeneratorFunction]",JV="[object Proxy]";function Es(n){if(!Re(n))return!1;var e=ns(n);return e==KV||e==ZV||e==GV||e==JV}var sd=Qn["__core-js_shared__"],gb=function(){var n=/[^.]+$/.exec(sd&&sd.keys&&sd.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function XV(n){return!!gb&&gb in n}var YV=Function.prototype,QV=YV.toString;function Vs(n){if(n!=null){try{return QV.call(n)}catch{}try{return n+""}catch{}}return""}var eO=/[\\^$.*+?()[\]{}|]/g,tO=/^\[object .+?Constructor\]$/,nO=Function.prototype,iO=Object.prototype,sO=nO.toString,oO=iO.hasOwnProperty,rO=RegExp("^"+sO.call(oO).replace(eO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function aO(n){if(!Re(n)||XV(n))return!1;var e=Es(n)?rO:tO;return e.test(Vs(n))}function lO(n,e){return n==null?void 0:n[e]}function Os(n,e){var t=lO(n,e);return aO(t)?t:void 0}var Ah=Os(Qn,"WeakMap"),pb=Object.create,cO=function(){function n(){}return function(e){if(!Re(e))return{};if(pb)return pb(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function uO(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function wy(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var dO=800,hO=16,fO=Date.now;function mO(n){var e=0,t=0;return function(){var i=fO(),s=hO-(i-t);if(t=i,s>0){if(++e>=dO)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function gO(n){return function(){return n}}var hc=function(){try{var n=Os(Object,"defineProperty");return n({},"",{}),n}catch{}}(),pO=hc?function(n,e){return hc(n,"toString",{configurable:!0,enumerable:!1,value:gO(e),writable:!0})}:Hi,bO=mO(pO);function wO(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var _O=9007199254740991,vO=/^(?:0|[1-9]\d*)$/;function ru(n,e){var t=typeof n;return e=e??_O,!!e&&(t=="number"||t!="symbol"&&vO.test(n))&&n>-1&&n%1==0&&n<e}function au(n,e,t){e=="__proto__"&&hc?hc(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Ma(n,e){return n===e||n!==n&&e!==e}var yO=Object.prototype,CO=yO.hasOwnProperty;function sm(n,e,t){var i=n[e];(!(CO.call(n,e)&&Ma(i,t))||t===void 0&&!(e in n))&&au(n,e,t)}function Xo(n,e,t,i){var s=!t;t||(t={});for(var o=-1,r=e.length;++o<r;){var a=e[o],l=void 0;l===void 0&&(l=n[a]),s?au(t,a,l):sm(t,a,l)}return t}var bb=Math.max;function kO(n,e,t){return e=bb(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,o=bb(i.length-e,0),r=Array(o);++s<o;)r[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(r),uO(n,this,a)}}function EO(n,e){return bO(kO(n,e,Hi),n+"")}var TO=9007199254740991;function om(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=TO}function lu(n){return n!=null&&om(n.length)&&!Es(n)}function SO(n,e,t){if(!Re(t))return!1;var i=typeof e;return(i=="number"?lu(t)&&ru(e,t.length):i=="string"&&e in t)?Ma(t[e],n):!1}function rm(n){return EO(function(e,t){var i=-1,s=t.length,o=s>1?t[s-1]:void 0,r=s>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(s--,o):void 0,r&&SO(t[0],t[1],r)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,o)}return e})}var AO=Object.prototype;function am(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||AO;return n===t}function IO(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var PO="[object Arguments]";function wb(n){return On(n)&&ns(n)==PO}var _y=Object.prototype,xO=_y.hasOwnProperty,RO=_y.propertyIsEnumerable,fc=wb(function(){return arguments}())?wb:function(n){return On(n)&&xO.call(n,"callee")&&!RO.call(n,"callee")};function LO(){return!1}var vy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_b=vy&&typeof module=="object"&&module&&!module.nodeType&&module,VO=_b&&_b.exports===vy,vb=VO?Qn.Buffer:void 0,OO=vb?vb.isBuffer:void 0,ia=OO||LO,MO="[object Arguments]",BO="[object Array]",NO="[object Boolean]",DO="[object Date]",FO="[object Error]",zO="[object Function]",HO="[object Map]",$O="[object Number]",UO="[object Object]",WO="[object RegExp]",jO="[object Set]",qO="[object String]",GO="[object WeakMap]",KO="[object ArrayBuffer]",ZO="[object DataView]",JO="[object Float32Array]",XO="[object Float64Array]",YO="[object Int8Array]",QO="[object Int16Array]",e8="[object Int32Array]",t8="[object Uint8Array]",n8="[object Uint8ClampedArray]",i8="[object Uint16Array]",s8="[object Uint32Array]",Ne={};Ne[JO]=Ne[XO]=Ne[YO]=Ne[QO]=Ne[e8]=Ne[t8]=Ne[n8]=Ne[i8]=Ne[s8]=!0;Ne[MO]=Ne[BO]=Ne[KO]=Ne[NO]=Ne[ZO]=Ne[DO]=Ne[FO]=Ne[zO]=Ne[HO]=Ne[$O]=Ne[UO]=Ne[WO]=Ne[jO]=Ne[qO]=Ne[GO]=!1;function o8(n){return On(n)&&om(n.length)&&!!Ne[ns(n)]}function lm(n){return function(e){return n(e)}}var yy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Dr=yy&&typeof module=="object"&&module&&!module.nodeType&&module,r8=Dr&&Dr.exports===yy,od=r8&&gy.process,xo=function(){try{var n=Dr&&Dr.require&&Dr.require("util").types;return n||od&&od.binding&&od.binding("util")}catch{}}(),yb=xo&&xo.isTypedArray,cm=yb?lm(yb):o8,a8=Object.prototype,l8=a8.hasOwnProperty;function Cy(n,e){var t=kn(n),i=!t&&fc(n),s=!t&&!i&&ia(n),o=!t&&!i&&!s&&cm(n),r=t||i||s||o,a=r?IO(n.length,String):[],l=a.length;for(var c in n)(e||l8.call(n,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ru(c,l)))&&a.push(c);return a}function ky(n,e){return function(t){return n(e(t))}}var c8=ky(Object.keys,Object),u8=Object.prototype,d8=u8.hasOwnProperty;function h8(n){if(!am(n))return c8(n);var e=[];for(var t in Object(n))d8.call(n,t)&&t!="constructor"&&e.push(t);return e}function Ba(n){return lu(n)?Cy(n):h8(n)}function f8(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var m8=Object.prototype,g8=m8.hasOwnProperty;function p8(n){if(!Re(n))return f8(n);var e=am(n),t=[];for(var i in n)i=="constructor"&&(e||!g8.call(n,i))||t.push(i);return t}function Yo(n){return lu(n)?Cy(n,!0):p8(n)}var Ey=rm(function(n,e){Xo(e,Yo(e),n)}),b8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w8=/^\w*$/;function um(n,e){if(kn(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||ou(n)?!0:w8.test(n)||!b8.test(n)||e!=null&&n in Object(e)}var sa=Os(Object,"create");function _8(){this.__data__=sa?sa(null):{},this.size=0}function v8(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var y8="__lodash_hash_undefined__",C8=Object.prototype,k8=C8.hasOwnProperty;function E8(n){var e=this.__data__;if(sa){var t=e[n];return t===y8?void 0:t}return k8.call(e,n)?e[n]:void 0}var T8=Object.prototype,S8=T8.hasOwnProperty;function A8(n){var e=this.__data__;return sa?e[n]!==void 0:S8.call(e,n)}var I8="__lodash_hash_undefined__";function P8(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=sa&&e===void 0?I8:e,this}function Ts(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ts.prototype.clear=_8;Ts.prototype.delete=v8;Ts.prototype.get=E8;Ts.prototype.has=A8;Ts.prototype.set=P8;function x8(){this.__data__=[],this.size=0}function cu(n,e){for(var t=n.length;t--;)if(Ma(n[t][0],e))return t;return-1}var R8=Array.prototype,L8=R8.splice;function V8(n){var e=this.__data__,t=cu(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():L8.call(e,t,1),--this.size,!0}function O8(n){var e=this.__data__,t=cu(e,n);return t<0?void 0:e[t][1]}function M8(n){return cu(this.__data__,n)>-1}function B8(n,e){var t=this.__data__,i=cu(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Pi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Pi.prototype.clear=x8;Pi.prototype.delete=V8;Pi.prototype.get=O8;Pi.prototype.has=M8;Pi.prototype.set=B8;var oa=Os(Qn,"Map");function N8(){this.size=0,this.__data__={hash:new Ts,map:new(oa||Pi),string:new Ts}}function D8(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function uu(n,e){var t=n.__data__;return D8(e)?t[typeof e=="string"?"string":"hash"]:t.map}function F8(n){var e=uu(this,n).delete(n);return this.size-=e?1:0,e}function z8(n){return uu(this,n).get(n)}function H8(n){return uu(this,n).has(n)}function $8(n,e){var t=uu(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function xi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}xi.prototype.clear=N8;xi.prototype.delete=F8;xi.prototype.get=z8;xi.prototype.has=H8;xi.prototype.set=$8;var U8="Expected a function";function dm(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(U8);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],o=t.cache;if(o.has(s))return o.get(s);var r=n.apply(this,i);return t.cache=o.set(s,r)||o,r};return t.cache=new(dm.Cache||xi),t}dm.Cache=xi;var W8=500;function j8(n){var e=dm(n,function(i){return t.size===W8&&t.clear(),i}),t=e.cache;return e}var q8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G8=/\\(\\)?/g,K8=j8(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(q8,function(t,i,s,o){e.push(s?o.replace(G8,"$1"):i||t)}),e});function Na(n){return n==null?"":by(n)}function du(n,e){return kn(n)?n:um(n,e)?[n]:K8(Na(n))}var Z8=1/0;function Qo(n){if(typeof n=="string"||ou(n))return n;var e=n+"";return e=="0"&&1/n==-Z8?"-0":e}function hm(n,e){e=du(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Qo(e[t++])];return t&&t==i?n:void 0}function ra(n,e,t){var i=n==null?void 0:hm(n,e);return i===void 0?t:i}function Ty(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var fm=ky(Object.getPrototypeOf,Object),J8="[object Object]",X8=Function.prototype,Y8=Object.prototype,Sy=X8.toString,Q8=Y8.hasOwnProperty,eM=Sy.call(Object);function Lt(n){if(!On(n)||ns(n)!=J8)return!1;var e=fm(n);if(e===null)return!0;var t=Q8.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Sy.call(t)==eM}function Ay(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(s);++i<s;)o[i]=n[i+e];return o}function tM(n,e,t){var i=n.length;return t=t===void 0?i:t,Ay(n,e,t)}var nM="\\ud800-\\udfff",iM="\\u0300-\\u036f",sM="\\ufe20-\\ufe2f",oM="\\u20d0-\\u20ff",rM=iM+sM+oM,aM="\\ufe0e\\ufe0f",lM="\\u200d",cM=RegExp("["+lM+nM+rM+aM+"]");function Iy(n){return cM.test(n)}function uM(n){return n.split("")}var Py="\\ud800-\\udfff",dM="\\u0300-\\u036f",hM="\\ufe20-\\ufe2f",fM="\\u20d0-\\u20ff",mM=dM+hM+fM,gM="\\ufe0e\\ufe0f",pM="["+Py+"]",Ih="["+mM+"]",Ph="\\ud83c[\\udffb-\\udfff]",bM="(?:"+Ih+"|"+Ph+")",xy="[^"+Py+"]",Ry="(?:\\ud83c[\\udde6-\\uddff]){2}",Ly="[\\ud800-\\udbff][\\udc00-\\udfff]",wM="\\u200d",Vy=bM+"?",Oy="["+gM+"]?",_M="(?:"+wM+"(?:"+[xy,Ry,Ly].join("|")+")"+Oy+Vy+")*",vM=Oy+Vy+_M,yM="(?:"+[xy+Ih+"?",Ih,Ry,Ly,pM].join("|")+")",CM=RegExp(Ph+"(?="+Ph+")|"+yM+vM,"g");function kM(n){return n.match(CM)||[]}function EM(n){return Iy(n)?kM(n):uM(n)}function TM(n){return function(e){e=Na(e);var t=Iy(e)?EM(e):void 0,i=t?t[0]:e.charAt(0),s=t?tM(t,1).join(""):e.slice(1);return i[n]()+s}}var My=TM("toUpperCase");function SM(n,e,t,i){for(var s=-1,o=n==null?0:n.length;++s<o;)t=e(t,n[s],s,n);return t}function AM(n){return function(e){return n==null?void 0:n[e]}}var IM={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},PM=AM(IM),xM=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,RM="\\u0300-\\u036f",LM="\\ufe20-\\ufe2f",VM="\\u20d0-\\u20ff",OM=RM+LM+VM,MM="["+OM+"]",BM=RegExp(MM,"g");function NM(n){return n=Na(n),n&&n.replace(xM,PM).replace(BM,"")}var DM=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function FM(n){return n.match(DM)||[]}var zM=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function HM(n){return zM.test(n)}var By="\\ud800-\\udfff",$M="\\u0300-\\u036f",UM="\\ufe20-\\ufe2f",WM="\\u20d0-\\u20ff",jM=$M+UM+WM,Ny="\\u2700-\\u27bf",Dy="a-z\\xdf-\\xf6\\xf8-\\xff",qM="\\xac\\xb1\\xd7\\xf7",GM="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",KM="\\u2000-\\u206f",ZM=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fy="A-Z\\xc0-\\xd6\\xd8-\\xde",JM="\\ufe0e\\ufe0f",zy=qM+GM+KM+ZM,Hy="['’]",Cb="["+zy+"]",XM="["+jM+"]",$y="\\d+",YM="["+Ny+"]",Uy="["+Dy+"]",Wy="[^"+By+zy+$y+Ny+Dy+Fy+"]",QM="\\ud83c[\\udffb-\\udfff]",eB="(?:"+XM+"|"+QM+")",tB="[^"+By+"]",jy="(?:\\ud83c[\\udde6-\\uddff]){2}",qy="[\\ud800-\\udbff][\\udc00-\\udfff]",ao="["+Fy+"]",nB="\\u200d",kb="(?:"+Uy+"|"+Wy+")",iB="(?:"+ao+"|"+Wy+")",Eb="(?:"+Hy+"(?:d|ll|m|re|s|t|ve))?",Tb="(?:"+Hy+"(?:D|LL|M|RE|S|T|VE))?",Gy=eB+"?",Ky="["+JM+"]?",sB="(?:"+nB+"(?:"+[tB,jy,qy].join("|")+")"+Ky+Gy+")*",oB="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rB="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",aB=Ky+Gy+sB,lB="(?:"+[YM,jy,qy].join("|")+")"+aB,cB=RegExp([ao+"?"+Uy+"+"+Eb+"(?="+[Cb,ao,"$"].join("|")+")",iB+"+"+Tb+"(?="+[Cb,ao+kb,"$"].join("|")+")",ao+"?"+kb+"+"+Eb,ao+"+"+Tb,rB,oB,$y,lB].join("|"),"g");function uB(n){return n.match(cB)||[]}function dB(n,e,t){return n=Na(n),e=e,e===void 0?HM(n)?uB(n):FM(n):n.match(e)||[]}var hB="['’]",fB=RegExp(hB,"g");function mB(n){return function(e){return SM(dB(NM(e).replace(fB,"")),n,"")}}function gB(){this.__data__=new Pi,this.size=0}function pB(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function bB(n){return this.__data__.get(n)}function wB(n){return this.__data__.has(n)}var _B=200;function vB(n,e){var t=this.__data__;if(t instanceof Pi){var i=t.__data__;if(!oa||i.length<_B-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new xi(i)}return t.set(n,e),this.size=t.size,this}function Kn(n){var e=this.__data__=new Pi(n);this.size=e.size}Kn.prototype.clear=gB;Kn.prototype.delete=pB;Kn.prototype.get=bB;Kn.prototype.has=wB;Kn.prototype.set=vB;function yB(n,e){return n&&Xo(e,Ba(e),n)}function CB(n,e){return n&&Xo(e,Yo(e),n)}var Zy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sb=Zy&&typeof module=="object"&&module&&!module.nodeType&&module,kB=Sb&&Sb.exports===Zy,Ab=kB?Qn.Buffer:void 0,Ib=Ab?Ab.allocUnsafe:void 0;function Jy(n,e){if(e)return n.slice();var t=n.length,i=Ib?Ib(t):new n.constructor(t);return n.copy(i),i}function EB(n,e){for(var t=-1,i=n==null?0:n.length,s=0,o=[];++t<i;){var r=n[t];e(r,t,n)&&(o[s++]=r)}return o}function Xy(){return[]}var TB=Object.prototype,SB=TB.propertyIsEnumerable,Pb=Object.getOwnPropertySymbols,mm=Pb?function(n){return n==null?[]:(n=Object(n),EB(Pb(n),function(e){return SB.call(n,e)}))}:Xy;function AB(n,e){return Xo(n,mm(n),e)}var IB=Object.getOwnPropertySymbols,Yy=IB?function(n){for(var e=[];n;)Ty(e,mm(n)),n=fm(n);return e}:Xy;function PB(n,e){return Xo(n,Yy(n),e)}function Qy(n,e,t){var i=e(n);return kn(n)?i:Ty(i,t(n))}function xh(n){return Qy(n,Ba,mm)}function xB(n){return Qy(n,Yo,Yy)}var Rh=Os(Qn,"DataView"),Lh=Os(Qn,"Promise"),Vh=Os(Qn,"Set"),xb="[object Map]",RB="[object Object]",Rb="[object Promise]",Lb="[object Set]",Vb="[object WeakMap]",Ob="[object DataView]",LB=Vs(Rh),VB=Vs(oa),OB=Vs(Lh),MB=Vs(Vh),BB=Vs(Ah),Un=ns;(Rh&&Un(new Rh(new ArrayBuffer(1)))!=Ob||oa&&Un(new oa)!=xb||Lh&&Un(Lh.resolve())!=Rb||Vh&&Un(new Vh)!=Lb||Ah&&Un(new Ah)!=Vb)&&(Un=function(n){var e=ns(n),t=e==RB?n.constructor:void 0,i=t?Vs(t):"";if(i)switch(i){case LB:return Ob;case VB:return xb;case OB:return Rb;case MB:return Lb;case BB:return Vb}return e});var NB=Object.prototype,DB=NB.hasOwnProperty;function FB(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&DB.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var mc=Qn.Uint8Array;function gm(n){var e=new n.constructor(n.byteLength);return new mc(e).set(new mc(n)),e}function zB(n,e){var t=e?gm(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var HB=/\w*$/;function $B(n){var e=new n.constructor(n.source,HB.exec(n));return e.lastIndex=n.lastIndex,e}var Mb=li?li.prototype:void 0,Bb=Mb?Mb.valueOf:void 0;function UB(n){return Bb?Object(Bb.call(n)):{}}function eC(n,e){var t=e?gm(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var WB="[object Boolean]",jB="[object Date]",qB="[object Map]",GB="[object Number]",KB="[object RegExp]",ZB="[object Set]",JB="[object String]",XB="[object Symbol]",YB="[object ArrayBuffer]",QB="[object DataView]",eN="[object Float32Array]",tN="[object Float64Array]",nN="[object Int8Array]",iN="[object Int16Array]",sN="[object Int32Array]",oN="[object Uint8Array]",rN="[object Uint8ClampedArray]",aN="[object Uint16Array]",lN="[object Uint32Array]";function cN(n,e,t){var i=n.constructor;switch(e){case YB:return gm(n);case WB:case jB:return new i(+n);case QB:return zB(n,t);case eN:case tN:case nN:case iN:case sN:case oN:case rN:case aN:case lN:return eC(n,t);case qB:return new i;case GB:case JB:return new i(n);case KB:return $B(n);case ZB:return new i;case XB:return UB(n)}}function tC(n){return typeof n.constructor=="function"&&!am(n)?cO(fm(n)):{}}var uN="[object Map]";function dN(n){return On(n)&&Un(n)==uN}var Nb=xo&&xo.isMap,hN=Nb?lm(Nb):dN,fN="[object Set]";function mN(n){return On(n)&&Un(n)==fN}var Db=xo&&xo.isSet,gN=Db?lm(Db):mN,pN=1,bN=2,wN=4,nC="[object Arguments]",_N="[object Array]",vN="[object Boolean]",yN="[object Date]",CN="[object Error]",iC="[object Function]",kN="[object GeneratorFunction]",EN="[object Map]",TN="[object Number]",sC="[object Object]",SN="[object RegExp]",AN="[object Set]",IN="[object String]",PN="[object Symbol]",xN="[object WeakMap]",RN="[object ArrayBuffer]",LN="[object DataView]",VN="[object Float32Array]",ON="[object Float64Array]",MN="[object Int8Array]",BN="[object Int16Array]",NN="[object Int32Array]",DN="[object Uint8Array]",FN="[object Uint8ClampedArray]",zN="[object Uint16Array]",HN="[object Uint32Array]",Le={};Le[nC]=Le[_N]=Le[RN]=Le[LN]=Le[vN]=Le[yN]=Le[VN]=Le[ON]=Le[MN]=Le[BN]=Le[NN]=Le[EN]=Le[TN]=Le[sC]=Le[SN]=Le[AN]=Le[IN]=Le[PN]=Le[DN]=Le[FN]=Le[zN]=Le[HN]=!0;Le[CN]=Le[iC]=Le[xN]=!1;function Co(n,e,t,i,s,o){var r,a=e&pN,l=e&bN,c=e&wN;if(t&&(r=s?t(n,i,s,o):t(n)),r!==void 0)return r;if(!Re(n))return n;var u=kn(n);if(u){if(r=FB(n),!a)return wy(n,r)}else{var d=Un(n),h=d==iC||d==kN;if(ia(n))return Jy(n,a);if(d==sC||d==nC||h&&!s){if(r=l||h?{}:tC(n),!a)return l?PB(n,CB(r,n)):AB(n,yB(r,n))}else{if(!Le[d])return s?n:{};r=cN(n,d,a)}}o||(o=new Kn);var f=o.get(n);if(f)return f;o.set(n,r),gN(n)?n.forEach(function(b){r.add(Co(b,e,t,b,n,o))}):hN(n)&&n.forEach(function(b,p){r.set(p,Co(b,e,t,p,n,o))});var m=c?l?xB:xh:l?Yo:Ba,g=u?void 0:m(n);return wO(g||n,function(b,p){g&&(p=b,b=n[p]),sm(r,p,Co(b,e,t,p,n,o))}),r}var $N=4;function oC(n){return Co(n,$N)}var UN=1,WN=4;function Dn(n){return Co(n,UN|WN)}var jN=1,qN=4;function pm(n,e){return e=typeof e=="function"?e:void 0,Co(n,jN|qN,e)}var GN="__lodash_hash_undefined__";function KN(n){return this.__data__.set(n,GN),this}function ZN(n){return this.__data__.has(n)}function gc(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new xi;++e<t;)this.add(n[e])}gc.prototype.add=gc.prototype.push=KN;gc.prototype.has=ZN;function JN(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function XN(n,e){return n.has(e)}var YN=1,QN=2;function rC(n,e,t,i,s,o){var r=t&YN,a=n.length,l=e.length;if(a!=l&&!(r&&l>a))return!1;var c=o.get(n),u=o.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=t&QN?new gc:void 0;for(o.set(n,e),o.set(e,n);++d<a;){var m=n[d],g=e[d];if(i)var b=r?i(g,m,d,e,n,o):i(m,g,d,n,e,o);if(b!==void 0){if(b)continue;h=!1;break}if(f){if(!JN(e,function(p,w){if(!XN(f,w)&&(m===p||s(m,p,t,i,o)))return f.push(w)})){h=!1;break}}else if(!(m===g||s(m,g,t,i,o))){h=!1;break}}return o.delete(n),o.delete(e),h}function eD(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function tD(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var nD=1,iD=2,sD="[object Boolean]",oD="[object Date]",rD="[object Error]",aD="[object Map]",lD="[object Number]",cD="[object RegExp]",uD="[object Set]",dD="[object String]",hD="[object Symbol]",fD="[object ArrayBuffer]",mD="[object DataView]",Fb=li?li.prototype:void 0,rd=Fb?Fb.valueOf:void 0;function gD(n,e,t,i,s,o,r){switch(t){case mD:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case fD:return!(n.byteLength!=e.byteLength||!o(new mc(n),new mc(e)));case sD:case oD:case lD:return Ma(+n,+e);case rD:return n.name==e.name&&n.message==e.message;case cD:case dD:return n==e+"";case aD:var a=eD;case uD:var l=i&nD;if(a||(a=tD),n.size!=e.size&&!l)return!1;var c=r.get(n);if(c)return c==e;i|=iD,r.set(n,e);var u=rC(a(n),a(e),i,s,o,r);return r.delete(n),u;case hD:if(rd)return rd.call(n)==rd.call(e)}return!1}var pD=1,bD=Object.prototype,wD=bD.hasOwnProperty;function _D(n,e,t,i,s,o){var r=t&pD,a=xh(n),l=a.length,c=xh(e),u=c.length;if(l!=u&&!r)return!1;for(var d=l;d--;){var h=a[d];if(!(r?h in e:wD.call(e,h)))return!1}var f=o.get(n),m=o.get(e);if(f&&m)return f==e&&m==n;var g=!0;o.set(n,e),o.set(e,n);for(var b=r;++d<l;){h=a[d];var p=n[h],w=e[h];if(i)var E=r?i(w,p,h,e,n,o):i(p,w,h,n,e,o);if(!(E===void 0?p===w||s(p,w,t,i,o):E)){g=!1;break}b||(b=h=="constructor")}if(g&&!b){var C=n.constructor,T=e.constructor;C!=T&&"constructor"in n&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof T=="function"&&T instanceof T)&&(g=!1)}return o.delete(n),o.delete(e),g}var vD=1,zb="[object Arguments]",Hb="[object Array]",cl="[object Object]",yD=Object.prototype,$b=yD.hasOwnProperty;function CD(n,e,t,i,s,o){var r=kn(n),a=kn(e),l=r?Hb:Un(n),c=a?Hb:Un(e);l=l==zb?cl:l,c=c==zb?cl:c;var u=l==cl,d=c==cl,h=l==c;if(h&&ia(n)){if(!ia(e))return!1;r=!0,u=!1}if(h&&!u)return o||(o=new Kn),r||cm(n)?rC(n,e,t,i,s,o):gD(n,e,l,t,i,s,o);if(!(t&vD)){var f=u&&$b.call(n,"__wrapped__"),m=d&&$b.call(e,"__wrapped__");if(f||m){var g=f?n.value():n,b=m?e.value():e;return o||(o=new Kn),s(g,b,t,i,o)}}return h?(o||(o=new Kn),_D(n,e,t,i,s,o)):!1}function Da(n,e,t,i,s){return n===e?!0:n==null||e==null||!On(n)&&!On(e)?n!==n&&e!==e:CD(n,e,t,i,Da,s)}var kD=1,ED=2;function TD(n,e,t,i){var s=t.length,o=s;if(n==null)return!o;for(n=Object(n);s--;){var r=t[s];if(r[2]?r[1]!==n[r[0]]:!(r[0]in n))return!1}for(;++s<o;){r=t[s];var a=r[0],l=n[a],c=r[1];if(r[2]){if(l===void 0&&!(a in n))return!1}else{var u=new Kn,d;if(!(d===void 0?Da(c,l,kD|ED,i,u):d))return!1}}return!0}function aC(n){return n===n&&!Re(n)}function SD(n){for(var e=Ba(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,aC(s)]}return e}function lC(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function AD(n){var e=SD(n);return e.length==1&&e[0][2]?lC(e[0][0],e[0][1]):function(t){return t===n||TD(t,n,e)}}function ID(n,e){return n!=null&&e in Object(n)}function PD(n,e,t){e=du(e,n);for(var i=-1,s=e.length,o=!1;++i<s;){var r=Qo(e[i]);if(!(o=n!=null&&t(n,r)))break;n=n[r]}return o||++i!=s?o:(s=n==null?0:n.length,!!s&&om(s)&&ru(r,s)&&(kn(n)||fc(n)))}function xD(n,e){return n!=null&&PD(n,e,ID)}var RD=1,LD=2;function VD(n,e){return um(n)&&aC(e)?lC(Qo(n),e):function(t){var i=ra(t,n);return i===void 0&&i===e?xD(t,n):Da(e,i,RD|LD)}}function OD(n){return function(e){return e==null?void 0:e[n]}}function MD(n){return function(e){return hm(e,n)}}function BD(n){return um(n)?OD(Qo(n)):MD(n)}function ND(n){return typeof n=="function"?n:n==null?Hi:typeof n=="object"?kn(n)?VD(n[0],n[1]):AD(n):BD(n)}function DD(n){return function(e,t,i){for(var s=-1,o=Object(e),r=i(e),a=r.length;a--;){var l=r[++s];if(t(o[l],l,o)===!1)break}return e}}var cC=DD();function FD(n,e){return n&&cC(n,e,Ba)}var ad=function(){return Qn.Date.now()},zD="Expected a function",HD=Math.max,$D=Math.min;function Ii(n,e,t){var i,s,o,r,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(zD);e=mb(e)||0,Re(t)&&(u=!!t.leading,d="maxWait"in t,o=d?HD(mb(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h);function f(k){var S=i,x=s;return i=s=void 0,c=k,r=n.apply(x,S),r}function m(k){return c=k,a=setTimeout(p,e),u?f(k):r}function g(k){var S=k-l,x=k-c,N=e-S;return d?$D(N,o-x):N}function b(k){var S=k-l,x=k-c;return l===void 0||S>=e||S<0||d&&x>=o}function p(){var k=ad();if(b(k))return w(k);a=setTimeout(p,g(k))}function w(k){return a=void 0,h&&i?f(k):(i=s=void 0,r)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function C(){return a===void 0?r:w(ad())}function T(){var k=ad(),S=b(k);if(i=arguments,s=this,l=k,S){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(p,e),f(l)}return a===void 0&&(a=setTimeout(p,e)),r}return T.cancel=E,T.flush=C,T}function Oh(n,e,t){(t!==void 0&&!Ma(n[e],t)||t===void 0&&!(e in n))&&au(n,e,t)}function UD(n){return On(n)&&lu(n)}function Mh(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function WD(n){return Xo(n,Yo(n))}function jD(n,e,t,i,s,o,r){var a=Mh(n,t),l=Mh(e,t),c=r.get(l);if(c){Oh(n,t,c);return}var u=o?o(a,l,t+"",n,e,r):void 0,d=u===void 0;if(d){var h=kn(l),f=!h&&ia(l),m=!h&&!f&&cm(l);u=l,h||f||m?kn(a)?u=a:UD(a)?u=wy(a):f?(d=!1,u=Jy(l,!0)):m?(d=!1,u=eC(l,!0)):u=[]:Lt(l)||fc(l)?(u=a,fc(a)?u=WD(a):(!Re(a)||Es(a))&&(u=tC(l))):d=!1}d&&(r.set(l,u),s(u,l,i,o,r),r.delete(l)),Oh(n,t,u)}function bm(n,e,t,i,s){n!==e&&cC(e,function(o,r){if(s||(s=new Kn),Re(o))jD(n,e,r,t,bm,i,s);else{var a=i?i(Mh(n,r),o,r+"",n,e,s):void 0;a===void 0&&(a=o),Oh(n,r,a)}},Yo)}var qD=rm(function(n,e,t,i){bm(n,e,t,i)});function GD(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var uC=/[\\^$.*+?()[\]{}|]/g,KD=RegExp(uC.source);function ZD(n){return n=Na(n),n&&KD.test(n)?n.replace(uC,"\\$&"):n}var JD="[object String]";function Ub(n){return typeof n=="string"||!kn(n)&&On(n)&&ns(n)==JD}function XD(n,e){return e.length<2?n:hm(n,Ay(e,0,-1))}function Ss(n){return On(n)&&n.nodeType===1&&!Lt(n)}function Ro(n,e){return Da(n,e)}function YD(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?Da(n,e,void 0,t):!!i}function QD(n,e){var t={};return e=ND(e),FD(n,function(i,s,o){au(t,s,e(i,s,o))}),t}var wm=rm(function(n,e,t){bm(n,e,t)});function e9(n,e){return e=du(e,n),n=XD(n,e),n==null||delete n[Qo(GD(e))]}function t9(n,e,t,i){if(!Re(n))return n;e=du(e,n);for(var s=-1,o=e.length,r=o-1,a=n;a!=null&&++s<o;){var l=Qo(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=r){var u=a[l];c=void 0,c===void 0&&(c=Re(u)?u:ru(e[s+1])?[]:{})}sm(a,l,c),a=a[l]}return n}function n9(n,e,t){return n==null?n:t9(n,e,t)}var i9=mB(function(n,e,t){return n+(t?" ":"")+My(e)}),s9="Expected a function";function Lo(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(s9);return Re(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Ii(n,e,{leading:i,maxWait:e,trailing:s})}function o9(n,e){return n==null?!0:e9(n,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pc=Symbol("observableProperties"),hu=Symbol("boundObservables"),bc=Symbol("boundProperties"),Xs=Symbol("decoratedMethods"),Wb=Symbol("decoratedOriginal"),dC=ye(Pe());function ye(n){if(!n)return dC;class e extends n{set(i,s){if(Re(i)){Object.keys(i).forEach(r=>{this.set(r,i[r])},this);return}ld(this);const o=this[pc];if(i in this&&!o.has(i))throw new v("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return o.get(i)},set(r){const a=o.get(i);let l=this.fire(`set:${i}`,i,r,a);l===void 0&&(l=r),(a!==l||!o.has(i))&&(o.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=s}bind(...i){if(!i.length||!jb(i))throw new v("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new v("observable-bind-duplicate-properties",this);ld(this);const s=this[bc];i.forEach(r=>{if(s.has(r))throw new v("observable-bind-rebind",this)});const o=new Map;return i.forEach(r=>{const a={property:r,to:[]};s.set(r,a),o.set(r,a)}),{to:r9,toMany:a9,_observable:this,_bindProperties:i,_to:[],_bindings:o}}unbind(...i){if(!this[pc])return;const s=this[bc],o=this[hu];if(i.length){if(!jb(i))throw new v("observable-unbind-wrong-properties",this);i.forEach(r=>{const a=s.get(r);a&&(a.to.forEach(([l,c])=>{const u=o.get(l),d=u[c];d.delete(a),d.size||delete u[c],Object.keys(u).length||(o.delete(l),this.stopListening(l,"change"))}),s.delete(r))})}else o.forEach((r,a)=>{this.stopListening(a,"change")}),o.clear(),s.clear()}decorate(i){ld(this);const s=this[i];if(!s)throw new v("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(o,r)=>{o.return=s.apply(this,r)}),this[i]=function(...o){return this.fire(i,o)},this[i][Wb]=s,this[Xs]||(this[Xs]=[]),this[Xs].push(i)}stopListening(i,s,o){if(!i&&this[Xs]){for(const r of this[Xs])this[r]=this[r][Wb];delete this[Xs]}super.stopListening(i,s,o)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ye[n]=dC.prototype[n]});function ld(n){n[pc]||(Object.defineProperty(n,pc,{value:new Map}),Object.defineProperty(n,hu,{value:new Map}),Object.defineProperty(n,bc,{value:new Map}))}function r9(...n){const e=c9(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new v("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new v("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new v("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),h9(this._observable,this._to),d9(this),this._bindProperties.forEach(s=>{hC(this._observable,s)})}function a9(n,e,t){if(this._bindings.size>1)throw new v("observable-bind-to-many-not-one-binding",this);this.to(...l9(n,e),t)}function l9(n,e){const t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function jb(n){return n.every(e=>typeof e=="string")}function c9(...n){if(!n.length)throw new v("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new v("observable-bind-to-parse-error",null)}),e}function u9(n,e,t,i){const s=n[hu],o=s.get(t),r=o||{};r[i]||(r[i]=new Set),r[i].add(e),o||s.set(t,r)}function d9(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(s=>{e=s.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([s.observable,e]),u9(n._observable,t,s.observable,e)})})}function hC(n,e){const i=n[bc].get(e);let s;i.callback?s=i.callback.apply(n,i.to.map(o=>o[0][o[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=s:n.set(e,s)}function h9(n,e){e.forEach(t=>{const i=n[hu];let s;i.get(t.observable)||n.listenTo(t.observable,"change",(o,r)=>{s=i.get(t.observable)[r],s&&s.forEach(a=>{hC(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fC{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bh(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kt(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function En(n){return!!(n&&n[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lt(n,e,t={},i=[]){const s=t&&t.xmlns,o=s?n.createElementNS(s,e):n.createElement(e);for(const r in t)o.setAttribute(r,t[r]);(Ub(i)||!En(i))&&(i=[i]);for(let r of i)Ub(r)&&(r=n.createTextNode(r)),o.appendChild(r);return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mC{constructor(e,t){this._config={},t&&this.define(qb(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(Lt(t)){this._setObjectToTarget(e,t,s);return}const o=t.split(".");t=o.pop();for(const r of o)Lt(e[r])||(e[r]={}),e=e[r];if(Lt(i)){Lt(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,i,s);return}s&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!Lt(e[s])){e=null;break}e=e[s]}return e?qb(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],i)})}}function qb(n){return pm(n,f9)}function f9(n){return Ss(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ki(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wc(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gC=Dt(Pe());function Dt(n){if(!n)return gC;class e extends n{listenTo(i,s,o,r={}){if(Ki(i)||wc(i)){const a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(i,a)||new m9(i,a);this.listenTo(l,s,o,r)}else super.listenTo(i,s,o,r)}stopListening(i,s,o){if(Ki(i)||wc(i)){const r=this._getAllProxyEmitters(i);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(i,s,o)}_getProxyEmitter(i,s){return kV(this,pC(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Dt[n]=gC.prototype[n]});class m9 extends Pe(){constructor(e,t){super(),hy(this,pC(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),Pe().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){Pe().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function g9(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Nt())}function pC(n,e){let t=g9(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Nh;try{Nh={window,document}}catch{/* istanbul ignore next -- @preserve */Nh={window:{},document:{}}}const Ee=Nh;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function p9(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function b9(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bC(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tt(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fu(n){return Object.prototype.toString.apply(n)=="[object Range]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wC(n){return!n||!n.parentNode||n.offsetParent===Ee.document.body?null:n.offsetParent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _C=["top","right","bottom","left","width","height"];class te{constructor(e){const t=fu(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Dh(e)||t)if(t){const i=te.getDomRangeRects(e);ul(this,te.getBoundingRect(i))}else ul(this,e.getBoundingClientRect());else if(wc(e)){const{innerWidth:i,innerHeight:s}=e;ul(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else ul(this,e)}clone(){return new te(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const i=new te(t);return i._source=this._source,i}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(Gb(e))return t;let i=e,s=e.parentNode||e.commonAncestorContainer,o;for(;s&&!Gb(s);){const r=w9(s)==="visible";i instanceof HTMLElement&&Kb(i)==="absolute"&&(o=i);const a=Kb(s);if(r||o&&(a==="relative"&&r||a!=="relative")){i=s,s=s.parentNode;continue}const l=new te(s),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=s,s=s.parentNode}return t}isEqual(e){for(const t of _C)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=Ee.window,i=this.clone().moveBy(e,t);if(Dh(i._source)){const s=wC(i._source);s&&_9(i,s)}return i}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(wc(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const o=bC(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new te(s));else{let s=e.startContainer;tt(s)&&(s=s.parentNode);const o=new te(s.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new te(t))}}function ul(n,e){for(const t of _C)n[t]=e[t]}function Gb(n){return Dh(n)?n===n.ownerDocument.body:!1}function Dh(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function Kb(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function w9(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function _9(n,e){const t=new te(e),i=bC(e);let s=0,o=0;s-=t.left,o-=t.top,s+=e.scrollLeft,o+=e.scrollTop,s-=i.left,o-=i.top,n.moveBy(s,o)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ve{constructor(e,t){Ve._observerInstance||Ve._createObserver(),this._element=e,this._callback=t,Ve._addElementCallback(e,t),Ve._observerInstance.observe(e)}get element(){return this._element}destroy(){Ve._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Ve._elementCallbacks||(Ve._elementCallbacks=new Map);let i=Ve._elementCallbacks.get(e);i||(i=new Set,Ve._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=Ve._getElementCallbacks(e);i&&(i.delete(t),i.size||(Ve._elementCallbacks.delete(e),Ve._observerInstance.unobserve(e))),Ve._elementCallbacks&&!Ve._elementCallbacks.size&&(Ve._observerInstance=null,Ve._elementCallbacks=null)}static _getElementCallbacks(e){return Ve._elementCallbacks?Ve._elementCallbacks.get(e):null}static _createObserver(){Ve._observerInstance=new globalThis.window.ResizeObserver(e=>{for(const t of e){const i=Ve._getElementCallbacks(t.target);if(i)for(const s of i)s(t)}})}}Ve._observerInstance=null;Ve._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zb(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function er(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dl(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vC(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fr(n){return n&&n.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yC(n){try{Ee.document.createAttribute(n)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function As(n){return!!(n&&n.getClientRects&&n.getClientRects().length)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mu({element:n,target:e,positions:t,limiter:i,fitInViewport:s,viewportOffsetConfig:o}){Es(e)&&(e=e()),Es(i)&&(i=i());const r=wC(n),a=v9(o),l=new te(n),c=Jb(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:r,viewportRect:a};if(!i&&!s)u=new CC(t[0],d);else{if(i){const h=Jb(i,a);h&&(d.limiterRect=h)}u=y9(t,d)}return u}function Jb(n,e){const t=new te(n).getVisible();return t?t.getIntersection(e):null}function v9(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new te(globalThis.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function y9(n,e){const{elementRect:t}=e,i=t.getArea(),s=n.map(a=>new CC(a,e)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const u=c**2+l**2;u>o&&(o=u,r=a)}return r}class CC{constructor(e,t){const i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;const{left:s,top:o,name:r,config:a}=i;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:s,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xb(n){const e=n.parentNode;e&&e.removeChild(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function C9({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:s}){const o=_m(n);let r=o,a=null;for(e=T9(e);r;){let l;r==o?l=Yb(n):l=Yb(a),E9({parent:l,getRect:()=>Qb(n,r),alignToTop:i,ancestorOffset:t,forceScroll:s});const c=Qb(n,r);if(k9({window:r,rect:c,viewportOffset:e,alignToTop:i,forceScroll:s}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function k9({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:s}){const o=e.clone().moveBy(0,s.bottom),r=e.clone().moveBy(0,-s.top),a=new te(n).excludeScrollbarsAndBorders(),l=[r,o],c=t&&i,u=l.every(g=>a.contains(g));let{scrollX:d,scrollY:h}=n;const f=d,m=h;c?h-=a.top-e.top+s.top:u||(EC(r,a)?h-=a.top-e.top+s.top:kC(o,a)&&(t?h+=e.top-a.top-s.top:h+=e.bottom-a.bottom+s.bottom)),u||(TC(e,a)?d-=a.left-e.left+s.left:SC(e,a)&&(d+=e.right-a.right+s.right)),(d!=f||h!==m)&&n.scrollTo(d,h)}function E9({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:s=0,limiterElement:o}){const r=_m(n),a=t&&i;let l,c,u;const d=o||r.document.body;for(;n!=d;)c=e(),l=new te(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+s:u||(EC(c,l)?n.scrollTop-=l.top-c.top+s:kC(c,l)&&(t?n.scrollTop+=c.top-l.top-s:n.scrollTop+=c.bottom-l.bottom+s)),u||(TC(c,l)?n.scrollLeft-=l.left-c.left+s:SC(c,l)&&(n.scrollLeft+=c.right-l.right+s)),n=n.parentNode}function kC(n,e){return n.bottom>e.bottom}function EC(n,e){return n.top<e.top}function TC(n,e){return n.left<e.left}function SC(n,e){return n.right>e.right}function _m(n){return fu(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function Yb(n){if(fu(n)){let e=n.commonAncestorContainer;return tt(e)&&(e=e.parentNode),e}else return n.parentNode}function Qb(n,e){const t=_m(n),i=new te(n);if(t===e)return i;{let s=t;for(;s!=e;){const o=s.frameElement,r=new te(o).excludeScrollbarsAndBorders();i.moveBy(r.left,r.top),s=s.parent}}return i}function T9(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const S9={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},A9={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},e0={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},ue=L9(),I9=Object.fromEntries(Object.entries(ue).map(([n,e])=>{let t;return e in e0?t=e0[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function Vo(n){let e;if(typeof n=="string"){if(e=ue[n.toLowerCase()],!e)throw new v("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?ue.alt:0)+(n.ctrlKey?ue.ctrl:0)+(n.shiftKey?ue.shift:0)+(n.metaKey?ue.cmd:0);return e}function Fa(n){return typeof n=="string"&&(n=V9(n)),n.map(e=>typeof e=="string"?x9(e):e).reduce((e,t)=>t+e,0)}function _c(n){let e=Fa(n);return Object.entries(ee.isMac||ee.isiOS?S9:A9).reduce((s,[o,r])=>(e&ue[o]&&(e&=~ue[o],s+=r),s),"")+(e?I9[e]:"")}function P9(n){return n==ue.arrowright||n==ue.arrowleft||n==ue.arrowup||n==ue.arrowdown}function vm(n,e){const t=e==="ltr";switch(n){case ue.arrowleft:return t?"left":"right";case ue.arrowright:return t?"right":"left";case ue.arrowup:return"up";case ue.arrowdown:return"down"}}function x9(n){if(n.endsWith("!"))return Vo(n.slice(0,-1));const e=Vo(n);return(ee.isMac||ee.isiOS)&&e==ue.ctrl?ue.cmd:e}function R9(n,e){const t=vm(n,e);return t==="down"||t==="right"}function L9(){const n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function V9(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const O9=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function t0(n){return O9.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function we(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */Ee.window.CKEDITOR_TRANSLATIONS||(Ee.window.CKEDITOR_TRANSLATIONS={});function M9(n,e,t=1,i){if(typeof t!="number")throw new v("translation-service-quantity-not-a-number",null,{quantity:t});const s=i||Ee.window.CKEDITOR_TRANSLATIONS,o=D9(s);o===1&&(n=Object.keys(s)[0]);const r=e.id||e.string;if(o===0||!N9(n,r,s))return t!==1?e.plural:e.string;const a=s[n].dictionary,l=s[n].getPluralForm||(d=>d===1?0:1),c=a[r];if(typeof c=="string")return c;const u=Number(l(t));return c[u]}function B9(n){return Array.isArray(n)?n.reduce((e,t)=>wm(e,t)):n}function N9(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function D9(n){return Object.keys(n).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F9{constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=t0(this.uiLanguage),this.contentLanguageDirection=t0(this.contentLanguage),this.translations=B9(i),this.t=(s,o)=>this._t(s,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=we(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,o=M9(this.uiLanguage,e,s,this.translations);return z9(o,t)}}function z9(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Et extends Pe(){constructor(e={},t={}){super();const i=En(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new v("collection-add-item-invalid-index",this);let i=0;for(const s of e){const o=this._getItemIdBeforeAdding(s),r=t+i;this._items.splice(r,0,s),this._itemMap.set(o,s),this.fire("add",s,r),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new v("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new v("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(s,o,r)=>{const a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{const c=e(o);if(!c){this._skippedIndexesFromExternal.push(r);return}let u=r;for(const d of this._skippedIndexesFromExternal)r>d&&u--;for(const d of t._skippedIndexesFromExternal)u>=d&&u++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,u);for(let d=0;d<t._skippedIndexesFromExternal.length;d++)u<=t._skippedIndexesFromExternal[d]&&t._skippedIndexesFromExternal[d]++}};for(const s of t)i(null,s,t.getIndex(s));this.listenTo(t,"add",i),this.listenTo(t,"remove",(s,o,r)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(r<c&&l.push(c-1),r>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],typeof i!="string")throw new v("collection-add-invalid-id",this);if(this.get(i))throw new v("collection-add-item-already-exists",this)}else e[t]=i=Nt();return i}_remove(e){let t,i,s,o=!1;const r=this._idProperty;if(typeof e=="string"?(i=e,s=this._itemMap.get(i),o=!s,s&&(t=this._items.indexOf(s))):typeof e=="number"?(t=e,s=this._items[t],o=!s,s&&(i=s[r])):(s=e,i=s[r],t=this._items.indexOf(s),o=t==-1||!this._itemMap.get(i)),o)throw new v("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const a=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(a),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $e(n){const e=n.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oe extends Dt(ye()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new v("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ue{constructor(){this._listener=new(Dt())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+Vo(i),i)})}set(e,t,i={}){const s=Fa(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{t(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Vo(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H9(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ci(n){return En(n)?new Map(n):H9(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $9=1e4;function U9(n,e,t,i){if(Math.max(e.length,n.length)>$9)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{const s=Array.from(n);return s.splice(t,i,...e),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ym(n,e){let t;function i(...s){i.cancel(),t=setTimeout(()=>n(...s),e)}return i.cancel=()=>{clearTimeout(t)},i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function W9(n){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}const i=t.split("-"),s=i[0],o=i[1];if(!o)return e(n);try{atob(o)}catch{try{if(atob(s),!atob(s).length)return e(n)}catch{return e(n)}}if(s.length<40||s.length>255)return"INVALID";let r="";try{atob(s),r=atob(o)}catch{return"INVALID"}if(r.length!==8)return"INVALID";const a=Number(r.substring(0,4)),l=Number(r.substring(4,6))-1,c=Number(r.substring(6,8)),u=new Date(a,l,c);return u<CV||isNaN(Number(u))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j9(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function q9(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function G9(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function Cm(n,e){return q9(n.charAt(e-1))&&G9(n.charAt(e))}function km(n,e){return j9(n.charAt(e))}const K9=Z9();function AC(n,e){const t=String(n).matchAll(K9);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function Z9(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(s=>s.source).join("|")+")",i=`${e}|${t}(?:‍${t})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I extends ye(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",n0,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",n0),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function n0(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q extends ye(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const i=e.model.document.selection,o=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",i0,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",i0),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function i0(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IC extends Pe(){constructor(e,t=[],i=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of i)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new v("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const s=this,o=this._context;f(e),g(e);const r=e.filter(k=>!d(k,t)),a=[...m(r)];T(a,i);const l=E(a);return C(l,"init").then(()=>C(l,"afterInit")).then(()=>l);function c(k){return typeof k=="function"}function u(k){return c(k)&&!!k.isContextPlugin}function d(k,S){return S.some(x=>x===k||h(k)===x||h(x)===k)}function h(k){return c(k)?k.pluginName||k.name:k}function f(k,S=new Set){k.forEach(x=>{c(x)&&(S.has(x)||(S.add(x),x.pluginName&&!s._availablePlugins.has(x.pluginName)&&s._availablePlugins.set(x.pluginName,x),x.requires&&f(x.requires,S)))})}function m(k,S=new Set){return k.map(x=>c(x)?x:s._availablePlugins.get(x)).reduce((x,N)=>S.has(N)?x:(S.add(N),N.requires&&(g(N.requires,N),m(N.requires,S).forEach(Y=>x.add(Y))),x.add(N)),new Set)}function g(k,S=null){k.map(x=>c(x)?x:s._availablePlugins.get(x)||x).forEach(x=>{b(x,S),p(x,S),w(x,S)})}function b(k,S){if(!c(k))throw S?new v("plugincollection-soft-required",o,{missingPlugin:k,requiredBy:h(S)}):new v("plugincollection-plugin-not-found",o,{plugin:k})}function p(k,S){if(u(S)&&!u(k))throw new v("plugincollection-context-required",o,{plugin:h(k),requiredBy:h(S)})}function w(k,S){if(S&&d(k,t))throw new v("plugincollection-required",o,{plugin:h(k),requiredBy:h(S)})}function E(k){return k.map(S=>{let x=s._contextPlugins.get(S);return x=x||new S(o),s._add(S,x),x})}function C(k,S){return k.reduce((x,N)=>!N[S]||s._contextPlugins.has(N)?x:x.then(N[S].bind(N)),Promise.resolve())}function T(k,S){for(const x of S){if(typeof x!="function")throw new v("plugincollection-replace-plugin-invalid-type",null,{pluginItem:x});const N=x.pluginName;if(!N)throw new v("plugincollection-replace-plugin-missing-name",null,{pluginItem:x});if(x.requires&&x.requires.length)throw new v("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:N});const Y=s._availablePlugins.get(N);if(!Y)throw new v("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:N});const le=k.indexOf(Y);if(le===-1){if(s._contextPlugins.has(Y))return;throw new v("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:N})}if(Y.requires&&Y.requires.length)throw new v("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:N});k.splice(le,1,x),s._availablePlugins.set(N,x)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new v("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PC{constructor(e){this._contextOwner=null;const{translations:t,...i}=e||{};this.config=new mC(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new IC(this,s);const o=this.config.get("language")||{};this.locale=new F9({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Et}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new v("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new v("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new v("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xC extends ye(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jl=new WeakMap;let s0=!1;function J9({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:s=!1}){const o=n.document;jl.has(o)||(jl.set(o,new Map),o.registerPostFixer(a=>cd(o,a)),o.on("change:isComposing",()=>{n.change(a=>cd(o,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{r(c)}),e.placeholder?r(e.placeholder):t&&r(t),t&&tF();function r(a){jl.get(o).set(e,{text:a,isDirectHost:i,keepOnFocus:s,hostElement:i?e:null}),n.change(l=>cd(o,l))}}function X9(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function Y9(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function Q9(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(r=>!r.is("uiElement")))return!1;const i=n.document,o=i.selection.anchor;return i.isComposing&&o&&o.parent===n?!1:e||!i.isFocused?!0:!!o&&o.parent!==n}function cd(n,e){const t=jl.get(n),i=[];let s=!1;for(const[o,r]of t)r.isDirectHost&&(i.push(o),o0(e,o,r)&&(s=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const a=eF(o);a&&(i.includes(a)||(r.hostElement=a,o0(e,o,r)&&(s=!0)))}return s}function o0(n,e,t){const{text:i,isDirectHost:s,hostElement:o}=t;let r=!1;return o.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,o),r=!0),(s||e.childCount==1)&&Q9(o,t.keepOnFocus)?X9(n,o)&&(r=!0):Y9(n,o)&&(r=!0),r}function eF(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function tF(){s0||ae("enableplaceholder-deprecated-text-option"),s0=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ms=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Bs=class extends Pe(Ms){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new v("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=kt(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=oC(this);return delete e.parent,e}};Bs.prototype.is=function(n){return n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let De=class Fh extends Bs{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Fh?this===e||this.data===e.data:!1}_clone(){return new Fh(this.document,this.data)}};De.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let si=class extends Ms{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new v("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new v("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};si.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zi{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const s=r0(t,i);if(s)return{element:t,pattern:i,match:s}}return null}matchAll(...e){const t=[];for(const i of e)for(const s of this._patterns){const o=r0(i,s);o&&t.push({element:i,pattern:s,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function r0(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=nF(e.name,n.name),!t.name)||e.attributes&&(t.attributes=rF(e.attributes,n),!t.attributes)||e.classes&&(t.classes=aF(e.classes,n),!t.classes)||e.styles&&(t.styles=lF(e.styles,n),!t.styles)?null:t}function nF(n,e){return n instanceof RegExp?!!e.match(n):n===e}function Em(n,e,t){const i=iF(n),s=Array.from(e),o=[];if(i.forEach(([r,a])=>{s.forEach(l=>{sF(r,l)&&oF(a,l,t)&&o.push(l)})}),!(!i.length||o.length<i.length))return o}function iF(n){return Array.isArray(n)?n.map(e=>Lt(e)?((e.key===void 0||e.value===void 0)&&ae("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Lt(n)?Object.entries(n):[[n,!0]]}function sF(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function oF(n,e,t){if(n===!0)return!0;const i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function rF(n,e){const t=new Set(e.getAttributeKeys());return Lt(n)?(n.style!==void 0&&ae("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&ae("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),Em(n,t,i=>e.getAttribute(i))}function aF(n,e){return Em(n,e.getClassNames(),()=>{})}function lF(n,e){return Em(n,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vc{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=uF(e);for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(e){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(i)}set(e,t){if(Re(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=zh(e);o9(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Re(this._styles[e]))return this._styles[e];const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const s=t.splice(0,t.length-1).join("."),o=ra(this._styles,s);if(!o)return;!Object.keys(o).length&&this.remove(s)}}class cF{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(Re(t)){ud(i,zh(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:o,value:r}=s(t);ud(i,o,r)}else ud(i,e,t)}getNormalized(e,t){if(!e)return wm({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return ra(t,i);const s=i(e,t);if(s)return s}return ra(t,zh(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(s=>{const o=this.getNormalized(s,e);return o&&typeof o=="object"?Object.keys(o).length:o}),i=new Set([...t,...Object.keys(e)]);return Array.from(i)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function uF(n){let e=null,t=0,i=0,s=null;const o=new Map;if(n==="")return o;n.charAt(n.length-1)!=";"&&(n=n+";");for(let r=0;r<n.length;r++){const a=n.charAt(r);if(e===null)switch(a){case":":s||(s=n.substr(t,r-t),i=r+1);break;case'"':case"'":e=a;break;case";":{const l=n.substr(i,r-i);s&&o.set(s.trim(),l.trim()),s=null,t=r+1;break}}else a===e&&(e=null)}return o}function zh(n){return n.replace("-",".")}function ud(n,e,t){let i=t;Re(t)&&(i=wm({},ra(n,e),t)),n9(n,e,i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Jn=class RC extends Bs{constructor(e,t,i,s){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=dF(i),this._children=[],s&&this._insertChild(0,s),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");a0(this._classes,o),this._attrs.delete("class")}this._styles=new vc(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof RC))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Zi(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=hF(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const i=String(t);this._fireChange("attributes",this),e=="class"?a0(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of we(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of we(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of we(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Jn.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function dF(n){const e=ci(n);for(const[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function a0(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function hF(n,e){return typeof e=="string"?[new De(n,e)]:(En(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new De(n,t):t instanceof si?new De(n,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aa extends Jn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=fF}}aa.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function fF(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gu extends ye(aa){constructor(e,t,i,s){super(e,t,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}gu.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const l0=Symbol("rootName");class LC extends gu{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(l0)}set rootName(e){this._setCustomProperty(l0,e)}set _name(e){this.name=e}}LC.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let bs=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new v("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new v("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=$._createAt(e.startPosition):this._position=$._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i instanceof De){if(e.isAtEnd)return this._position=$._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(s instanceof Jn){if(!this.shallow)e=new $(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",s,t,e,1)}if(s instanceof De){if(this.singleCharacters)return e=new $(s,0),this._position=e,this._next();let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new si(s,0,o),e=$._createAfter(r)):(r=new si(s,0,s.data.length),e.offset++),this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const r=new si(i,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=$._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i instanceof De){if(e.isAtStart)return this._position=$._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(s instanceof Jn)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new $(s,s.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof De){if(this.singleCharacters)return e=new $(s,s.data.length),this._position=e,this._previous();let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new si(s,a,s.data.length-a),o=r.data.length,e=$._createBefore(r)}else r=new si(s,0,s.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;const r=new si(i,e.offset,o);return this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=$._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,o){return t instanceof si&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=$._createAfter(t.textNode),this._position=s):i=$._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=$._createBefore(t.textNode),this._position=s):i=$._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:o}}}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let $=class _i extends Ms{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof gu);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=_i._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new bs(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const s=kt(t,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<i[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new bs(e)}clone(){return new _i(this.parent,this.offset)}static _createAt(e,t){if(e instanceof _i)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new v("view-createpositionat-offset-required",i)}return new _i(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new _i(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new v("view-position-after-root",e,{root:e});return new _i(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new _i(e.textNode,e.offsetInText);if(!e.parent)throw new v("view-position-before-root",e,{root:e});return new _i(e.parent,e.index)}};$.prototype.is=function(n){return n==="position"||n==="view:position"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let se=class Di extends Ms{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new bs({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(hl,{direction:"backward"}),t=this.end.getLastMatchingPosition(hl);return e.parent.is("$text")&&e.isAtStart&&(e=$._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=$._createAfter(t.parent)),new Di(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(hl);if(e.isAfter(this.end)||e.isEqual(this.end))return new Di(e,e);let t=this.end.getLastMatchingPosition(hl,{direction:"backward"});const i=e.nodeAfter,s=t.nodeBefore;return i&&i.is("$text")&&(e=new $(i,0)),s&&s.is("$text")&&(t=new $(s,s.data.length)),new Di(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Di(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Di(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Di(t,i)}return null}getWalker(e={}){return e.boundaries=this,new bs(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Di(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new bs(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new bs(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,s){return new this(new $(e,t),new $(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift($._createBefore(e),t)}};se.prototype.is=function(n){return n==="range"||n==="view:range"};function hl(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ti=class VC extends Pe(Ms){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Bh(this.getRanges()),i=Bh(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),s.start.isEqual(r.start)&&s.end.isEqual(r.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(s);else if(t instanceof VC||t instanceof Tm)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof se)this._setRanges([t],s&&s.backward),this._setFakeOptions(s);else if(t instanceof $)this._setRanges([new se(t)]),this._setFakeOptions(s);else if(t instanceof Bs){const o=!!s&&!!s.backward;let r;if(i===void 0)throw new v("view-selection-setto-required-second-parameter",this);i=="in"?r=se._createIn(t):i=="on"?r=se._createOn(t):r=new se($._createAt(t,i)),this._setRanges([r],o),this._setFakeOptions(s)}else if(En(t))this._setRanges(t,s&&s.backward),this._setFakeOptions(s);else throw new v("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new v("view-selection-setfocus-no-ranges",this);const i=$._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),i.compareWith(s)=="before"?this._addRange(new se(i,s),!0):this._addRange(new se(s,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof se))throw new v("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new v("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new se(e.start,e.end))}};Ti.prototype.is=function(n){return n==="selection"||n==="view:selection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Tm=class extends Pe(Ms){constructor(...e){super(),this._selection=new Ti,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};Tm.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tr extends Ai{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const dd=Symbol("bubbling contexts");function Hh(n){class e extends n{fire(i,...s){try{const o=i instanceof Ai?i:new Ai(this,i),r=hd(this);if(!r.size)return;if(mr(o,"capturing",this),Ys(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!OC(r,l):!1;let u=l||mF(a);if(mr(o,"atTarget",u),!c){if(Ys(r,"$text",o,...s))return o.return;mr(o,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(Ys(r,"$root",o,...s))return o.return}else if(u.is("element")&&Ys(r,u.name,o,...s))return o.return;if(Ys(r,u,o,...s))return o.return;u=u.parent,mr(o,"bubbling",u)}return mr(o,"bubbling",this),Ys(r,"$document",o,...s),o.return}catch(o){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(o,this)}}_addEventListener(i,s,o){const r=we(o.context||"$document"),a=hd(this);for(const l of r){let c=a.get(l);c||(c=new(Pe()),a.set(l,c)),this.listenTo(c,i,s,o)}}_removeEventListener(i,s){const o=hd(this);for(const r of o.values())this.stopListening(r,i,s)}}return e}{const n=Hh(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Hh[e]=n.prototype[e]})}function mr(n,e,t){n instanceof tr&&(n._eventPhase=e,n._currentTarget=t)}function Ys(n,e,t,...i){const s=typeof e=="string"?n.get(e):OC(n,e);return s?(s.fire(t,...i),t.stop.called):!1}function OC(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function hd(n){return n[dd]||(n[dd]=new Map),n[dd]}function mF(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,i=e.getPath(),s=t.getPath();return i.length>s.length?e:t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let MC=class extends Hh(ye()){constructor(e){super(),this._postFixers=new Set,this.selection=new Tm,this.roots=new Et({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(t=i(e),t)break;while(t)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BC=10;class ws extends Jn{constructor(e,t,i,s){super(e,t,i,s),this._priority=BC,this._id=null,this._clonesGroup=null,this.getFillerOffset=gF}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new v("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}ws.DEFAULT_PRIORITY=BC;ws.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function gF(){if(fd(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(fd(n)>1)return null;n=n.parent}return!n||fd(n)>1?null:this.childCount}function fd(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sm extends Jn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=pF}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new v("view-emptyelement-cannot-add",[this,t]);return 0}}Sm.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function pF(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pu extends Jn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=wF}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new v("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}pu.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function bF(n){n.document.on("arrowKey",(e,t)=>_F(e,t,n.domConverter),{priority:"low"})}function wF(){return null}function _F(n,e,t){if(e.keyCode==ue.arrowright){const i=e.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||e.shiftKey){const o=i.focusNode,r=i.focusOffset,a=t.domPositionToView(o,r);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=t.viewPositionToDom(c);s?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Am extends Jn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=vF}_insertChild(e,t){if(t&&(t instanceof Bs||Array.from(t).length>0))throw new v("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}Am.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function vF(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let _s=class extends Pe(Ms){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=yF(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};_s.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function yF(n,e){return typeof e=="string"?[new De(n,e)]:(En(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new De(n,t):t instanceof si?new De(n,t.data):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NC{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new _s(this.document,e)}createText(e){return new De(this.document,e)}createAttributeElement(e,t,i={}){const s=new ws(this.document,e,t);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(e,t,i={},s={}){let o=null;Lt(i)?s=i:o=i;const r=new aa(this.document,e,t,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(e,t,i={}){const s=new gu(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(e,t,i={}){const s=new Sm(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(e,t,i){const s=new pu(this.document,e,t);return i&&(s.render=i),s}createRawElement(e,t,i,s={}){const o=new Am(this.document,e,t);return i&&(o.render=i),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Lt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof $?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new v("view-writer-break-non-container-element",this.document);if(!t.parent)throw new v("view-writer-break-root",this.document);if(e.isAtStart)return $._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert($._createAfter(t),i);const s=new se(e,$._createAt(t,"end")),o=new $(i,0);this.move(s,o)}return $._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const r=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new $(r,a))}const s=i.getChild(t-1),o=i.getChild(t);if(!s||!o)return e;if(s.is("$text")&&o.is("$text"))return u0(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new $(s,r))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new v("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),o=s instanceof De?$._createAt(s,"end"):$._createAt(t,"end");return this.move(se._createIn(i),$._createAt(t,"end")),this.remove(se._createOn(i)),o}insert(e,t){t=En(t)?[...t]:[t],DC(t,this.document);const i=t.reduce((r,a)=>{const l=r[r.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?r.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),r},[]);let s=null,o=e;for(const{nodes:r,breakAttributes:a}of i){const l=this._insertNodes(o,r,a);s||(s=l.start),o=l.end}return s?new se(s,o):new se(e)}remove(e){const t=e instanceof se?e:se._createOn(e);if(gr(t,this.document),t.isCollapsed)return new _s(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),o=i.parent,r=s.offset-i.offset,a=o._removeChildren(i.offset,r);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new _s(this.document,a)}clear(e,t){gr(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const o=s.item;let r;if(o.is("element")&&t.isSimilar(o))r=se._createOn(o);else if(!s.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(r=se._createIn(a))}r&&(r.end.isAfter(e.end)&&(r.end=e.end),r.start.isBefore(e.start)&&(r.start=e.start),this.remove(r))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,o=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-o}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof ws))throw new v("view-writer-wrap-invalid-attribute",this.document);if(gr(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!CF(i.parent)&&(i=i.getLastMatchingPosition(o=>o.item.is("uiElement"))),i=this._wrapPosition(i,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new se(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof ws))throw new v("view-writer-unwrap-invalid-attribute",this.document);if(gr(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._unwrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new se(a,l)}rename(e,t){const i=new aa(this.document,e,t.getAttributes());return this.insert($._createAfter(t),i),this.move(se._createIn(t),$._createAt(i,0)),this.remove(se._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return $._createAt(e,t)}createPositionAfter(e){return $._createAfter(e)}createPositionBefore(e){return $._createBefore(e)}createRange(e,t){return new se(e,t)}createRangeOn(e){return se._createOn(e)}createRangeIn(e){return se._createIn(e)}createSelection(...e){return new Ti(...e)}createSlot(e="children"){if(!this._slotFactory)throw new v("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let s;if(i?s=$h(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new v("view-writer-invalid-position-container",this.document);let o;i?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?md(e):e;const r=s._insertChild(o.offset,t);for(const u of t)this._addToClonedElementsGroup(u);const a=o.getShiftedBy(r),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const c=this.mergeAttributes(a);return new se(l,c)}_wrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(s,l))r.push(new $(e,o));else if(c||!u||kF(s,l)){const d=s._clone();l._remove(),d._appendChild(l),e._insertChild(o,d),this._addToClonedElementsGroup(d),r.push(new $(e,o))}else this._wrapChildren(l,0,l.childCount,s);o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return se._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(s)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),r.push(new $(e,o),new $(e,o+u)),o+=u,i+=u-1;continue}if(this._unwrapAttributeElement(s,l)){r.push(new $(e,o),new $(e,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,s),o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return se._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._wrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new se(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return c0(e.clone());e.parent.is("$text")&&(e=md(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new se(e,e.getShiftedBy(1));this.wrap(s,t);const o=new $(i.parent,i.index);i._remove();const r=o.nodeBefore,a=o.nodeAfter;return r instanceof De&&a instanceof De?u0(r,a):c0(o)}_wrapAttributeElement(e,t){if(!d0(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!d0(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(gr(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new se(l,l)}const o=this._breakAttributes(s,t),r=o.parent.childCount,a=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new se(a,o)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new v("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new v("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new v("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&Uh(s.parent)||Uh(s))return e.clone();if(s.is("$text"))return this._breakAttributes(md(e),t);const o=s.childCount;if(i==o){const r=new $(s.parent,s.index+1);return this._breakAttributes(r,t)}else if(i===0){const r=new $(s.parent,s.index);return this._breakAttributes(r,t)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const l=s.childCount-i,c=s._removeChildren(i,l);a._appendChild(c);const u=new $(s.parent,r);return this._breakAttributes(u,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function CF(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function $h(n){let e=n.parent;for(;!Uh(e);){if(!e)return;e=e.parent}return e}function kF(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function c0(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new $(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new $(t,0):n}function md(n){if(n.offset==n.parent.data.length)return new $(n.parent.parent,n.parent.index+1);if(n.offset===0)return new $(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new De(n.root.document,e)),new $(n.parent.parent,n.parent.index+1)}function u0(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new $(n,t)}const EF=[De,ws,aa,Sm,Am,pu];function DC(n,e){for(const t of n){if(!EF.some(i=>t instanceof i))throw new v("view-writer-insert-invalid-node-type",e);t.is("$text")||DC(t.getChildren(),e)}}function Uh(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function gr(n,e){const t=$h(n.start),i=$h(n.end);if(!t||!i||t!==i)throw new v("view-writer-invalid-range-container",e)}function d0(n,e){return n.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const FC=n=>n.createTextNode(" "),zC=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},HC=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},jn=7,la="⁠".repeat(jn);function fn(n){return typeof n=="string"?n.substr(0,jn)===la:tt(n)&&n.data.substr(0,jn)===la}function Ir(n){return n.data.length==jn&&fn(n)}function h0(n){const e=typeof n=="string"?n:n.data;return fn(n)?e.slice(jn):e}function TF(n){n.document.on("arrowKey",SF,{priority:"low"})}function SF(n,e){if(e.keyCode==ue.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;fn(i)&&s<=jn&&t.collapse(i,0)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AF extends ye(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),ee.isBlink&&!ee.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new v("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!ee.isAndroid)return;let e=null;const t=ee.isBlink&&!ee.isAndroid?!this.isSelecting:!0;for(const i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=$._createBefore(e.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){const i=this.domConverter.viewPositionToDom(e),s=i.parent.ownerDocument;fn(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=f0(s,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(i,s),r=this._findUpdateActions(o,i,s,PF);if(r.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const l of r)if(l==="update"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);d&&!d.is("uiElement")&&!d.is("rawElement")&&this._updateElementMappings(d,i[u]),Xb(s[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?$._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&tt(t.parent)&&fn(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!fn(e))throw new v("view-renderer-filler-was-lost",this);Ir(e)?e.remove():e.data=e.data.substr(jn),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!IF(t)||i===t.getFillerOffset())return!1;const s=e.nodeBefore,o=e.nodeAfter;return!(s instanceof De||o instanceof De||ee.isAndroid&&(s||o))}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const r=t.inlineFillerPosition;r&&r.parent==e.parent&&r.offset==e.index&&(o=la+o),m0(i,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.attributes).map(o=>o.name),s=e.getAttributeKeys();for(const o of s)this.domConverter.setDomElementAttribute(t,o,e.getAttribute(o),e);for(const o of i)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;if(ee.isAndroid){let d=null;for(const h of Array.from(i.childNodes)){if(d&&tt(d)&&tt(h)){i.normalize();break}d=h}}const s=t.inlineFillerPosition,o=i.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&f0(i.ownerDocument,r,s.offset);const a=this._diffNodeLists(o,r),l=this._findUpdateActions(a,o,r,xF);let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(o[c]),Xb(o[c])):(d==="equal"||d==="update")&&c++;c=0;for(const d of l)d==="insert"?(vC(i,c,r[c]),c++):d==="update"?(m0(o[c],r[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(r[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=VF(e,this._fakeSelectionContainer),Nr(e,t,RF.bind(null,this.domConverter))}_findUpdateActions(e,t,i,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],r=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?r.push(t[l.equal+l.delete]):(o=o.concat(Nr(r,a,s).map(u=>u==="equal"?"update":u)),o.push("equal"),r=[],a=[]),l[c]++;return o.concat(Nr(r,a,s).map(c=>c==="equal"?"update":c))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(ee.isBlink&&!ee.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&ee.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=OF(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||" ";const s=t.getSelection(),o=t.createRange();s.removeAllRanges(),o.selectNodeContents(i),s.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,s.parent,s.offset),ee.isGecko&&LF(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const i=e.activeElement,s=this.domConverter.mapDomToView(i);i&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function IF(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function f0(n,e,t){const i=e instanceof Array?e:e.childNodes,s=i[t];if(tt(s))return s.data=la+s.data,s;{const o=n.createTextNode(la);return Array.isArray(e)?i.splice(t,0,o):vC(e,t,o),o}}function PF(n,e){return Ki(n)&&Ki(e)&&!tt(n)&&!tt(e)&&!Fr(n)&&!Fr(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function xF(n,e){return Ki(n)&&Ki(e)&&tt(n)&&tt(e)}function RF(n,e,t){return e===t?!0:tt(e)&&tt(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function LF(n,e){const t=n.parent;if(t.nodeType!=Node.ELEMENT_NODE||n.offset!=t.childNodes.length-1)return;const i=t.childNodes[n.offset];i&&i.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function VF(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function OF(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}function m0(n,e){const t=n.data;if(t==e)return;const i=cy(t,e);for(const s of i)s.type==="insert"?n.insertData(s.index,s.values.join("")):n.deleteData(s.index,s.howMany)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const MF=HC(globalThis.document),BF=FC(globalThis.document),NF=zC(globalThis.document),fl="data-ck-unsafe-attribute-",g0="data-ck-unsafe-element";class $C{constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Zi,this._inlineObjectElementMatcher=new Zi,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?Ee.document:Ee.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Ti(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of Array.from(e.children))this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const i=new DOMParser().parseFromString(t,"text/html"),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=r.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(b0(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{const i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let s;if(i.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,i);else{if(i.is("uiElement"))return i.name==="$comment"?s=this._domDocument.createComment(i.getCustomProperty("$rawContent")):s=i.render(this._domDocument,this),t.bind&&this.bindElements(s,i),s;this._shouldRenameElement(i.name)?(b0(i.name),s=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?s=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):s=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(s,this),t.bind&&this.bindElements(s,i);for(const o of i.getAttributeKeys())this.setDomElementAttribute(s,o,i.getAttribute(o),i)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(i,t))s.appendChild(o);return s}}setDomElementAttribute(e,t,i,s){const o=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);if(o||ae("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!yC(t)){ae("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(fl+t)&&o&&e.removeAttribute(fl+t),e.setAttribute(o?t:fl+t,i)}removeDomElementAttribute(e,t){t!=g0&&(e.removeAttribute(t),e.removeAttribute(fl+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const o of e.getChildren()){i===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!$e(o.getAttributes());r&&this.renderingMode=="data"?yield*this.viewChildrenToDom(o,t):(r&&ae("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t)),s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return fn(i)&&(s+=jn),{parent:i,offset:s}}else{let i,s,o;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;o=i.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,o=s.nextSibling}if(tt(o)&&fn(o))return{parent:o,offset:jn};const r=s?dl(s)+1:0;return{parent:i,offset:r}}}domToView(e,t={}){const i=[],s=this._domToView(e,t,i),o=s.next().value;return!o||(s.next(),this._processDomInlineNodes(null,i,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},i=[]){for(let s=0;s<e.childNodes.length;s++){const o=e.childNodes[s],r=this._domToView(o,t,i),a=r.next().value;a!==null&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(e,i,t),yield a,r.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(zF(e))return new Ti([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;tt(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const o=e.getRangeAt(s),r=this.domRangeToView(o);r&&i.push(r)}return new Ti(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new se(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,dl(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return $._createBefore(i);if(tt(e)){if(Ir(e))return this.domPositionToView(e.parentNode,dl(e));const s=this.findCorrespondingViewText(e);let o=t;return s?(fn(e)&&(o-=jn,o=o<0?0:o),new $(s,o)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new $(s,0)}else{const s=e.childNodes[t-1];if(tt(s)&&Ir(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,dl(s));const o=tt(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new $(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Ir(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const o=s.nextSibling;return o instanceof De?o:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const o=s.getChild(0);return o instanceof De?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:i,scrollY:s}=Ee.window,o=[];p0(t,r=>{const{scrollLeft:a,scrollTop:l}=r;o.push([a,l])}),t.focus(),p0(t,r=>{const[a,l]=o.shift();r.scrollLeft=a,r.scrollTop=l}),Ee.window.scrollTo(i,s)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(MF):e.tagName==="BR"&&UC(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(NF)||FF(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=p9(e);for(t.pop();t.length;){const i=t.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return FC(this._domDocument);case"markedNbsp":return zC(this._domDocument);case"br":return HC(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(tt(e)&&fn(e)&&t<jn||this.isElement(e)&&fn(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;const s=this.getHostViewElement(e);if(s)return s;if(Fr(e)&&t.skipComments)return null;if(tt(e)){if(Ir(e))return null;{const o=e.data;if(o==="")return null;const r=new De(this.document,o);return i.push(r),r}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&i.push(o),o;if(this.isDocumentFragment(e))o=new _s(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)o._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||i.push(o),o;if(Fr(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const r=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,r))o._appendChild(a);if(this._isInlineObjectElement(o))i.push(o);else for(const a of r)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let o=0;o<t.length;o++){const r=t[o];if(!r.is("$text")){s=!1;continue}let a,l=!1;if(DF(r,this.preElements))a=h0(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=o>0?t[o-1]:null,u=o+1<t.length?t[o+1]:null,d=!c||c.is("element")&&c.name=="br"||s,h=u?!1:!fn(r.data);i.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=h0(a),a=a.replace(/ \u00A0/g,"  ");const f=u&&u.is("element")&&u.name!="br",m=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||f||m)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),t.splice(o,1),o--):(r._data=a,s=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||s)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_getTouchingInlineViewNode(e,t){const i=new bs({startPosition:t?$._createAfter(e):$._createBefore(e),direction:t?"forward":"backward"});for(const s of i){if(s.item.is("element","br"))return null;if(this._isInlineObjectElement(s.item))return s.item;if(s.item.is("containerElement"))return null;if(s.item.is("$textProxy"))return s.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Fr(e))return new pu(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Jn(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(g0,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const s of t.getAttributeNames())i.setAttribute(s,t.getAttribute(s))}return i}}function DF(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function p0(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function FF(n,e){return n.isEqualNode(BF)&&UC(n,e)&&n.parentNode.childNodes.length===1}function UC(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function b0(n){n==="script"&&ae("domconverter-unsafe-script-element-detected"),n==="style"&&ae("domconverter-unsafe-style-element-detected")}function zF(n){if(!ee.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class di extends Dt(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oo{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Ey(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class is extends di{constructor(){super(...arguments),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Oo(this.view,t,i))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HF extends is{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Vo(this)}};this.fire(e.type,e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $F extends di{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Ii(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Ti(t.getRanges(),{backward:t.isBackward,fake:!1});(e==ue.arrowleft||e==ue.arrowup)&&i.setTo(i.getFirstPosition()),(e==ue.arrowright||e==ue.arrowdown)&&i.setTo(i.getLastPosition());const s={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let WC=class extends di{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,i=new Set,s=new Set;for(const r of e){const a=t.mapDomToView(r.target);a&&(a.is("uiElement")||a.is("rawElement")||r.type==="childList"&&!this._isBogusBrMutation(r)&&s.add(a))}for(const r of e){const a=t.mapDomToView(r.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&r.type==="characterData"){const l=t.findCorrespondingViewText(r.target);l&&!s.has(l.parent)?i.add(l):!l&&fn(r.target)&&s.add(t.mapDomToView(r.target.parentNode))}}let o=!1;for(const r of i)o=!0,this.renderer.markToSync("text",r);for(const r of s){const a=t.mapViewToDom(r),l=Array.from(r.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));YD(l,c,UF)||(o=!0,this.renderer.markToSync("children",r))}o&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function UF(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yc extends is{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(i,s)=>{const o=t.selection.editableElement;(o===null||o===s.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WF extends di{constructor(e){super(e),this.mutationObserver=e.getObserver(WC),this.focusObserver=e.getObserver(yc),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Ii(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Ii(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(o,r)=>{this.document.isComposing&&!ee.isAndroid||(this._handleSelectionChange(r,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){if(!this.isEnabled)return;const i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(i);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:s,domSelection:i};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jF extends is{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jC{constructor(e,t={}){this._files=t.cacheFiles?w0(e):null,this._native=e}get files(){return this._files||(this._files=w0(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function w0(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qF extends is{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const t=e.getTargetRanges(),i=this.view,s=i.document;let o=null,r=null,a=[];if(e.dataTransfer&&(o=new jC(e.dataTransfer)),e.data!==null?r=e.data:o&&(r=o.getData("text/plain")),s.selection.isFake)a=Array.from(s.selection.getRanges());else if(t.length)a=t.map(l=>{const c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),u=i.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return i.createRange(c,u);if(u)return i.createRange(u)}).filter(l=>!!l);else if(ee.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(ee.isAndroid&&e.inputType=="insertCompositionText"&&r&&r.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&r&&r.includes(`
`)){const l=r.split(/\n{1,2}/g);let c=a;for(let u=0;u<l.length;u++){const d=l[u];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[s.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:r,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GF extends di{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&P9(i.keyCode)){const s=new tr(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KF extends di{constructor(e){super(e);const t=this.document;t.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=ue.tab||s.ctrlKey)return;const o=new tr(t,"tab",t.selection.getFirstRange());t.fire(o,s),o.stop.called&&i.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ZF=class extends ye(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new MC(e),this.domConverter=new $C(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new AF(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new NC(this.document),this.addObserver(WC),this.addObserver(yc),this.addObserver(WF),this.addObserver(HF),this.addObserver($F),this.addObserver(jF),this.addObserver(GF),this.addObserver(qF),this.addObserver(KF),TF(this),bF(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),ee.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const s={};for(const{name:r,value:a}of Array.from(e.attributes))s[r]=a,r==="class"?this._writer.addClass(a.split(" "),i):this._writer.setAttribute(r,a,i);this._initialDomRootAttributes.set(e,s);const o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(r,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(r,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(r,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const r of this._observers.values())r.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const i=this._initialDomRootAttributes.get(t);for(const s in i)t.setAttribute(s,i[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,s]of this.domRoots)t.observe(s,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:s=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const r=Dn({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:s});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});const a={target:this.domConverter.viewRangeToDom(o),viewportOffset:i,ancestorOffset:s,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,r),C9(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new v("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(yc).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return $._createAt(e,t)}createPositionAfter(e){return $._createAfter(e)}createPositionBefore(e){return $._createBefore(e)}createRange(e,t){return new se(e,t)}createRangeOn(e){return se._createOn(e)}createRangeIn(e){return se._createIn(e)}createSelection(...e){return new Ti(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ss{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ns=class extends ss{constructor(e){super(),this.parent=null,this._attrs=ci(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new v("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new v("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=kt(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=ci(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ns.prototype.is=function(n){return n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zr{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((i,s)=>i+s.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new v("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new v("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const i of t)if(!(i instanceof Ns))throw new v("model-nodelist-insertnodes-not-node",this);this._nodes=U9(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ae extends Ns{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Ae(this.data,this.getAttributes())}static fromJSON(e){return new Ae(e.data,e.attributes)}}Ae.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qn extends ss{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new v("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new v("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}qn.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Se extends Ns{constructor(e,t,i){super(t),this._children=new zr,this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new Se(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=JF(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(Se.fromJSON(i)):t.push(Ae.fromJSON(i))}return new Se(e.name,e.attributes,t)}}Se.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function JF(n){return typeof n=="string"?[new Ae(n)]:(En(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Ae(e):e instanceof qn?new Ae(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ei{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new v("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new v("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=B._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,s,o;do s=this.position,o=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=s,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Hr(t,i),o=s||qC(t,i,s);if(o instanceof Se){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,cs("elementStart",o,e,t,1)}if(o instanceof Ae){let r;if(this.singleCharacters)r=1;else{let c=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),r=c-t.offset}const a=t.offset-o.startOffset,l=new qn(o,a,r);return t.offset+=r,this._position=t,cs("text",l,e,t,r)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():cs("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,o=Hr(t,s),r=o||GC(t,s,o);if(r instanceof Se)return t.offset--,this.shallow?(this._position=t,cs("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this._position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():cs("elementEnd",r,e,t));if(r instanceof Ae){let a;if(this.singleCharacters)a=1;else{let u=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-r.startOffset,c=new qn(r,l-a,a);return t.offset-=a,this._position=t,cs("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,cs("elementStart",i,e,t,1)}}function cs(n,e,t,i,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:s}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B extends ss{constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new v("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new v("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new v("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new v("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Hr(this,this.parent)}get nodeAfter(){const e=this.parent;return qC(this,e,Hr(this,e))}get nodeBefore(){const e=this.parent;return GC(this,e,Hr(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=kt(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Ei(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=kt(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const s=this.path[i]-e.path[i];if(s<-1||s>1)return!1;if(s===1)return _0(e,this,i);if(s===-1)return _0(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Wh(this.path,t):Wh(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),i=e.getParentPath();return kt(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=B._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this);let s;return i?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=B._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,t){const i=B._createAt(this);if(this.root!=e.root)return i;if(kt(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(kt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;i.path[s]-=t}}return i}_getTransformedByInsertion(e,t){const i=B._createAt(this);if(this.root!=e.root)return i;if(kt(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(kt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(i.path[s]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return B._createAt(this);const s=this._getTransformedByDeletion(e,i);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):s._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,s=B._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-e.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof B)return new B(e.root,e.path,e.stickiness);{const s=e;if(t=="end")t=s.maxOffset;else{if(t=="before")return this._createBefore(s,i);if(t=="after")return this._createAfter(s,i);if(t!==0&&!t)throw new v("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new v("model-position-parent-incorrect",[this,e]);const o=s.getPath();return o.push(t),new this(s.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new v("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new v("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new B(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new v("model-position-fromjson-no-root",t,{rootName:e.root});return new B(t.getRoot(e.root),e.path,e.stickiness)}}B.prototype.is=function(n){return n==="position"||n==="model:position"};function Hr(n,e){const t=e.getChild(e.offsetToIndex(n.offset));return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function qC(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset))}function GC(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function _0(n,e,t){return!(t+1===n.path.length||!Wh(e.path,t+1)||!XF(n,t+1))}function Wh(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function XF(n,e){let t=n.parent,i=n.path.length-1,s=0;for(;i>=e;){if(n.path[i]+s!==t.maxOffset)return!1;s=1,i--,t=t.parent}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P extends ss{constructor(e,t){super(),this.start=B._createAt(e),this.end=t?B._createAt(t):B._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Ei({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return kt(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}containsItem(e){const t=B._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new P(this.start,e.start)),this.containsPosition(e.end)&&t.push(new P(e.end,this.end))):t.push(new P(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new P(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let s=this.start,o=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(o)&&(o=e.end),new P(s,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=B._createAt(this.start);let s=i.parent;for(;i.path.length>t+1;){const o=s.maxOffset-i.offset;o!==0&&e.push(new P(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],r=o-i.offset;r!==0&&e.push(new P(i,i.getShiftedBy(r))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Ei(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Ei(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Ei(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new P(this.start,this.end)]}getTransformedByOperations(e){const t=[new P(this.start,this.end)];for(const i of e)for(let s=0;s<t.length;s++){const o=t[s].getTransformedByOperation(i);t.splice(s,1,...o),s+=o.length-1}for(let i=0;i<t.length;i++){const s=t[i];for(let o=i+1;o<t.length;o++){const r=t[o];(s.containsRange(r)||r.containsRange(s)||s.isEqual(r))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,s=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new P(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new P(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=B._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new P(t,i)):new P(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new P(this.start,e),new P(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const s=new P(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,t),s.end=s.end._getTransformedByInsertion(e,t),[s]}}_getTransformedByMove(e,t,i,s=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,t,i);return[new P(d)]}const o=P._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,t,i),h=this.end._getTransformedByMove(e,t,i);return[new P(d,h)]}let a;const l=this.getDifference(o);let c=null;const u=this.getIntersection(o);if(l.length==1?c=new P(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new P(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(r,i,u!==null||s):a=[],u){const d=new P(u.start._getCombined(o.start,r),u.end._getCombined(o.start,r));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return i==null&&s==null?null:(i==null&&(i=e),s==null&&(s=e),new P(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return new this(B._createAt(e,0),B._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(B._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new v("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,r)=>o.start.isAfter(r.start)?1:-1);const i=e.indexOf(t),s=new this(t.start,t.end);if(i>0)for(let o=i-1;e[o].end.isEqual(s.start);o++)s.start=B._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(s.end);o++)s.end=B._createAt(e[o].end);return s}static fromJSON(e,t){return new this(B.fromJSON(e.start,t),B.fromJSON(e.end,t))}}P.prototype.is=function(n){return n==="range"||n==="model:range"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KC extends Pe(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new v("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(i),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=B._createAt(s,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new P(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new se(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const s of t)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())i.add(o);else i.add(s);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){const o=this._toModelOffset(e.parent,e.index,i),r=this._toModelOffset(e,t,e);return o+r}if(e.is("$text"))return t;let s=0;for(let o=0;o<t;o++)s+=this.getModelLength(e.getChild(o));return s}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,s=0,o=0,r=0;if(e.is("$text"))return new $(e,t);for(;o<t;)i=e.getChild(r),s=this.getModelLength(i),o+=s,r++;return o==t?this._moveViewPositionToTextNode(new $(e,r)):this.findPositionIn(i,t-(o-s))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t instanceof De?new $(t,t.data.length):i instanceof De?new $(i,0):e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YF{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=ml(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=ml(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=ml(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const s=i.get(t);return s===void 0?null:s}revert(e,t){t=ml(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[i,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&e==a&&t.push({event:o,item:i.name||i.description})}if(t.length)throw new v("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,s=e.parent,o=Symbol("$textProxy:"+e.data);let r,a;return r=this._textProxyRegistry.get(t),r||(r=new Map,this._textProxyRegistry.set(t,r)),a=r.get(i),a||(a=new Map,r.set(i,a)),a.set(s,o),o}}function ml(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZC extends Pe(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const s=this._createConversionApi(i,e.getRefreshedItems());for(const r of e.getMarkersToRemove())this._convertMarkerRemove(r.name,r.range,s);const o=this._reduceChanges(e.getChanges());for(const r of o)r.type==="insert"?this._convertInsert(P._createFromPositionAndShift(r.position,r.length),s):r.type==="reinsert"?this._convertReinsert(P._createFromPositionAndShift(r.position,r.length),s):r.type==="remove"?this._convertRemove(r.position,r.length,r.name,s):this._convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,s);s.mapper.flushDeferredBindings();for(const r of s.mapper.flushUnboundMarkerNames()){const a=t.get(r).getRange();this._convertMarkerRemove(r,a,s),this._convertMarkerAdd(r,a,s)}for(const r of e.getMarkersToAdd())this._convertMarkerAdd(r.name,r.range,s);s.consumable.verifyAllConsumed("insert")}convert(e,t,i,s={}){const o=this._createConversionApi(i,void 0,s);this._convertInsert(e,o);for(const[r,a]of t)this._convertMarkerAdd(r,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const s=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},s);const o=e.getFirstPosition().root;if(!s.mapper.toViewElement(o))return;const r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,e,r),this.fire("selection",{selection:e},s),!!e.isCollapsed){for(const a of r)if(s.consumable.test(e,"addMarker:"+a.name)){const l=a.getRange();if(!QF(e.getFirstPosition(),a,s.mapper))continue;const c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,s)}for(const a of e.getAttributeKeys())if(s.consumable.test(e,"attribute:"+a)){const l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,s)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const s of Array.from(e.getWalker({shallow:!0})).map(v0))this._testAndFire("insert",s,t)}_convertRemove(e,t,i,s){this.fire(`remove:${i}`,{position:e,length:t},s)}_convertAttribute(e,t,i,s,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const r of e){const a={item:r.item,range:P._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:t,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const s of i.map(v0))this._testAndFire("insert",{...s,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(i.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,s)){this._addConsumablesForRange(i.consumable,t,s);for(const o of t.getItems()){if(!i.consumable.test(o,s))continue;const r={item:o,range:P._createOn(o),markerName:e,markerRange:t};this.fire(s,r,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const i of t){const s=i.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const o of s.getAttributeKeys())e.add(s,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,i){for(const s of t.getItems())e.add(s,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const s of i)e.add(t,"addMarker:"+s.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,i){const s=ez(e,t),o=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,r=this._firedEventsMap.get(i),a=r.get(o);if(!a)r.set(o,new Set([s]));else if(!a.has(s))a.add(s);else return;this.fire(s,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:P._createOn(e)};for(const s of i.item.getAttributeKeys())i.attributeKey=s,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(s),this._testAndFire(`attribute:${s}`,i,t)}_createConversionApi(e,t=new Set,i={}){const s={...this._conversionApi,consumable:new YF,writer:e,options:i,convertItem:o=>this._convertInsert(P._createOn(o),s),convertChildren:o=>this._convertInsert(P._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!t.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function QF(n,e,t){const i=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(i.containsItem(r))return!!t.toViewElement(r).getCustomProperty("addHighlight")})}function ez(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function v0(n){const e=n.item,t=P._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pn extends Pe(ss){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new P(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new P(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new P(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof pn)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof P)this._setRanges([t],!!s&&!!s.backward);else if(t instanceof B)this._setRanges([new P(t)]);else if(t instanceof Ns){const o=!!s&&!!s.backward;let r;if(i=="in")r=P._createIn(t);else if(i=="on")r=P._createOn(t);else if(i!==void 0)r=new P(B._createAt(t,i));else throw new v("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([r],o)}else if(En(t))this._setRanges(t,s&&!!s.backward);else throw new v("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const i=Array.from(e),s=i.some(o=>{if(!(o instanceof P))throw new v("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(r=>!r.isEqual(o))});i.length===this._ranges.length&&!s||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new v("model-selection-setfocus-no-ranges",[this,e]);const i=B._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(s)=="before"?(this._pushRange(new P(i,s)),this._lastRangeBackward=!0):(this._pushRange(new P(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=y0(t.start,e);nz(i,t)&&(yield i);for(const o of t.getWalker()){const r=o.item;o.type=="elementEnd"&&tz(r,e,t)&&(yield r)}const s=y0(t.end,e);iz(s,t)&&(yield s)}}containsEntireContent(e=this.anchor.root){const t=B._createAt(e,0),i=B._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new P(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new v("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}pn.prototype.is=function(n){return n==="selection"||n==="model:selection"};function JC(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function tz(n,e,t){return JC(n,e)&&Im(n,t)}function y0(n,e){const i=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=i.isLimit(a),!o&&JC(a,e)));return s.forEach(a=>e.add(a)),r}function Im(n,e){const t=sz(n);return t?!e.containsRange(P._createOn(t),!0):!0}function nz(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(B._createAt(n,n.maxOffset))?!1:Im(n,e):!1}function iz(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(B._createAt(n,0))?!1:Im(n,e):!1}function sz(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rn extends Pe(P){constructor(e,t){super(e,t),oz.call(this)}detach(){this.stopListening()}toRange(){return new P(this.start,this.end)}static fromRange(e){return new Rn(e.start,e.end)}}Rn.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function oz(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&rz.call(this,t)},{priority:"low"})}function rz(n){const e=this.getTransformedByOperation(n),t=P._createFromRanges(e),i=!t.isEqual(this),s=az(this,n);let o=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?o=n.sourcePosition:o=n.deletionPosition);const r=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function az(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ca="selection:";class Xn extends Pe(ss){constructor(e){super(),this._selection=new lz(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return ca+e}static _isStoreAttributeKey(e){return e.startsWith(ca)}}Xn.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class lz extends pn{constructor(e){super(),this.markers=new Et({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const s=i[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,s,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(t,i)=>{cz(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Nt();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new v("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new v("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Rn.fromRange(e);return t.on("change:range",(i,s,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const r=this._ranges.indexOf(t);this._ranges.splice(r,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const r=s.getRange();for(const a of this.getRanges())r.containsRange(a,!a.isCollapsed)&&e.push(s)}const i=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const o=Array.from(this.markers),r=this.markers.has(e);if(!t)r&&(this.markers.remove(e),s=!0);else{let a=!1;for(const l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!r?(this.markers.add(e),s=!0):!a&&r&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=ci(this._getSurroundingAttributes()),i=ci(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,r]of this._attributePriority)r=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const s=[];for(const[o,r]of this.getAttributes())(!i.has(o)||i.get(o)!==r)&&s.push(o);for(const[o]of i)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[i,s]of this.getAttributes())e.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of e)this._setAttribute(i,s,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(ca)&&(yield[t.substr(ca.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=pr(s,t)),i||(i=pr(o,t)),!this.isGravityOverridden&&!i){let r=s;for(;r&&!i;)r=r.previousSibling,i=pr(r,t)}if(!i){let r=o;for(;r&&!i;)r=r.nextSibling,i=pr(r,t)}i||(i=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&t.isObject(o.item)){i=pr(o.item,t);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function pr(n,e){if(!n)return null;if(n instanceof qn||n instanceof Ae)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[i,s]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,s]);return t}function cz(n,e){const t=n.document.differ;for(const i of t.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&n.enqueueChange(e,r=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(ca));for(const l of a)r.removeAttribute(l,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XC{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uz extends XC{elementToElement(e){return this.add(Iz(e))}elementToStructure(e){return this.add(Pz(e))}attributeToElement(e){return this.add(xz(e))}attributeToAttribute(e){return this.add(Rz(e))}markerToElement(e){return this.add(Lz(e))}markerToHighlight(e){return this.add(Oz(e))}markerToData(e){return this.add(Vz(e))}}function YC(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const i=t.writer,s=t.mapper.toViewPosition(e.range.start),o=i.createText(e.item.data);i.insert(s,o)}}function QC(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function dz(){return(n,e,t)=>{const i=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(s,{isPhantom:!0}),r=t.writer.createRange(i,o),a=t.writer.remove(r.getTrimmed());for(const l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function ek(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function hz(){return(n,e,t)=>{const i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=[];for(const o of i.getRanges())s.push(t.mapper.toViewRange(o));t.writer.setSelection(s,{backward:i.isBackward})}}function fz(){return(n,e,t)=>{const i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=t.writer,o=i.getFirstPosition(),r=t.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function mz(){return(n,e,t)=>{const i=t.writer,s=i.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);i.setSelection(null)}}function gz(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.writer,a=r.document.selection;if(t.item instanceof pn||t.item instanceof Xn)r.wrap(a.getFirstRange(),o);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(l=r.unwrap(l,s)),t.attributeNewValue!==null&&o&&r.wrap(l,o)}}}function pz(n,e=Hz){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=n(i.item,s,i);if(!o)return;e(i.item,s.consumable);const r=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(r,o),s.convertAttributes(i.item),ok(o,i.item.getChildren(),s,{reconversion:i.reconversion})}}function bz(n,e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(Nz(i.item,o,s));const r=n(i.item,s,i);if(s.writer._clearSlotFactory(),!r)return;Dz(i.item,o,s),e(i.item,s.consumable);const a=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(a,r),s.convertAttributes(i.item),Fz(r,o,s,{reconversion:i.reconversion})}}function wz(n){return(e,t,i)=>{t.isOpening=!0;const s=n(t,i);t.isOpening=!1;const o=n(t,i);if(!s||!o)return;const r=t.markerRange;if(r.isCollapsed&&!i.consumable.consume(r,e.name))return;for(const c of r)if(!i.consumable.consume(c.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(r.start),s),i.mapper.bindElementToMarker(s,t.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function _z(){return(n,e,t)=>{const i=t.mapper.markerNameToElements(e.markerName);if(i){for(const s of i)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function vz(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=t.markerRange;i.consumable.consume(o,e.name)&&(C0(o,!1,i,t,s),C0(o,!0,i,t,s),e.stop())}}function C0(n,e,t,i,s){const o=e?n.start:n.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let c,u;e&&r||!e&&!a?(c=r,u=!0):(c=a,u=!1);const d=t.mapper.toViewElement(c);if(d){yz(d,e,u,t,i,s);return}}const l=t.mapper.toViewPosition(o);Cz(l,e,t,i,s)}function yz(n,e,t,i,s,o){const r=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(r)?n.getAttribute(r).split(","):[];a.unshift(o.name),i.writer.setAttribute(r,a.join(","),n),i.mapper.bindElementToMarker(n,s.markerName)}function Cz(n,e,t,i,s){const o=`${s.group}-${e?"start":"end"}`,r=s.name?{name:s.name}:null,a=t.writer.createUIElement(o,r);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function kz(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=i.mapper.markerNameToElements(t.markerName);if(!o)return;for(const a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function r(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function Ez(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.mapper.toViewElement(t.item),a=i.writer;if(!r)throw new v("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&s)if(s.key=="class"){const l=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(const c of l)a.removeClass(c,r)}else if(s.key=="style")if(typeof s.value=="string"){const l=new vc(a.document.stylesProcessor);l.setTo(s.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,r)}else{const l=Object.keys(s.value);for(const c of l)a.removeStyle(c,r)}else a.removeAttribute(s.key,r);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(const c of l)a.addClass(c,r)}else if(o.key=="style")if(typeof o.value=="string"){const l=new vc(a.document.stylesProcessor);l.setTo(o.value);for(const[c,u]of l.getStylesEntries())a.setStyle(c,u,r)}else{const l=Object.keys(o.value);for(const c of l)a.setStyle(c,o.value[c],r)}else a.setAttribute(o.key,o.value,r)}}function Tz(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof pn||t.item instanceof Xn)&&!t.item.is("$textProxy"))return;const s=Pm(n,t,i);if(!s||!i.consumable.consume(t.item,e.name))return;const o=i.writer,r=ek(o,s),a=o.document.selection;if(t.item instanceof pn||t.item instanceof Xn)o.wrap(a.getFirstRange(),r);else{const l=i.mapper.toViewRange(t.range),c=o.wrap(l,r);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(r)){i.mapper.bindElementToMarker(u,t.markerName);break}}}}function Sz(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof Se))return;const s=Pm(n,t,i);if(!s||!i.consumable.test(t.item,e.name))return;const o=i.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const a of P._createIn(t.item))i.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,s,i.writer),i.mapper.bindElementToMarker(o,t.markerName)}}}function Az(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;const s=Pm(n,t,i);if(!s)return;const o=ek(i.writer,s),r=i.mapper.markerNameToElements(t.markerName);if(r){for(const a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function Iz(n){const e=tk(n.model),t=ua(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,pz(t,sk(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",ik(e),{priority:"low"})}}function Pz(n){const e=tk(n.model),t=ua(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new v("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,bz(t,sk(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",ik(e),{priority:"low"})}}function xz(n){n=Dn(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=ua(n.view[s],"attribute");else n.view=ua(n.view,"attribute");const i=nk(n);return s=>{s.on(t,gz(i),{priority:n.converterPriority||"normal"})}}function Rz(n){n=Dn(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=k0(n.view[s]);else n.view=k0(n.view);const i=nk(n);return s=>{s.on(t,Ez(i),{priority:n.converterPriority||"normal"})}}function Lz(n){const e=ua(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,wz(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,_z(),{priority:n.converterPriority||"normal"})}}function Vz(n){n=Dn(n);const e=n.model;let t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,vz(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,kz(t),{priority:n.converterPriority||"normal"})}}function Oz(n){return e=>{e.on(`addMarker:${n.model}`,Tz(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,Sz(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,Az(n.view),{priority:n.converterPriority||"normal"})}}function tk(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?we(n.attributes):[],children:!!n.children}}function ua(n,e){return typeof n=="function"?n:(t,i)=>Mz(n,i,e)}function Mz(n,e,t){typeof n=="string"&&(n={name:n});let i;const s=e.writer,o=Object.assign({},n.attributes);if(t=="container")i=s.createContainerElement(n.name,o);else if(t=="attribute"){const r={priority:n.priority||ws.DEFAULT_PRIORITY};i=s.createAttributeElement(n.name,o,r)}else i=s.createUIElement(n.name,o);if(n.styles){const r=Object.keys(n.styles);for(const a of r)s.setStyle(a,n.styles[a],i)}if(n.classes){const r=n.classes;if(typeof r=="string")s.addClass(r,i);else for(const a of r)s.addClass(a,i)}return i}function nk(n){return n.model.values?(e,t,i)=>{const s=n.view[e];return s?s(e,t,i):null}:n.view}function k0(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function Pm(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Bz(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function ik(n){const e=Bz(n);return(t,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const o of i.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!e(r,o)){s.push(o);continue}if(!i.reconvertedElements.has(r)){i.reconvertedElements.add(r);const a=B._createBefore(r);let l=s.length;for(let c=s.length-1;c>=0;c--){const u=s[c],h=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(h=="before"||u.type=="remove"&&h=="same")break;l=c}s.splice(l,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}i.changes=s}}function sk(n){return(e,t,i={})=>{const s=["insert"];for(const o of n.attributes)e.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>t.test(e,o))?(i.preflight||s.forEach(o=>t.consume(e,o)),!0):!1}}function Nz(n,e,t){return(i,s)=>{const o=i.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(n.getChildren());else if(typeof s=="function")r=Array.from(n.getChildren()).filter(a=>s(a));else throw new v("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(o,r),o}}function Dz(n,e,t){const i=Array.from(e.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new v("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(s.size!=n.childCount)throw new v("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function Fz(n,e,t,i){t.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of e)ok(n,o,t,i),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",r);function r(a,l){const c=l.modelPosition.nodeAfter,u=o.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(s,u))}}function ok(n,e,t,i){for(const s of e)zz(n.root,s,t,i)||t.convertItem(s)}function zz(n,e,t,i){const{writer:s,mapper:o}=t;if(!i.reconversion)return!1;const r=o.toViewElement(e);return!r||r.root==n||!t.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(B._createBefore(e))),!0)}function Hz(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rk(n){const{schema:e,document:t}=n.model;for(const i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function ak(n,e,t){const i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function lk(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $z extends XC{elementToElement(e){return this.add(ck(e))}elementToAttribute(e){return this.add(jz(e))}attributeToAttribute(e){return this.add(qz(e))}elementToMarker(e){return this.add(Gz(e))}dataToMarker(e){return this.add(Kz(e))}}function E0(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=s}}}function Uz(){return(n,e,{schema:t,consumable:i,writer:s})=>{let o=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!ak(o,"$text",t)||e.viewItem.data.trim().length==0)return;const a=o.nodeBefore;o=lk(o,s),a&&a.is("element","$marker")&&(s.move(s.createRangeOn(a),o),o=s.createPositionAfter(a))}i.consume(e.viewItem);const r=s.createText(e.viewItem.data);s.insert(r,o),e.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),e.modelCursor=e.modelRange.end}}function Wz(n,e){return(t,i)=>{const s=i.newSelection,o=[];for(const a of s.getRanges())o.push(e.toModelRange(a));const r=n.createSelection(o,{backward:s.isBackward});r.isEqual(n.document.selection)||n.change(a=>{a.setSelection(r)})}}function ck(n){n=Dn(n);const e=jh(n),t=xm(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"normal"})}}function jz(n){n=Dn(n),uk(n);const e=dk(n,!1),t=xm(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"low"})}}function qz(n){n=Dn(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=Xz(n)),uk(n,e);const t=dk(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function Gz(n){const e=eH(n.model);return ck({...n,model:e})}function Kz(n){n=Dn(n),n.model||(n.model=s=>s?n.view+":"+s:n.view);const e={view:n.view,model:n.model},t=jh(T0(e,"start")),i=jh(T0(e,"end"));return s=>{s.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),s.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});const o=bn.low,r=bn.highest,a=bn.get(n.converterPriority)/r;s.on("element",Zz(e),{priority:o+a})}}function Zz(n){return(e,t,i)=>{const s=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const l of a){const c=n.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,r),t.modelCursor.isEqual(r)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(r,1),t.modelRange=t.modelRange._getTransformedByInsertion(r,1)[0]}}}}function xm(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function jh(n){const e=new Zi(n.view);return(t,i,s)=>{const o=e.match(i.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(i.viewItem,r))return;const a=Jz(n.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,r),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function Jz(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function Xz(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function uk(n,e=null){const t=e===null?!0:o=>o.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:s}}function dk(n,e){const t=new Zi(n.view);return(i,s,o)=>{if(!s.modelRange&&e)return;const r=t.match(s.viewItem);if(!r||(Yz(n.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(s.viewItem,o):n.model.value;if(l===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),Qz(s.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function Yz(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!xm(t)?!1:!t.classes&&!t.attributes&&!t.styles}function Qz(n,e,t,i){let s=!1;for(const o of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(o,e.key)&&(s=!0,!o.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,o));return s}function eH(n){return(e,t)=>{const i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function T0(n,e){const t=(i,s)=>{const o=i.getAttribute("name"),r=n.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${n.view}-${e}`,model:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tH(n){n.document.registerPostFixer(e=>nH(e,n))}function nH(n,e){const t=e.document.selection,i=e.schema,s=[];let o=!1;for(const r of t.getRanges()){const a=hk(r,i);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&n.setSelection(rH(s),{backward:t.isBackward}),!1}function hk(n,e){return n.isCollapsed?iH(n,e):sH(n,e)}function iH(n,e){const t=n.start,i=e.getNearestSelectionRange(t);if(!i){const o=t.getAncestors().reverse().find(r=>e.isObject(r));return o?P._createOn(o):null}if(!i.isCollapsed)return i;const s=i.start;return t.isEqual(s)?null:new P(s)}function sH(n,e){const{start:t,end:i}=n,s=e.checkChild(t,"$text"),o=e.checkChild(i,"$text"),r=e.getLimitElement(t),a=e.getLimitElement(i);if(r===a){if(s&&o)return null;if(oH(t,i,e)){const d=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),f=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),m=d?d.start:t,g=f?f.end:i;return new P(m,g)}}const l=r&&!r.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,d=l&&(!u||!A0(t.nodeAfter,e)),h=c&&(!u||!A0(i.nodeBefore,e));let f=t,m=i;return d&&(f=B._createBefore(S0(r,e))),h&&(m=B._createAfter(S0(a,e))),new P(f,m)}return null}function S0(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function oH(n,e,t){const i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||s}function rH(n){const e=[...n],t=new Set;let i=1;for(;i<e.length;){const o=e[i],r=e.slice(0,i);for(const[a,l]of r.entries())if(!t.has(a)){if(o.isEqual(l))t.add(a);else if(o.isIntersecting(l)){t.add(a),t.add(i);const c=o.getJoined(l);e.push(c)}}i++}return e.filter((o,r)=>!t.has(r))}function A0(n,e){return n&&e.isSelectable(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aH extends ye(){constructor(e,t){super(),this.model=e,this.view=new ZF(t),this.mapper=new KC,this.downcastDispatcher=new ZC({mapper:this.mapper,schema:e.schema});const i=this.model.document,s=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(r=>{this.downcastDispatcher.convertChanges(i.differ,o,r),this.downcastDispatcher.convertSelection(s,o,r)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",Wz(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",lH(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",YC(),{priority:"lowest"}),this.downcastDispatcher.on("insert",QC(),{priority:"lowest"}),this.downcastDispatcher.on("remove",dz(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",mz()),this.downcastDispatcher.on("selection",hz(),{priority:"low"}),this.downcastDispatcher.on("selection",fz(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(r=>{if(r.rootName=="$graveyard")return null;const a=new LC(this.view.document,r.name);return a.rootName=r.rootName,this.mapper.bindElements(r,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new v("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function lH(n,e,t){return(i,s)=>{if(!(t.document.isComposing&&!ee.isAndroid))for(let o=0;o<s.targetRanges.length;o++){const r=s.targetRanges[o],a=n.toModelRange(r),l=hk(a,e);!l||l.isEqual(a)||(s.targetRanges[o]=n.toViewRange(l))}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $r{constructor(){this._consumables=new Map}add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new cH(e),this._consumables.set(e,i)),i.add(t)}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const r of i)r=="style"||r=="class"||t.attributes.push(r);const s=e.getClassNames();for(const r of s)t.classes.push(r);const o=e.getStyleNames();for(const r of o)t.styles.push(r);return t}static createFrom(e,t){if(t||(t=new $r),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,$r.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=$r.createFrom(i,t);return t}}const gl=["attributes","classes","styles"];class cH{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of gl)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of gl)if(t in e){const i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of gl)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of gl)t in e&&this._revert(t,e[t])}_add(e,t){const i=we(t),s=this._consumables[e];for(const o of i){if(e==="attributes"&&(o==="class"||o==="style"))throw new v("viewconsumable-invalid-attribute",this);if(s.set(o,!0),e==="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!0)}}_test(e,t){const i=we(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles",a=this._test(r,[...this._consumables[r].keys()]);if(a!==!0)return a}else{const r=s.get(o);if(r===void 0)return null;if(!r)return!1}return!0}_consume(e,t){const i=we(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}else if(s.set(o,!1),e=="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!1)}_revert(e,t){const i=we(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._revert(r,[...this._consumables[r].keys()])}else s.get(o)===!1&&s.set(o,!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uH extends ye(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new vs(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new vs(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new v("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new v("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const i=this.getDefinition(e.last);return i?i.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof B){const i=e.nodeBefore,s=e.nodeAfter;if(!(i instanceof Se))throw new v("schema-check-merge-no-element-before",this);if(!(s instanceof Se))throw new v("schema-check-merge-no-element-after",this);return this.checkMerge(i,s)}for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[i,s])=>{if(!s)return;const o=e(i,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[i,s])=>{const o=e(i,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof B?t=e.parent:t=(e instanceof P?[e]:Array.from(e.getRanges())).reduce((s,o)=>{const r=o.getCommonAncestor();return s?s.getCommonAncestor(r,{includeSelf:!0}):r},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new Ae("",e.getAttributes())];return this.checkAttribute(s,t)}else{const i=e.getRanges();for(const s of i)for(const o of s)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=SH(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new P(e);let i,s;const o=e.getAncestors().reverse().find(r=>this.isLimit(r))||e.root;(t=="both"||t=="backward")&&(i=new Ei({boundaries:P._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(s=new Ei({boundaries:P._createIn(o),startPosition:e}));for(const r of TH(i,s)){const a=r.walker==i?"elementEnd":"elementStart",l=r.value;if(l.type==a&&this.isObject(l.item))return P._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new P(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const s=i.model;for(const[o,r]of Object.entries(t))s.schema.checkAttribute(e,o)&&i.setAttribute(o,r,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))I0(this,i,t);else{const o=P._createIn(i).getPositions();for(const r of o){const a=r.nodeBefore||r.parent;I0(this,a,t)}}}getAttributesWithProperty(e,t,i){const s={};for(const[o,r]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(i===void 0||i===a[t])&&(s[o]=r)}return s}createContext(e){return new vs(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const s of i)e[s]=dH(t[s],s);for(const s of i)hH(e,s);for(const s of i)fH(e,s);for(const s of i)mH(e,s);for(const s of i)gH(e,s),pH(e,s);for(const s of i)bH(e,s),wH(e,s),_H(e,s);this._compiledDefinitions=e}_checkContextMatch(e,t,i=t.length-1){const s=t.getItem(i);if(e.allowIn.includes(s.name)){if(i==0)return!0;{const o=this.getDefinition(s);return this._checkContextMatch(o,t,i-1)}}else return!1}*_getValidRangesForRange(e,t){let i=e.start,s=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(P._createIn(o),t)),this.checkAttribute(o,t)||(i.isEqual(s)||(yield new P(i,s)),i=B._createAfter(o)),s=B._createAfter(o);i.isEqual(s)||(yield new P(i,s))}findOptimalInsertionRange(e,t){const i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new P(B._createAt(i,t)):P._createOn(i);const s=$e(e.getSelectedBlocks());if(!s)return new P(e.focus);if(s.isEmpty)return new P(B._createAt(s,0));const o=B._createAfter(s);return e.focus.isTouching(o)?new P(o):new P(B._createBefore(s))}}class vs{constructor(e){if(e instanceof vs)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(EH)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new vs([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function dH(n,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return vH(n,t),us(n,t,"allowIn"),us(n,t,"allowContentOf"),us(n,t,"allowWhere"),us(n,t,"allowAttributes"),us(n,t,"allowAttributesOf"),us(n,t,"allowChildren"),us(n,t,"inheritTypesFrom"),yH(n,t),t}function hH(n,e){const t=n[e];for(const i of t.allowChildren){const s=n[i];s&&s.allowIn.push(e)}t.allowChildren.length=0}function fH(n,e){for(const t of n[e].allowContentOf)n[t]&&CH(n,t).forEach(s=>{s.allowIn.push(e)});delete n[e].allowContentOf}function mH(n,e){for(const t of n[e].allowWhere){const i=n[t];if(i){const s=i.allowIn;n[e].allowIn.push(...s)}}delete n[e].allowWhere}function gH(n,e){for(const t of n[e].allowAttributesOf){const i=n[t];if(i){const s=i.allowAttributes;n[e].allowAttributes.push(...s)}}delete n[e].allowAttributesOf}function pH(n,e){const t=n[e];for(const i of t.inheritTypesFrom){const s=n[i];if(s){const o=Object.keys(s).filter(r=>r.startsWith("is"));for(const r of o)r in t||(t[r]=s[r])}}delete t.inheritTypesFrom}function bH(n,e){const t=n[e],i=t.allowIn.filter(s=>n[s]);t.allowIn=Array.from(new Set(i))}function wH(n,e){const t=n[e];for(const i of t.allowIn)n[i].allowChildren.push(e)}function _H(n,e){const t=n[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function vH(n,e){for(const t of n){const i=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of i)e[s]=!!t[s]}}function us(n,e,t){for(const i of n){const s=i[t];typeof s=="string"?e[t].push(s):Array.isArray(s)&&e[t].push(...s)}}function yH(n,e){for(const t of n){const i=t.inheritAllFrom;i&&(e.allowContentOf.push(i),e.allowWhere.push(i),e.allowAttributesOf.push(i),e.inheritTypesFrom.push(i))}}function CH(n,e){const t=n[e];return kH(n).filter(i=>i.allowIn.includes(t.name))}function kH(n){return Object.keys(n).map(e=>n[e])}function EH(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*TH(n,e){let t=!1;for(;!t;){if(t=!0,n){const i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){const i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*SH(n){for(const e of n)yield*e.getMinimalFlatRanges()}function I0(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AH extends Pe(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=PH(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=$r.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(s){this._removeEmptyElements();for(const r of Array.from(this._modelCursor.parent.getChildren()))t.append(r,o);o.markers=IH(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof P))throw new v("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:B._createAt(t,0);const s=new P(i);for(const o of Array.from(e.getChildren())){const r=this._convertItem(o,i);r.modelRange instanceof P&&(s.end=r.modelRange.end,i=r.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){const i=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(i[i.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=s.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:s}=this.conversionApi;let o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return ak(t,e,i)?{position:lk(t,s)}:null;const r=this.conversionApi.writer.split(t,o),a=[];for(const c of r.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const u=a.pop(),d=c.item;this._registerSplitPair(u,d)}const l=r.range.end.parent;return this._cursorParents.set(e,l),{position:r.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function IH(n,e){const t=new Set,i=new Map,s=P._createIn(n).getItems();for(const o of s)o.is("element","$marker")&&t.add(o);for(const o of t){const r=o.getAttribute("data-name"),a=e.createPositionBefore(o);i.has(r)?i.get(r).end=a.clone():i.set(r,new P(a.clone())),e.remove(o)}return i}function PH(n,e){let t;for(const i of new vs(n)){const s={};for(const r of i.getAttributeKeys())s[r]=i.getAttribute(r);const o=e.createElement(i.name,s);t&&e.insert(o,t),t=B._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xH{getHtml(e){const i=Ee.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RH{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new $C(e,{renderingMode:"data"}),this.htmlWriter=new xH}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LH extends Pe(){constructor(e,t){super(),this.model=e,this.mapper=new KC,this.downcastDispatcher=new ZC({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",YC(),{priority:"lowest"}),this.downcastDispatcher.on("insert",QC(),{priority:"lowest"}),this.upcastDispatcher=new AH({schema:e.schema}),this.viewDocument=new MC(t),this.stylesProcessor=t,this.htmlProcessor=new RH(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new NC(this.viewDocument),this.upcastDispatcher.on("text",Uz(),{priority:"lowest"}),this.upcastDispatcher.on("element",E0(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",E0(),{priority:"lowest"}),ye().prototype.decorate.call(this,"init"),ye().prototype.decorate.call(this,"set"),ye().prototype.decorate.call(this,"get"),ye().prototype.decorate.call(this,"toView"),ye().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},rk)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new v("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return s.isAttached()||ae("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=P._createIn(e),r=new _s(i);this.mapper.bindElements(e,r);const a=e.is("documentFragment")?e.markers:VH(e);return this.downcastDispatcher.convert(o,a,s,t),r}init(e){if(this.model.document.version)throw new v("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new v("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const s of Object.keys(t)){const o=this.model.document.getRoot(s);i.insert(this.parse(t[s],o),o,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new v("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(i)){const r=this.model.document.getRoot(o);s.remove(s.createRangeIn(r)),s.insert(this.parse(i[o],r),r,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function VH(n){const e=[],t=n.root.document;if(!t)return new Map;const i=P._createIn(n);for(const s of t.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(i.start)||o.end.isEqual(i.end);if(r&&a)e.push([s.name,o]);else{const l=i.getIntersection(o);l&&e.push([s.name,l])}}return e.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OH{constructor(e,t){this._helpers=new Map,this._downcast=we(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=we(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new v("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new v("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of gd(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of gd(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of gd(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new v("conversion-group-exists",this);const s=i?new uz(t):new $z(t);this._helpers.set(e,s)}}function*gd(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*P0(t,i,s)}else yield*P0(n.model,n.view,n.upcastAlso)}function*P0(n,e,t){if(yield{model:n,view:e},t)for(const i of we(t))yield{model:n,view:i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tn{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rm(n,e){const t=mk(e),i=t.reduce((r,a)=>r+a.offsetSize,0),s=n.parent;fa(n);const o=n.index;return s._insertChild(o,t),ha(s,o+t.length),ha(s,o),new P(n,n.getShiftedBy(i))}function fk(n){if(!n.isFlat)throw new v("operation-utils-remove-range-not-flat",this);const e=n.start.parent;fa(n.start),fa(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return ha(e,n.start.index),t}function da(n,e){if(!n.isFlat)throw new v("operation-utils-move-range-not-flat",this);const t=fk(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),Rm(e,t)}function MH(n,e,t){fa(n.start),fa(n.end);for(const i of n.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;t!==null?s._setAttribute(e,t):s._removeAttribute(e),ha(s.parent,s.index)}ha(n.end.parent,n.end.index)}function mk(n){const e=[];function t(i){if(typeof i=="string")e.push(new Ae(i));else if(i instanceof qn)e.push(new Ae(i.data,i.getAttributes()));else if(i instanceof Ns)e.push(i);else if(En(i))for(const s of i)t(s)}t(n);for(let i=1;i<e.length;i++){const s=e[i],o=e[i-1];s instanceof Ae&&o instanceof Ae&&gk(s,o)&&(e.splice(i-1,2,new Ae(o.data+s.data,o.getAttributes())),i--)}return e}function ha(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&gk(t,i)){const s=new Ae(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function fa(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const o=new Ae(e.data.substr(0,i),e.getAttributes()),r=new Ae(e.data.substr(i),e.getAttributes());t._insertChild(s,[o,r])}}function gk(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;i.next()}return i.next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class me extends Tn{constructor(e,t,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[P._createFromPositionAndShift(this.sourcePosition,this.howMany),P._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new me(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new me(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new v("move-operation-nodes-do-not-exist",this);if(e===t&&i<s&&s<i+this.howMany)throw new v("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&kt(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new v("move-operation-node-into-itself",this)}}_execute(){da(P._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=B.fromJSON(e.sourcePosition,t),s=B.fromJSON(e.targetPosition,t);return new this(i,e.howMany,s,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dt extends Tn{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new zr(mk(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new zr([...this.nodes].map(i=>i._clone(!0))),t=new dt(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new B(e,[0]);return new me(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new v("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new zr([...e].map(t=>t._clone(!0))),Rm(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const o of e.nodes)o.name?i.push(Se.fromJSON(o)):i.push(Ae.fromJSON(o));const s=new dt(B.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ie extends Tn{constructor(e,t,i,s,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new B(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new P(this.splitPosition,e)}get affectedSelectable(){const e=[P._createFromPositionAndShift(this.splitPosition,0),P._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(P._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Ie(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new B(e,[0]);return new Ze(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new v("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new v("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new v("split-operation-graveyard-position-invalid",this)}else throw new v("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)da(P._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();Rm(this.insertionPosition,i)}const t=new P(B._createAt(e,this.splitPosition.offset),B._createAt(e,e.maxOffset));da(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new B(e.root,t,"toPrevious")}static fromJSON(e,t){const i=B.fromJSON(e.splitPosition,t),s=B.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?B.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ze extends Tn{constructor(e,t,i,s,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new B(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new P(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[P._createOn(e),P._createFromPositionAndShift(this.targetPosition,0),P._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Ze(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new B(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Ie(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new v("merge-operation-how-many-invalid",this)}else throw new v("merge-operation-target-position-invalid",this);else throw new v("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=P._createIn(e);da(t,this.targetPosition),da(P._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=B.fromJSON(e.sourcePosition,t),s=B.fromJSON(e.targetPosition,t),o=B.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vt extends Tn{constructor(e,t,i,s,o,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Vt(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Vt(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Vt(e.name,e.oldRange?P.fromJSON(e.oldRange,t):null,e.newRange?P.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ye extends Tn{constructor(e,t,i,s,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Ye(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ye(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new v("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Ro(e.getAttribute(this.key),this.oldValue))throw new v("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new v("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Ro(this.oldValue,this.newValue)||MH(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Ye(P.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ot extends Tn{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new ot(this.baseVersion)}getReversed(){return new ot(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ot extends Tn{constructor(e,t,i,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ot(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ot(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Se){if(e.name!==this.oldName)throw new v("rename-operation-wrong-name",this)}else throw new v("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Ot(B.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Si extends Tn{constructor(e,t,i,s,o){super(o),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Si(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Si(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new v("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new v("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new v("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new v("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Si(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ri extends Tn{constructor(e,t,i,s,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=s,!this._document.getRoot(this.rootName)){const r=this._document.createRoot(this.elementName,this.rootName);r._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ri(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ri(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new ri(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Fn={};Fn[Ye.className]=Ye;Fn[dt.className]=dt;Fn[Vt.className]=Vt;Fn[me.className]=me;Fn[ot.className]=ot;Fn[Tn.className]=Tn;Fn[Ot.className]=Ot;Fn[Si.className]=Si;Fn[ri.className]=ri;Fn[Ie.className]=Ie;Fn[Ze.className]=Ze;class BH{static fromJSON(e,t){return Fn[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qh=new Map;function fe(n,e,t){let i=qh.get(n);i||(i=new Map,qh.set(n,i)),i.set(e,t)}function NH(n,e){const t=qh.get(n);return t&&t.has(e)?t.get(e):DH}function DH(n){return[n]}function x0(n,e,t={}){const i=NH(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(s){throw s}}function FH(n,e,t){n=n.slice(),e=e.slice();const i=new zH(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const s=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:s};const o=new WeakMap;for(const l of n)o.set(l,0);const r={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=o.get(l);if(c==e.length){a++;continue}const u=e[c],d=x0(l,u,i.getContext(l,u,!0)),h=x0(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(d,l),i.setOriginalOperations(h,u);for(const f of d)o.set(f,c+h.length);n.splice(a,1,...d),e.splice(c,1,...h)}return R0(n,r.nextBaseVersionB),R0(e,r.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:s}}class zH{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){if(e instanceof me)t instanceof Ze?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof me&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Ie){if(t instanceof Ze)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof me)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=P._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:o})}}}else if(e instanceof Ze)t instanceof Ze?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Ie?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof me&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Vt){const i=e.newRange;if(!i)return;if(t instanceof me){const s=P._createFromPositionAndShift(t.sourcePosition,t.howMany),o=s.containsPosition(i.start)||s.start.isEqual(i.start),r=s.containsPosition(i.end)||s.end.isEqual(i.end);(o||r)&&!s.containsRange(i)&&this._setRelation(e,t,{side:o?"left":"right",path:o?i.start.path.slice():i.end.path.slice()})}else if(t instanceof Ze){const s=i.start.isEqual(t.targetPosition),o=i.start.isEqual(t.deletionPosition),r=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(s||o||r||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),o=this.originalOperations.get(t);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,i)}}function R0(n,e){for(const t of n)t.baseVersion=e++}fe(Ye,Ye,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(o=>new Ye(o,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&i.push(new Ye(s,e.key,e.newValue,n.newValue,0)),i.length==0?[new ot(0)]:i}else return[n]});fe(Ye,dt,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new Ye(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const s=pk(e,n.key,n.oldValue);s&&i.unshift(s)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function pk(n,e,t){const s=n.nodes.getNode(0).getAttribute(e);if(s==t)return null;const o=new P(n.position,n.position.getShiftedBy(n.howMany));return new Ye(o,e,s,t,0)}fe(Ye,Ze,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(P._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(s=>new Ye(s,n.key,n.oldValue,n.newValue,n.baseVersion))});fe(Ye,me,(n,e)=>HH(n.range,e).map(i=>new Ye(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function HH(n,e){const t=P._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,s=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(s=n.getDifference(t),i=n.getIntersection(t)):s=[n];const o=[];for(let r of s){r=r._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=r.start.hasSameParentAs(a),c=r._getTransformedByInsertion(a,e.howMany,l);o.push(...c)}return i&&o.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}fe(Ye,Ie,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new P(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});fe(dt,Ye,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=pk(n,e.key,e.newValue);i&&t.push(i)}return t});fe(dt,dt,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));fe(dt,me,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));fe(dt,Ie,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));fe(dt,Ze,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));fe(Vt,dt,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));fe(Vt,Vt,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new ot(0)];return[n]});fe(Vt,Ze,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));fe(Vt,me,(n,e,t)=>{if(n.oldRange&&(n.oldRange=P._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){if(t.abRelation){const i=P._createFromRanges(n.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(n.newRange.start))return n.newRange.end=i.end,n.newRange.start.path=t.abRelation.path,[n];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(n.newRange.end))return n.newRange.start=i.start,n.newRange.end.path=t.abRelation.path,[n]}n.newRange=P._createFromRanges(n.newRange._getTransformedByMoveOperation(e))}return[n]});fe(Vt,Ie,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=B._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(n.newRange.start=B._createAt(e.moveTargetPosition)),n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=B._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=B._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});fe(Ze,dt,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));fe(Ze,Ze,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new B(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new ot(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new me(l,n.howMany,c,0)]}else return[new ot(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});fe(Ze,me,(n,e,t)=>{const i=P._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new ot(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});fe(Ze,Ie,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)){const i=e.howMany!=0,s=e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition);if(i||s||t.abRelation=="mergeTargetNotMoved")return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n]}if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});fe(me,dt,(n,e)=>{const i=P._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});fe(me,me,(n,e,t)=>{const i=P._createFromPositionAndShift(n.sourcePosition,n.howMany),s=P._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,r=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?r=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(r=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&r?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),L0(n,e)&&L0(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wo([i],a);if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),wo([i],a);const u=kt(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wo([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const d=[],h=i.getDifference(s);for(const m of h){m.start=m.start._getTransformedByDeletion(e.sourcePosition,e.howMany),m.end=m.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=kt(m.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",b=m._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);d.push(...b)}const f=i.getIntersection(s);return f!==null&&o&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(f):d.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),d.length===0?[new ot(n.baseVersion)]:wo(d,a)});fe(me,Ie,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));const s=P._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new P(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const l=[new P(s.start,e.splitPosition),a];return wo(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const r=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&r.push(P._createFromPositionAndShift(e.insertionPosition,1))}return wo(r,i)});fe(me,Ze,(n,e,t)=>{const i=P._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const r=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);n.howMany>1&&(r.push(new me(n.sourcePosition,n.howMany-1,n.targetPosition,0)),a=a._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1));const c=e.deletionPosition._getCombined(n.sourcePosition,n.targetPosition),u=new me(a,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const h=new B(u.targetPosition.root,d);l=l._getTransformedByMove(a,c,1);const f=new me(l,e.howMany,h,0);return r.push(u),r.push(f),r}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new ot(0)]}const o=P._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});fe(Ot,dt,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));fe(Ot,Ze,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));fe(Ot,me,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));fe(Ot,Ot,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new ot(0)];return[n]});fe(Ot,Ie,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if(kt(t,i)=="same"&&!e.graveyardPosition){const s=new Ot(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});fe(Si,Si,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new ot(0)];n.oldValue=e.newValue}return[n]});fe(ri,ri,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new ot(0)]:[n]);fe(Ie,dt,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));fe(Ie,Ze,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const s=new B(e.graveyardPosition.root,i),o=Ie.getInsertionPosition(new B(e.graveyardPosition.root,i)),r=new Ie(s,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),n.graveyardPosition=r.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[r,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});fe(Ie,me,(n,e,t)=>{const i=P._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const o=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){const r=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new B(a.root,l);return[new me(r,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:r}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(r),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),[n]});fe(Ie,Ie,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new ot(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new ot(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=[];return e.howMany&&l.push(new me(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new me(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new ot(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const s=new B(e.insertionPosition.root,i),o=new me(n.insertionPosition,1,s,0);return[n,o]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=Ie.getInsertionPosition(n.splitPosition),[n]});function L0(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function wo(n,e){const t=[];for(let i=0;i<n.length;i++){const s=n[i],o=new me(s.start,s.end.offset-s.start.offset,e,0);t.push(o);for(let r=i+1;r<n.length;r++)n[r]=n[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mt extends Pe(B){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new v("model-liveposition-root-not-rootelement",e);$H.call(this)}detach(){this.stopListening()}toPosition(){return new B(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}mt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function $H(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&UH.call(this,t)},{priority:"low"})}function UH(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qs{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},ae("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:s=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=s,this.isTyping=o}get type(){return ae("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WH{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=P._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}break}case"split":{const i=t.splitPosition.parent;this._isInInsertedElement(i)||this._markRemove(i,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1);const o=t.targetPosition.parent;this._isInInsertedElement(o)||this._markInsert(o,t.targetPosition.offset,i.maxOffset);break}case"detachRoot":case"addRoot":{const i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=i:(s={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,s=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(i||s||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),o=this._elementSnapshots.get(i),r=V0(i.getChildren()),a=jH(o.length,s);let l=0,c=0;for(const u of a)if(u==="i")t.push(this._getInsertDiff(i,l,r[l])),l++;else if(u==="r")t.push(this._getRemoveDiff(i,l,o[c])),c++;else if(u==="a"){const d=r[l].attributes,h=o[c].attributes;let f;if(r[l].name=="$text")f=new P(B._createAt(i,l),B._createAt(i,l+1));else{const m=i.offsetToIndex(l);f=new P(B._createAt(i,l),B._createAt(i.getChild(m),0))}t.push(...this._getAttributesDiff(f,h,d)),l++,c++}else l++,c++}t.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<t.length;i++){const o=t[s],r=t[i],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),l=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,c=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(qH),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,s){const o=this._changedRoots.get(e)||{name:e},r=o.attributes||{};if(r[t]){const a=r[t];s===a.oldValue?delete r[t]:a.newValue=s}else r[t]={oldValue:i,newValue:s};Object.entries(r).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=r,this._changedRoots.set(e,o))}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=P._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const i=t.getData();this.bufferMarkerChange(t.name,{...i,range:null},i)}}}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,V0(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,o=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){const r=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:r-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=e.howMany;else if(s<=o)if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r,e.nodesToHandle-=r}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){const r=o-e.offset;i.howMany-=r,e.nodesToHandle-=r}}if(i.type=="remove"&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r}else if(e.offset<o)if(s<=o){const r=i.howMany;i.howMany=e.offset-i.offset;const a=r-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=o-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&s>i.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,t),t.push(r)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(s>o?(e.nodesToHandle=s-o,e.offset=o):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&s>i.offset){const r={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(r,t),t.push(r),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&s<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=o&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:B._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++,_element:i.element}}_getRemoveDiff(e,t,i){return{type:"remove",position:B._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++,_element:i.element}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[o,r]of t){const a=i.has(o)?i.get(o):null;a!==r&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(o)}for(const[o,r]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i){for(const o of i)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new P(B._createAt(e,t),B._createAt(e,t+i));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function V0(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;i++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes()),element:t});return e}function jH(n,e){const t=[];let i=0,s=0;for(const o of e){if(o.offset>i){for(let r=0;r<o.offset-i;r++)t.push("e");s+=o.offset-i}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)t.push("i");i=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)t.push("r");i=o.offset,s+=o.howMany}else t.push(..."a".repeat(o.howMany).split("")),i=o.offset+o.howMany,s+=o.howMany}if(s<n)for(let o=0;o<n-s-i;o++)t.push("e");return t}function qH(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GH{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new v("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let s=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),s>a&&s<l&&(s=a-1);if(s<i.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cc extends Se{constructor(e,t,i="main"){super(t),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Cc.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const O0="$graveyard";class KH extends Pe(){constructor(e){super(),this.model=e,this.history=new GH,this.selection=new Xn(this),this.roots=new Et({idProperty:"rootName"}),this.differ=new WH(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",O0),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,s,o,r)=>{const a={...i.getData(),range:o};this.differ.bufferMarkerChange(i.name,r,a),s===null&&i.on("change",(l,c)=>{const u=i.getData();this.differ.bufferMarkerChange(i.name,{...u,range:c},u)})}),this.registerPostFixer(t=>{let i=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(t.remove(t.createRangeIn(s)),i=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(t.removeMarker(s),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(O0)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new v("model-document-createroot-name-exists",this,{name:t});const i=new Cc(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=oC(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,s=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return M0(e.start)&&M0(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function M0(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!Cm(t,i)&&!km(t,i)}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZH extends Pe(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof lo?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,s=!1){const o=e instanceof lo?e.name:e;if(o.includes(","))throw new v("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const c=r.getData(),u=r.getRange();let d=!1;return u.isEqual(t)||(r._attachLiveRange(Rn.fromRange(t)),d=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,d=!0),typeof s=="boolean"&&s!=r.affectsData&&(r._affectsData=s,d=!0),d&&this.fire(`update:${o}`,r,u,t,c),r}const a=Rn.fromRange(t),l=new lo(o,a,i,s);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,{...l.getData(),range:null}),l}_remove(e){const t=e instanceof lo?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){const t=e instanceof lo?e.name:e,i=this._markers.get(t);if(!i)throw new v("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire(`update:${t}`,i,s,s,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class lo extends Pe(ss){constructor(e,t,i,s){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}lo.prototype.is=function(n){return n==="marker"||n==="model:marker"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JH extends Tn{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new v("detach-operation-on-document-node",this)}_execute(){fk(P._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ci extends ss{constructor(e){super(),this.markers=new Map,this._children=new zr,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(Se.fromJSON(i)):t.push(Ae.fromJSON(i));return new Ci(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=XH(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}}Ci.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function XH(n){return typeof n=="string"?[new Ae(n)]:(En(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Ae(e):e instanceof qn?new Ae(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YH{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new Ae(e,t)}createElement(e,t){return new Se(e,t)}createDocumentFragment(){return new Ci}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof Ae&&e.data=="")return;const s=B._createAt(t,i);if(e.parent)if(D0(e.root,s.root)){this.move(P._createOn(e),s);return}else{if(e.root.document)throw new v("model-writer-insert-forbidden-move",this);this.remove(e)}const o=s.root.document?s.root.document.version:null,r=new dt(s,e,o);if(e instanceof Ae&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof Ci)for(const[a,l]of e.markers){const c=B._createAt(l.root,0),d={range:new P(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,t,i,s){t instanceof Ci||t instanceof Se||t instanceof B?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof Ci||t instanceof Se||t instanceof B?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Ci||t instanceof Se?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Ci||t instanceof Se?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof P){const s=i.getMinimalFlatRanges();for(const o of s)B0(this,e,t,o)}else N0(this,e,t,i)}setAttributes(e,t){for(const[i,s]of ci(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof P){const i=t.getMinimalFlatRanges();for(const s of i)B0(this,e,null,s)}else N0(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(e instanceof P))t(e);else for(const i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof P))throw new v("writer-move-invalid-range",this);if(!e.isFlat)throw new v("writer-move-range-not-flat",this);const s=B._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!D0(e.root,s.root))throw new v("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,r=new me(e.start,e.end.offset-e.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(e){this._assertWriterUsedCorrectly();const i=(e instanceof P?e:P._createOn(e)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),QH(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Se))throw new v("writer-merge-no-element-before",this);if(!(i instanceof Se))throw new v("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(P._createIn(i),B._createAt(t,"end")),this.remove(i)}_merge(e){const t=B._createAt(e.nodeBefore,"end"),i=B._createAt(e.nodeAfter,0),s=e.root.document.graveyard,o=new B(s,[0]),r=e.root.document.version,a=new Ze(i,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Se))throw new v("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new Ot(B._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new v("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new v("writer-split-invalid-limit-element",this);let s,o;do{const r=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=Ie.getInsertionPosition(e),c=new Ie(e,a,l,null,r);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!o&&(s=i,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new P(B._createAt(s,"end"),B._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new v("writer-wrap-range-not-flat",this);const i=t instanceof Se?t:new Se(t);if(i.childCount>0)throw new v("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new v("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new P(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,B._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new v("writer-unwrap-element-no-parent",this);this.move(P._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new v("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new v("writer-addmarker-marker-exists",this);if(!s)throw new v("writer-addmarker-no-range",this);return i?(br(this,e,null,s,o),this.model.markers.get(e)):this.model.markers._set(e,s,i,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new v("writer-updatemarker-marker-not-exists",this);if(!t){ae("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const o=typeof t.usingOperation=="boolean",r=typeof t.affectsData=="boolean",a=r?t.affectsData:s.affectsData;if(!o&&!t.range&&!r)throw new v("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=t.range?t.range:l;if(o&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?br(this,i,null,c,a):(br(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}s.managedUsingOperations?br(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new v("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}const s=i.getRange();br(this,t,s,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new v("writer-addroot-root-exists",this);const s=this.model.document,o=new ri(e,t,!0,s,s.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new v("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const i=this.model.document,s=new ri(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,s]of ci(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=Xn._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=Xn._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new v("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let o=!1;if(e==="move"){const r=t;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=t,a=r.nodeBefore,l=r.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,u=s.end.parent==l&&s.end.offset==0,d=s.end.nodeAfter==l,h=s.start.nodeAfter==l;o=c||u||d||h}o&&this.updateMarker(i.name,{range:s})}}}function B0(n,e,t,i){const s=n.model,o=s.document;let r=i.start,a,l,c;for(const d of i.getWalker({shallow:!0}))c=d.item.getAttribute(e),a&&l!=c&&(l!=t&&u(),r=a),a=d.nextPosition,l=c;a instanceof B&&a!=r&&l!=t&&u();function u(){const d=new P(r,a),h=d.root.document?o.version:null,f=new Ye(d,e,l,t,h);n.batch.addOperation(f),s.applyOperation(f)}}function N0(n,e,t,i){const s=n.model,o=s.document,r=i.getAttribute(e);let a,l;if(r!=t){if(i.root===i){const u=i.document?o.version:null;l=new Si(i,e,r,t,u)}else{a=new P(B._createBefore(i),n.createPositionAfter(i));const u=a.root.document?o.version:null;l=new Ye(a,e,r,t,u)}n.batch.addOperation(l),s.applyOperation(l)}}function br(n,e,t,i,s){const o=n.model,r=o.document,a=new Vt(e,t,i,o.markers,!!s,r.version);n.batch.addOperation(a),o.applyOperation(a)}function QH(n,e,t,i){let s;if(n.root.document){const o=i.document,r=new B(o.graveyard,[0]);s=new me(n,e,r,o.version)}else s=new JH(n,e);t.addOperation(s),i.applyOperation(s)}function D0(n,e){return n===e||n instanceof Cc&&e instanceof Cc}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function e$(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&c$(s,e)){l$(o,e);return}const r={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(r,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=t$(i);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(i$(o,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),o)),vk(o,e,a),!t.doNotAutoparagraph&&r$(s,a)&&_k(o,a,e,r),a.detach(),l.detach()})}function t$(n){const e=n.root.document.model,t=n.start;let i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const s=n$(i);if(s&&i.isTouching(e.createPositionAt(s,0))){const o=e.createSelection(n);e.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=e.createRange(r,i);e.hasContent(a,{ignoreMarkers:!0})||(i=r)}}return[mt.fromPosition(t,"toPrevious"),mt.fromPosition(i,"toNext")]}function n$(n){const e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function i$(n,e,t){const i=n.model;if(!Lm(n.model.schema,e,t))return;const[s,o]=o$(e,t);!s||!o||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(o,{ignoreMarkers:!0})?wk(n,e,t,s.parent):bk(n,e,t,s.parent))}function bk(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){const r=t.parent;t=n.createPositionBefore(r),n.remove(r)}Lm(n.model.schema,e,t)&&bk(n,e,t,i)}}function wk(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const r=e.parent;e=n.createPositionBefore(r),n.remove(r)}t=n.createPositionBefore(o),s$(n,t),Lm(n.model.schema,e,t)&&wk(n,e,t,i)}}function s$(n,e){const t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function Lm(n,e,t){const i=e.parent,s=t.parent;return i==s||n.isLimit(i)||n.isLimit(s)?!1:a$(e,t,n)}function o$(n,e){const t=n.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]&&t[s]==i[s];)s++;return[t[s],i[s]]}function r$(n,e){const t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function a$(n,e,t){const i=new P(n,e);for(const s of i.getWalker())if(t.isLimit(s.item))return!1;return!0}function _k(n,e,t,i={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,i,n),n.insert(s,e),vk(n,t,n.createPositionAt(s,0))}function l$(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),_k(n,n.createPositionAt(t,0),e)}function c$(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function vk(n,e,t){e instanceof Xn?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u$(n,e){return n.change(t=>{const i=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return i;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let l;s.start.parent==s.end.parent?l=s:l=t.createRange(t.createPositionAt(a,s.start.path[r.length]),t.createPositionAt(a,s.end.path[r.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?t.appendText(u.data,u.getAttributes(),i):t.append(t.cloneElement(u,!0),i);if(l!=s){const u=s._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],d=t.createRange(t.createPositionAt(i,0),u.start),h=t.createRange(u.end,t.createPositionAt(i,"end"));F0(h,t),F0(d,t)}return i})}function F0(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const o=e.createRangeOn(s);s=s.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function d$(n,e,t){return n.change(i=>{const s=t||n.document.selection;s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});const o=new h$(n,i,s.anchor),r=[];let a;if(e.is("documentFragment")){if(e.markers.size){const u=[];for(const[d,h]of e.markers){const{start:f,end:m}=h,g=f.isEqual(m);u.push({position:f,name:d,isCollapsed:g},{position:m,name:d,isCollapsed:g})}u.sort(({position:d},{position:h})=>d.isBefore(h)?1:-1);for(const{position:d,name:h,isCollapsed:f}of u){let m=null,g=null;const b=d.parent===e&&d.isAtStart,p=d.parent===e&&d.isAtEnd;!b&&!p?(m=i.createElement("$marker"),i.insert(m,d)):f&&(g=b?"start":"end"),r.push({name:h,element:m,collapsed:g})}}a=e.getChildren()}else a=[e];o.handleNodes(a);let l=o.getSelectionRange();if(e.is("documentFragment")&&r.length){const u=l?Rn.fromRange(l):null,d={};for(let h=r.length-1;h>=0;h--){const{name:f,element:m,collapsed:g}=r[h],b=!d[f];if(b&&(d[f]=[]),m){const p=i.createPositionAt(m,"before");d[f].push(p),i.remove(m)}else{const p=o.getAffectedRange();if(!p){g&&d[f].push(o.position);continue}g?d[f].push(p[g]):d[f].push(b?p.start:p.end)}}for(const[h,[f,m]]of Object.entries(d))f&&m&&f.root===m.root&&f.root.document&&!i.model.markers.has(h)&&i.addMarker(h,{usingOperation:!0,affectsData:!0,range:new P(f,m)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof Xn?i.setSelection(l):s.setTo(l));const c=o.getAffectedRange()||n.createRange(s.anchor);return o.destroy(),c})}class h${constructor(e,t,i){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new v("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?P._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new P(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=mt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new v("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=mt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=mt.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Se)||!this._canMergeLeft(e))return;const t=mt._createBefore(e);t.stickiness="toNext";const i=mt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=mt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=mt._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Se)||!this._canMergeRight(e))return;const t=mt._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new v("insertcontent-invalid-insertion-position",this);this.position=B._createAt(t.nodeBefore,"end");const i=mt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=mt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=mt._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Se&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Se&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function f$(n,e,t,i={}){if(!n.schema.isObject(e))throw new v("insertobject-element-not-an-object",n,{object:e});const s=t||n.document.selection;let o=s;i.findOptimalPosition&&n.schema.isBlock(e)&&(o=n.createSelection(n.schema.findOptimalInsertionRange(s,i.findOptimalPosition)));const r=$e(s.getSelectedBlocks()),a={};return r&&Object.assign(a,n.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),n.change(l=>{o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let c=e;const u=o.anchor.parent;!n.schema.checkChild(u,e)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const d=n.insertContent(c,o);return d.isCollapsed||i.setSelection&&m$(l,e,i.setSelection,a),d})}function m$(n,e,t,i){const s=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new v("insertobject-invalid-place-parameter-value",s);let o=e.nextSibling;if(s.schema.isInline(e)){n.setSelection(e,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(o=n.createElement("paragraph"),s.schema.setAllowedAttributes(o,i,n),s.insertContent(o,n.createPositionAfter(e))),o&&n.setSelection(o,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const g$=' ,.?!:;"-()';function p$(n,e,t={}){const i=n.schema,s=t.direction!="backward",o=t.unit?t.unit:"character",r=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Ei({boundaries:v$(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:i,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let u;for(;u=l.next();){if(u.done)return;const d=b$(c,u.value);if(d){e instanceof Xn?n.change(h=>{h.setSelectionFocus(d)}):e.setFocus(d);return}}}function b$(n,e){const{isForward:t,walker:i,unit:s,schema:o,treatEmojiAsSingleUnit:r}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?_$(i,t):w$(i,s,r);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return B._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l)){i.skip(()=>!0);return}if(o.checkChild(c,"$text"))return c}}function w$(n,e,t){const i=n.position.textNode;if(i){const s=i.data;let o=n.position.offset-i.startOffset;for(;Cm(s,o)||e=="character"&&km(s,o)||t&&AC(s,o);)n.next(),o=n.position.offset-i.startOffset}return n.position}function _$(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const i=n.position.offset-t.startOffset;if(C$(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(y$(t.data,i,e))break;n.next()}}return n.position}function v$(n,e){const t=n.root,i=B._createAt(t,e?"end":0);return e?new P(n,i):new P(i,n)}function y$(n,e,t){const i=e+(t?0:-1);return g$.includes(n.charAt(i))}function C$(n,e,t){return e===(t?n.offsetSize:0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let k$=class extends ye(){constructor(){super(),this.markers=new ZH,this.document=new KH(this),this.schema=new uH,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),tH(this),this.document.registerPostFixer(rk),this.on("insertContent",(e,[t,i])=>{e.return=d$(this,t,i)}),this.on("insertObject",(e,[t,i,s])=>{e.return=f$(this,t,i,s)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Qs,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Qs):e instanceof Qs||(e=new Qs(e)):e=new Qs,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...s){const o=pd(t,i);return this.fire("insertContent",[e,o,i,...s])}insertObject(e,t,i,s,...o){const r=pd(t,i);return this.fire("insertObject",[e,r,s,s,...o])}deleteContent(e,t){e$(this,e,t)}modifySelection(e,t){p$(this,e,t)}getSelectedContent(e){return u$(this,e)}hasContent(e,t={}){const i=e instanceof P?e:P._createIn(e);if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=t;if(!o){for(const r of this.markers.getMarkersIntersectingRange(i))if(r.affectsData)return!0}for(const r of i.getItems())if(this.schema.isContent(r))if(r.is("$textProxy"))if(s){if(r.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=pd(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new B(e,t,i)}createPositionAt(e,t){return B._createAt(e,t)}createPositionAfter(e){return B._createAfter(e)}createPositionBefore(e){return B._createBefore(e)}createRange(e,t){return new P(e,t)}createRangeIn(e){return P._createIn(e)}createRangeOn(e){return P._createOn(e)}createSelection(...e){return new pn(...e)}createBatch(e){return new Qs(e)}createOperationFromJSON(e){return BH.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new YH(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function pd(n,e){if(n)return n instanceof pn||n instanceof Xn?n:n instanceof Ns?e||e===0?new pn(n,e):n.is("rootElement")?new pn(n,"in"):new pn(n,"on"):new pn(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E$ extends is{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bu extends is{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nr{constructor(e){this.document=e}createDocumentFragment(e){return new _s(this.document,e)}createElement(e,t,i){return new Jn(this.document,e,t,i)}createText(e){return new De(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Jn(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Lt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return $._createAt(e,t)}createPositionAfter(e){return $._createAfter(e)}createPositionBefore(e){return $._createBefore(e)}createRange(e,t){return new se(e,t)}createRangeOn(e){return se._createOn(e)}createRangeIn(e){return se._createIn(e)}createSelection(...e){return new Ti(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const T$=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,S$=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,A$=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,I$=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,P$=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,x$=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,R$=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function yk(n){return n.startsWith("#")?T$.test(n):n.startsWith("rgb")?S$.test(n)||A$.test(n):n.startsWith("hsl")?I$.test(n)||P$.test(n):R$.has(n.toLowerCase())}const L$=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function V$(n){return L$.includes(n)}const O$=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function wu(n){return O$.test(n)}const M$=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Ck(n){return M$.test(n)}const B$=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function N$(n){return B$.includes(n)}const D$=["center","top","bottom","left","right"];function F$(n){return D$.includes(n)}const z$=["fixed","scroll","local"];function H$(n){return z$.includes(n)}const $$=/^url\(/;function U$(n){return $$.test(n)}function Ur(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=Vm(n),t=e[0],i=e[2]||t,s=e[1]||t,o=e[3]||s;return{top:t,bottom:i,right:s,left:o}}function ql(n){return e=>{const{top:t,right:i,bottom:s,left:o}=e,r=[];return[t,i,o,s].every(a=>!!a)?r.push([n,W$(e)]):(t&&r.push([n+"-top",t]),i&&r.push([n+"-right",i]),s&&r.push([n+"-bottom",s]),o&&r.push([n+"-left",o])),r}}function W$({top:n,right:e,bottom:t,left:i}){const s=[];return i!==e?s.push(n,e,t,i):t!==n?s.push(n,e,t):e!==n?s.push(n,e):s.push(n),s.join(" ")}function j$(n){return e=>({path:n,value:Ur(e)})}function Vm(n){const e=n.matchAll(x$);return Array.from(e).map(t=>t[0])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Om(n){n.setNormalizer("background",q$()),n.setNormalizer("background-color",G$()),n.setReducer("background",K$()),n.setStyleRelation("background",["background-color"])}function q$(){return n=>{const e={},t=Vm(n);for(const i of t)N$(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):F$(i)?(e.position=e.position||[],e.position.push(i)):H$(i)?e.attachment=i:yk(i)?e.color=i:U$(i)&&(e.image=i);return{path:"background",value:e}}}function G$(){return n=>({path:"background.color",value:n})}function K$(){return n=>{const e=[];return e.push(["background-color",n.color]),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kk(n){n.setNormalizer("border",Z$()),n.setNormalizer("border-top",pl("top")),n.setNormalizer("border-right",pl("right")),n.setNormalizer("border-bottom",pl("bottom")),n.setNormalizer("border-left",pl("left")),n.setNormalizer("border-color",bd("color")),n.setNormalizer("border-width",bd("width")),n.setNormalizer("border-style",bd("style")),n.setNormalizer("border-top-color",Pn("color","top")),n.setNormalizer("border-top-style",Pn("style","top")),n.setNormalizer("border-top-width",Pn("width","top")),n.setNormalizer("border-right-color",Pn("color","right")),n.setNormalizer("border-right-style",Pn("style","right")),n.setNormalizer("border-right-width",Pn("width","right")),n.setNormalizer("border-bottom-color",Pn("color","bottom")),n.setNormalizer("border-bottom-style",Pn("style","bottom")),n.setNormalizer("border-bottom-width",Pn("width","bottom")),n.setNormalizer("border-left-color",Pn("color","left")),n.setNormalizer("border-left-style",Pn("style","left")),n.setNormalizer("border-left-width",Pn("width","left")),n.setExtractor("border-top",bl("top")),n.setExtractor("border-right",bl("right")),n.setExtractor("border-bottom",bl("bottom")),n.setExtractor("border-left",bl("left")),n.setExtractor("border-top-color","border.color.top"),n.setExtractor("border-right-color","border.color.right"),n.setExtractor("border-bottom-color","border.color.bottom"),n.setExtractor("border-left-color","border.color.left"),n.setExtractor("border-top-width","border.width.top"),n.setExtractor("border-right-width","border.width.right"),n.setExtractor("border-bottom-width","border.width.bottom"),n.setExtractor("border-left-width","border.width.left"),n.setExtractor("border-top-style","border.style.top"),n.setExtractor("border-right-style","border.style.right"),n.setExtractor("border-bottom-style","border.style.bottom"),n.setExtractor("border-left-style","border.style.left"),n.setReducer("border-color",ql("border-color")),n.setReducer("border-style",ql("border-style")),n.setReducer("border-width",ql("border-width")),n.setReducer("border-top",wl("top")),n.setReducer("border-right",wl("right")),n.setReducer("border-bottom",wl("bottom")),n.setReducer("border-left",wl("left")),n.setReducer("border",X$()),n.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),n.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),n.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),n.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),n.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),n.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function Z$(){return n=>{const{color:e,style:t,width:i}=Ek(n);return{path:"border",value:{color:Ur(e),style:Ur(t),width:Ur(i)}}}}function pl(n){return e=>{const{color:t,style:i,width:s}=Ek(e),o={};return t!==void 0&&(o.color={[n]:t}),i!==void 0&&(o.style={[n]:i}),s!==void 0&&(o.width={[n]:s}),{path:"border",value:o}}}function bd(n){return e=>({path:"border",value:J$(e,n)})}function J$(n,e){return{[e]:Ur(n)}}function Pn(n,e){return t=>({path:"border",value:{[n]:{[e]:t}}})}function bl(n){return(e,t)=>{if(t.border)return Pr(t.border,n)}}function Pr(n,e){const t={};return n.width&&n.width[e]&&(t.width=n.width[e]),n.style&&n.style[e]&&(t.style=n.style[e]),n.color&&n.color[e]&&(t.color=n.color[e]),t}function Ek(n){const e={},t=Vm(n);for(const i of t)wu(i)||/thin|medium|thick/.test(i)?e.width=i:V$(i)?e.style=i:e.color=i;return e}function X$(){return e=>{const t=Pr(e,"top"),i=Pr(e,"right"),s=Pr(e,"bottom"),o=Pr(e,"left"),r=[t,i,s,o],a={width:n(r,"width"),style:n(r,"style"),color:n(r,"color")},l=co(a,"all");return l.length?l:[...Object.entries(a).reduce((u,[d,h])=>(h&&(u.push([`border-${d}`,h]),r.forEach(f=>delete f[d])),u),[]),...co(t,"top"),...co(i,"right"),...co(s,"bottom"),...co(o,"left")]};function n(e,t){return e.map(i=>i[t]).reduce((i,s)=>i==s?i:null)}}function wl(n){return e=>co(e,n)}function co(n,e){const t=[];if(n&&n.width&&t.push("width"),n&&n.style&&t.push("style"),n&&n.color&&t.push("color"),t.length==3){const i=t.map(s=>n[s]).join(" ");return[e=="all"?["border",i]:[`border-${e}`,i]]}return e=="all"?[]:t.map(i=>[`border-${e}-${i}`,n[i]])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Y$(n){n.setNormalizer("padding",j$("padding")),n.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),n.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),n.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),n.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),n.setReducer("padding",ql("padding")),n.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q${constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new v("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eU extends Ue{constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const s=t;t=(o,r)=>{this.editor.execute(s),r()}}super.set(e,t,i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wd="contentEditing",z0="common";class tU{constructor(e){this.keystrokeInfos=new Map,this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:wd,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:z0}),s&&s.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:e,...o})})}addKeystrokeInfoGroup({categoryId:e=wd,id:t,label:i,keystrokes:s}){const o=this.keystrokeInfos.get(e);if(!o)throw new v("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=wd,groupId:t=z0,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new v("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new v("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});s.groups.get(t).keystrokes.push(...i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nU extends ye(){constructor(e={}){super();const t=this.constructor,{translations:i,...s}=t.defaultConfig||{},{translations:o=i,...r}=e,a=e.language||s.language;this._context=e.context||new PC({language:a,translations:o}),this._context._addEditor(this,!e.context);const l=Array.from(t.builtinPlugins||[]);this.config=new mC(r,s),this.config.define("plugins",l),this.config.define(this._context._getEditorConfig()),this.plugins=new IC(this,l,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Q$,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new k$,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const c=new cF;this.data=new LH(this.model,c),this.editing=new aH(this.model,c),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new OH([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new eU(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new tU(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new v("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new v("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new v("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){/* istanbul ignore next -- @preserve */v.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iU(n){if(!Es(n.updateSourceElement))throw new v("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(sU(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();Es(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function sU(n){return!!n&&n.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gh(n){class e extends n{updateSourceElement(i){if(!this.sourceElement)throw new v("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){Zb(this.sourceElement,"");return}const r=typeof i=="string"?i:this.data.get();Zb(this.sourceElement,r)}}return e}Gh.updateSourceElement=Gh(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kc extends xC{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Et({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new v("pendingactions-add-invalid-message",this);const t=new(ye());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const oU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',rU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',aU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',lU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',cU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',uU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',dU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',hU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',fU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',mU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',gU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',pU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',bU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',wU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',_U='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',vU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',yU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',CU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',kU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',EU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',TU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',SU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',AU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',IU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',PU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',xU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',RU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',LU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',VU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',OU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',MU='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',BU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',NU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',DU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',FU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',zU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',HU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',$U='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',UU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',WU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',jU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',qU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',GU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',KU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',ZU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',JU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',XU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',YU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',QU='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',eW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',tW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',nW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',iW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',sW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',oW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',rW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',aW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',lW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',cW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',uW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',dW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',hW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const j={bold:WU,cancel:oU,caption:rU,check:aU,cog:lU,colorPalette:cU,eraser:uU,history:dU,image:bU,imageUpload:wU,imageAssetManager:_U,imageUrl:vU,lowVision:hU,textAlternative:fU,loupe:mU,previousArrow:gU,nextArrow:pU,importExport:KU,paragraph:jU,plus:qU,text:GU,alignBottom:yU,alignMiddle:CU,alignTop:kU,alignLeft:EU,alignCenter:TU,alignRight:SU,alignJustify:AU,objectLeft:VU,objectCenter:PU,objectRight:OU,objectFullWidth:RU,objectInline:LU,objectBlockLeft:IU,objectBlockRight:xU,objectSizeFull:MU,objectSizeLarge:BU,objectSizeSmall:NU,objectSizeMedium:DU,pencil:FU,pilcrow:zU,quote:HU,threeVerticalDots:$U,dragIndicator:UU,redo:ZU,undo:JU,bulletedList:XU,numberedList:YU,todoList:QU,codeBlock:eW,browseFiles:tW,heading1:nW,heading2:iW,heading3:sW,heading4:oW,heading5:rW,heading6:aW,horizontalLine:lW,html:cW,indent:uW,outdent:dW,table:hW};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ht extends Et{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,s)=>{this._renderViewIntoCollectionParent(i,s)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!fW(e))throw new v("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const s of e)i.delegate(s).to(t);this.on("add",(i,s)=>{for(const o of e)s.delegate(o).to(t)}),this.on("remove",(i,s)=>{for(const o of e)s.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function fW(n){return n.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mW="http://www.w3.org/1999/xhtml";class Mt extends Pe(){constructor(e){super(),Object.assign(this,$0(H0(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=j0(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new v("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const i of t.children)Ec(i)?yield i:Mm(i)&&(yield*e(i))}yield*e(this)}static bind(e,t){return{to(i,s){return new gW({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:s})},if(i,s,o){return new Tk({observable:e,emitter:t,attribute:i,valueIfTrue:s,callback:o})}}}static extend(e,t){if(e._isRendered)throw new v("template-extend-render",[this,e]);Pk(e,$0(H0(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new v("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||mW,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Gl(this.text)?this._bindToObservable({schema:this.text,updater:bW(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,i=e.revertData;for(const s in this.attributes){const o=t.getAttribute(s),r=this.attributes[s];i&&(i.attributes[s]=o);const a=W0(r)?r[0].ns:null;if(Gl(r)){const l=W0(r)?r[0].value:r;i&&q0(s)&&l.unshift(o),this._bindToObservable({schema:l,updater:wW(t,s,a),data:e})}else if(s=="style"&&typeof r[0]!="string")this._renderStyleAttribute(r[0],e);else{i&&o&&q0(s)&&r.unshift(o);const l=r.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(Ik,"");Mo(l)||t.setAttributeNS(a,s,l)}}}_renderStyleAttribute(e,t){const i=t.node;for(const s in e){const o=e[s];Gl(o)?this._bindToObservable({schema:[o],updater:_W(i,s),data:t}):i.style[s]=o}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let o=0;for(const r of this.children)if(Bm(r)){if(!s){r.setParent(t);for(const a of r)i.appendChild(a.element)}}else if(Ec(r))s||(r.isRendered||r.render(),i.appendChild(r.element));else if(Ki(r))i.appendChild(r);else if(s){const a=e.revertData,l=j0();a.children.push(l),r._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:l})}else i.appendChild(r.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map(s=>{const[o,r]=t.split("@");return s.activateDomEventListener(o,r,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const s=i.revertData;Sk(e,t,i);const o=e.filter(r=>!Mo(r)).filter(r=>r.observable).map(r=>r.activateAttributeListener(e,t,i));s&&s.bindings.push(o)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const o of s)o();if(t.text){e.textContent=t.text;return}const i=e;for(const s in t.attributes){const o=t.attributes[s];o===null?i.removeAttribute(s):i.setAttribute(s,o)}for(let s=0;s<t.children.length;++s)this._revertTemplateFromNode(i.childNodes[s],t.children[s])}}class za{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>Sk(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class gW extends za{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){const s=(o,r)=>{(!t||r.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(r):this.observable.fire(this.eventNameOrFunction,r))};return this.emitter.listenTo(i.node,e,s),()=>{this.emitter.stopListening(i.node,e,s)}}}class Tk extends za{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Mo(t)?!1:this.valueIfTrue||!0}}function Gl(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(Gl):n instanceof za):!1}function pW(n,e){return n.map(t=>t instanceof za?t.getValue(e):t)}function Sk(n,e,{node:t}){const i=pW(n,t);let s;n.length==1&&n[0]instanceof Tk?s=i[0]:s=i.reduce(Ik,""),Mo(s)?e.remove():e.set(s)}function bW(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function wW(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function _W(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function H0(n){return pm(n,t=>{if(t&&(t instanceof za||Mm(t)||Ec(t)||Bm(t)))return t})}function $0(n){if(typeof n=="string"?n=CW(n):n.text&&kW(n),n.on&&(n.eventListeners=yW(n.on),delete n.on),!n.text){n.attributes&&vW(n.attributes);const e=[];if(n.children)if(Bm(n.children))e.push(n.children);else for(const t of n.children)Mm(t)||Ec(t)||Ki(t)?e.push(t):e.push(new Mt(t));n.children=e}return n}function vW(n){for(const e in n)n[e].value&&(n[e].value=we(n[e].value)),Ak(n,e)}function yW(n){for(const e in n)Ak(n,e);return n}function CW(n){return{text:[n]}}function kW(n){n.text=we(n.text)}function Ak(n,e){n[e]=we(n[e])}function Ik(n,e){return Mo(e)?n:Mo(n)?e:`${n} ${e}`}function U0(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function Pk(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),U0(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),U0(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new v("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)Pk(n.children[t++],i)}}function Mo(n){return!n&&n!==0}function Ec(n){return n instanceof U}function Mm(n){return n instanceof Mt}function Bm(n){return n instanceof ht}function W0(n){return Re(n[0])&&n[0].ns}function j0(){return{children:[],bindings:[],attributes:{}}}function q0(n){return n=="class"||n=="style"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U extends Dt(ye()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Et,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Mt.bind(this,this)}createCollection(e){const t=new ht(e);return this._viewCollections.add(t),t}registerChild(e){En(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){En(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Mt(e)}extendTemplate(e){Mt.extend(this.template,e)}render(){if(this.isRendered)throw new v("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wn extends U{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Nt()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EW extends U{constructor(e,t){super(e);const i=e.t,s=new wn;s.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[lt(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),s]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const i=[lt(document,"h3",{},t.label),...Array.from(t.groups.values()).map(s=>this._createGroup(s)).flat()];return t.description&&i.splice(1,0,lt(document,"p",{},t.description)),lt(document,"section",{},i)})}_createGroup(e){const t=e.keystrokes.sort((s,o)=>s.label.localeCompare(o.label)).map(s=>this._createGroupRow(s)).flat(),i=[lt(document,"dl",{},t)];return e.label&&i.unshift(lt(document,"h4",{},e.label)),i}_createGroupRow(e){const t=this.locale.t,i=lt(document,"dt"),s=lt(document,"dd"),o=SW(e.keystroke),r=[];for(const a of o)r.push(a.map(TW).join(""));return i.innerHTML=e.label,s.innerHTML=r.join(", ")+(e.mayRequireFn&&ee.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,s]}}function TW(n){return _c(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function SW(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}const G0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AW extends I{constructor(){super(...arguments),this.contentView=null}static get requires(){return[yi]}static get pluginName(){return"AccessibilityHelp"}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const i=this._createButton(X);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const i=this._createButton(et);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,s)=>{this._showDialog(),s()}),this._setupRootLabels()}_createButton(e){const i=this.editor.locale,s=new e(i);return s.set({keystroke:"Alt+0",icon:G0}),s.on("execute",()=>this._showDialog()),s}_setupRootLabels(){const e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(o=>{for(const r of t.document.roots)s(o,r)}),e.on("addRoot",(o,r)=>{const a=e.editing.view.document.getRoot(r.rootName);t.change(l=>s(l,a))},{priority:"low"})});function s(o,r){const l=`${r.getAttribute("aria-label")}. ${i("Press %0 for help.",[_c("Alt+0")])}`;o.setAttribute("aria-label",l,r)}}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new EW(e.locale,e.accessibility.keystrokeInfos)),t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:G0,hasCloseButton:!0,content:this.contentView})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IW extends ht{constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Mt({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=lt(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ei extends U{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),i=t.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:o}of Array.from(t.attributes))ei.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}ei.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PW extends U{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X extends U{constructor(e,t=new PW){super(e),this._focusDelayed=null;const i=this.bindTemplate,s=Nt();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new ei,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r),i.if("isVisible","ck-hidden",r=>!r),i.to("isOn",r=>r?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",r=>r||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("ariaChecked"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,r=>!r),"aria-pressed":i.to("isOn",r=>this.isToggleable?String(!!r):!1),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(r=>{this.isEnabled?this.fire("execute"):r.preventDefault()})}};ee.isSafari&&(this._focusDelayed||(this._focusDelayed=ym(()=>this.focus(),0)),o.on.mousedown=i.to(()=>{this._focusDelayed()}),o.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new U;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>_c(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=_c(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ha extends X{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new U;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xk extends X{constructor(e){super(e),this.buttonView=this,this._fileInputView=new xW(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}class xW extends U{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}const _u='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nm extends U{constructor(e,t){super(e);const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new X(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:_u}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ma(n,e){const t=n.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(s=>{const o=i[s.label];return o&&o!=s.label&&(s.label=o),s})}function ga(n){return n.map(RW).filter(e=>!!e)}function RW(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}const LW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rk extends X{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=LW,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K0 extends U{constructor(e,t){super(e);const i=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Oe,this.keystrokes=new Ue,this.items.on("add",(o,r)=>{r.isOn=r.color===this.selectedColor}),i.forEach(o=>{const r=new Rk;r.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),r.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(r)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(o,r,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),im({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var Lk={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Z0=tm(Lk);var J0={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function X0(n){var e,t=[],i=1,s;if(typeof n=="string")if(Z0[n])t=Z0[n].slice(),s="rgb";else if(n==="transparent")i=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var o=n.slice(1),r=o.length,a=r<=4;i=1,a?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],r===4&&(i=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],r===8&&(i=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var l=e[1],c=l==="rgb",o=l.replace(/a$/,"");s=o;var r=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:o==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(o[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(J0[h]!==void 0)return J0[h]}return parseFloat(h)}),l===o&&t.push(1),i=c||t[r]===void 0?1:t[r],t=t.slice(0,r)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),s=n.match(/([a-z])/ig).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(t=[n[0],n[1],n[2]],s="rgb",i=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(s="rgb",t=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(s="hsl",t=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),i=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(i/=100)):(s="rgb",t=[n>>>16,(n&65280)>>>8,n&255]);return{space:s,values:t,alpha:i}}const pa=Lk,Vk={};for(const n of Object.keys(pa))Vk[pa[n]]=n;const Z={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Ok=Z;for(const n of Object.keys(Z)){if(!("channels"in Z[n]))throw new Error("missing channels property: "+n);if(!("labels"in Z[n]))throw new Error("missing channel labels property: "+n);if(Z[n].labels.length!==Z[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=Z[n];delete Z[n].channels,delete Z[n].labels,Object.defineProperty(Z[n],"channels",{value:e}),Object.defineProperty(Z[n],"labels",{value:t})}Z.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(e,t,i),o=Math.max(e,t,i),r=o-s;let a,l;o===s?a=0:e===o?a=(t-i)/r:t===o?a=2+(i-e)/r:i===o&&(a=4+(e-t)/r),a=Math.min(a*60,360),a<0&&(a+=360);const c=(s+o)/2;return o===s?l=0:c<=.5?l=r/(o+s):l=r/(2-o-s),[a,l*100,c*100]};Z.rgb.hsv=function(n){let e,t,i,s,o;const r=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(r,a,l),u=c-Math.min(r,a,l),d=function(h){return(c-h)/6/u+1/2};return u===0?(s=0,o=0):(o=u/c,e=d(r),t=d(a),i=d(l),r===c?s=i-t:a===c?s=1/3+e-i:l===c&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,c*100]};Z.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const s=Z.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[s,o*100,i*100]};Z.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(1-e,1-t,1-i),o=(1-e-s)/(1-s)||0,r=(1-t-s)/(1-s)||0,a=(1-i-s)/(1-s)||0;return[o*100,r*100,a*100,s*100]};function VW(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}Z.rgb.keyword=function(n){const e=Vk[n];if(e)return e;let t=1/0,i;for(const s of Object.keys(pa)){const o=pa[s],r=VW(n,o);r<t&&(t=r,i=s)}return i};Z.keyword.rgb=function(n){return pa[n]};Z.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const s=e*.4124+t*.3576+i*.1805,o=e*.2126+t*.7152+i*.0722,r=e*.0193+t*.1192+i*.9505;return[s*100,o*100,r*100]};Z.rgb.lab=function(n){const e=Z.rgb.xyz(n);let t=e[0],i=e[1],s=e[2];t/=95.047,i/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const o=116*i-16,r=500*(t-i),a=200*(i-s);return[o,r,a]};Z.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let s,o,r;if(t===0)return r=i*255,[r,r,r];i<.5?s=i*(1+t):s=i+t-i*t;const a=2*i-s,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?r=a+(s-a)*6*o:2*o<1?r=s:3*o<2?r=a+(s-a)*(2/3-o)*6:r=a,l[c]=r*255;return l};Z.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,s=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,s*=o<=1?o:2-o;const r=(i+t)/2,a=i===0?2*s/(o+s):2*t/(i+t);return[e,a*100,r*100]};Z.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const s=Math.floor(e)%6,o=e-Math.floor(e),r=255*i*(1-t),a=255*i*(1-t*o),l=255*i*(1-t*(1-o));switch(i*=255,s){case 0:return[i,l,r];case 1:return[a,i,r];case 2:return[r,i,l];case 3:return[r,a,i];case 4:return[l,r,i];case 5:return[i,r,a]}};Z.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,s=Math.max(i,.01);let o,r;r=(2-t)*i;const a=(2-t)*s;return o=t*s,o/=a<=1?a:2-a,o=o||0,r/=2,[e,o*100,r*100]};Z.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const s=t+i;let o;s>1&&(t/=s,i/=s);const r=Math.floor(6*e),a=1-i;o=6*e-r,r&1&&(o=1-o);const l=t+o*(a-t);let c,u,d;switch(r){default:case 6:case 0:c=a,u=l,d=t;break;case 1:c=l,u=a,d=t;break;case 2:c=t,u=a,d=l;break;case 3:c=t,u=l,d=a;break;case 4:c=l,u=t,d=a;break;case 5:c=a,u=t,d=l;break}return[c*255,u*255,d*255]};Z.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=n[3]/100,o=1-Math.min(1,e*(1-s)+s),r=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,i*(1-s)+s);return[o*255,r*255,a*255]};Z.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let s,o,r;return s=e*3.2406+t*-1.5372+i*-.4986,o=e*-.9689+t*1.8758+i*.0415,r=e*.0557+t*-.204+i*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),r=Math.min(Math.max(0,r),1),[s*255,o*255,r*255]};Z.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*t-16,o=500*(e-t),r=200*(t-i);return[s,o,r]};Z.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let s,o,r;o=(e+16)/116,s=t/500+o,r=o-i/200;const a=o**3,l=s**3,c=r**3;return o=a>.008856?a:(o-16/116)/7.787,s=l>.008856?l:(s-16/116)/7.787,r=c>.008856?c:(r-16/116)/7.787,s*=95.047,o*=100,r*=108.883,[s,o,r]};Z.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let s;s=Math.atan2(i,t)*360/2/Math.PI,s<0&&(s+=360);const r=Math.sqrt(t*t+i*i);return[e,r,s]};Z.lch.lab=function(n){const e=n[0],t=n[1],s=n[2]/360*2*Math.PI,o=t*Math.cos(s),r=t*Math.sin(s);return[e,o,r]};Z.rgb.ansi16=function(n,e=null){const[t,i,s]=n;let o=e===null?Z.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let r=30+(Math.round(s/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(r+=60),r};Z.hsv.ansi16=function(n){return Z.rgb.ansi16(Z.hsv.rgb(n),n[2])};Z.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};Z.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(n>50)+1)*.5,i=(e&1)*t*255,s=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,s,o]};Z.ansi256.rgb=function(n){if(n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,s=e%6/5*255;return[t,i,s]};Z.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};Z.hex.rgb=function(n){const e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const i=parseInt(t,16),s=i>>16&255,o=i>>8&255,r=i&255;return[s,o,r]};Z.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),r=s-o;let a,l;return r<1?a=o/(1-r):a=0,r<=0?l=0:s===e?l=(t-i)/r%6:s===t?l=2+(i-e)/r:l=4+(e-t)/r,l/=6,l%=1,[l*360,r*100,a*100]};Z.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let s=0;return i<1&&(s=(t-.5*i)/(1-i)),[n[0],i*100,s*100]};Z.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let s=0;return i<1&&(s=(t-i)/(1-i)),[n[0],i*100,s*100]};Z.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const s=[0,0,0],o=e%1*6,r=o%1,a=1-r;let l=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=r,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=r;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=r,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return l=(1-t)*i,[(t*s[0]+l)*255,(t*s[1]+l)*255,(t*s[2]+l)*255]};Z.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let s=0;return i>0&&(s=e/i),[n[0],s*100,i*100]};Z.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let s=0;return i>0&&i<.5?s=e/(2*i):i>=.5&&i<1&&(s=e/(2*(1-i))),[n[0],s*100,i*100]};Z.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};Z.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,s=i-e;let o=0;return s<1&&(o=(i-s)/(1-s)),[n[0],s*100,o*100]};Z.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Z.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Z.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Z.gray.hsl=function(n){return[0,0,n[0]]};Z.gray.hsv=Z.gray.hsl;Z.gray.hwb=function(n){return[0,100,n[0]]};Z.gray.cmyk=function(n){return[0,0,0,n[0]]};Z.gray.lab=function(n){return[n[0],0,0]};Z.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};Z.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const Tc=Ok;function OW(){const n={},e=Object.keys(Tc);for(let t=e.length,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function MW(n){const e=OW(),t=[n];for(e[n].distance=0;t.length;){const i=t.pop(),s=Object.keys(Tc[i]);for(let o=s.length,r=0;r<o;r++){const a=s[r],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function BW(n,e){return function(t){return e(n(t))}}function NW(n,e){const t=[e[n].parent,n];let i=Tc[e[n].parent][n],s=e[n].parent;for(;e[s].parent;)t.unshift(e[s].parent),i=BW(Tc[e[s].parent][s],i),s=e[s].parent;return i.conversion=t,i}var DW=function(n){const e=MW(n),t={},i=Object.keys(e);for(let s=i.length,o=0;o<s;o++){const r=i[o];e[r].parent!==null&&(t[r]=NW(r,e))}return t};const Kh=Ok,FW=DW,uo={},zW=Object.keys(Kh);function HW(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function $W(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const s=n(t);if(typeof s=="object")for(let o=s.length,r=0;r<o;r++)s[r]=Math.round(s[r]);return s};return"conversion"in n&&(e.conversion=n.conversion),e}zW.forEach(n=>{uo[n]={},Object.defineProperty(uo[n],"channels",{value:Kh[n].channels}),Object.defineProperty(uo[n],"labels",{value:Kh[n].labels});const e=FW(n);Object.keys(e).forEach(i=>{const s=e[i];uo[n][i]=$W(s),uo[n][i].raw=HW(s)})});var Mk=uo;const UW=tm(Mk),Bk=IT({__proto__:null,default:UW},[Mk]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Nk(n,e){if(!n)return"";const t=Dk(n);if(!t)return"";if(t.space===e)return n;if(!GW(t))return"";const s=Bk[t.space][e];if(!s)return"";const o=s(t.space==="hex"?t.hexValue:t.values);return qW(o,e)}function WW(n){if(!n)return"";const e=Dk(n);return e?e.space==="hex"?e.hexValue:Nk(n,"hex"):"#000"}function jW(n,e){customElements.get(n)===void 0&&customElements.define(n,e)}function qW(n,e){switch(e){case"hex":return`#${n}`;case"rgb":return`rgb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"hsl":return`hsl( ${n[0]}, ${n[1]}%, ${n[2]}% )`;case"hwb":return`hwb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"lab":return`lab( ${n[0]}% ${n[1]} ${n[2]} )`;case"lch":return`lch( ${n[0]}% ${n[1]} ${n[2]} )`;default:return""}}function Dk(n){if(n.startsWith("#")){const t=X0(n);return{space:"hex",values:t.values,hexValue:n,alpha:t.alpha}}const e=X0(n);return e.space?e:null}function GW(n){return Object.keys(Bk).includes(n.space)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nt extends U{constructor(e,t){super(e);const i=`ck-labeled-field-view-${Nt()}`,s=`ck-labeled-field-view-status-${Nt()}`;this.fieldView=t(this,i,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(r,a)=>r||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new wn(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new U(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",s=>!s)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KW extends U{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Oe,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=ZW(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function ZW(n){return!n.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fk extends KW{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zk extends Fk{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JW extends Fk{constructor(e,{min:t,max:i,step:s}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XW extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():ae("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bo extends U{constructor(e,t,i){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ue,this.focusTracker=new Oe,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,i,s)=>{if(s)if(this.panelPosition==="auto"){const o=Bo._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(t,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(t,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:s,northEast:o,northWest:r,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:u}=Bo.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,s,a,l,e,o,r,c,u,t]:[s,i,l,a,e,r,o,u,c,t]}}Bo.defaultPanelPositions={south:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),southMiddleEast:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/4,name:"sme"}),southMiddleWest:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)*3/4,name:"smw"}),north:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/2,name:"n"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),northMiddleEast:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/4,name:"nme"}),northMiddleWest:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)*3/4,name:"nmw"})};Bo._getOptimalPosition=mu;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dm extends X{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new ei;return e.content=_u,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ft extends Pe(){constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(const s of i)e.keystrokeHandler.set(s,(o,r)=>{this[t](),r()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(_d)||null}get last(){return this.focusables.filter(_d).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=i),s}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const i=this.current;if(i===null)return this[e===1?"first":"last"];let s=this.focusables.get(i),o=(i+t+e)%t;do{const r=this.focusables.get(o);if(_d(r)){s=r;break}o=(o+t+e)%t}while(o!==i);return s}}function _d(n){return $a(n)&&As(n.element)}function $a(n){return"focus"in n&&typeof n.focus=="function"}function YW(n){return $a(n)&&"focusCycler"in n&&n.focusCycler instanceof ft}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hk extends U{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QW extends U{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ej(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $k(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{threeVerticalDots:Uk}=j,tj={alignLeft:j.alignLeft,bold:j.bold,importExport:j.importExport,paragraph:j.paragraph,plus:j.plus,text:j.text,threeVerticalDots:j.threeVerticalDots,pilcrow:j.pilcrow,dragIndicator:j.dragIndicator};class No extends U{constructor(e,t){super(e);const i=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Oe,this.keystrokes=new Ue,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new nj(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new ft({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:ej(this)}}),this._behavior=this.options.shouldGroupWhenFull?new sj(this):new ij(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){const s=$k(e),o=i||s.removeItems;return this._cleanItemsConfiguration(s.items,t,o).map(a=>Re(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new Hk:a==="-"?new QW:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){const s=e.filter((o,r,a)=>o==="|"?!0:i.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(ae("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!Re(o)&&!t.has(o)?(ae("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const t=r=>r!=="-"&&r!=="|",i=e.length,s=e.findIndex(t);if(s===-1)return[];const o=i-e.slice().reverse().findIndex(t);return e.slice(s,o).filter((r,a,l)=>t(r)?!0:!(a>0&&l[a-1]===r))}_createNestedToolbarDropdown(e,t,i){let{label:s,icon:o,items:r,tooltip:a=!0,withText:l=!1}=e;if(r=this._cleanItemsConfiguration(r,t,i),!r.length)return null;const c=this.locale,u=wt(c);return s||ae("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:s,tooltip:a,withText:!!l}),o!==!1?u.buttonView.icon=tj[o]||o||Uk:u.buttonView.withText=!0,vu(u,()=>u.toolbarView._buildItemsFromConfig(r,t,i)),u}}class nj extends U{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class ij{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>$a(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class sj{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{const s=i.index,o=Array.from(i.added);for(const r of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!As(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new te(e.lastChild),s=new te(e);if(!this.cachedPadding){const o=Ee.window.getComputedStyle(e),r=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return t==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Ve(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Hk),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=wt(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",vu(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Uk}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{$a(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Do extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fm extends U{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kl extends U{constructor(e,t=new wn){super(e);const i=this.bindTemplate,s=new zm(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:t.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof Fm));e&&e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zm extends U{constructor(e){super(e),this._listItemGroupToChangeListeners=new WeakMap;const t=this.bindTemplate;this.focusables=new ht,this.items=this.createCollection(),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusCycler=new ft({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Kl?this._registerFocusableItemsGroup(e):e instanceof Do&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const i of t.removed)i instanceof Kl?this._deregisterFocusableItemsGroup(i):i instanceof Do&&this._deregisterFocusableListItem(i);for(const i of Array.from(t.added).reverse())i instanceof Kl?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(const s of i.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((s,o)=>{const r=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(s,r)});const i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ir extends U{constructor(e,t){super(e);const i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Ue,this.focusTracker=new Oe,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",s=>!s),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new X;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new X,t=e.bindTemplate;return e.icon=_u,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wt(n,e=Dm){const t=typeof e=="function"?new e(n):e,i=new XW(n),s=new Bo(n,t,i);return t.bind("isEnabled").to(s),t instanceof ir?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),oj(s),s}function vu(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?Y0(n,e,t):n.once("change:isOpen",()=>Y0(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&yu(n,()=>n.toolbarView.items.find(i=>i.isOn))}function Y0(n,e,t){const i=n.locale,s=i.t,o=n.toolbarView=new No(i),r=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),r instanceof ht?o.items.bindTo(r).using(a=>a):o.items.addMany(r),n.panelView.children.add(o),o.items.delegate("execute").to(n)}function Ds(n,e,t={}){n.isOpen?Q0(n,e,t):n.once("change:isOpen",()=>Q0(n,e,t),{priority:"highest"}),yu(n,()=>n.listView.items.find(i=>i instanceof Do?i.children.first.isOn:!1))}function Q0(n,e,t){const i=n.locale,s=n.listView=new zm(i),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.role=t.role,Wk(n,s.items,o,i),n.panelView.children.add(s),s.items.delegate("execute").to(n)}function yu(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():ae("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:bn.low-10})}function oj(n){rj(n),aj(n),lj(n),cj(n),uj(n),dj(n)}function rj(n){n.on("render",()=>{Zo({emitter:n,activator:()=>n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...n.focusTracker._elements]})})}function aj(n){n.on("execute",e=>{e.source instanceof Ha||(n.isOpen=!1)})}function lj(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{n.isOpen&&!i&&(n.isOpen=!1)})}function cj(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function uj(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;const s=n.panelView.element;s&&s.contains(globalThis.document.activeElement)&&n.buttonView.focus()})}function dj(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function Wk(n,e,t,i){e.bindTo(t).using(s=>{if(s.type==="separator")return new Fm(i);if(s.type==="group"){const o=new Kl(i);return o.set({label:s.label}),Wk(n,o.items,s.items,i),o.items.delegate("execute").to(n),o}else if(s.type==="button"||s.type==="switchbutton"){const o=new Do(i);let r;return s.type==="button"?(r=new X(i),r.bind("ariaChecked").to(r,"isOn")):r=new Ha(i),r.bind(...Object.keys(s.model)).to(s.model),r.delegate("execute").to(o),o.children.add(r),o}return null})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _n=(n,e,t)=>{const i=new zk(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},hj=(n,e,t)=>{const i=new JW(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},jk=(n,e,t)=>{const i=wt(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isEnabled").to(n),i},ba=(n,e=0,t=1)=>n>t?t:n<e?e:n,gt=(n,e=0,t=Math.pow(10,e))=>Math.round(t*n)/t,fj=n=>wj(Zh(n)),Zh=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?gt(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?gt(parseInt(n.substring(6,8),16)/255,2):1}),mj=n=>bj(pj(n)),gj=({h:n,s:e,v:t,a:i})=>{const s=(200-e)*t/100;return{h:gt(n),s:gt(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:gt(s/2),a:gt(i,2)}},Jh=n=>{const{h:e,s:t,l:i}=gj(n);return`hsl(${e}, ${t}%, ${i}%)`},pj=({h:n,s:e,v:t,a:i})=>{n=n/360*6,e=e/100,t=t/100;const s=Math.floor(n),o=t*(1-e),r=t*(1-(n-s)*e),a=t*(1-(1-n+s)*e),l=s%6;return{r:gt([t,r,o,o,a,t][l]*255),g:gt([a,t,t,r,o,o][l]*255),b:gt([o,o,a,t,t,r][l]*255),a:gt(i,2)}},_l=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},bj=({r:n,g:e,b:t,a:i})=>{const s=i<1?_l(gt(i*255)):"";return"#"+_l(n)+_l(e)+_l(t)+s},wj=({r:n,g:e,b:t,a:i})=>{const s=Math.max(n,e,t),o=s-Math.min(n,e,t),r=o?s===n?(e-t)/o:s===e?2+(t-n)/o:4+(n-e)/o:0;return{h:gt(60*(r<0?r+6:r)),s:gt(s?o/s*100:0),v:gt(s/255*100),a:i}},qk=(n,e)=>{if(n===e)return!0;for(const t in n)if(n[t]!==e[t])return!1;return!0},_j=(n,e)=>n.toLowerCase()===e.toLowerCase()?!0:qk(Zh(n),Zh(e)),e1={},Gk=n=>{let e=e1[n];return e||(e=document.createElement("template"),e.innerHTML=n,e1[n]=e),e},Hm=(n,e,t)=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let ko=!1;const Xh=n=>"touches"in n,vj=n=>ko&&!Xh(n)?!1:(ko||(ko=Xh(n)),!0),t1=(n,e)=>{const t=Xh(e)?e.touches[0]:e,i=n.el.getBoundingClientRect();Hm(n.el,"move",n.getMove({x:ba((t.pageX-(i.left+window.pageXOffset))/i.width),y:ba((t.pageY-(i.top+window.pageYOffset))/i.height)}))},yj=(n,e)=>{const t=e.keyCode;t>40||n.xy&&t<37||t<33||(e.preventDefault(),Hm(n.el,"move",n.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class Kk{constructor(e,t,i,s){const o=Gk(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const r=e.querySelector(`[part=${t}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=s,this.nodes=[r.firstChild,r]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(ko?"touchmove":"mousemove",this),t(ko?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!vj(e)||!ko&&e.button!=0)return;this.el.focus(),t1(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),t1(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":yj(this,e);break}}style(e){e.forEach((t,i)=>{for(const s in t)this.nodes[i].style.setProperty(s,t[s])})}}class Cj extends Kk{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:Jh({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${gt(e)}`)}getMove(e,t){return{h:t?ba(this.h+e.x*360,0,360):360*e.x}}}class kj extends Kk{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:Jh(e)},{"background-color":Jh({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${gt(e.s)}%, Brightness ${gt(e.v)}%`)}getMove(e,t){return{s:t?ba(this.hsva.s+e.x*100,0,100):e.x*100,v:t?ba(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const Ej=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',Tj="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Sj="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",vl=Symbol("same"),vd=Symbol("color"),n1=Symbol("hsva"),yd=Symbol("update"),i1=Symbol("parts"),s1=Symbol("css"),o1=Symbol("sliders");class Aj extends HTMLElement{static get observedAttributes(){return["color"]}get[s1](){return[Ej,Tj,Sj]}get[o1](){return[kj,Cj]}get color(){return this[vd]}set color(e){if(!this[vl](e)){const t=this.colorModel.toHsva(e);this[yd](t),this[vd]=e}}constructor(){super();const e=Gk(`<style>${this[s1].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[i1]=this[o1].map(i=>new i(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){const s=this.colorModel.fromAttr(i);this[vl](s)||(this.color=s)}handleEvent(e){const t=this[n1],i={...t,...e.detail};this[yd](i);let s;!qk(i,t)&&!this[vl](s=this.colorModel.fromHsva(i))&&(this[vd]=s,Hm(this,"color-changed",{value:s}))}[vl](e){return this.color&&this.colorModel.equal(e,this.color)}[yd](e){this[n1]=e,this[i1].forEach(t=>t.update(e))}}const Ij={defaultColor:"#000",toHsva:fj,fromHsva:({h:n,s:e,v:t})=>mj({h:n,s:e,v:t,a:1}),equal:_j,fromAttr:n=>n};class Pj extends Aj{get colorModel(){return Ij}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xj=150;class Rj extends U{constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const i=this.createCollection();t.hideInput||i.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:i}),this._config=t,this._debounceColorPickerEvent=Ii(s=>{this.set("color",s),this.fire("colorSelected",{color:this.color})},xj,{leading:!0}),this.on("set:color",(s,o,r)=>{s.return=Nk(r,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Cd(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Cd(this.color)!=Cd(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),jW("hex-color-picker",Pj),this.picker=Ee.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(ee.isGecko||ee.isiOS||ee.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const i=[...this.picker.shadowRoot.children].filter(s=>s.getAttribute("role")==="slider").map(s=>new Lj(s));this.slidersView=this.createCollection(),i.forEach(s=>{this.slidersView.add(s)})}_createInputRow(){const e=new Vj,t=this._createColorInput();return new Oj(this.locale,[e,t])}_createColorInput(){const e=new nt(this.locale,_n),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",i=>e.isFocused?e.fieldView.value:i.startsWith("#")?i.substring(1):i),e.fieldView.on("input",()=>{const i=e.fieldView.element.value;if(i){const s=i.trim(),o=s.startsWith("#")?s.substring(1):s;[3,4,6,8].includes(o.length)&&/(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})/.test(o)&&this._debounceColorPickerEvent("#"+o)}}),e}}function Cd(n){let e=WW(n);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class Lj extends U{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class Vj extends U{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class Oj extends U{constructor(e,t){super(e),this.children=this.createCollection(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mj extends ye(Et){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(i=>i.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{eraser:Bj,colorPalette:Nj}=j;class Dj extends U{constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e);const u=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new Mj,this.documentColorsCount=r,this._focusables=c,this._removeButtonLabel=s,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",u.if("isVisible","ck-hidden",d=>!d)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const i=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const o of i.getRoots()){const r=e.createRangeIn(o);for(const a of r.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Mt.bind(this.documentColors,this.documentColors),t=new wn(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new X,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:Nj,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new X;return e.set({withText:!0,icon:Bj,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new K0(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,i)=>{this.fire("execute",{value:i.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Mt.bind(this.documentColors,this.documentColors),t=new K0(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{const s=new Rk;return s.set({color:i.color,hasBorder:i.options&&i.options.hasBorder}),i.label&&s.set({label:i.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:i.color,source:"documentColorsGrid"})}),s}),this.documentColors.on("change:isEmpty",(i,s,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fj extends U{constructor(e,{focusTracker:t,focusables:i,keystrokes:s,colorPickerViewConfig:o}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=s,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._colorPickerViewConfig=o;const r=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();const e=new Rj(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,i,s)=>{e.color=s}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const i=new U,s=this.createCollection();return s.add(e),s.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:s}),i}_createActionButtons(){const e=this.locale,t=e.t,i=new X(e),s=new X(e);return i.set({icon:j.check,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),s.set({icon:j.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),s.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:i,cancelButtonView:s}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $m extends U{constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),this.items=this.createCollection(),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusables=new ht,this._colorPickerViewConfig=l,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new Dj(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new Fj(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,u,d)=>{this.colorGridsFragmentView.set("selectedColor",d),this.colorPickerFragmentView.set("selectedColor",d)}),this.colorGridsFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.colorPickerFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zj{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(kd(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new v("componentfactory-item-missing",this,{name:e});return this._components.get(kd(e)).callback(this.editor.locale)}has(e){return this._components.has(kd(e))}}function kd(n){return String(n).toLowerCase()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Um extends U{constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new ei,this.iconView.content=t.icon,this.children.add(this.iconView));const s=new U(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hj(n){class e extends n{constructor(...i){super(...i),this._onDragBound=this._onDrag.bind(this),this._onDragEndBound=this._onDragEnd.bind(this),this._lastDraggingCoordinates={x:0,y:0},this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(globalThis.document,"mouseup",this._onDragEndBound),this.listenTo(globalThis.document,"touchend",this._onDragEndBound),this.listenTo(globalThis.document,"mousemove",this._onDragBound),this.listenTo(globalThis.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(globalThis.document,"mouseup",this._onDragEndBound),this.stopListening(globalThis.document,"touchend",this._onDragEndBound),this.stopListening(globalThis.document,"mousemove",this._onDragBound),this.stopListening(globalThis.document,"touchmove",this._onDragBound)}_onDragStart(i,s){if(!this._isHandleElementPressed(s))return;this._attachDragListeners();let o=0,r=0;s instanceof MouseEvent?(o=s.clientX,r=s.clientY):(o=s.touches[0].clientX,r=s.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:r},this.isDragging=!0}_onDrag(i,s){if(!this.isDragging){this._detachDragListeners();return}let o=0,r=0;s instanceof MouseEvent?(o=s.clientX,r=s.clientY):(o=s.touches[0].clientX,r=s.touches[0].clientY),s.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(r-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:r}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $j extends U{constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new Ue,this._focusTracker=new Oe,this._focusables=new ht,this.focusCycler=new ft({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const i=new X(this.locale);let s;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(s in t)s!="onExecute"&&s!="onCreate"&&i.set(s,t[s]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uj extends U{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zn={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},r1=er("px");class Fo extends Hj(U){constructor(e,{getCurrentDomRoot:t,getViewportOffset:i}){super(e),this.wasMoved=!1;const s=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",zn.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=i,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Ue,this.focusTracker=new Oe,this._focusables=new ht,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",s.if("isModal","ck-dialog-overlay__transparent",r=>!r),s.if("_isVisible","ck-hidden",r=>!r)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",s.to("className")],role:"dialog","aria-label":s.to("ariaLabel"),style:{top:s.to("_top",r=>r1(r)),left:s.to("_left",r=>r1(r)),visibility:s.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{this.fire("close",{source:"escKeyPress"}),t()}),this.on("drag",(e,{deltaX:t,deltaY:i})=>{this.wasMoved=!0,this.moveBy(t,i)}),this.listenTo(globalThis.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(globalThis.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,i)=>{i&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:i=!0,content:s,actionButtons:o}){t&&(this.headerView=new Um(this.locale,{icon:e}),i&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),s&&(s instanceof U&&(s=[s]),this.contentView=new Uj(this.locale),this.contentView.children.addMany(s),this.parts.add(this.contentView)),o&&(this.actionsView=new $j(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const i=this._getViewportRect(),s=this._getDialogRect();e+s.width>i.right&&(e=i.right-s.width),e<i.left&&(e=i.left),t<i.top&&(t=i.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t=this.position,i;this._getCurrentDomRoot()?i=this._getVisibleDomRootRect(e):t=zn.SCREEN_CENTER;const s=Fo.defaultOffset,o=this._getDialogRect();switch(t){case zn.EDITOR_TOP_SIDE:{if(i){const r=this.locale.contentLanguageDirection==="ltr"?i.right-o.width-s:i.left+s;this.moveTo(r,i.top+s)}else this._moveOffScreen();break}case zn.EDITOR_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),Math.round(i.top+i.height/2-o.height/2)):this._moveOffScreen();break}case zn.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case zn.EDITOR_TOP_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top+s):this._moveOffScreen();break}case zn.EDITOR_BOTTOM_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom-o.height-s):this._moveOffScreen();break}case zn.EDITOR_ABOVE_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top-o.height-s):this._moveOffScreen();break}case zn.EDITOR_BELOW_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom+s):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let t=new te(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new te(this.element.firstElementChild)}_getViewportRect(){return Wj(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)$a(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),YW(t)&&(this.listenTo(t.focusCycler,"forwardCycle",i=>{this._focusCycler.focusNext(),this._focusCycler.next!==this._focusCycler.focusables.get(this._focusCycler.current)&&i.stop()}),this.listenTo(t.focusCycler,"backwardCycle",i=>{this._focusCycler.focusPrevious(),this._focusCycler.previous!==this._focusCycler.focusables.get(this._focusCycler.current)&&i.stop()}))})}_createCloseButton(){const e=new X(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:j.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}Fo.defaultOffset=15;function Wj(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new te(globalThis.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yi extends I{static get pluginName(){return"Dialog"}constructor(e){super(e);const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set("id",null),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{yi._visibleDialogPlugin&&yi._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,i)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),i())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const i of t)i.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:i,hasCloseButton:s=!0,content:o,actionButtons:r,className:a,isModal:l,position:c,onHide:u}){const d=this.editor;this.view=new Fo(d.locale,{getCurrentDomRoot:()=>d.editing.view.getDomRoot(d.model.document.selection.anchor.root.rootName),getViewportOffset:()=>d.ui.viewportOffset});const h=this.view;h.on("close",()=>{this.hide()}),d.ui.view.body.add(h),d.ui.focusTracker.add(h.element),d.keystrokes.listenTo(h.element),c||(c=l?zn.SCREEN_CENTER:zn.EDITOR_CENTER),h.set({position:c,_isVisible:!0,className:a,isModal:l}),h.setupParts({icon:t,title:i,hasCloseButton:s,content:o,actionButtons:r}),this.id=e,u&&(this._onHide=u),this.isOpen=!0,yi._visibleDialogPlugin=this}hide(){yi._visibleDialogPlugin&&yi._visibleDialogPlugin.fire(`hide:${yi._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,yi._visibleDialogPlugin=null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const a1=er("px"),l1=Ee.document.body,jj={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class _t extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",i=>`ck-balloon-panel_${i}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",a1),left:t.to("left",a1)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=_t.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:l1,fitInViewport:!0},e),s=_t._getOptimalPosition(i)||jj,o=parseInt(s.left),r=parseInt(s.top),a=s.name,l=s.config||{},{withArrow:c=!0}=l;this.top=r,this.left=o,this.position=a,this.withArrow=c}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=Yh(e.target),i=e.limiter?Yh(e.limiter):l1;this.listenTo(globalThis.document,"scroll",(s,o)=>{const r=o.target,a=t&&r.contains(t),l=i&&r.contains(i);(a||l||!t||!i)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(globalThis.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(globalThis.document,"scroll"),this.stopListening(globalThis.window,"resize")}}_t.arrowSideOffset=25;_t.arrowHeightOffset=10;_t.stickyVerticalOffset=20;_t._getOptimalPosition=mu;_t.defaultPositions=Zk();function Yh(n){return Ss(n)?n:fu(n)?n.commonAncestorContainer:typeof n=="function"?Yh(n()):null}function Zk(n={}){const{sideOffset:e=_t.arrowSideOffset,heightOffset:t=_t.arrowHeightOffset,stickyVerticalOffset:i=_t.stickyVerticalOffset,config:s}=n;return{northWestArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left-e,name:"arrow_sw",...s&&{config:s}}),northWestArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northWestArrowSouth:(a,l)=>({top:o(a,l),left:a.left-l.width/2,name:"arrow_s",...s&&{config:s}}),northWestArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northWestArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left-l.width+e,name:"arrow_se",...s&&{config:s}}),northArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-e,name:"arrow_sw",...s&&{config:s}}),northArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northArrowSouth:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width/2,name:"arrow_s",...s&&{config:s}}),northArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width+e,name:"arrow_se",...s&&{config:s}}),northEastArrowSouthWest:(a,l)=>({top:o(a,l),left:a.right-e,name:"arrow_sw",...s&&{config:s}}),northEastArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.right-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northEastArrowSouth:(a,l)=>({top:o(a,l),left:a.right-l.width/2,name:"arrow_s",...s&&{config:s}}),northEastArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.right-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northEastArrowSouthEast:(a,l)=>({top:o(a,l),left:a.right-l.width+e,name:"arrow_se",...s&&{config:s}}),southWestArrowNorthWest:a=>({top:r(a),left:a.left-e,name:"arrow_nw",...s&&{config:s}}),southWestArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.left-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southWestArrowNorth:(a,l)=>({top:r(a),left:a.left-l.width/2,name:"arrow_n",...s&&{config:s}}),southWestArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.left-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southWestArrowNorthEast:(a,l)=>({top:r(a),left:a.left-l.width+e,name:"arrow_ne",...s&&{config:s}}),southArrowNorthWest:a=>({top:r(a),left:a.left+a.width/2-e,name:"arrow_nw",...s&&{config:s}}),southArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southArrowNorth:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width/2,name:"arrow_n",...s&&{config:s}}),southArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southArrowNorthEast:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width+e,name:"arrow_ne",...s&&{config:s}}),southEastArrowNorthWest:a=>({top:r(a),left:a.right-e,name:"arrow_nw",...s&&{config:s}}),southEastArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.right-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southEastArrowNorth:(a,l)=>({top:r(a),left:a.right-l.width/2,name:"arrow_n",...s&&{config:s}}),southEastArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.right-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southEastArrowNorthEast:(a,l)=>({top:r(a),left:a.right-l.width+e,name:"arrow_ne",...s&&{config:s}}),westArrowEast:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.left-l.width-t,name:"arrow_e",...s&&{config:s}}),eastArrowWest:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.right+t,name:"arrow_w",...s&&{config:s}}),viewportStickyNorth:(a,l,c,u)=>{const d=u||c;return!a.getIntersection(d)||d.height-a.height>i?null:{top:d.top+i,left:a.left+a.width/2-l.width/2,name:"arrowless",config:{withArrow:!1,...s}}}};function o(a,l){return a.top-l.height-t}function r(a){return a.bottom+t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const c1="ck-tooltip";class at extends Dt(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,this._mutationObserver=null,at._editors.add(e),at._instance)return at._instance;at._instance=this,this.tooltipTextView=new U(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new _t(e.locale),this.balloonPanelView.class=c1,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=qj(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Ii(this._pinTooltip,600),this._unpinTooltipDebounced=Ii(this._unpinTooltip,400),this.listenTo(globalThis.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(globalThis.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(globalThis.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(globalThis.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(globalThis.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(globalThis.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;at._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),at._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),at._instance=null)}static getPositioningFunctions(e){const t=at.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const i=Ed(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}i!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(i,u1(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!Ss(t))return;const s=this.balloonPanelView.element,o=s&&(s===i||s.contains(i)),r=!o&&t===s;if(o){this._unpinTooltipDebounced.cancel();return}if(!r&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const a=Ed(t),l=Ed(i);(r||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:s}){this._unpinTooltip();const o=$e(at._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.pin({target:e,positions:at.getPositioningFunctions(i)}),this._resizeObserver=new Ve(e,()=>{As(e)||this._unpinTooltip()}),this._mutationObserver.attach(e),this.balloonPanelView.class=[c1,s].filter(r=>r).join(" ");for(const r of at._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of at._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}_updateTooltipPosition(){const e=u1(this._currentElementWithTooltip);if(!As(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:at.getPositioningFunctions(e.position)})}}at.defaultBalloonPositions=Zk({heightOffset:5,sideOffset:13});at._editors=new Set;at._instance=null;function Ed(n){return Ss(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function u1(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function qj(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}const Gj=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Kj=53,Zj=10,Jj=50,Xj=350,Yj="Powered by";class Qj extends Dt(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=Lo(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!t&&W9(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,s,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,s,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,t=this._balloonView=new _t,i=Xk(e),s=new eq(e.locale,i.label);t.content.add(s),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),e.ui.focusTracker.add(t.element),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=tq(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}const s=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));s.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=s[0]}}class eq extends U{constructor(e,t){super(e);const i=new ei,s=this.bindTemplate;i.set({content:Gj,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:Kj+"px",height:Zj+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:s.to(o=>o.preventDefault())}}]})}}function tq(n,e){const t=Xk(n),i=t.side==="right"?nq(e,t):iq(e,t);return{target:e,positions:[i]}}function nq(n,e){return Jk(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function iq(n,e){return Jk(n,e,t=>t.left+e.horizontalOffset)}function Jk(n,e,t){return(i,s)=>{const o=new te(n);if(o.width<Xj||o.height<Jj)return null;let r;e.position==="inside"?r=o.bottom-s.height:r=o.bottom-s.height/2,r-=e.verticalOffset;const a=t(o,s),c=i.clone().moveTo(a,r).getIntersection(s.clone().moveTo(a,r)).getVisible();return!c||c.getArea()<s.getArea()?null:{top:r,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function Xk(n){const e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:Yj,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yk={POLITE:"polite",ASSERTIVE:"assertive"};class sq{constructor(e){this.editor=e}announce(e,t,i=Yk.POLITE){const s=this.editor;this.view||(this.view=new oq(s.locale),s.ui.view.body.add(this.view));let o=this.view.regionViews.find(r=>r.regionName===e);o||(o=new rq(this.view.locale),this.view.regionViews.add(o)),o.set({regionName:e,text:t,politeness:i})}}class oq extends U{constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class rq extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("regionName",""),this.set("text",""),this.set("politeness",Yk.POLITE),this.setTemplate({tag:"div",attributes:{role:"region","data-region":t.to("regionName"),"aria-live":t.to("politeness")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aq extends ye(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];const t=e.editing.view;this.editor=e,this.componentFactory=new zj(e),this.focusTracker=new Oe,this.tooltipManager=new at(e),this.poweredBy=new Qj(e),this.ariaLiveAnnouncer=new sq(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const e=this.editor,t=e.editing.view;let i,s;e.keystrokes.set("Alt+F10",(o,r)=>{const a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(t.domRoots.values()).includes(a)&&(i=a);const l=this._getCurrentFocusedToolbarDefinition();(!l||!s)&&(s=this._getFocusableCandidateToolbarDefinitions());for(let c=0;c<s.length;c++){const u=s.shift();if(s.push(u),u!==l&&this._focusFocusableCandidateToolbar(u)){l&&l.options.afterBlur&&l.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(o,r)=>{const a=this._getCurrentFocusedToolbarDefinition();a&&(i?(i.focus(),i=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),r())})}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:i,options:s}=t;(As(i.element)||s.beforeFocus)&&e.push(t)}return e.sort((t,i)=>d1(t)-d1(i)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),As(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}}function d1(n){const{toolbarView:e,options:t}=n;let i=10;return As(e.element)&&i--,t.isContextual&&i--,i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lq extends U{constructor(e){super(e),this.body=new IW(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cq extends lq{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new wn;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uq extends U{constructor(e,t,i){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(s){e.change(o=>{const r=e.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",r),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",r)})}function i(s){e.once("change:isRenderingInProgress",(o,r,a)=>{a?i(s):t(s)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dq extends uq{constructor(e,t,i,s={}){super(e,t,i);const o=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=s.label||(()=>o("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(t=>{const i=e.document.getRoot(this.name);t.setAttribute("aria-label",this._generateLabel(this),i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h1 extends xC{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sr extends ye(){constructor(e,t){super(),t&&Ey(this,t),e&&this.set(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yl=er("px");class Ji extends I{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const t=this.editor.editing.view,s=t.document.selection.editableElement;return s?t.domConverter.mapViewToDom(s.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new v("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new v("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new v("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new _t(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new hq(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new fq(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class hq extends U{constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Oe,this.buttonPrevView=this._createButtonView(t("Previous"),j.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),j.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new X(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class fq extends U{constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:i.to("top",yl),left:i.to("left",yl),width:i.to("width",yl),height:i.to("height",yl)}},children:this.content}),this.on("change:numberOfPanels",(s,o,r,a)=>{r>a?this._addPanels(r-a):this._removePanels(a-r),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new U;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:s}=new te(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:s})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const eo=er("px");class mq extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Mt({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?eo(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Mt({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?eo(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&eo(i)),bottom:t.to("_stickyBottomOffset",i=>i&&eo(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(globalThis.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new te(this.limiterElement);let t=e.getVisible();if(t){const i=new te(globalThis.window);i.top+=this.viewportTopOffset,i.height-=this.viewportTopOffset,t=t.getIntersection(i)}if(t&&e.top<t.top){const i=t.top;if(i+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){const s=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-s>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(s):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=eo(-Ee.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=eo(-Ee.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new te(this.contentPanelElement)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gq extends nt{constructor(e,t){const i=e.t,s=Object.assign({},{showResetButton:!0,showIcon:!0,creator:_n},t);super(e,s.creator),this.label=t.label,this._viewConfig=s,this._viewConfig.showIcon&&(this.iconView=new ei,this.iconView.content=j.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new X(e),this.resetButtonView.set({label:i("Clear"),icon:j.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pq extends U{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bq extends U{constructor(e){super(e),this.children=this.createCollection(),this.focusTracker=new Oe,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new ft({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wq extends U{constructor(e,t){super(e),this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new Oe,this.keystrokes=new Ue,this.resultsView=new bq(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new pq,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new ft({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(i,{resultsCount:s,totalItemsCount:o})=>{this.resultsCount=s,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=t=>t.stopPropagation();for(const t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search("")}search(e){const t=e?new RegExp(ZD(e),"ig"):null,i=this.filteredView.filter(t);this.fire("search",{query:e,...i})}_createSearchTextQueryView(){const e=new gq(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,t=this.infoView;this.on("search",(s,o)=>{if(o.resultsCount)t.set({isVisible:!1});else{const r=this._config.infoView&&this._config.infoView.text;let a,l;o.totalItemsCount?r&&r.notFound?(a=r.notFound.primary,l=r.notFound.secondary):(a=e("No results found"),l=""):r&&r.noSearchableItems?(a=r.noSearchableItems.primary,l=r.noSearchableItems.secondary):(a=e("No searchable items"),l=""),t.set({primaryText:i(a,o),secondaryText:i(l,o),isVisible:!0})}});function i(s,{query:o,resultsCount:r,totalItemsCount:a}){return typeof s=="function"?s(o,r,a):s}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wa extends wq{constructor(e,t){super(e,t),this._config=t;const i=er("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const s=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[s.if("isVisible","ck-hidden",o=>!o),s.to("_position",o=>`ck-search__results_${o}`)],style:{width:s.to("_width",i)}}}),this.focusTracker.on("change:isFocused",(o,r,a)=>{this._updateResultsVisibility(),a?this.resultsView.element.scrollTop=0:t.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(o,r)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,r())}),this.listenTo(globalThis.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(o,{value:r})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=r,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new te(this.queryView.fieldView.element).width;const e=wa._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:wa.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){const e=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,t=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&t>=e}}wa.defaultResultsPositions=[n=>({top:n.bottom,left:n.left,name:"s"}),(n,e)=>({top:n.top-e.height,left:n.left,name:"n"})];wa._getOptimalPosition=mu;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _q extends X{constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new ei;return e.content=_u,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class or extends Do{constructor(e,t){super(e);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cl=5,wr={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(n.isOpen){for(const t of n.menus){const i=e.path[0],s=i instanceof or&&i.children.first===t;t.isOpen=(e.path.includes(t)||s)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,s){const o=n.children.getIndex(i),r=i.isOpen,a=n.children.length,l=n.children.get((o+a+s)%a);i.isOpen=!1,r&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(s=>e.source.parentMenuView===s.parentMenuView&&e.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(n){Zo({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})}},ds={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0,n.panelView.focus()})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen,n.isOpen&&n.panelView.focus()})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},vq={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-Cl,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-Cl,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+Cl,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+Cl,name:"wn"})},yq=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:uploadImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment"]},{groupId:"insertMinorWidgets",items:["menuBar:insertTemplate","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Cq(n){let e;return!("items"in n)||!n.items?e={items:Dn(yq),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function kq({normalizedConfig:n,locale:e,componentFactory:t}){const i=Dn(n);return Eq(n,i),Tq(n,i),Sq(n,i,t),Qk(n,i),Aq(i,e),i}function Eq(n,e){const t=e.removeItems,i=[];e.items=e.items.filter(({menuId:s})=>t.includes(s)?(i.push(s),!1):!0),rr(e.items,s=>{s.groups=s.groups.filter(({groupId:o})=>t.includes(o)?(i.push(o),!1):!0);for(const o of s.groups)o.items=o.items.filter(r=>{const a=e2(r);return t.includes(a)?(i.push(a),!1):!0})});for(const s of t)i.includes(s)||ae("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:s})}function Tq(n,e){const t=e.addItems,i=[];for(const s of t){const o=xq(s.position),r=Rq(s.position);if(Iq(s))if(!r)o==="start"?(e.items.unshift(s.menu),i.push(s)):o==="end"&&(e.items.push(s.menu),i.push(s));else{const a=e.items.findIndex(l=>l.menuId===r);a!=-1?o==="before"?(e.items.splice(a,0,s.menu),i.push(s)):o==="after"&&(e.items.splice(a+1,0,s.menu),i.push(s)):f1(e,s.menu,r,o)&&i.push(s)}else Pq(s)?rr(e.items,a=>{if(a.menuId===r)o==="start"?(a.groups.unshift(s.group),i.push(s)):o==="end"&&(a.groups.push(s.group),i.push(s));else{const l=a.groups.findIndex(c=>c.groupId===r);l!==-1&&(o==="before"?(a.groups.splice(l,0,s.group),i.push(s)):o==="after"&&(a.groups.splice(l+1,0,s.group),i.push(s)))}}):f1(e,s.item,r,o)&&i.push(s)}for(const s of t)i.includes(s)||ae("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:s})}function f1(n,e,t,i){let s=!1;return rr(n.items,o=>{for(const{groupId:r,items:a}of o.groups){if(s)return;if(r===t)i==="start"?(a.unshift(e),s=!0):i==="end"&&(a.push(e),s=!0);else{const l=a.findIndex(c=>e2(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),s=!0):i==="after"&&(a.splice(l+1,0,e),s=!0))}}}),s}function Sq(n,e,t){rr(e.items,i=>{for(const s of i.groups)s.items=s.items.filter(o=>{const r=typeof o=="string"&&!t.has(o);return r&&!e.isUsingDefaultConfig&&ae("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Dn(i),componentName:o}),!r})})}function Qk(n,e){const t=e.isUsingDefaultConfig;let i=!1;if(e.items=e.items.filter(s=>s.groups.length?!0:(Td(n,s,t),!1)),!e.items.length){Td(n,n,t);return}rr(e.items,s=>{s.groups=s.groups.filter(o=>o.items.length?!0:(i=!0,!1));for(const o of s.groups)o.items=o.items.filter(r=>t2(r)&&!r.groups.length?(Td(n,r,t),i=!0,!1):!0)}),i&&Qk(n,e)}function Td(n,e,t){t||ae("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function Aq(n,e){const t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};rr(n.items,s=>{s.label in i&&(s.label=i[s.label])})}function rr(n,e){if(Array.isArray(n))for(const i of n)t(i);function t(i){e(i);for(const s of i.groups)for(const o of s.items)t2(o)&&t(o)}}function Iq(n){return typeof n=="object"&&"menu"in n}function Pq(n){return typeof n=="object"&&"group"in n}function xq(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function Rq(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function e2(n){return typeof n=="string"?n:n.menuId}function t2(n){return typeof n=="object"&&"menuId"in n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lq extends U{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vn extends U{constructor(e){super(e);const t=this.bindTemplate;this.buttonView=new _q(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new Lq(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ue,this.focusTracker=new Oe,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",i=>!i),t.if("parentMenuView","ck-menu-bar__menu_top-level",i=>!i)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),ds.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(ds.openOnButtonClick(this),ds.openOnArrowRightKey(this),ds.closeOnArrowLeftKey(this),ds.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),ds.openAndFocusPanelOnArrowDownKey(this),ds.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,i)=>{if(!i)return;const s=vn._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:i,northWest:s,westSouth:o,eastSouth:r,westNorth:a,eastNorth:l}=vq;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[r,l,o,a]:[e,t,i,s]:this.parentMenuView?[o,a,r,l]:[t,e,s,i]}}vn._getOptimalPosition=mu;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zo extends zm{constructor(e){super(e),this.role="menu"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class et extends X{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n2 extends xk{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const m1=["mouseenter","arrowleft","arrowright","change:isOpen"];class Vq extends U{constructor(e){super(e),this.menus=[];const t=e.t;this.set("isOpen",!1),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar"],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t){const i=this.locale,o=kq({normalizedConfig:e,locale:i,componentFactory:t}).items.map(r=>this._createMenu({componentFactory:t,menuDefinition:r}));this.children.addMany(o)}render(){super.render(),wr.toggleMenusAndFocusItemsOnHover(this),wr.closeMenusWhenTheBarCloses(this),wr.closeMenuWhenAnotherOnTheSameLevelOpens(this),wr.focusCycleMenusOnArrows(this),wr.closeOnClickOutside(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...m1).to(t),e.parentMenuView=t):e.delegate(...m1).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){const s=this.locale,o=new vn(s);return this.registerMenu(o,i),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{const r=new zo(s);r.ariaLabel=t.label,o.panelView.children.add(r),r.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){const s=this.locale,o=[];for(const r of e.groups){for(const a of r.items){const l=new or(s,t);if(Re(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{const c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}o.push(l)}r!==e.groups[e.groups.length-1]&&o.push(new Fm(s))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){const s=i.create(e);return s instanceof vn||s instanceof et||s instanceof n2?(this._registerMenuTree(s,t),s.on("execute",()=>{this.close()}),s):(ae("menu-bar-component-unsupported",{componentName:e,componentView:s}),null)}_registerMenuTree(e,t){if(!(e instanceof vn)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);const i=e.panelView.children.filter(o=>o instanceof zo)[0];if(!i){e.delegate("mouseenter").to(t);return}const s=i.items.filter(o=>o instanceof Do);for(const o of s)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,s)=>{clearTimeout(e),s?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oq extends aq{constructor(e,t){super(e),this.view=t,this._toolbarConfig=$k(e.config.get("toolbar")),this._menuBarConfig=Cq(e.config.get("menuBar")||{}),this._elementReplacer=new fC,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,i=this.view,s=t.editing.view,o=i.editable,r=s.document.getRoot();o.name=r.rootName,i.render();const a=o.element;this.setEditableElement(o.name,a),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this._initMenuBar(),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initMenuBar(){const e=this.view;e.menuBarView&&(this._setupMenuBarBehaviors(e.menuBarView.element),e.menuBarView.fillFromConfig(this._menuBarConfig,this.componentFactory))}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),s=e.sourceElement;let o;const r=e.config.get("placeholder");r&&(o=typeof r=="string"?r:r[this.view.editable.name]),!o&&s&&s.tagName.toLowerCase()==="textarea"&&(o=s.getAttribute("placeholder")),o&&(i.placeholder=o),J9({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,t,i){const s=this.view.stickyPanel;if(s.isSticky){const o=new te(s.element).height;t.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(s,"change:isSticky",o),setTimeout(()=>{this.stopListening(s,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const i=t.view;i.on("moveTo",(s,o)=>{if(!e.isSticky||i.wasMoved)return;const r=new te(e.contentPanelElement);o[1]<r.bottom+Fo.defaultOffset&&(o[1]=r.bottom+Fo.defaultOffset)},{priority:"high"})},{priority:"low"})}_setupMenuBarBehaviors(e){const t=this.editor;this.focusTracker.add(e),t.keystrokes.listenTo(e),t.keystrokes.set("Esc",(i,s)=>{e.contains(this.focusTracker.focusedElement)&&(t.editing.view.focus(),s())}),t.keystrokes.set("Alt+F9",(i,s)=>{e.contains(this.focusTracker.focusedElement)||(this.view.menuBarView.focus(),s())})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mq extends cq{constructor(e,t,i={}){super(e),this.stickyPanel=new mq(e),this.toolbar=new No(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new Vq(e)),this.editable=new dq(e,t)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class i2{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){const i=this._listeners[e]||[];for(const s of i)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qh(n,e=new Set){const t=[n],i=new Set;let s=0;for(;t.length>s;){const o=t[s++];if(!(i.has(o)||!Bq(o)||e.has(o)))if(i.add(o),Symbol.iterator in o)try{for(const r of o)t.push(r)}catch{}else for(const r in o)r!=="defaultValue"&&t.push(o[r])}return i}function Bq(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function s2(n,e,t=new Set){if(n===e&&Nq(n))return!0;const i=Qh(n,t),s=Qh(e,t);for(const o of i)if(s.has(o))return!0;return!1}function Nq(n){return typeof n=="object"&&n!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o2 extends i2{constructor(e,t={}){super(t),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=Lo(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,s)=>e.create(i,s)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],i=this._config.rootsAttributes||{},s={};for(const[r,a]of Object.entries(this._data.roots))a.isLoaded?(e[r]="",s[r]=i[r]||{}):t.push(r);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(Dq),this._initUsingData?this.create(e,o,o.context):Ss(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,s=i.has("CommentsRepository")&&i.get("CommentsRepository"),o=i.has("TrackChanges")&&i.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{r.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(r.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return s&&(r.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(r.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return s2(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return pm(e,(t,i)=>{if(Ss(t)||i==="context")return t})}}class Dq{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const i=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)i._appendChild(this._createNode(e,s));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:s,attributes:o}])=>{const r=JSON.parse(s),a=JSON.parse(o),l=t.model.document.getRoot(i);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of r){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([i,s])=>{const{document:o}=t.model,{rangeJSON:{start:r,end:a},...l}=s,c=o.getRoot(r.root),u=e.createPositionFromPath(c,r.path,r.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(u,d);e.addMarker(i,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(i.threadId)&&o.getCommentThread(i.threadId).remove(),o.addCommentThread({channelId:s,...i})}),t.forEach(i=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(i.id)){const o=s.getSuggestion(i.id);o.attributes=i.attributes}else s.addSuggestionData(i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Wr=Symbol("MainQueueId");class Fq extends i2{constructor(e,t={}){super(t),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new zq,this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Wr,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=g1(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return s=new o2(null,this._watchdogConfig),s.setCreator(i.creator),s._setExcludedProperties(this._contextProps),i.destructor&&s.setDestructor(i.destructor),this._watchdogs.set(i.id,s),s.on("error",(o,{error:r,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:r}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{const c=()=>{s.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};s.on("restart",c)}))}),s.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){const t=g1(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{const s=this._getWatchdog(i);return this._watchdogs.delete(i),s.destroy()})))}destroy(){return this._actionQueues.enqueue(Wr,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Wr,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=Qh(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return s2(this._context,e.context)}}class zq{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const i=e===Wr;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Wr),this._queues.get(e)])).then(t),r=o.catch(()=>{});return this._queues.set(e,r),o.finally(()=>{this._activeActions--,this._queues.get(e)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function g1(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Cu=class extends Gh(nU){constructor(e,t={}){if(!Zl(e)&&t.initialData!==void 0)throw new v("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",Hq(e)),Zl(e)&&(this.sourceElement=e),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),o=new Mq(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:s.isVisible});this.ui=new Oq(this,o),iU(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{const s=new this(e,t);i(s.initPlugins().then(()=>s.ui.init(Zl(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}};Cu.Context=PC;Cu.EditorWatchdog=o2;Cu.ContextWatchdog=Fq;function Hq(n){return Zl(n)?b9(n):n}function Zl(n){return Ss(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Wm=["left","right","center","justify"];function r2(n){return Wm.includes(n)}function a2(n,e){return e.contentLanguageDirection=="rtl"?n==="right":n==="left"}function l2(n){const e=n.map(i=>{let s;return typeof i=="string"?s={name:i}:s=i,s}).filter(i=>{const s=Wm.includes(i.name);return s||ae("alignment-config-name-not-recognized",{option:i}),s}),t=e.filter(i=>!!i.className).length;if(t&&t<e.length)throw new v("alignment-config-classnames-are-missing",{configuredOptions:n});return e.forEach((i,s,o)=>{const r=o.slice(s+1);if(r.some(l=>l.name==i.name))throw new v("alignment-config-name-already-defined",{option:i,configuredOptions:n});if(i.className&&r.some(c=>c.className==i.className))throw new v("alignment-config-classname-already-defined",{option:i,configuredOptions:n})}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jm="alignment";class $q extends Q{refresh(){const t=this.editor.locale,i=$e(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,i=t.locale,s=t.model,o=s.document,r=e.value;s.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");a2(r,i)||c===r||!r?Uq(l,a):Wq(l,a,r)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,jm)}}function Uq(n,e){for(const t of n)e.removeAttribute(jm,t)}function Wq(n,e,t){for(const i of n)e.setAttribute(jm,t,i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jq extends I{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:Wm.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,i=e.model.schema,o=l2(e.config.get("alignment.options")).filter(c=>r2(c.name)&&!a2(c.name,t)),r=o.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(Zq(o)):e.conversion.for("downcast").attributeToAttribute(qq(o));const a=Gq(o);for(const c of a)e.conversion.for("upcast").attributeToAttribute(c);const l=Kq(o);for(const c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new $q(e))}}function qq(n){const e={};for(const{name:i}of n)e[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}function Gq(n){const e=[];for(const{name:t}of n)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function Kq(n){const e=[];for(const{name:t}of n)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function Zq(n){const e={};for(const i of n)e[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _r=new Map([["left",j.alignLeft],["right",j.alignRight],["center",j.alignCenter],["justify",j.alignJustify]]);class Jq extends I{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=l2(e.config.get("alignment.options"));t.map(i=>i.name).filter(r2).forEach(i=>this._addButton(i)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,i=>this._createButton(i,e))}_createButton(e,t,i={}){const s=this.editor,o=s.commands.get("alignment"),r=new X(e);return r.set({label:this.localizedOptionTitles[t],icon:_r.get(t),tooltip:!0,isToggleable:!0,...i}),r.bind("isEnabled").to(o),r.bind("isOn").to(o,"value",a=>a===t),this.listenTo(r,"execute",()=>{s.execute("alignment",{value:t}),s.editing.view.focus()}),r}_addToolbarDropdown(e){const t=this.editor;t.ui.componentFactory.add("alignment",s=>{const o=wt(s),r=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;vu(o,()=>e.map(u=>this._createButton(s,u.name,{tooltipPosition:r})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),o.buttonView.set({label:a("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?_r.get("right"):_r.get("left"),c=t.commands.get("alignment");return o.buttonView.bind("icon").to(c,"value",u=>_r.get(u)||l),o.bind("isEnabled").to(c,"isEnabled"),this.listenTo(o,"execute",()=>{t.editing.view.focus()}),o})}_addMenuBarMenu(e){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",i=>{const s=t.commands.get("alignment"),o=i.t,r=new vn(i),a=new zo(i);r.bind("isEnabled").to(s),a.set({ariaLabel:o("Text alignment"),role:"menu"}),r.buttonView.set({label:o("Text alignment")});for(const l of e){const c=new or(i,r),u=new et(i);u.extendTemplate({attributes:{"aria-checked":u.bindTemplate.to("isOn")}}),u.delegate("execute").to(r),u.set({label:this.localizedOptionTitles[l.name],icon:_r.get(l.name)}),u.on("execute",()=>{t.execute("alignment",{value:l.name}),t.editing.view.focus()}),u.bind("isOn").to(s,"value",d=>d===l.name),u.bind("isEnabled").to(s,"isEnabled"),c.children.add(u),a.items.add(c)}return r.panelView.children.add(a),r})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xq extends I{static get requires(){return[jq,Jq]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fs extends Q{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(r=>{if(s.isCollapsed)o?r.setSelectionAttribute(this.attributeKey,!0):r.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const l of a)o?r.setAttribute(this.attributeKey,o,l):r.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const o of s.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const to="bold";class Yq extends I{static get pluginName(){return"BoldEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:to}),e.model.schema.setAttributeProperties(to,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:to,view:"strong",upcastAlso:["b",i=>{const s=i.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(to,new Fs(e,to)),e.keystrokes.set("CTRL+B",to),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zs({editor:n,commandName:e,plugin:t,icon:i,label:s,keystroke:o}){return r=>{const a=n.commands.get(e),l=new r(n.locale);return l.set({label:s,icon:i,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kl="bold";class Qq extends I{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.locale.t,i=e.commands.get(kl),s=zs({editor:e,commandName:kl,plugin:this,icon:j.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(kl,()=>{const o=s(X);return o.set({tooltip:!0}),o.bind("isOn").to(i,"value"),o}),e.ui.componentFactory.add("menuBar:"+kl,()=>s(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eG extends I{static get requires(){return[Yq,Qq]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c2{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tG extends Q{constructor(e,t){super(e),this._buffer=new c2(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,s=e.text||"",o=s.length;let r=i.selection;if(e.selection?r=e.selection:e.range&&(r=t.createSelection(e.range)),!t.canEditAt(r))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();const c=Array.from(i.selection.getAttributes());t.deleteContent(r),s&&t.insertContent(l.createText(s,c),r),a?l.setSelection(a):r.is("documentSelection")||l.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const p1=["insertText","insertReplacementText"];class nG extends di{constructor(e){super(e),this.focusObserver=e.getObserver(yc),ee.isAndroid&&p1.push("insertCompositionText");const t=e.document;t.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;const{data:o,targetRanges:r,inputType:a,domEvent:l}=s;if(!p1.includes(a))return;this.focusObserver.flush();const c=new Ai(t,"insertText");t.fire(c,new Oo(e,l,{text:o,selection:e.createSelection(r)})),c.stop.called&&i.stop()}),t.on("compositionend",(i,{data:s,domEvent:o})=>{!this.isEnabled||ee.isAndroid||s&&t.fire("insertText",new Oo(e,o,{text:s,selection:t.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u2 extends I{static get pluginName(){return"Input"}init(){const e=this.editor,t=e.model,i=e.editing.view,s=t.document.selection;i.addObserver(nG);const o=new tG(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(i.document,"insertText",(r,a)=>{i.document.isComposing||a.preventDefault();const{text:l,selection:c,resultRange:u}=a,d=Array.from(c.getRanges()).map(m=>e.editing.mapper.toModelRange(m));let h=l;if(ee.isAndroid){const m=Array.from(d[0].getItems()).reduce((g,b)=>g+(b.is("$textProxy")?b.data:""),"");m&&(m.length<=h.length?h.startsWith(m)&&(h=h.substring(m.length),d[0].start=d[0].start.getShiftedBy(m.length)):m.startsWith(h)&&(d[0].start=d[0].start.getShiftedBy(h.length),h=""))}const f={text:h,selection:t.createSelection(d)};u&&(f.resultRange=e.editing.mapper.toModelRange(u)),e.execute("insertText",f),i.scrollToTheSelection()}),ee.isAndroid?this.listenTo(i.document,"keydown",(r,a)=>{s.isCollapsed||a.keyCode!=229||!i.document.isComposing||b1(t,o)}):this.listenTo(i.document,"compositionstart",()=>{s.isCollapsed||b1(t,o)})}}function b1(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w1 extends Q{constructor(e,t){super(e),this.direction=t,this._buffer=new c2(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(e.selection||i.selection);if(!t.canEditAt(o))return;const r=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,r)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=Bh(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s),r=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(r,o),e.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),o=i.schema.getLimitElement(s),r=o.getChild(0);return!(s.parent!=r||!e.containsEntireContent(r)||!i.schema.checkChild(o,"paragraph")||r.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const iG="character",_1="word",sG="codePoint",$i="selection",ho="backward",xr="forward",d2={deleteContent:{unit:$i,direction:ho},deleteContentBackward:{unit:sG,direction:ho},deleteWordBackward:{unit:_1,direction:ho},deleteHardLineBackward:{unit:$i,direction:ho},deleteSoftLineBackward:{unit:$i,direction:ho},deleteContentForward:{unit:iG,direction:xr},deleteWordForward:{unit:_1,direction:xr},deleteHardLineForward:{unit:$i,direction:xr},deleteSoftLineForward:{unit:$i,direction:xr}};class oG extends di{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:l}=o,c=d2[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:i};u.unit==$i&&(u.selectionToRemove=e.createSelection(r[0])),l==="deleteContentBackward"&&(ee.isAndroid&&(u.sequence=1),aG(r)&&(u.unit=$i,u.selectionToRemove=e.createSelection(r)));const d=new tr(t,"delete",r[0]);t.fire(d,new Oo(e,a,u)),d.stop.called&&s.stop()}),ee.isBlink&&rG(this)}observe(){}stopObserving(){}}function rG(n){const e=n.view,t=e.document;let i=null,s=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,s=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=t.selection,d=n.isEnabled&&l==i&&o(l)&&!u.isCollapsed&&!s;if(i=null,d){const h=u.getFirstRange(),f=new tr(t,"delete",h),m={unit:$i,direction:r(l),selectionToRemove:u};t.fire(f,new Oo(e,c,m))}}),t.on("beforeinput",(a,{inputType:l})=>{const c=d2[l];o(i)&&c&&c.direction==r(i)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==ue.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function o(a){return a==ue.backspace||a==ue.delete}function r(a){return a==ue.backspace?ho:xr}}function aG(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:i}of e){if(!i.parent.is("$text"))t++;else{const s=i.parent.data,o=i.offset;if(Cm(s,o)||km(s,o)||AC(s,o))continue;t++}if(t>1)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xi extends I{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.model.document;t.addObserver(oG),this._undoOnBackspace=!1;const o=new w1(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new w1(e,"backward")),this.listenTo(i,"delete",(r,a)=>{i.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:u,unit:d}=a,h=l==="forward"?"deleteForward":"delete",f={sequence:c};if(d=="selection"){const m=Array.from(u.getRanges()).map(g=>e.editing.mapper.toModelRange(g));f.selection=e.model.createSelection(m)}else f.unit=d;e.execute(h,f),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(r,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),r.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lG extends I{static get requires(){return[u2,Xi]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function h2(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((s,{item:o})=>o.is("$text")||o.is("$textProxy")?s+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,n.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cG extends ye(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:s})=>{if(s){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,o=i.document.selection,r=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:l}=h2(r,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){const u=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sc extends I{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this._isNextGravityRestorationSkipped=!1,this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",(r,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==ue.arrowright,c=a.keyCode==ue.arrowleft;if(!l&&!c)return;const u=s.contentLanguageDirection;let d=!1;u==="ltr"&&l||u==="rtl"&&c?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&r.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(r,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&xn(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&wi(s,t)?!1:xn(o,t)?(yr(e),wi(s,t)&&xn(o,t,!0)?vr(i,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(yr(e),this._restoreGravity(),xn(o,t,!0)?vr(i,t):El(i,t,o),!0):o.isAtStart?wi(s,t)?(yr(e),El(i,t,o),!0):!1:!wi(s,t)&&xn(o,t,!0)?(yr(e),El(i,t,o),!0):v1(o,t)?o.isAtEnd&&!wi(s,t)&&xn(o,t)?(yr(e),El(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view.document;e.editing.view.addObserver(bu);let o=!1;this.listenTo(s,"mousedown",()=>{o=!0}),this.listenTo(s,"selectionChange",()=>{const r=this.attributes;if(!o||(o=!1,!i.isCollapsed)||!wi(i,r))return;const a=i.getFirstPosition();xn(a,r)&&(a.isAtStart||xn(a,r,!0)?vr(t,r):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection,s=this.attributes;this.listenTo(t,"insertContent",()=>{const o=i.getFirstPosition();wi(i,s)&&xn(o,s)&&vr(t,s)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view;let o=!1,r=!1;this.listenTo(s.document,"delete",(a,l)=>{o=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;const a=i.getFirstPosition();r=wi(i,this.attributes)&&!v1(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,!r&&e.model.enqueueChange(()=>{const a=i.getFirstPosition();wi(i,this.attributes)&&xn(a,this.attributes)&&(a.isAtStart||xn(a,this.attributes,!0)?vr(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function wi(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function El(n,e,t){const i=t.nodeBefore;n.change(s=>{if(i){const o=[],r=n.schema.isObject(i)&&n.schema.isInline(i);for(const[a,l]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!r||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);s.setSelectionAttribute(o)}else s.removeSelectionAttribute(e)})}function vr(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function yr(n){n.preventDefault()}function v1(n,e){const t=n.getShiftedBy(-1);return xn(t,e)}function xn(n,e,t=!1){const{nodeBefore:i,nodeAfter:s}=n;for(const o of e){const r=i?i.getAttribute(o):void 0,a=s?s.getAttribute(o):void 0;if(!(t&&(r===void 0||a===void 0))&&a!==r)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ku(n,e,t,i){return i.createRange(y1(n,e,t,!0,i),y1(n,e,t,!1,i))}function y1(n,e,t,i,s){let o=n.textNode||(i?n.nodeBefore:n.nodeAfter),r=null;for(;o&&o.getAttribute(e)==t;)r=o,o=i?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,i?"before":"after"):n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function f2(n,e,t,i){const s=n.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=ku(a.getFirstPosition(),e,a.getAttribute(e),n.model),u=n.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",t)&&!d.hasClass(i)&&(r.addClass(i,d),o.add(d),l=!0)}return l}),n.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const c of o.values())l.removeClass(i,c),o.delete(c)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hs="code",uG="ck-code_selected";class dG extends I{static get pluginName(){return"CodeEditing"}static get requires(){return[Sc]}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:hs}),e.model.schema.setAttributeProperties(hs,{isFormatting:!0,copyOnEnter:!1}),e.conversion.attributeToElement({model:hs,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),e.commands.add(hs,new Fs(e,hs)),e.plugins.get(Sc).registerAttribute(hs),f2(e,hs,"code",uG),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}const hG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Tl="code";class fG extends I{static get pluginName(){return"CodeUI"}init(){const e=this.editor,t=e.locale.t,i=zs({editor:e,commandName:Tl,plugin:this,icon:hG,label:t("Code")});e.ui.componentFactory.add(Tl,()=>{const s=i(X),o=e.commands.get(Tl);return s.set({tooltip:!0}),s.bind("isOn").to(o,"value"),s}),e.ui.componentFactory.add("menuBar:"+Tl,()=>i(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mG extends I{static get requires(){return[dG,fG]}static get pluginName(){return"Code"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const no="italic";class gG extends I{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:no}),e.model.schema.setAttributeProperties(no,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:no,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(no,new Fs(e,no)),e.keystrokes.set("CTRL+I",no),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const pG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sl="italic";class bG extends I{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.commands.get(Sl),i=e.locale.t,s=zs({editor:e,commandName:Sl,plugin:this,icon:pG,keystroke:"CTRL+I",label:i("Italic")});e.ui.componentFactory.add(Sl,()=>{const o=s(X);return o.set({tooltip:!0}),o.bind("isOn").to(t,"value"),o}),e.ui.componentFactory.add("menuBar:"+Sl,()=>s(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wG extends I{static get requires(){return[gG,bG]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cr="strikethrough";class _G extends I{static get pluginName(){return"StrikethroughEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Cr}),e.model.schema.setAttributeProperties(Cr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Cr,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(Cr,new Fs(e,Cr)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}const vG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Al="strikethrough";class yG extends I{static get pluginName(){return"StrikethroughUI"}init(){const e=this.editor,t=e.locale.t,i=zs({editor:e,commandName:Al,plugin:this,icon:vG,keystroke:"CTRL+SHIFT+X",label:t("Strikethrough")});e.ui.componentFactory.add(Al,()=>{const s=i(X),o=e.commands.get(Al);return s.set({tooltip:!0}),s.bind("isOn").to(o,"value"),s}),e.ui.componentFactory.add("menuBar:"+Al,()=>i(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CG extends I{static get requires(){return[_G,yG]}static get pluginName(){return"Strikethrough"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kr="subscript";class kG extends I{static get pluginName(){return"SubscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:kr}),e.model.schema.setAttributeProperties(kr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:kr,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),e.commands.add(kr,new Fs(e,kr))}}const EG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Il="subscript";class TG extends I{static get pluginName(){return"SubscriptUI"}init(){const e=this.editor,t=e.locale.t,i=zs({editor:e,commandName:Il,plugin:this,icon:EG,label:t("Subscript")});e.ui.componentFactory.add(Il,()=>{const s=i(X),o=e.commands.get(Il);return s.set({tooltip:!0}),s.bind("isOn").to(o,"value"),s}),e.ui.componentFactory.add("menuBar:"+Il,()=>i(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SG extends I{static get requires(){return[kG,TG]}static get pluginName(){return"Subscript"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Er="superscript";class AG extends I{static get pluginName(){return"SuperscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Er}),e.model.schema.setAttributeProperties(Er,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Er,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),e.commands.add(Er,new Fs(e,Er))}}const IG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pl="superscript";class PG extends I{static get pluginName(){return"SuperscriptUI"}init(){const e=this.editor,t=e.locale.t,i=zs({editor:e,commandName:Pl,plugin:this,icon:IG,label:t("Superscript")});e.ui.componentFactory.add(Pl,()=>{const s=i(X),o=e.commands.get(Pl);return s.set({tooltip:!0}),s.bind("isOn").to(o,"value"),s}),e.ui.componentFactory.add("menuBar:"+Pl,()=>i(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xG extends I{static get requires(){return[AG,PG]}static get pluginName(){return"Superscript"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Tr="underline";class RG extends I{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Tr}),e.model.schema.setAttributeProperties(Tr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Tr,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Tr,new Fs(e,Tr)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const LG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xl="underline";class VG extends I{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.commands.get(xl),i=e.locale.t,s=zs({editor:e,commandName:xl,plugin:this,icon:LG,label:i("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(xl,()=>{const o=s(X);return o.set({tooltip:!0}),o.bind("isOn").to(t,"value"),o}),e.ui.componentFactory.add("menuBar:"+xl,()=>s(et))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OG extends I{static get requires(){return[RG,VG]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*m2(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MG extends Q{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,s=t.schema,o=i.isCollapsed,r=i.getFirstRange(),a=r.start.parent,l=r.end.parent;if(s.isLimit(a)||s.isLimit(l))return!o&&a==l&&t.deleteContent(i),!1;if(o){const c=m2(e.model.schema,i.getAttributes());return C1(e,r.start),e.setSelectionAttribute(c),!0}else{const c=!(r.start.isAtStart&&r.end.isAtEnd),u=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(u)return C1(e,i.focus),!0;e.setSelection(l,0)}}return!1}}function C1(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BG={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class g2 extends di{constructor(e){super(e);const t=this.document;let i=!1;t.on("keydown",(s,o)=>{i=o.shiftKey}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;let r=o.inputType;ee.isSafari&&i&&r=="insertParagraph"&&(r="insertLineBreak");const a=o.domEvent,l=BG[r];if(!l)return;const c=new tr(t,"enter",o.targetRanges[0]);t.fire(c,new Oo(e,a,{isSoft:l.isSoft})),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ua extends I{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,i=t.document,s=this.editor.t;t.addObserver(g2),e.commands.add("enter",new MG(e)),this.listenTo(i,"enter",(o,r)=>{i.isComposing||r.preventDefault(),!r.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NG extends Q{execute(){const e=this.editor.model,t=e.document;e.change(i=>{FG(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=DG(e.schema,t.selection)}}function DG(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const i=e.getFirstRange(),s=i.start.parent,o=i.end.parent;return!((ef(s,n)||ef(o,n))&&s!==o)}function FG(n,e,t){const i=t.isCollapsed,s=t.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(i){const l=m2(n.schema,t.getAttributes());k1(n,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?k1(n,e,t.focus):l&&e.setSelection(r,0)}}function k1(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function ef(n,e){return n.is("rootElement")?!1:e.isLimit(n)||ef(n.parent,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p2 extends I{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,o=s.document,r=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(g2),e.commands.add("shiftEnter",new NG(e)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zG extends Q{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,o=Array.from(s.getSelectedBlocks()),r=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!r)this._removeQuote(a,o.filter(Rl));else{const l=o.filter(c=>Rl(c)||T1(i,c));this._applyQuote(a,l)}})}_getValue(){const e=this.editor.model.document.selection,t=$e(e.getSelectedBlocks());return!!(t&&Rl(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=$e(e.getSelectedBlocks());return i?T1(t,i):!1}_removeQuote(e,t){E1(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){e.unwrap(i.start.parent);return}if(i.start.isAtStart){const o=e.createPositionBefore(i.start.parent);e.move(i,o);return}i.end.isAtEnd||e.split(i.end);const s=e.createPositionAfter(i.end.parent);e.move(i,s)})}_applyQuote(e,t){const i=[];E1(e,t).reverse().forEach(s=>{let o=Rl(s.start);o||(o=e.createElement("blockQuote"),e.wrap(s,o)),i.push(o)}),i.reverse().reduce((s,o)=>s.nextSibling==o?(e.merge(e.createPositionAfter(s)),s):o)}}function Rl(n){return n.parent.name=="blockQuote"?n.parent:null}function E1(n,e){let t,i=0;const s=[];for(;i<e.length;){const o=e[i],r=e[i+1];t||(t=n.createPositionBefore(o)),(!r||o.nextSibling!=r)&&(s.push(n.createRange(t,n.createPositionAfter(o))),t=null),i++}return s}function T1(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HG extends I{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[Ua,Xi]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new zG(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(r=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return r.unwrap(c),!0;if(c.is("element")){const u=r.createRangeIn(c);for(const d of u.getItems())if(d.is("element","blockQuote")&&!t.checkChild(r.createPositionBefore(d),d))return r.unwrap(d),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0}return!1});const i=this.editor.editing.view.document,s=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",(r,a)=>{if(!s.isCollapsed||!o.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(r,a)=>{if(a.direction!="backward"||!s.isCollapsed||!o.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $G extends I{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.commands.get("blockQuote");e.ui.componentFactory.add("blockQuote",()=>{const i=this._createButton(X);return i.set({tooltip:!0}),i.bind("isOn").to(t,"value"),i}),e.ui.componentFactory.add("menuBar:blockQuote",()=>this._createButton(et))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("blockQuote"),o=new e(t.locale),r=i.t;return o.set({label:r("Block quote"),icon:j.quote,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UG extends I{static get requires(){return[HG,$G]}static get pluginName(){return"BlockQuote"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qm(n){const e=n.t,t=n.config.get("codeBlock.languages");for(const i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function tf(n,e,t){const i={};for(const s of n)if(e==="class"){const o=s[e].split(" ").shift();i[o]=s[t]}else i[s[e]]=s[t];return i}function Gm(n){return n.data.match(/^(\s*)/)[0]}function WG(n,e){const t=n.createDocumentFragment(),i=e.split(`
`),s=i.reduce((o,r,a)=>(o.push(r),a<i.length-1&&o.push(n.createElement("br")),o),[]);return n.appendChild(s,t),t}function nf(n){const e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];const i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:s}of i){if(!s.is("$textProxy"))continue;const{parent:o,startOffset:r}=s.textNode;if(!o.is("element","codeBlock"))continue;const a=Gm(s.textNode),l=n.createPositionAt(o,r+a.length);t.push(l)}return t}function b2(n){const e=$e(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function S1(n,e){return e.is("rootElement")||n.isLimit(e)?!1:n.checkChild(e.parent,"codeBlock")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jG extends Q{constructor(e){super(e),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor,i=t.model,s=i.document.selection,r=qm(t)[0],a=Array.from(s.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,c=qG(e,this._lastLanguage,r.language);i.change(u=>{l?this._applyCodeBlock(u,a,c):this._removeCodeBlock(u,a)})}_getValue(){const e=this.editor.model.document.selection,t=$e(e.getSelectedBlocks());return!!(t&&t.is("element","codeBlock"))?t.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=$e(e.getSelectedBlocks());return i?S1(t,i):!1}_applyCodeBlock(e,t,i){this._lastLanguage=i;const s=this.editor.model.schema,o=t.filter(r=>S1(s,r));for(const r of o)e.rename(r,"codeBlock"),e.setAttribute("language",i,r),s.removeDisallowedAttributes([r],e),Array.from(r.getChildren()).filter(a=>!s.checkChild(r,a)).forEach(a=>e.remove(a));o.reverse().forEach((r,a)=>{const l=o[a+1];r.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(r)))})}_removeCodeBlock(e,t){const i=t.filter(s=>s.is("element","codeBlock"));for(const s of i){const o=e.createRangeOn(s);for(const r of Array.from(o.getItems()).reverse())if(r.is("element","softBreak")&&r.parent.is("element","codeBlock")){const{position:a}=e.split(e.createPositionBefore(r)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(r)}e.rename(s,"paragraph"),e.removeAttribute("language",s)}}}function qG(n,e,t){return n.language?n.language:n.usePreviousLanguageChoice&&e?e:t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GG extends Q{constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(i=>{const s=nf(t);for(const o of s){const r=i.createText(this._indentSequence);t.insertContent(r,o)}})}_checkEnabled(){return this._indentSequence?b2(this.editor.model.document.selection):!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KG extends Q{constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(()=>{const i=nf(t);for(const s of i){const o=A1(t,s,this._indentSequence);o&&t.deleteContent(t.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return b2(e.document.selection)?nf(e).some(t=>A1(e,t,this._indentSequence)):!1}}function A1(n,e,t){const i=ZG(e);if(!i)return null;const s=Gm(i),o=s.lastIndexOf(t);if(o+t.length!==s.length||o===-1)return null;const{parent:r,startOffset:a}=i;return n.createRange(n.createPositionAt(r,a+o),n.createPositionAt(r,a+o+t.length))}function ZG(n){let e=n.parent.getChild(n.index);return(!e||e.is("element","softBreak"))&&(e=n.nodeBefore),!e||e.is("element","softBreak")?null:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function I1(n,e,t=!1){const i=tf(e,"language","class"),s=tf(e,"language","label");return(o,r,a)=>{const{writer:l,mapper:c,consumable:u}=a;if(!u.consume(r.item,"insert"))return;const d=r.item.getAttribute("language"),h=c.toViewPosition(n.createPositionBefore(r.item)),f={};t&&(f["data-language"]=s[d],f.spellcheck="false");const m=i[d]?{class:i[d]}:void 0,g=l.createContainerElement("code",m),b=l.createContainerElement("pre",f,g);l.insert(h,b),c.bindElements(r.item,g)}}function JG(n){return(e,t,i)=>{if(t.item.parent.name!=="codeBlock")return;const{writer:s,mapper:o,consumable:r}=i;if(!r.consume(t.item,"insert"))return;const a=o.toViewPosition(n.createPositionBefore(t.item));s.insert(a,s.createText(`
`))}}function XG(n,e){const t=tf(e,"class","language"),i=e[0].language;return(s,o,r)=>{const a=o.viewItem,l=a.parent;if(!l||!l.is("element","pre")||o.modelCursor.findAncestor("codeBlock"))return;const{consumable:c,writer:u}=r;if(!c.test(a,{name:!0}))return;const d=u.createElement("codeBlock"),h=[...a.getClassNames()];h.length||h.push("");for(const f of h){const m=t[f];if(m){u.setAttribute("language",m,d);break}}d.hasAttribute("language")||u.setAttribute("language",i,d),r.convertChildren(a,d),r.safeInsert(d,o.modelCursor)&&(c.consume(a,{name:!0}),r.updateConversionResult(d,o))}}function YG(){return(n,e,{consumable:t,writer:i})=>{let s=e.modelCursor;if(!t.test(e.viewItem)||!s.findAncestor("codeBlock"))return;t.consume(e.viewItem);const r=e.viewItem.data.split(`
`).map(l=>i.createText(l)),a=r[r.length-1];for(const l of r)if(i.insert(l,s),s=s.getShiftedBy(l.offsetSize),l!==a){const c=i.createElement("softBreak");i.insert(c,s),s=i.createPositionAfter(c)}e.modelRange=i.createRange(e.modelCursor,s),e.modelCursor=s}}function QG(){return(n,e,{consumable:t})=>{const i=e.viewItem;if(i.findAncestor("pre"))return;const s=Array.from(i.getChildren()),o=s.find(r=>r.is("element","code"));if(o)for(const r of s)r===o||!r.is("$text")||t.consume(r,{name:!0})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const w2="paragraph";class eK extends I{static get pluginName(){return"CodeBlockEditing"}static get requires(){return[p2]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const e=this.editor,t=e.model.schema,i=e.model,s=e.editing.view,o=e.plugins.has("ListEditing")?e.plugins.get("ListEditing"):null,r=qm(e);e.commands.add("codeBlock",new jG(e)),e.commands.add("indentCodeBlock",new GG(e)),e.commands.add("outdentCodeBlock",new KG(e)),this.listenTo(s.document,"tab",(a,l)=>{const c=l.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(c).isEnabled&&(e.execute(c),l.stopPropagation(),l.preventDefault(),a.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",isBlock:!0,allowAttributes:["language"]}),t.addAttributeCheck((a,l)=>{if(a.endsWith("codeBlock")&&o&&o.getListAttributeNames().includes(l))return!0;if(a.endsWith("codeBlock $text"))return!1}),e.model.schema.addChildCheck((a,l)=>{if(a.endsWith("codeBlock")&&l.isObject)return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",I1(i,r,!0)),e.data.downcastDispatcher.on("insert:codeBlock",I1(i,r)),e.data.downcastDispatcher.on("insert:softBreak",JG(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",XG(s,r)),e.data.upcastDispatcher.on("text",YG()),e.data.upcastDispatcher.on("element:pre",QG(),{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(a,l)=>{let c=i.createRange(i.document.selection.anchor);if(l.targetRanges&&(c=e.editing.mapper.toModelRange(l.targetRanges[0])),!c.start.parent.is("element","codeBlock"))return;const u=l.dataTransfer.getData("text/plain"),d=new nr(e.editing.view.document);l.content=WG(d,u)}),this.listenTo(i,"getSelectedContent",(a,[l])=>{const c=l.anchor;l.isCollapsed||!c.parent.is("element","codeBlock")||!c.hasSameParentAs(l.focus)||i.change(u=>{const d=a.return;if(c.parent.is("element")&&(d.childCount>1||l.containsEntireContent(c.parent))){const f=u.createElement("codeBlock",c.parent.getAttributes());u.append(d,f);const m=u.createDocumentFragment();u.append(f,m),a.return=m;return}const h=d.getChild(0);t.checkAttribute(h,"code")&&u.setAttribute("code",!0,h)})})}afterInit(){const e=this.editor,t=e.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),s&&s.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(o,r)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!nK(e,r.isSoft)&&!iK(e,r.isSoft)&&tK(e),r.preventDefault(),o.stop())},{context:"pre"})}}function tK(n){const t=n.model.document,i=t.selection.getLastPosition(),s=i.nodeBefore||i.textNode;let o;s&&s.is("$text")&&(o=Gm(s)),n.model.change(r=>{n.execute("shiftEnter"),o&&r.insertText(o,t.selection.anchor)})}function nK(n,e){const i=n.model.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeAfter;return e||!i.selection.isCollapsed||!o.isAtStart||!gs(r)?!1:(n.model.change(a=>{n.execute("enter");const l=i.selection.anchor.parent.previousSibling;a.rename(l,w2),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(r)}),s.scrollToTheSelection(),!0)}function iK(n,e){const t=n.model,i=t.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeBefore;let a;if(e||!i.selection.isCollapsed||!o.isAtEnd||!r||!r.previousSibling)return!1;if(gs(r)&&gs(r.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling),t.createPositionAfter(r));else if(Sd(r)&&gs(r.previousSibling)&&gs(r.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling),t.createPositionAfter(r));else if(Sd(r)&&gs(r.previousSibling)&&Sd(r.previousSibling.previousSibling)&&r.previousSibling.previousSibling&&gs(r.previousSibling.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling.previousSibling),t.createPositionAfter(r));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");const c=i.selection.anchor.parent;l.rename(c,w2),n.model.schema.removeDisallowedAttributes([c],l)}),s.scrollToTheSelection(),!0}function Sd(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function gs(n){return n&&n.is("element","softBreak")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sK extends I{static get pluginName(){return"CodeBlockUI"}init(){const e=this.editor,t=e.t,i=e.ui.componentFactory,s=qm(e),o=this._getLanguageListItemDefinitions(s),r=e.commands.get("codeBlock");i.add("codeBlock",a=>{const l=wt(a,ir),c=l.buttonView,u=t("Insert code block");return c.set({label:u,tooltip:!0,icon:j.codeBlock,isToggleable:!0}),c.bind("isOn").to(r,"value",d=>!!d),c.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),l.on("execute",d=>{e.execute("codeBlock",{language:d.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(r),Ds(l,o,{role:"menu",ariaLabel:u}),l}),i.add("menuBar:codeBlock",a=>{const l=new vn(a);l.buttonView.set({label:t("Code block"),icon:j.codeBlock}),l.bind("isEnabled").to(r);const c=new zo(a);c.set({ariaLabel:t("Insert code block")});for(const u of o){const d=new or(a,l),h=new et(a);h.bind(...Object.keys(u.model)).to(u.model),h.bind("ariaChecked").to(h,"isOn"),h.delegate("execute").to(l),h.on("execute",()=>{e.execute("codeBlock",{language:u.model._codeBlockLanguage,forceValue:r.value!=u.model._codeBlockLanguage}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(e){const i=this.editor.commands.get("codeBlock"),s=new Et;for(const o of e){const r={type:"button",model:new sr({_codeBlockLanguage:o.language,label:o.label,role:"menuitemradio",withText:!0})};r.model.bind("isOn").to(i,"value",a=>a===r.model._codeBlockLanguage),s.add(r)}return s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oK extends I{static get requires(){return[eK,sK]}static get pluginName(){return"CodeBlock"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _a extends is{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(s){return(o,r)=>{r.preventDefault();const a=r.dropRange?[r.dropRange]:null,l=new Ai(t,s);t.fire(l,{dataTransfer:r.dataTransfer,method:o.name,targetRanges:a,target:r.target,domEvent:r.domEvent}),l.stop.called&&r.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",s={dataTransfer:new jC(t,{cacheFiles:i})};(e.type=="drop"||e.type=="dragover")&&(s.dropRange=rK(this.view,e)),this.fire(e.type,e,s)}}function rK(n,e){const t=e.target.ownerDocument,i=e.clientX,s=e.clientY;let o;return t.caretRangeFromPoint&&t.caretRangeFromPoint(i,s)?o=t.caretRangeFromPoint(i,s):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?n.domConverter.domRangeToView(o):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function aK(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lK(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const P1=["figcaption","li"],x1=["ol","ul"];function _2(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return`
`;let e="",t=null;for(const i of n.getChildren())e+=cK(i,t)+_2(i),t=i;return e}function cK(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||x1.includes(n.name)&&x1.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":P1.includes(n.name)||P1.includes(e.name)?`
`:`

`:""}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jr extends I{constructor(){super(...arguments),this._markersToCopy=new Map}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=s=>s.model.getSelectedContent(s.model.document.selection)){return this.editor.model.change(s=>{const o=s.model.document.selection;s.setSelection(t);const r=this._insertFakeMarkersIntoSelection(s,s.model.document.selection,e),a=i(s),l=this._removeFakeMarkersInsideElement(s,a);for(const[c,u]of Object.entries(r)){l[c]||(l[c]=s.createRangeIn(a));for(const d of u)s.remove(d)}a.markers.clear();for(const[c,u]of Object.entries(l))a.markers.set(c,u);return s.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,t){const i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(s=>{const o=this._insertFakeMarkersElements(s,i),r=t(s),a=this._removeFakeMarkersInsideElement(s,r);for(const l of Object.values(o).flat())s.remove(l);for(const[l,c]of Object.entries(a))s.model.markers.has(l)||s.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return r})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const s=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),s?this._markersToCopy.set(e,s):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;const{allowedActions:s}=i;return s==="all"||s.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){const s=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,s)}_getCopyableMarkersFromSelection(e,t,i){const s=Array.from(t.getRanges()),o=new Set(s.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),r=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;const{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){const u=a.getRange();return s.some(d=>d.containsRange(u,!0))}return!0};return Array.from(o).filter(r).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,r])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:r}];if(this._isMarkerCopyable(o,t)){const a=this._getMarkerClipboardConfig(o),l=i.markers.has(o)&&i.markers.get(o).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:r}]}return[]})}_insertFakeMarkersElements(e,t){const i={},s=t.flatMap(o=>{const{start:r,end:a}=o.range;return[{position:r,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:r})=>o.isBefore(r)?1:-1);for(const{position:o,marker:r,type:a}of s){const l=e.createElement("$marker",{"data-name":r.name,"data-type":a});i[r.name]||(i[r.name]=[]),i[r.name].push(l),e.insert(l,o)}return i}_removeFakeMarkersInsideElement(e,t){const s=this._getAllFakeMarkersFromElement(e,t).reduce((o,r)=>{const a=r.markerElement&&e.createPositionBefore(r.markerElement);let l=o[r.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(r.name).duplicateOnPaste?o[this._getUniqueMarkerName(r.name)]=o[r.name]:c=!0,l=null),c||(o[r.name]={...l,[r.type]:a}),r.markerElement&&e.remove(r.markerElement),o},{});return QD(s,o=>new P(o.start||e.createPositionFromPath(t,[0]),o.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const i=Array.from(e.createRangeIn(t)).flatMap(({item:r})=>{if(!r.is("element","$marker"))return[];const a=r.getAttribute("data-name"),l=r.getAttribute("data-type");return[{markerElement:r,name:a,type:l}]}),s=[],o=[];for(const r of i)r.type==="end"&&(i.some(l=>l.name===r.name&&l.type==="start")||s.push({markerElement:null,name:r.name,type:"start"})),r.type==="start"&&(i.some(l=>l.name===r.name&&l.type==="end")||o.unshift({markerElement:null,name:r.name,type:"end"}));return[...s,...i,...o]}_getUniqueMarkerName(e){const t=e.split(":"),i=Nt().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yn extends I{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[jr]}init(){this.editor.editing.view.addObserver(_a),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const o=s._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:i})})}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(r,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&r.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(r,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let d="";l.getData("text/html")?d=lK(l.getData("text/html")):l.getData("text/plain")&&(d=aK(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(d)}const u=new Ai(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&r.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(r,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(r.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(r,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,o=(r,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,r.name)};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{e.model.canEditAt(e.model.document.selection)?o(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{const l=e.data.toView(a.content);s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",_2(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uK extends Pe(){constructor(){super(...arguments),this._stack=[]}add(e,t){const i=this._stack,s=i[0];this._insertDescriptor(e);const o=i[0];s!==o&&!Ad(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}remove(e,t){const i=this._stack,s=i[0];this._removeDescriptor(e);const o=i[0];s!==o&&!Ad(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex(o=>o.id===e.id);if(Ad(e,t[i]))return;i>-1&&t.splice(i,1);let s=0;for(;t[s]&&dK(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex(s=>s.id===e);i>-1&&t.splice(i,1)}}function Ad(n,e){return n&&e&&n.priority==e.priority&&Ac(n.classes)==Ac(e.classes)}function dK(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:Ac(n.classes)>Ac(e.classes)}function Ac(n){return Array.isArray(n)?n.sort().join(","):n}const hK='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fK="ck-widget",R1="ck-widget_selected";function Ge(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function Hs(n,e,t={}){if(!n.is("containerElement"))throw new v("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(fK,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=_K,e.setCustomProperty("widgetLabel",[],n),t.label&&pK(n,t.label),t.hasSelectionHandle&&vK(n,e),v2(n,e),n}function mK(n,e,t){if(e.classes&&t.addClass(we(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function gK(n,e,t){if(e.classes&&t.removeClass(we(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function v2(n,e,t=mK,i=gK){const s=new uK;s.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});const o=(a,l,c)=>s.add(l,c),r=(a,l,c)=>s.remove(l,c);e.setCustomProperty("addHighlight",o,n),e.setCustomProperty("removeHighlight",r,n)}function pK(n,e){n.getCustomProperty("widgetLabel").push(e)}function bK(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function wK(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.setAttribute("role","textbox",n),e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,s,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(i,s,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),v2(n,e),n}function Eu(n,e){const t=n.getSelectedElement();if(t){const i=Fi(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function _K(){return null}function vK(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),o=new ei;return o.set("content",hK),o.render(),s.appendChild(o.element),s});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vi="widget-type-around";function fs(n,e,t){return!!n&&Ge(n)&&!t.isInline(e)}function yK(n){return n.closest(".ck-widget__type-around__button")}function CK(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function kK(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function Fi(n){return n.getAttribute(vi)}const EK='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const y2=["before","after"],TK=new DOMParser().parseFromString(EK,"image/svg+xml").firstChild,L1="ck-widget__type-around_disabled";class SK extends I{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Ua,Xi]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,s,o)=>{t.change(r=>{for(const a of t.document.roots)o?r.removeClass(L1,a):r.addClass(L1,a)}),o||e.model.change(r=>{r.removeSelectionAttribute(vi)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,s=i.editing.view,o=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,i,s){this.listenTo(e,t,(...o)=>{this.isEnabled&&i(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const i=this.editor.model.document.selection,s=Fi(i);if(!s)return!1;const o=i.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,r,a)=>{const l=a.mapper.toViewElement(r.item);l&&fs(l,r.item,t)&&(AK(a.writer,s,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,s=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Ge,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(vi)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=i.getSelectedElement();if(a){const l=e.editing.mapper.toViewElement(a);if(fs(l,a,s))return}e.model.change(l=>{l.removeSelectionAttribute(vi)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const u=c.writer;if(this._currentFakeCaretModelElement){const m=c.mapper.toViewElement(this._currentFakeCaretModelElement);m&&(u.removeClass(y2.map(r),m),this._currentFakeCaretModelElement=null)}const d=l.selection.getSelectedElement();if(!d)return;const h=c.mapper.toViewElement(d);if(!fs(h,d,s))return;const f=Fi(l.selection);f&&(u.addClass(r(f),h),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(vi)})});function r(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const i=this.editor,s=i.model,o=s.document.selection,r=s.schema,a=i.editing.view,l=t.keyCode,c=R9(l,i.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),d=i.editing.mapper.toModelElement(u);let h;fs(u,d,r)?h=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed?h=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(h=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),h&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const i=this.editor.model,s=i.document.selection,o=Fi(s);return i.change(r=>{if(o){if(!(o===(e?"after":"before")))return r.removeSelectionAttribute(vi),!0}else return r.setSelectionAttribute(vi,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,s=i.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(r);return fs(a,r,s)?(i.change(l=>{o._setSelectionOverElement(r),l.setSelectionAttribute(vi,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,i=t.model,s=i.schema,o=t.editing.mapper,r=i.document.selection,a=e?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,l=o.toViewElement(a);return fs(l,a,s)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(vi,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,s)=>{const o=yK(s.domTarget);if(!o)return;const r=CK(o),a=kK(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,r),s.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const r=t.getSelectedElement(),a=e.editing.mapper.toViewElement(r),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:fs(a,r,l)&&(this._insertParagraph(r,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),s.stop())},{context:Ge})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=t.selection)},{priority:"high"}),ee.isAndroid?this._listenToIfEnabled(t,"keydown",(i,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,s=i.schema;this._listenToIfEnabled(t.document,"delete",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=Fi(i.document.selection);if(!a)return;const l=r.direction,c=i.document.selection.getSelectedElement(),u=a==="before",d=l=="forward";if(u===d)e.execute("delete",{selection:i.createSelection(c,"on")});else{const f=s.getNearestSelectionRange(i.createPositionAt(c,a),l);if(f)if(!f.isCollapsed)i.change(m=>{m.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const m=i.createSelection(f.start);if(i.modifySelection(m,{direction:l}),!m.focus.isEqual(f.start))i.change(g=>{g.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const g=xK(s,f.start.parent);i.deleteContent(i.createSelection(g,"on"),{doNotAutoparagraph:!0})}}}r.preventDefault(),o.stop()},{context:Ge})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[o,r])=>{if(r&&!r.is("documentSelection"))return;const a=Fi(i);if(a)return s.stop(),t.change(l=>{const c=i.getSelectedElement(),u=t.createPositionAt(c,a),d=l.createSelection(u),h=t.insertContent(o,d);return l.setSelection(d),h})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,o)=>{const[,r,a={}]=o;if(r&&!r.is("documentSelection"))return;const l=Fi(i);l&&(a.findOptimalPosition=l,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;Fi(i)&&s.stop()},{priority:"high"})}}function AK(n,e,t){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return IK(o,e),PK(o),o});n.insert(n.createPositionAt(t,"end"),i)}function IK(n,e){for(const t of y2){const i=new Mt({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(TK,!0)]});n.appendChild(i.render())}}function PK(n){const e=new Mt({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function xK(n,e){let t=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function RK(n){const e=n.model;return(t,i)=>{const s=i.keyCode==ue.arrowup,o=i.keyCode==ue.arrowdown,r=i.shiftKey,a=e.document.selection;if(!s&&!o)return;const l=o;if(r&&OK(a,l))return;const c=LK(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(r)return}(c.isCollapsed||VK(n,c,l))&&(e.change(u=>{const d=l?c.end:c.start;if(r){const h=e.createSelection(a.anchor);h.setFocus(d),u.setSelection(h)}else u.setSelection(d)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function LK(n,e,t){const i=n.model;if(t){const s=e.isCollapsed?e.focus:e.getLastPosition(),o=V1(i,s,"forward");if(!o)return null;const r=i.createRange(s,o),a=O1(i.schema,r,"backward");return a?i.createRange(s,a):null}else{const s=e.isCollapsed?e.focus:e.getFirstPosition(),o=V1(i,s,"backward");if(!o)return null;const r=i.createRange(o,s),a=O1(i.schema,r,"forward");return a?i.createRange(a,s):null}}function V1(n,e,t){const i=n.schema,s=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of s.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return r;if(l==o&&i.isBlock(a))return null}return null}function O1(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:s}of e.getWalker({direction:t}))if(n.checkChild(s,"$text"))return s;return null}function VK(n,e,t){const i=n.model,s=n.view.domConverter;if(t){const c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}const o=n.mapper.toViewRange(e),r=s.viewRangeToDom(o),a=te.getDomRangeRects(r);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function OK(n,e){return!n.isCollapsed&&n.isBackward==e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class os extends I{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[SK,Xi]}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,r,a)=>{const l=a.writer,c=r.selection;if(c.isCollapsed)return;const u=c.getSelectedElement();if(!u)return;const d=e.editing.mapper.toViewElement(u);Ge(d)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(d),{fake:!0,label:bK(d)})}),this.editor.editing.downcastDispatcher.on("selection",(o,r,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const l=a.writer,c=l.document.selection;let u=null;for(const d of c.getRanges())for(const h of d){const f=h.item;Ge(f)&&!BK(f,u)&&(l.addClass(R1,f),this._previouslySelected.add(f),u=f)}},{priority:"low"}),t.addObserver(bu),this.listenTo(i,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(i,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Ge,"$text"]}),this.listenTo(i,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(i,"arrowKey",RK(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(o,r)=>{this._handleDelete(r.direction=="forward")&&(r.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(i,"tab",(o,r)=>{o.eventPhase=="atTarget"&&(r.shiftKey||this._selectFirstNestedEditable()&&(r.preventDefault(),o.stop()))},{context:Ge,priority:"low"}),this.listenTo(i,"tab",(o,r)=>{r.shiftKey&&this._selectAncestorWidget()&&(r.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(i,"keydown",(o,r)=>{r.keystroke==ue.esc&&this._selectAncestorWidget()&&(r.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:s("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:s("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:s("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:s("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:s("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const i=this.editor,s=i.editing.view,o=s.document;let r=t.target;if(t.domEvent.detail>=3){this._selectBlockContent(r)&&t.preventDefault();return}if(MK(r)||!Ge(r)&&(r=r.findAncestor(Ge),!r))return;ee.isAndroid&&t.preventDefault(),o.isFocused||s.focus();const a=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,i=t.model,s=t.editing.mapper,o=i.schema,r=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=NK(s.toModelElement(r),i.schema);return a?(i.change(l=>{const c=o.isLimit(a)?null:DK(l.createPositionAfter(a),o),u=l.createPositionAt(a,0),d=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(u,d))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,s=this.editor.model,o=s.schema,r=s.document.selection,a=r.getSelectedElement(),l=vm(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&o.isObject(a)){const h=c?r.getLastPosition():r.getFirstPosition(),f=o.getNearestSelectionRange(h,c?"forward":"backward");f&&(s.change(m=>{m.setSelection(f)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed&&!t.shiftKey){const h=r.getFirstPosition(),f=r.getLastPosition(),m=h.nodeAfter,g=f.nodeBefore;(m&&o.isObject(m)||g&&o.isObject(g))&&(s.change(b=>{b.setSelection(c?f:h)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&o.isObject(d)){if(o.isInline(d)&&u)return;this._setSelectionOverElement(d),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,s=i.schema,o=i.document.selection.getSelectedElement();o&&s.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(o=>{let r=i.anchor.parent;for(;r.isEmpty;){const a=r;r=a.parent,o.remove(a)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,s=t.document.selection,o=t.createSelection(s);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(s))return null;const r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(R1,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,i=this.editor.editing.view.document;for(const s of i.selection.getFirstRange().getItems())if(s.is("editableElement")){const o=e.editing.mapper.toModelElement(s);/* istanbul ignore next -- @preserve */if(!o)continue;const r=e.model.createPositionAt(o,0),a=e.model.schema.getNearestSelectionRange(r,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,s=e.editing.view.document.selection.getFirstPosition().parent,r=(s.is("$text")?s.parent:s).findAncestor(Ge);if(!r)return!1;const a=t.toModelElement(r);/* istanbul ignore next -- @preserve */return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}}function MK(n){let e=n;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Ge(e))return!1;e=e.parent}return!1}function BK(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function NK(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function DK(n,e){const t=new Ei({startPosition:n});for(const{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ho extends I{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[Ji]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{FK(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:s,balloonClassName:o="ck-toolbar-container"}){if(!i.length){ae("widget-toolbar-no-items",{toolbarId:e});return}const r=this.editor,a=r.t,l=new No(r.locale);if(l.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new v("widget-toolbar-duplicated",this,{toolbarId:e});const c={view:l,getRelatedElement:s,balloonClassName:o,itemsConfig:i,initialized:!1};r.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const u=s(r.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const s of this._toolbarDefinitions.values()){const o=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const r=o.getAncestors().length;r>e&&(e=r,t=o,i=s)}}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?M1(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:C2(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){const s=i.getRelatedElement(this.editor.editing.view.document.selection);M1(this.editor,s)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function M1(n,e){const t=n.plugins.get("ContextualBalloon"),i=C2(n,e);t.updatePosition(i)}function C2(n,e){const t=n.editing.view,i=_t.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}function FK(n){const e=n.getSelectedElement();return!!(e&&Ge(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zK extends ye(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){const s=new te(t);this.activeHandlePosition=WK(e),this._referenceCoordinates=$K(t,jK(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=HK(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function HK(n,e){const t=n.parentElement;let i=parseFloat(t.ownerDocument.defaultView.getComputedStyle(t).width);const s=5;let o=0,r=t;for(;isNaN(i);){if(r=r.parentElement,++o>s)return 0;i=parseFloat(t.ownerDocument.defaultView.getComputedStyle(r).width)}return e.width/i*100}function $K(n,e){const t=new te(n),i=e.split("-"),s={x:i[1]=="right"?t.right:t.left,y:i[0]=="bottom"?t.bottom:t.top};return s.x+=n.ownerDocument.defaultView.scrollX,s.y+=n.ownerDocument.defaultView.scrollY,s}function UK(n){return`ck-widget__resizer__handle-${n}`}function WK(n){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(n.classList.contains(UK(t)))return t}function jK(n){const e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qK extends U{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,s)=>i!==null&&s!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,s,o)=>e.unit==="px"?`${i}×${s}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,s,o)=>s<50||o<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B1 extends ye(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(s=>{const o=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(r){const a=this.toDomElement(r);return e._appendHandles(a),e._appendSizeUI(a),a});s.insert(s.createPositionAt(t,"end"),o),s.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new zK(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",d=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",d,this._options.viewElement)});const s=this._getHandleHost(),o=new te(s),r=Math.round(o.width),a=Math.round(o.height),l=new te(s);t.width=Math.round(l.width),t.height=Math.round(l.height),this.redraw(o),this.state.update({...t,handleHostWidth:r,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!ZK(t))return;const i=t.parentElement,s=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(i.isSameNode(s)){const l=e||new te(s);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];kt(r,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i=KK(e),s=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};s&&t.activeHandlePosition.endsWith("-right")&&(o.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),s&&(o.x*=2);let r=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(r/t.aspectRatio>a?"width":"height")=="width"?a=r/t.aspectRatio:r=a*t.aspectRatio,{width:Math.round(r),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*r*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const i of t)e.appendChild(new Mt({tag:"div",attributes:{class:`ck-widget__resizer__handle ${GK(i)}`}}).render())}_appendSizeUI(e){this._sizeView=new qK,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function GK(n){return`ck-widget__resizer__handle-${n}`}function KK(n){return{x:n.pageX,y:n.pageY}}function ZK(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Id extends I{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=Ee.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(bu),this._observer=new(Dt()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Lo(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,o]of this._resizers)s.isAttached()||(this._resizers.delete(s),o.destroy())},{priority:"lowest"}),this._observer.listenTo(globalThis.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{const s=i.getSelectedElement(),o=this.getResizerByViewElement(s)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new B1(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const r=i.get("WidgetToolbarRepository");t.on("begin",()=>{r.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{r.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{r.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;B1.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore file -- @preserve */const Pd=er("px");class JK extends U{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>Pd(t)),top:e.to("top",t=>Pd(t)),width:e.to("width",t=>Pd(t))}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ll extends I{constructor(){super(...arguments),this.removeDropMarkerDelayed=ym(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=Lo(e=>this._updateDropMarker(e),40),this._reconvertMarkerThrottled=Lo(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new JK,this._domEmitter=new(Dt()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,s,o,r){this.removeDropMarkerDelayed.cancel();const a=N1(this.editor,e,t,i,s,o,r);/* istanbul ignore next -- @preserve */if(a){if(r&&r.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,i,s,o,r){const a=N1(this.editor,e,t,i,s,o,r);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change(s=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const i=this.toDomElement(t);return i.append("⁠",t.createElement("span"),"⁠"),i})}_updateDropTargetLine(e){const t=this.editor.editing,i=e.start.nodeBefore,s=e.start.nodeAfter,o=e.start.parent,r=i?t.mapper.toViewElement(i):null,a=r?t.view.domConverter.mapViewToDom(r):null,l=s?t.mapper.toViewElement(s):null,c=l?t.view.domConverter.mapViewToDom(l):null,u=t.mapper.toViewElement(o);if(!u)return;const d=t.view.domConverter.mapViewToDom(u),h=this._getScrollableRect(u),{scrollX:f,scrollY:m}=Ee.window,g=a?new te(a):null,b=c?new te(c):null,p=new te(d).excludeScrollbarsAndBorders(),w=g?g.bottom:p.top,E=b?b.top:p.bottom,C=Ee.window.getComputedStyle(d),T=w<=E?(w+E)/2:E;if(h.top<T&&T<h.bottom){const k=p.left+parseFloat(C.paddingLeft),S=p.right-parseFloat(C.paddingRight),x=Math.max(k+f,h.left),N=Math.min(S+f,h.right);this._dropTargetLineView.set({isVisible:!0,left:x,top:T+m,width:N-x})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(e);i=YK(s),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new Ve(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:o})}return new te(i).excludeScrollbarsAndBorders()}}function N1(n,e,t,i,s,o,r){const a=n.model,l=n.editing.mapper;let u=D1(n,e);for(;u;){if(!o){if(a.schema.checkChild(u,"$text")){if(t){const d=t[0].start,h=l.toModelPosition(d);if(!r||Array.from(r.getItems()).every(m=>a.schema.checkChild(h,m))){if(a.schema.checkChild(h,"$text"))return a.createRange(h);if(d)return Vl(n,D1(n,d.parent),i,s)}}}else if(a.schema.isInline(u))return Vl(n,u,i,s)}if(a.schema.isBlock(u))return Vl(n,u,i,s);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(m=>m.is("element")&&!XK(n,m));let h=0,f=d.length;if(f==0)return a.createRange(a.createPositionAt(u,"end"));for(;h<f-1;){const m=Math.floor((h+f)/2);k2(n,d[m],i,s)=="before"?f=m:h=m}return Vl(n,d[h],i,s)}u=u.parent}return null}function XK(n,e){const t=n.editing.mapper,i=n.editing.view.domConverter,s=t.toViewElement(e);if(!s)return!0;const o=i.mapViewToDom(s);return globalThis.window.getComputedStyle(o).float!="none"}function Vl(n,e,t,i){const s=n.model;return s.createRange(s.createPositionAt(e,k2(n,e,t,i)))}function k2(n,e,t,i){const s=n.editing.mapper,o=n.editing.view.domConverter,r=s.toViewElement(e),a=o.mapViewToDom(r),l=new te(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function D1(n,e){const t=n.editing.mapper,i=n.editing.view,s=t.toModelElement(e);if(s)return s;const o=i.createPositionBefore(e),r=t.findMappedViewAncestor(o);return t.toModelElement(r)}function YK(n){let e=n;do{e=e.parentElement;const t=Ee.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QK extends I{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(Dt())}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),ee.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(s,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(globalThis.document,"dragover",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(globalThis.document,"drop",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(globalThis.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(s,o,r)=>{i.setAttribute("draggable",r?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,i=t.document.selection,s=this.editor.editing.view,o=Array.from(i.getSelectedBlocks()),r=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(r)),this._isBlockDragging=!0,s.focus(),s.getObserver(_a).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,s=document.elementFromPoint(t,i),o=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||o.getObserver(_a).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:s,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eZ extends I{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=ym(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(Dt())}static get pluginName(){return"DragDrop"}static get requires(){return[Yn,os,Ll,QK]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(_a),t.addObserver(bu),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,s,o)=>{o||this._finalizeDragging(!1)}),ee.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=e.plugins.get(Ll);this.listenTo(s,"dragstart",(r,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=Nt(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");const{dataTransfer:u,domTarget:d,domEvent:h}=a,{clientX:f}=h;this._updatePreview({dataTransfer:u,domTarget:d,clientX:f}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(r,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(globalThis.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(s,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(r,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:l,clientY:c}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),ee.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),r.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get(Ll);this.listenTo(i,"clipboardInput",(o,r)=>{if(r.method!="drop")return;const{clientX:a,clientY:l}=r.domEvent,c=s.getFinalDropRange(r.target,r.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=r.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),F1(r.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),o.stop();return}r.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Yn);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=F1(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(s,o)=>{if(ee.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=z1(o.target);if(ee.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){const a=i.selection.getSelectedElement();(!a||!Ge(a))&&(r=i.selection.editableElement)}r&&(t.change(a=>{a.setAttribute("draggable","true",r)}),this._draggableElement=e.editing.mapper.toModelElement(r))}),this.listenTo(i,"mouseup",()=>{ee.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,i=t.model;t.plugins.get(Ll).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(o=>{const r=i.createSelection(this._draggedRange);i.deleteContent(r,{doNotAutoparagraph:!0});const a=r.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,i=t.model,s=i.document.selection,o=e?z1(e):null;if(o){const c=t.editing.mapper.toModelElement(o);this._draggedRange=Rn.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const r=Array.from(s.getSelectedBlocks()),a=s.getFirstRange();if(r.length==0){this._draggedRange=Rn.fromRange(a);return}const l=E2(i,r);if(r.length>1)this._draggedRange=Rn.fromRange(l),this._blockMode=!0;else if(r.length==1){const c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=Rn.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){const s=this.editor.editing.view,o=s.document.selection.editableElement,r=s.domConverter.mapViewToDom(o),a=Ee.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=lt(globalThis.document,"div",{style:"position: fixed; left: -999999px;"}),Ee.document.body.appendChild(this._previewContainer));const l=new te(r);if(r.contains(t))return;const c=parseFloat(a.paddingLeft),u=lt(globalThis.document,"div");u.className="ck ck-content",u.style.width=a.width,u.style.paddingLeft=`${l.left-i+c}px`,ee.isiOS&&(u.style.backgroundColor="white"),u.innerHTML=e.getData("text/html"),e.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function F1(n){return ee.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function z1(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Ge);if(Ge(n))return n;const e=n.findAncestor(t=>Ge(t)||t.is("editableElement"));return Ge(e)?e:null}function E2(n,e){const t=e[0],i=e[e.length-1],s=t.getCommonAncestor(i),o=n.createPositionBefore(t),r=n.createPositionAfter(i);if(s&&s.is("element")&&!n.schema.isLimit(s)){const a=n.createRangeOn(s),l=o.isTouching(a.start),c=r.isTouching(a.end);if(l&&c)return E2(n,[s])}return n.createRange(o,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tZ extends I{static get pluginName(){return"PastePlainText"}static get requires(){return[Yn]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=t.document.selection;let r=!1;i.addObserver(_a),this.listenTo(s,"keydown",(a,l)=>{r=l.shiftKey}),e.plugins.get(Yn).on("contentInsertion",(a,l)=>{!r&&!nZ(l.content,t.schema)||t.change(c=>{const u=Array.from(o.getAttributes()).filter(([h])=>t.schema.getAttributeProperties(h).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),u.push(...o.getAttributes());const d=c.createRangeIn(l.content);for(const h of d.getItems())h.is("$textProxy")&&c.setAttributes(u,h)})})}}function nZ(n,e){if(n.childCount>1)return!1;const t=n.getChild(0);return e.isObject(t)?!1:Array.from(t.getAttributeKeys()).length==0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T2 extends I{static get pluginName(){return"Clipboard"}static get requires(){return[jr,Yn,eZ,tZ]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iZ extends Q{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!H1(e.schema,i))do if(i=i.parent,!i)return;while(!H1(e.schema,i));e.change(s=>{s.setSelection(i,"in")})}}function H1(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sZ=Fa("Ctrl+A");class oZ extends I{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,t=e.t,s=e.editing.view.document;e.commands.add("selectAll",new iZ(e)),this.listenTo(s,"keydown",(o,r)=>{Vo(r)===sZ&&(e.execute("selectAll"),r.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}const rZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aZ extends I{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(X);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(et))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("selectAll"),o=new e(t.locale),r=i.t;return o.set({label:r("Select all"),icon:rZ,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S2 extends I{static get requires(){return[oZ,aZ]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A2 extends Q{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]={...i[1]};const s=i[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const s=this.editor.model,o=s.document,r=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(const c of a){const u=c.filter(d=>d.root!=o.graveyard).filter(d=>!cZ(d,l));u.length&&(lZ(u),r.push(u[0]))}r.length&&s.change(c=>{c.setSelection(r,{backward:t})})}_undo(e,t){const i=this.editor.model,s=i.document;this._createdBatches.add(t);const o=e.operations.slice().filter(r=>r.isDocumentOperation);o.reverse();for(const r of o){const a=r.baseVersion+1,l=Array.from(s.history.getOperations(a)),u=FH([r.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let d of u){const h=d.affectedSelectable;h&&!i.canEditAt(h)&&(d=new ot(d.baseVersion)),t.addOperation(d),i.applyOperation(d),s.history.setOperationAsUndone(r,d)}}}}function lZ(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function cZ(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uZ extends A2{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const o=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,o)}),this.fire("revert",i.batch,s),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dZ extends A2{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hZ extends I{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,t=e.t;this._undoCommand=new uZ(e),this._redoCommand=new dZ(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,s)=>{const o=s[0];if(!o.isDocumentOperation)return;const r=o.batch,a=this._redoCommand.createdBatches.has(r),l=this._undoCommand.createdBatches.has(r);this._batchRegistry.has(r)||(this._batchRegistry.add(r),r.isUndoable&&(a?this._undoCommand.addBatch(r):l||(this._undoCommand.addBatch(r),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,s,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fZ extends I{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?j.undo:j.redo,o=t.uiLanguageDirection=="ltr"?j.redo:j.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,i,s){const o=this.editor;o.ui.componentFactory.add(e,()=>{const r=this._createButton(X,e,t,i,s);return r.set({tooltip:!0}),r}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(et,e,t,i,s))}_createButton(e,t,i,s,o){const r=this.editor,a=r.locale,l=r.commands.get(t),c=new e(a);return c.set({label:i,icon:o,keystroke:s}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{r.execute(t),r.editing.view.focus()}),c}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Km extends I{static get requires(){return[hZ,fZ]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mZ extends I{static get requires(){return[AW,T2,Ua,S2,p2,lG,Km]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zm extends Q{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.value,r=e.batch,a=l=>{if(s.isCollapsed)o?l.setSelectionAttribute(this.attributeKey,o):l.removeSelectionAttribute(this.attributeKey);else{const c=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const u of c)o?l.setAttribute(this.attributeKey,o,u):l.removeAttribute(this.attributeKey,u)}};r?t.enqueueChange(r,l=>{a(l)}):t.change(l=>{a(l)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xt="fontSize",oi="fontColor",ki="fontBackgroundColor";function gZ(n,e){const t={model:{key:n,values:[]},view:{},upcastAlso:{}};for(const i of e)t.model.values.push(i.model),t.view[i.model]=i.view,i.upcastAlso&&(t.upcastAlso[i.model]=i.upcastAlso);return t}function I2(n){return e=>bZ(e.getStyle(n))}function P2(n){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${n}:${e}`},{priority:7})}function pZ({dropdownView:n,colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a}){const l=n.locale,c=new $m(l,{colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a});return n.colorSelectorView=c,n.panelView.children.add(c),c}function bZ(n){return n.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wZ extends Zm{constructor(e){super(e,xt)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jm(n){return n.map(e=>_Z(e)).filter(e=>e!==void 0)}const $1={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function _Z(n){if(typeof n=="number"&&(n=String(n)),typeof n=="object"&&CZ(n))return sf(n);const e=yZ(n);if(e)return sf(e);if(n==="default")return{model:void 0,title:"Default"};if(!kZ(n))return vZ(n)}function vZ(n){return typeof n=="string"&&(n={title:n,model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},sf(n)}function sf(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}function yZ(n){return typeof n=="string"?$1[n]:$1[n.model]}function CZ(n){return n.title&&n.model&&n.view}function kZ(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new v("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const U1=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class EZ extends I{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(xt,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:xt}),e.model.schema.setAttributeProperties(xt,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),i=Jm(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=gZ(xt,i);t?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(s),e.commands.add(xt,new wZ(e))}_prepareAnyValueConverters(e){const t=this.editor,i=e.model.values.filter(s=>!wu(String(s))&&!Ck(String(s)));if(i.length)throw new v("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:xt,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:xt,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:xt,value:t=>{const i=t.getAttribute("size"),s=i[0]==="-"||i[0]==="+";let o=parseInt(i,10);s&&(o=3+o);const r=U1.length-1,a=Math.min(Math.max(o,0),r);return U1[a]}}})}}const W1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TZ extends I{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(xt),o=t("Font Size"),r=SZ(i,s);e.ui.componentFactory.add(xt,a=>{const l=wt(a);return Ds(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:W1,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${xt}`,a=>{const l=new vn(a);l.buttonView.set({label:o,icon:W1}),l.bind("isEnabled").to(s);const c=new zo(a);for(const u of r){const d=new or(a,l),h=new et(a);h.bind(...Object.keys(u.model)).to(u.model),h.bind("ariaChecked").to(h,"isOn"),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Jm(e.config.get(xt).options).map(o=>{const r=i[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function SZ(n,e){const t=new Et;for(const i of n){const s={type:"button",model:new sr({commandName:xt,commandParam:i.model,label:i.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};i.view&&typeof i.view!="string"&&(i.view.styles&&s.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view.classes&&s.model.set("class",`${s.model.class} ${i.view.classes}`)),s.model.bind("isOn").to(e,"value",o=>o===i.model),t.add(s)}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AZ extends I{static get requires(){return[EZ,TZ]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return Jm(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IZ extends Zm{constructor(e){super(e,oi)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PZ extends I{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(oi,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:oi,value:I2("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:oi,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:oi,view:P2("color")}),e.commands.add(oi,new IZ(e)),e.model.schema.extend("$text",{allowAttributes:oi}),e.model.schema.setAttributeProperties(oi,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x2 extends I{constructor(e,{commandName:t,componentName:i,icon:s,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=i,this.icon=s,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,i=t.t,s=e.commands.get(this.commandName),o=e.config.get(this.componentName),r=ga(o.colors),a=ma(t,r),l=o.documentColors,c=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,u=>{const d=wt(u);let h=!1;const f=pZ({dropdownView:d,colors:a.map(m=>({label:m.label,color:m.model,options:{hasBorder:m.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:c?o.colorPicker||{}:!1});return f.bind("selectedColor").to(s,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(s),f.on("execute",(m,g)=>{d.isOpen&&e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),g.source!=="colorPicker"&&e.editing.view.focus(),g.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),f.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),f.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(m,g,b)=>{h||(h=!0,d.colorSelectorView.appendUI()),b&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),yu(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(m=>m.isOn)),d}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,u=>{const d=new vn(u);d.buttonView.set({label:this.dropdownLabel,icon:this.icon}),d.bind("isEnabled").to(s);let h=!1;const f=new $m(u,{colors:a.map(m=>({label:m.label,color:m.model,options:{hasBorder:m.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:!1});return f.bind("selectedColor").to(s,"value"),f.delegate("execute").to(d),f.on("execute",(m,g)=>{e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),e.editing.view.focus()}),d.on("change:isOpen",(m,g,b)=>{h||(h=!0,f.appendUI()),b&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),d.panelView.children.add(f),d})}}const xZ='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RZ extends x2{constructor(e){const t=e.locale.t;super(e,{commandName:oi,componentName:oi,icon:xZ,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LZ extends I{static get requires(){return[PZ,RZ]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VZ extends Zm{constructor(e){super(e,ki)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OZ extends I{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(ki,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Om),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:ki,value:I2("background-color")}}),e.conversion.for("downcast").attributeToElement({model:ki,view:P2("background-color")}),e.commands.add(ki,new VZ(e)),e.model.schema.extend("$text",{allowAttributes:ki}),e.model.schema.setAttributeProperties(ki,{isFormatting:!0,copyOnEnter:!0})}}const MZ='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BZ extends x2{constructor(e){const t=e.locale.t;super(e,{commandName:ki,componentName:ki,icon:MZ,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NZ extends I{static get requires(){return[OZ,BZ]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DZ extends Q{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,i=$e(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&j1(i,e.schema)}execute(e={}){const t=this.editor.model,i=t.document,s=e.selection||i.selection;t.canEditAt(s)&&t.change(o=>{const r=s.getSelectedBlocks();for(const a of r)!a.is("element","paragraph")&&j1(a,t.schema)&&o.rename(a,"paragraph")})}}function j1(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FZ extends Q{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,i=e.attributes;let s=e.position;t.canEditAt(s)&&t.change(o=>{if(s=this._findPositionToInsertParagraph(s,o),!s)return;const r=o.createElement("paragraph");i&&t.schema.setAllowedAttributes(r,i,o),t.insertContent(r,s),o.setSelection(r,"in")})}_findPositionToInsertParagraph(e,t){const i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;const s=i.schema.findAllowedParent(e,"paragraph");if(!s)return null;const o=e.parent,r=i.schema.checkChild(o,"$text");return o.isEmpty||r&&e.isAtEnd?i.createPositionAfter(o):!o.isEmpty&&r&&e.isAtStart?i.createPositionBefore(o):t.split(e,s).position}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wa extends I{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new DZ(e)),e.commands.add("insertParagraph",new FZ(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!Wa.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}Wa.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zZ extends Q{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=$e(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>q1(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,i=t.document,s=e.value;t.change(o=>{const r=Array.from(i.selection.getSelectedBlocks()).filter(a=>q1(a,s,t.schema));for(const a of r)a.is("element",s)||o.rename(a,s)})}}function q1(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const G1="paragraph";class HZ extends I{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Wa]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const s of t)s.model!=="paragraph"&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new zZ(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(s,o)=>{const r=e.model.document.selection.getFirstPosition().parent;i.some(l=>r.is("element",l.model))&&!r.is("element",G1)&&r.childCount===0&&o.writer.rename(r,G1)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:bn.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $Z(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{const s=t[i.title];return s&&s!=i.title&&(i.title=s),i})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UZ extends I{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,i=$Z(e),s=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",r=>{const a={},l=new Et,c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c];for(const f of i){const m={type:"button",model:new sr({label:f.title,class:f.class,role:"menuitemradio",withText:!0})};f.model==="paragraph"?(m.model.bind("isOn").to(u,"value"),m.model.set("commandName","paragraph"),d.push(u)):(m.model.bind("isOn").to(c,"value",g=>g===f.model),m.model.set({commandName:"heading",commandValue:f.model})),l.add(m),a[f.model]=f.title}const h=wt(r);return Ds(h,l,{ariaLabel:o,role:"menu"}),h.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(d,"isEnabled",(...f)=>f.some(m=>m)),h.buttonView.bind("label").to(c,"value",u,"value",(f,m)=>{const g=m?"paragraph":f;return typeof g=="boolean"||!a[g]?s:a[g]}),h.buttonView.bind("ariaLabel").to(c,"value",u,"value",(f,m)=>{const g=m?"paragraph":f;return typeof g=="boolean"||!a[g]?o:`${a[g]}, ${o}`}),this.listenTo(h,"execute",f=>{const{commandName:m,commandValue:g}=f.source;e.execute(m,g?{value:g}:void 0),e.editing.view.focus()}),h}),e.ui.componentFactory.add("menuBar:heading",r=>{const a=new vn(r),l=e.commands.get("heading"),c=e.commands.get("paragraph"),u=[l],d=new zo(r);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(d);for(const h of i){const f=new or(r,a),m=new et(r);f.children.add(m),d.items.add(f),m.set({label:h.title,role:"menuitemradio",class:h.class}),m.bind("ariaChecked").to(m,"isOn"),m.delegate("execute").to(a),m.on("execute",()=>{const g=h.model==="paragraph"?"paragraph":"heading";e.execute(g,{value:h.model}),e.editing.view.focus()}),h.model==="paragraph"?(m.bind("isOn").to(c,"value"),u.push(c)):m.bind("isOn").to(l,"value",g=>g===h.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),a})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WZ extends I{static get requires(){return[HZ,UZ]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jZ extends Q{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=qZ(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("horizontalLine");e.insertObject(i,null,null,{setSelection:"after"})})}}function qZ(n,e,t){const i=GZ(n,t);return e.checkChild(i,"horizontalLine")}function GZ(n,e){const i=Eu(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KZ extends I{static get pluginName(){return"HorizontalLineEditing"}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:r})=>r.createEmptyElement("hr")}),s.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:r})=>{const a=i("Horizontal line"),l=r.createContainerElement("div",null,r.createEmptyElement("hr"));return r.addClass("ck-horizontal-line",l),r.setCustomProperty("hr",!0,l),ZZ(l,r,a)}}),s.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new jZ(e))}}function ZZ(n,e,t){return e.setCustomProperty("horizontalLine",!0,n),Hs(n,e,{label:t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JZ extends I{static get pluginName(){return"HorizontalLineUI"}init(){const e=this.editor;e.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(X);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(et))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("horizontalLine"),o=new e(t.locale),r=i.t;return o.set({label:r("Horizontal line"),icon:j.horizontalLine}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),o}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XZ extends I{static get requires(){return[KZ,JZ,os]}static get pluginName(){return"HorizontalLine"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YZ extends Q{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=K1(i);this.isEnabled=QZ(i,t,e),this.value=s?s.getAttribute("value")||"":null}execute(e){const t=this.editor.model,i=t.document.selection;t.change(s=>{let o;this.value!==null?o=K1(i):(o=s.createElement("rawHtml"),t.insertObject(o,null,null,{setSelection:"on"})),s.setAttribute("value",e,o)})}}function QZ(n,e,t){const i=eJ(n,t);return e.checkChild(i,"rawHtml")}function eJ(n,e){const i=Eu(n,e).start.parent;return i.isEmpty&&!i.is("rootElement")?i.parent:i}function K1(n){const e=n.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tJ extends I{static get pluginName(){return"HtmlEmbedEditing"}constructor(e){super(e),this._widgetButtonViewReferences=new Set,e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(ae("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new YZ(e)),this._setupConversion()}_setupConversion(){const e=this.editor,t=e.t,i=e.editing.view,s=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const u of s){if(u.element&&u.element.isConnected)return;u.destroy(),s.delete(u)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(u,{writer:d})=>d.createElement("rawHtml",{value:u.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(u,{writer:d})=>d.createRawElement("div",{class:"raw-html-embed"},function(h){h.innerHTML=u.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(u,{writer:d})=>{let h,f,m;const g=d.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(w){h=w,r({editor:e,domElement:w,state:f,props:m}),h.addEventListener("mousedown",()=>{if(f.isEditable){const E=e.model;E.document.selection.getSelectedElement()!==u&&E.change(T=>T.setSelection(u,"on"))}},!0)}),b={makeEditable(){f=Object.assign({},f,{isEditable:!0}),r({domElement:h,editor:e,state:f,props:m}),i.change(w=>{w.setAttribute("data-cke-ignore-events","true",g)}),h.querySelector("textarea").focus()},save(w){w!==f.getRawHtmlValue()?(e.execute("htmlEmbed",w),e.editing.view.focus()):this.cancel()},cancel(){f=Object.assign({},f,{isEditable:!1}),r({domElement:h,editor:e,state:f,props:m}),e.editing.view.focus(),i.change(w=>{w.removeAttribute("data-cke-ignore-events",g)})}};f={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>u.getAttribute("value")||""},m={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){b.makeEditable()},onSaveClick(w){b.save(w)},onCancelClick(){b.cancel()}};const p=d.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},g);return d.setCustomProperty("rawHtmlApi",b,p),d.setCustomProperty("rawHtml",!0,p),Hs(p,d,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function r({editor:u,domElement:d,state:h,props:f}){d.textContent="";const m=d.ownerDocument;let g;if(h.isEditable){const p={isDisabled:!1,placeholder:f.textareaPlaceholder};g=l({domDocument:m,state:h,props:p}),d.append(g)}else if(h.showPreviews){const p={sanitizeHtml:f.sanitizeHtml};d.append(c({domDocument:m,state:h,props:p,editor:u}))}else{const p={isDisabled:!0,placeholder:f.textareaPlaceholder};d.append(l({domDocument:m,state:h,props:p}))}const b={onEditClick:f.onEditClick,onSaveClick:()=>{f.onSaveClick(g.value)},onCancelClick:f.onCancelClick};d.prepend(a({editor:u,domDocument:m,state:h,props:b}))}function a({editor:u,domDocument:d,state:h,props:f}){const m=lt(d,"div",{class:"raw-html-embed__buttons-wrapper"});if(h.isEditable){const g=xd(u,"save",f.onSaveClick),b=xd(u,"cancel",f.onCancelClick);m.append(g.element,b.element),s.add(g).add(b)}else{const g=xd(u,"edit",f.onEditClick);m.append(g.element),s.add(g)}return m}function l({domDocument:u,state:d,props:h}){const f=lt(u,"textarea",{placeholder:h.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return f.disabled=h.isDisabled,f.value=d.getRawHtmlValue(),f}function c({editor:u,domDocument:d,state:h,props:f}){const m=f.sanitizeHtml(h.getRawHtmlValue()),g=h.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),b=lt(d,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},g),p=lt(d,"div",{class:"raw-html-embed__preview-content",dir:u.locale.contentLanguageDirection}),E=d.createRange().createContextualFragment(m.html);return p.appendChild(E),lt(d,"div",{class:"raw-html-embed__preview"},[b,p])}}}function xd(n,e,t){const{t:i}=n.locale,s=new X(n.locale),o=n.commands.get("htmlEmbed");return s.set({class:`raw-html-embed__${e}-button`,icon:j.pencil,tooltip:!0,tooltipPosition:n.locale.uiLanguageDirection==="rtl"?"e":"w"}),s.render(),e==="edit"?(s.set({icon:j.pencil,label:i("Edit source")}),s.bind("isEnabled").to(o)):e==="save"?(s.set({icon:j.check,label:i("Save changes")}),s.bind("isEnabled").to(o)):s.set({icon:j.cancel,label:i("Cancel")}),s.on("execute",t),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nJ extends I{static get pluginName(){return"HtmlEmbedUI"}init(){const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("htmlEmbed",()=>{const s=this._createButton(X);return s.set({tooltip:!0,label:i("Insert HTML")}),s}),e.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const s=this._createButton(et);return s.set({label:i("HTML snippet")}),s})}_createButton(e){const t=this.editor,i=t.commands.get("htmlEmbed"),s=new e(t.locale);return s.set({icon:j.html}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>{t.execute("htmlEmbed"),t.editing.view.focus(),t.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iJ extends I{static get requires(){return[tJ,nJ,os]}static get pluginName(){return"HtmlEmbed"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Is(n,e,t,i){e&&sJ(n,e,i),t&&ai(n,t,i)}function ai(n,e,t){if(e.attributes)for(const[i,s]of Object.entries(e.attributes))n.setAttribute(i,s,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function sJ(n,e,t){if(e.attributes)for(const[i]of Object.entries(e.attributes))n.removeAttribute(i,t);if(e.styles)for(const i of Object.keys(e.styles))n.removeStyle(i,t);e.classes&&n.removeClass(e.classes,t)}function oJ(n,e){const t=Dn(n);let i="attributes";for(i in e)i=="classes"?t[i]=Array.from(new Set([...n[i]||[],...e[i]])):t[i]={...n[i],...e[i]};return t}function io(n,e,t,i,s){const o=e.getAttribute(t),r={};for(const a of["attributes","styles","classes"]){if(a!=i){o&&o[a]&&(r[a]=o[a]);continue}if(i=="classes"){const c=new Set(o&&o.classes||[]);s(c),c.size&&(r[a]=Array.from(c));continue}const l=new Map(Object.entries(o&&o[a]||{}));s(l),l.size&&(r[a]=Object.fromEntries(l))}Object.keys(r).length?e.is("documentSelection")?n.setSelectionAttribute(t,r):n.setAttribute(t,r,e):o&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function rJ(n){return i9(n).replace(/ /g,"")}function Ln(n){return`html${rJ(n)}Attributes`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xm({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function aJ(n,{view:e,isInline:t}){const i=n.t;return(s,{writer:o})=>{const r=i("HTML object"),a=Tu(e,s,o),l=s.getAttribute(Ln(e));o.addClass("html-object-embed__content",a),l&&ai(o,l,a);const c=o.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":r},a);return Hs(c,o,{label:r})}}function Tu(n,e,t){return t.createRawElement(n,null,(i,s)=>{s.setContentOf(i,e.getAttribute("htmlContent"))})}function lJ({view:n,model:e,allowEmpty:t},i){return o=>{o.on(`element:${n}`,(r,a,l)=>{let c=i.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(c).length){const u=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(u,a.modelCursor))return;const d=l.getSplitParts(u);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(d[d.length-1])),l.updateConversionResult(u,a),s(u,c,l);return}for(const u of a.modelRange.getItems())s(u,c,l)}},{priority:"low"})};function s(o,r,a){if(a.schema.checkAttribute(o,e)){const l=o.getAttribute(e),c=oJ(r,l||{});a.writer.setAttribute(e,c,o)}}}function Z1({model:n,view:e},t){return(i,{writer:s,consumable:o})=>{if(!i.hasAttribute(n))return null;const r=s.createContainerElement(e),a=i.getAttribute(n);return o.consume(i,`attribute:${n}`),ai(s,a,r),r.getFillerOffset=()=>null,t?Hs(r,s):r}}function cJ({priority:n,view:e}){return(t,i)=>{if(!t)return;const{writer:s}=i,o=s.createAttributeElement(e,null,{priority:n});return ai(s,t,o),o}}function va({view:n},e){return t=>{t.on(`element:${n}`,(i,s,o)=>{if(!s.modelRange||s.modelRange.isCollapsed)return;const r=e.processViewAttributes(s.viewItem,o);r&&o.writer.setAttribute(Ln(s.viewItem.name),r,s.modelRange)},{priority:"low"})}}function ya({view:n,model:e}){return t=>{t.on(`attribute:${Ln(n)}:${e}`,(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const{attributeOldValue:r,attributeNewValue:a}=s,l=o.writer,c=o.mapper.toViewElement(s.item);Is(l,r,a,c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const J1={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:"$text",allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $o extends I{constructor(){super(...arguments),this._definitions=[]}static get pluginName(){return"DataSchema"}init(){for(const e of J1.block)this.registerBlockElement(e);for(const e of J1.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){const i=new Set;for(const s of this._getMatchingViewDefinitions(e)){if(t)for(const o of this._getReferences(s.model))i.add(o);i.add(s)}return i}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&uJ(e,t.view))}*_getReferences(e){const t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],i=this._definitions.filter(s=>s.model==e);for(const{modelSchema:s}of i)if(s)for(const o of t)for(const r of we(s[o]||[])){const a=this._definitions.filter(l=>l.model==r);for(const l of a)r!==e&&(yield*this._getReferences(l.model),yield l)}}_extendDefinition(e){const t=Array.from(this._definitions.entries()).filter(([,i])=>i.model==e.model);if(t.length==0){this._definitions.push(e);return}for(const[i,s]of t)this._definitions[i]=qD({},s,e,(o,r)=>Array.isArray(o)?o.concat(r):void 0)}}function uJ(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qe extends I{constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Zi,this._disallowedAttributes=new Zi,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[$o,os]}loadAllowedConfig(e){for(const t of e){const i=t.name||/[\s\S]+/,s=Y1(t);this.allowElement(i),s.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const t of e){const i=t.name||/[\s\S]+/,s=Y1(t);s.length==0?this.disallowElement(i):s.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const t of e)this.allowEmptyElement(t)}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement({...t,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){const{consumable:i}=t;return X1(e,this._disallowedAttributes,i),dJ(e,X1(e,this._allowedAttributes,i))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:bn.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:bn.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{const i=this.editor.model.schema;if(t.isObject&&!i.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new v("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(i=>{const s=e.document.differ.getChanges();let o=!1;const r=this._getCoupledAttributesMap();for(const a of s){if(a.type!="attribute"||a.attributeNewValue!==null)continue;const l=r.get(a.attributeKey);if(l)for(const{item:c}of a.range.getWalker())for(const u of l)c.hasAttribute(u)&&(i.removeAttribute(u,c),o=!0)}return o}),this.listenTo(t,"change:attribute",(i,{attributeKeys:s})=>{const o=new Set,r=this._getCoupledAttributesMap();for(const a of s){if(t.hasAttribute(a))continue;const l=r.get(a);if(l)for(const c of l)t.hasAttribute(c)&&o.add(c)}o.size!=0&&e.change(a=>{for(const l of o)a.removeSelectionAttribute(l)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const i=e.document.differ.getChanges();let s=!1;for(const o of i)if(!(o.type!=="insert"||o.name==="$text"))for(const r of o.attributes.keys())!r.startsWith("html")||!r.endsWith("Attributes")||e.schema.checkAttribute(o.name,r)||(t.removeAttribute(r,o.position.nodeAfter),s=!0);return s})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,{view:o,model:r}=e;i.register(r,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(i.extend(e.model,{allowAttributes:[Ln(o),"htmlContent"]}),t.data.registerRawContentMatcher({name:o}),s.for("upcast").elementToElement({view:o,model:Xm(e),converterPriority:bn.low+2}),s.for("upcast").add(va(e,this)),s.for("editingDowncast").elementToStructure({model:{name:r,attributes:[Ln(o)]},view:aJ(t,e)}),s.for("dataDowncast").elementToElement({model:r,view:(a,{writer:l})=>Tu(o,a,l)}),s.for("dataDowncast").add(ya(e)))}_registerBlockElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,{view:o,model:r}=e;if(!i.isRegistered(e.model)){if(i.register(e.model,e.modelSchema),!o)return;s.for("upcast").elementToElement({model:r,view:o,converterPriority:bn.low+2}),s.for("downcast").elementToElement({model:r,view:o})}o&&(i.extend(e.model,{allowAttributes:Ln(o)}),s.for("upcast").add(va(e,this)),s.for("downcast").add(ya(e)))}_registerInlineElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,o=e.model;e.appliesToBlock||(i.extend("$text",{allowAttributes:o}),e.attributeProperties&&i.setAttributeProperties(o,e.attributeProperties),s.for("upcast").add(lJ(e,this)),s.for("downcast").attributeToElement({model:o,view:cJ(e)}),e.allowEmpty&&(i.setAttributeProperties(o,{copyFromObject:!1}),i.isRegistered("htmlEmptyElement")||i.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(r=>r.name==e.view&&r.isEmpty&&Array.from(r.getAttributeKeys()).length?{name:!0}:null),s.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:Z1(e,!0)}),s.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:Z1(e)})))}}function X1(n,e,t){const i=e.matchAll(n)||[],s=n.document.stylesProcessor;return i.reduce((o,{match:r})=>{for(const a of r.styles||[]){const l=s.getRelatedStyles(a).filter(c=>c.split("-").length>a.split("-").length).sort((c,u)=>u.split("-").length-c.split("-").length);for(const c of l)t.consume(n,{styles:[c]})&&o.styles.push(c);t.consume(n,{styles:[a]})&&o.styles.push(a)}for(const a of r.classes||[])t.consume(n,{classes:[a]})&&o.classes.push(a);for(const a of r.attributes||[])t.consume(n,{attributes:[a]})&&o.attributes.push(a);return o},{attributes:[],classes:[],styles:[]})}function dJ(n,{attributes:e,classes:t,styles:i}){return!e.length&&!t.length&&!i.length?null:{...e.length&&{attributes:hJ(n,e)},...i.length&&{styles:fJ(n,i)},...t.length&&{classes:t}}}function hJ(n,e){const t={};for(const i of e){const s=n.getAttribute(i);s!==void 0&&yC(i)&&(t[i]=s)}return t}function fJ(n,e){const t=new vc(n.document.stylesProcessor);for(const i of e){const s=n.getStyle(i);s!==void 0&&t.set(i,s)}return Object.fromEntries(t.getStylesEntries())}function Rd(n,e){const{name:t}=n,i=n[e];return Lt(i)?Object.entries(i).map(([s,o])=>({name:t,[e]:{[s]:o}})):Array.isArray(i)?i.map(s=>({name:t,[e]:[s]})):[n]}function Y1(n){const{name:e,attributes:t,classes:i,styles:s}=n,o=[];return t&&o.push(...Rd({name:e,attributes:t},"attributes")),i&&o.push(...Rd({name:e,classes:i},"classes")),s&&o.push(...Rd({name:e,styles:s},"styles")),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mJ extends I{static get requires(){return[Qe]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(Qe);e.on("register:pre",(t,i)=>{if(i.model!=="codeBlock")return;const s=this.editor,o=s.model.schema,r=s.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),r.for("upcast").add(gJ(e)),r.for("downcast").add(pJ()),t.stop()})}}function gJ(n){return e=>{e.on("element:code",(t,i,s)=>{const o=i.viewItem,r=o.parent;if(!r||!r.is("element","pre"))return;a(r,"htmlPreAttributes"),a(o,"htmlContentAttributes");function a(l,c){const u=n.processViewAttributes(l,s);u&&s.writer.setAttribute(c,u,i.modelRange)}},{priority:"low"})}}function pJ(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:o}=t,a=i.mapper.toViewElement(t.item).parent;Is(i.writer,s,o,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:o}=t,r=i.mapper.toViewElement(t.item);Is(i.writer,s,o,r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bJ extends I{static get requires(){return[Qe]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(Qe).on("register",(t,i)=>{const s=i,o=this.editor,r=o.model.schema,a=o.conversion;if(!s.paragraphLikeModel||r.isRegistered(s.model)||r.isRegistered(s.paragraphLikeModel))return;const l={model:s.paragraphLikeModel,view:s.view};r.register(s.model,s.modelSchema),r.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:s.view,model:(c,{writer:u})=>this._hasBlockContent(c)?u.createElement(s.model):u.createElement(l.model),converterPriority:bn.low+.5}),a.for("downcast").elementToElement({view:s.view,model:s.model}),this._addAttributeConversion(s),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,i=t.domConverter.blockElements;for(const s of t.createRangeIn(e).getItems())if(s.is("element")&&i.includes(s.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,i=t.conversion,s=t.plugins.get(Qe);t.model.schema.extend(e.model,{allowAttributes:Ln(e.view)}),i.for("upcast").add(va(e,s)),i.for("downcast").add(ya(e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wJ extends I{static get requires(){return[$o,Ua]}static get pluginName(){return"HeadingElementSupport"}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const i=e.plugins.get($o),s=[];for(const o of t)"model"in o&&"view"in o&&(i.registerBlockElement({view:o.view,model:o.model}),s.push(o.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:s}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ic(n,e,t){const i=n.createRangeOn(e);for(const{item:s}of i.getWalker())if(s.is("element",t))return s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _J extends I{static get requires(){return[Qe]}static get pluginName(){return"ImageElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Qe);s.on("register:figure",()=>{i.for("upcast").add(CJ(s))}),s.on("register:img",(o,r)=>{r.model!=="imageBlock"&&r.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(vJ(s)),i.for("downcast").add(kJ()),e.plugins.has("LinkImage")&&i.for("upcast").add(yJ(s,e)),o.stop())})}}function vJ(n){return e=>{e.on("element:img",(t,i,s)=>{if(!i.modelRange)return;const o=i.viewItem,r=n.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlImgAttributes",r,i.modelRange)},{priority:"low"})}}function yJ(n,e){const t=e.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,o,r)=>{const a=o.viewItem;if(!t.findViewImgElement(a))return;const c=o.modelCursor.parent;if(!c.is("element","imageBlock"))return;const u=n.processViewAttributes(a,r);u&&r.writer.setAttribute("htmlLinkAttributes",u,c)},{priority:"low"})}}function CJ(n){return e=>{e.on("element:figure",(t,i,s)=>{const o=i.viewItem;if(!i.modelRange||!o.hasClass("image"))return;const r=n.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,i.modelRange)},{priority:"low"})}}function kJ(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(i){n.on(`attribute:${i}:imageInline`,(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const{attributeOldValue:a,attributeNewValue:l}=o,c=r.mapper.toViewElement(o.item);Is(r.writer,a,l,c)},{priority:"low"})}function t(i,s){n.on(`attribute:${s}:imageBlock`,(o,r,a)=>{if(!a.consumable.test(r.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=r,u=a.mapper.toViewElement(r.item),d=Ic(a.writer,u,i);d&&(Is(a.writer,l,c,d),a.consumable.consume(r.item,o.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(o,r,a)=>{if(!a.consumable.consume(r.item,"attribute:htmlLinkAttributes:imageBlock"))return;const l=a.mapper.toViewElement(r.item),c=Ic(a.writer,l,"a");ai(a.writer,r.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EJ extends I{static get requires(){return[Qe]}static get pluginName(){return"MediaEmbedElementSupport"}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,i=e.conversion,s=this.editor.plugins.get(Qe),o=this.editor.plugins.get($o),r=e.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:r}),s.on("register:figure",()=>{i.for("upcast").add(SJ(s))}),s.on(`register:${r}`,(a,l)=>{l.model==="media"&&(t.extend("media",{allowAttributes:[Ln(r),"htmlFigureAttributes"]}),i.for("upcast").add(TJ(s,r)),i.for("dataDowncast").add(AJ(r)),a.stop())})}}function TJ(n,e){const t=(i,s,o)=>{const r=s.viewItem;a(r,Ln(e));function a(l,c){const u=n.processViewAttributes(l,o);u&&o.writer.setAttribute(c,u,s.modelRange)}};return i=>{i.on(`element:${e}`,t,{priority:"low"})}}function SJ(n){return e=>{e.on("element:figure",(t,i,s)=>{const o=i.viewItem;if(!i.modelRange||!o.hasClass("media"))return;const r=n.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,i.modelRange)},{priority:"low"})}}function AJ(n){return e=>{t(n,Ln(n)),t("figure","htmlFigureAttributes");function t(i,s){e.on(`attribute:${s}:media`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=r,u=a.mapper.toViewElement(r.item),d=Ic(a.writer,u,i);Is(a.writer,l,c,d)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IJ extends I{static get requires(){return[Qe]}static get pluginName(){return"ScriptElementSupport"}init(){const e=this.editor.plugins.get(Qe);e.on("register:script",(t,i)=>{const s=this.editor,o=s.model.schema,r=s.conversion;o.register("htmlScript",i.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"script"}),r.for("upcast").elementToElement({view:"script",model:Xm(i)}),r.for("upcast").add(va(i,e)),r.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>Tu("script",a,l)}),r.for("downcast").add(ya(i)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PJ extends I{static get requires(){return[Qe]}static get pluginName(){return"TableElementSupport"}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Qe),o=e.plugins.get("TableUtils");s.on("register:figure",()=>{i.for("upcast").add(LJ(s))}),s.on("register:table",(r,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(RJ(s)),i.for("downcast").add(VJ()),e.model.document.registerPostFixer(xJ(e.model,o)),r.stop())})}}function xJ(n,e){return t=>{const i=n.document.differ.getChanges();let s=!1;for(const o of i){if(o.type!="attribute"||o.attributeKey!="headingRows")continue;const r=o.range.start.nodeAfter,a=r.getAttribute("htmlTheadAttributes"),l=r.getAttribute("htmlTbodyAttributes");a&&!o.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",r),s=!0):l&&o.attributeNewValue==e.getRows(r)&&(t.removeAttribute("htmlTbodyAttributes",r),s=!0)}return s}}function RJ(n){return e=>{e.on("element:table",(t,i,s)=>{if(!i.modelRange)return;const o=i.viewItem;r(o,"htmlTableAttributes");for(const a of o.getChildren())a.is("element","thead")&&r(a,"htmlTheadAttributes"),a.is("element","tbody")&&r(a,"htmlTbodyAttributes");function r(a,l){const c=n.processViewAttributes(a,s);c&&s.writer.setAttribute(l,c,i.modelRange)}},{priority:"low"})}}function LJ(n){return e=>{e.on("element:figure",(t,i,s)=>{const o=i.viewItem;if(!i.modelRange||!o.hasClass("table"))return;const r=n.processViewAttributes(o,s);r&&s.writer.setAttribute("htmlFigureAttributes",r,i.modelRange)},{priority:"low"})}}function VJ(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,i){n.on(`attribute:${i}:table`,(s,o,r)=>{if(!r.consumable.test(o.item,s.name))return;const a=r.mapper.toViewElement(o.item),l=Ic(r.writer,a,t);l&&(r.consumable.consume(o.item,s.name),Is(r.writer,o.attributeOldValue,o.attributeNewValue,l))})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OJ extends I{static get requires(){return[Qe]}static get pluginName(){return"StyleElementSupport"}init(){const e=this.editor.plugins.get(Qe);e.on("register:style",(t,i)=>{const s=this.editor,o=s.model.schema,r=s.conversion;o.register("htmlStyle",i.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"style"}),r.for("upcast").elementToElement({view:"style",model:Xm(i)}),r.for("upcast").add(va(i,e)),r.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>Tu("style",a,l)}),r.for("downcast").add(ya(i)),t.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MJ extends I{static get requires(){return[Qe]}static get pluginName(){return"ListElementSupport"}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Qe),o=e.plugins.get("ListEditing"),r=e.plugins.get("ListUtils"),a=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:ai}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:ai}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:ai}),s.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const u=a.map(d=>Ln(d));t.extend("$listItem",{allowAttributes:u}),i.for("upcast").add(d=>{d.on("element:ul",Ld("htmlUlAttributes",s),{priority:"low"}),d.on("element:ol",Ld("htmlOlAttributes",s),{priority:"low"}),d.on("element:li",Ld("htmlLiAttributes",s),{priority:"low"})})}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d,previousNodeInList:h}of c)if(h){if(h.getAttribute("listType")==d.getAttribute("listType")){const f=Q1(h.getAttribute("listType")),m=h.getAttribute(f);!Ro(d.getAttribute(f),m)&&u.model.schema.checkAttribute(d,f)&&(u.setAttribute(f,m,d),l.return=!0)}if(h.getAttribute("listItemId")==d.getAttribute("listItemId")){const f=h.getAttribute("htmlLiAttributes");!Ro(d.getAttribute("htmlLiAttributes"),f)&&u.model.schema.checkAttribute(d,"htmlLiAttributes")&&(u.setAttribute("htmlLiAttributes",f,d),l.return=!0)}}}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d}of c){const h=d.getAttribute("listType");!r.isNumberedListType(h)&&d.getAttribute("htmlOlAttributes")&&(u.removeAttribute("htmlOlAttributes",d),l.return=!0),r.isNumberedListType(h)&&d.getAttribute("htmlUlAttributes")&&(u.removeAttribute("htmlUlAttributes",d),l.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(i,s)=>{e.model.change(o=>{for(const r of s){const a=Q1(r.getAttribute("listType"));e.model.schema.checkAttribute(r,a)&&o.setAttribute(a,{},r)}})})}}function Ld(n,e){return(t,i,s)=>{const o=i.viewItem;i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor));const r=e.processViewAttributes(o,s);for(const a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute(n)||s.writer.model.schema.checkAttribute(a,n)&&s.writer.setAttribute(n,r||{},a))}}function Q1(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BJ extends I{static get requires(){return[Qe,$o]}static get pluginName(){return"CustomElementSupport"}init(){const e=this.editor.plugins.get(Qe),t=this.editor.plugins.get($o);e.on("register:$customElement",(i,s)=>{i.stop();const o=this.editor,r=o.model.schema,a=o.conversion,l=o.editing.view.domConverter.unsafeElements,c=o.data.htmlProcessor.domConverter.preElements;r.register(s.model,s.modelSchema),r.extend(s.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),o.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(u,d)=>{if(u.name=="$comment"||!NJ(u.name)||t.getDefinitionsForView(u.name).size)return null;l.includes(u.name)||l.push(u.name),c.includes(u.name)||c.push(u.name);const h=d.writer.createElement(s.model,{htmlElementName:u.name}),f=e.processViewAttributes(u,d);f&&d.writer.setAttribute("htmlCustomElementAttributes",f,h);let m;if(u.is("element","template")&&u.getCustomProperty("$rawContent"))m=u.getCustomProperty("$rawContent");else{const b=new nr(u.document).createDocumentFragment(u),p=o.data.htmlProcessor.domConverter.viewToDom(b),w=p.firstChild;for(;w.firstChild;)p.appendChild(w.firstChild);w.remove(),m=o.data.htmlProcessor.htmlWriter.getHtml(p)}d.writer.setAttribute("htmlContent",m,h);for(const{item:g}of o.editing.view.createRangeIn(u))d.consumable.consume(g,{name:!0});return h},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const h=u.getAttribute("htmlElementName"),f=d.createRawElement(h);return u.hasAttribute("htmlCustomElementAttributes")&&ai(d,u.getAttribute("htmlCustomElementAttributes"),f),f}}),a.for("dataDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const h=u.getAttribute("htmlElementName"),f=u.getAttribute("htmlContent"),m=d.createRawElement(h,null,(g,b)=>{b.setContentOf(g,f)});return u.hasAttribute("htmlCustomElementAttributes")&&ai(d,u.getAttribute("htmlCustomElementAttributes"),m),m}})})}}function NJ(n){try{document.createElement(n)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DJ extends I{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[Qe,mJ,bJ,wJ,_J,EJ,IJ,PJ,OJ,MJ,BJ]}init(){const e=this.editor,t=e.plugins.get(Qe);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),s=i.find(o=>o.isInline&&!i[0].isObject);return s?s.model:Ln(e)}addModelHtmlClass(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"classes",l=>{for(const c of we(t))l.add(c)})})}removeModelHtmlClass(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"classes",l=>{for(const c of we(t))l.delete(c)})})}setModelHtmlAttributes(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"attributes",l=>{for(const[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlAttributes(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"attributes",l=>{for(const c of we(t))l.delete(c)})})}setModelHtmlStyles(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"styles",l=>{for(const[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlStyles(e,t,i){const s=this.editor.model,o=this.getGhsAttributeNameForElement(e);s.change(r=>{for(const a of so(s,i,o))io(r,a,o,"styles",l=>{for(const c of we(t))l.delete(c)})})}}function*so(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const i of FJ(n,e,t))yield*i.getItems({shallow:!0})}function FJ(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zJ extends I{static get pluginName(){return"HtmlComment"}init(){const e=this.editor,t=new Map;e.data.processor.skipComments=!1,e.model.schema.addAttributeCheck((i,s)=>{if(i.endsWith("$root")&&s.startsWith("$comment"))return!0}),e.conversion.for("upcast").elementToMarker({view:"$comment",model:i=>{const o=`$comment:${Nt()}`,r=i.getCustomProperty("$rawContent");return t.set(o,r),o}}),e.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(i,{writer:s})=>{let o;for(const c of this.editor.model.document.getRootNames())if(o=this.editor.model.document.getRoot(c),o.hasAttribute(i.markerName))break;const r=i.markerName,a=o.getAttribute(r),l=s.createUIElement("$comment");return s.setCustomProperty("$rawContent",a,l),l}}),e.model.document.registerPostFixer(i=>{let s=!1;const o=e.model.document.differ.getChangedMarkers().filter(r=>r.name.startsWith("$comment:"));for(const r of o){const{oldRange:a,newRange:l}=r.data;if(!(a&&l&&a.root==l.root)){if(a){const c=a.root;c.hasAttribute(r.name)&&(i.removeAttribute(r.name,c),s=!0)}if(l){const c=l.root;c.rootName=="$graveyard"?(i.removeMarker(r.name),s=!0):c.hasAttribute(r.name)||(i.setAttribute(r.name,t.get(r.name)||"",c),s=!0)}}}return s}),e.data.on("set",()=>{for(const i of e.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(i.name)},{priority:"high"}),e.model.on("deleteContent",(i,[s])=>{for(const o of s.getRanges()){const r=e.model.schema.getLimitElement(o),a=e.model.createPositionAt(r,0),l=e.model.createPositionAt(r,"end");let c;a.isTouching(o.start)&&l.isTouching(o.end)?c=this.getHtmlCommentsInRange(e.model.createRange(a,l)):c=this.getHtmlCommentsInRange(o,{skipBoundaries:!0});for(const u of c)this.removeHtmlComment(u)}},{priority:"high"})}createHtmlComment(e,t){const i=Nt(),o=this.editor.model,r=o.document.getRoot(e.root.rootName),a=`$comment:${i}`;return o.change(l=>{const c=l.createRange(e);return l.addMarker(a,{usingOperation:!0,affectsData:!0,range:c}),l.setAttribute(a,t,r),a})}removeHtmlComment(e){const t=this.editor,i=t.model.markers.get(e);return i?(t.model.change(s=>{s.removeMarker(i)}),!0):!1}getHtmlCommentData(e){const i=this.editor.model.markers.get(e);if(!i)return null;let s="";for(const o of this.editor.model.document.getRoots())if(o.hasAttribute(e)){s=o.getAttribute(e);break}return{content:s,position:i.getStart()}}getHtmlCommentsInRange(e,{skipBoundaries:t=!1}={}){const i=!t;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(o=>s(o,e)).map(o=>o.name);function s(o,r){const a=o.getRange().start;return(a.isAfter(r.start)||i&&a.isEqual(r.start))&&(a.isBefore(r.end)||i&&a.isEqual(r.end))}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function HJ(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function ew(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function R2(n,e){const t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?i&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function Ym(n,e){const t=$e(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function Pc(n){return n&&n.endsWith("px")?parseInt(n):null}function xc(n){const e=Pc(n.getStyle("width")),t=Pc(n.getStyle("height"));return!!(e&&t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $J=/^(image|image-inline)$/;class Sn extends I{constructor(){super(...arguments),this._domEmitter=new(Dt())}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null,s={}){const o=this.editor,r=o.model,a=r.document.selection,l=L2(o,t||a,i);e={...Object.fromEntries(a.getAttributes()),...e};for(const c in e)r.schema.checkAttribute(l,c)||delete e[c];return r.change(c=>{const{setImageSizes:u=!0}=s,d=c.createElement(l,e);return r.insertObject(d,t,null,{setSelection:"on",findOptimalPosition:!t&&l!="imageInline"?"auto":void 0}),d.parent?(u&&this.setImageNaturalSizeAttributes(d),d):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(i=>{const s=new globalThis.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(i.batch,o=>{o.setAttribute("width",s.naturalWidth,e),o.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:$J})}isImageAllowed(){const t=this.editor.model.document.selection;return UJ(this.editor,t)&&WJ(t)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),Hs(e,t,{label:()=>{const r=this.findViewImgElement(e).getAttribute("alt");return r?`${r} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Ge(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function UJ(n,e){if(L2(n,e,null)=="imageBlock"){const i=jJ(e,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function WJ(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function jJ(n,e){const i=Eu(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function L2(n,e,t){const i=n.model.schema,s=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":e.is("selection")?Ym(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qJ extends Q{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=t.model,o=i.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GJ extends I{static get requires(){return[Sn]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new qJ(this.editor))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KJ extends U{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Oe,this.keystrokes=new Ue,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),j.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),j.cancel,"ck-button-cancel","cancel"),this._focusables=new ht,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Jo({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,s){const o=new X(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createLabeledInputView(){const e=this.locale.t,t=new nt(this.locale,_n);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ZJ(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const i=V2(n);e.updatePosition(i)}}function V2(n){const e=n.editing.view,t=_t.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JJ extends I{static get requires(){return[Ji]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{const s=e.commands.get("imageTextAlternative"),o=new X(i);return o.set({label:t("Change image text alternative"),icon:j.textAlternative,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>!!r),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(nm(KJ))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,r)=>{this._hideForm(!0),r()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(i.selection)?this._isVisible&&ZJ(e):this._hideForm(!0)}),Zo({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:V2(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O2 extends I{static get requires(){return[GJ,JJ]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function XJ(n){const e=(t,i,s)=>{if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const o=n.findViewImgElement(i.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,i.modelCursor),a=$e(r.modelRange.getItems());if(!a){s.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i)};return t=>{t.on("element:figure",e)}}function M2(n,e){const t=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),l=n.findViewImgElement(a);s.attributeNewValue===null?(r.removeAttribute("srcset",l),r.removeAttribute("sizes",l)):s.attributeNewValue&&(r.setAttribute("srcset",s.attributeNewValue,l),r.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${e}`,t)}}function Rc(n,e,t){const i=(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)};return s=>{s.on(`attribute:${t}:${e}`,i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qm extends di{observe(e){this.listenTo(e,"load",(t,i)=>{const s=i.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YJ extends Q{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&ae("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&ae("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=we(e.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);s.insertImage({...r,...o},c)}else s.insertImage({...r,...o})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QJ extends Q{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",e.source,t),this.cleanupImage(s,t),i.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B2 extends I{static get requires(){return[Sn]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(Qm),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new YJ(e),s=new QJ(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",s),e.commands.add("imageInsert",i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N2 extends I{static get requires(){return[Sn]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:r=>xc(r)?Pc(r.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:r=>xc(r)?Pc(r.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(r=>{o(r,"width","width",!0),o(r,"height","height",!0)}),t.conversion.for("dataDowncast").add(r=>{o(r,"width","width",!1),o(r,"height","height",!1)});function o(r,a,l,c){r.on(`attribute:${a}:${e}`,(u,d,h)=>{if(!h.consumable.consume(d.item,u.name))return;const f=h.writer,m=h.mapper.toViewElement(d.item),g=i.findViewImgElement(m);if(d.attributeNewValue!==null?f.setAttribute(l,d.attributeNewValue,g):f.removeAttribute(l,g),d.item.hasAttribute("sources"))return;const b=d.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!b&&!c)return;const p=d.item.getAttribute("width"),w=d.item.getAttribute("height");p&&w&&f.setStyle("aspect-ratio",`${p}/${w}`,g)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D2 extends Q{constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(i):this.isEnabled=t.isBlockImage(i)}execute(e={}){const t=this.editor,i=this.editor.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(i.document.selection),r=Object.fromEntries(o.getAttributes());return!r.src&&!r.uploadId?null:i.change(a=>{const{setImageSizes:l=!0}=e,c=Array.from(i.markers).filter(h=>h.getRange().containsItem(o)),u=s.insertImage(r,i.createSelection(o,"on"),this._modelElementName,{setImageSizes:l});if(!u)return null;const d=a.createRangeOn(u);for(const h of c){const f=h.getRange(),m=f.root.rootName!="$graveyard"?f.getJoined(d,!0):d;a.updateMarker(h,{range:m})}return{oldElement:o,newElement:u}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F2 extends I{static get requires(){return[Sn]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(o,r,a)=>{if(!a.consumable.test(r.item,o.name)||!r.item.is("element","imageBlock")&&!r.item.is("element","imageInline"))return;a.consumable.consume(r.item,o.name);const l=a.writer,c=a.mapper.toViewElement(r.item),u=i.findViewImgElement(c);r.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${r.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const e=this.editor,t=e.model,i=e.editing,s=i.view,o=e.plugins.get("ImageUtils");s.addObserver(Qm),this.listenTo(s.document,"imageLoaded",(r,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const c=o.getImageWidgetFromImageView(l);if(!c)return;const u=i.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eX extends I{static get requires(){return[B2,N2,Sn,F2,Yn]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new D2(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>ew(r)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(ew(r),r,t("image widget"))}),i.for("downcast").add(Rc(s,"imageBlock","src")).add(Rc(s,"imageBlock","alt")).add(M2(s,"imageBlock")),i.for("upcast").elementToElement({view:R2(e,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(XJ(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isInlineImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Ym(t.schema,u)==="imageBlock"){const d=new nr(i.document),h=l.map(f=>d.createElement("figure",{class:"image"},f));a.content=d.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tX extends U{constructor(e,t=[]){super(e),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusables=new ht,this.children=this.createCollection(),this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const i of t)this.children.add(i),this._focusables.add(i),i instanceof Nm&&this._focusables.addMany(i.children);if(this._focusables.length>1)for(const i of this._focusables)nX(i)&&(i.focusCycler.on("forwardCycle",s=>{this._focusCycler.focusNext(),s.stop()}),i.focusCycler.on("backwardCycle",s=>{this._focusCycler.focusPrevious(),s.stop()}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Jo({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}function nX(n){return"focusCycler"in n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ja extends I{static get pluginName(){return"ImageInsertUI"}static get requires(){return[Sn]}constructor(e){super(e),this._integrations=new Map,e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=i.isImage(t.getSelectedElement())});const s=o=>this._createToolbarComponent(o);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s)}registerIntegration({name:e,observable:t,buttonViewCreator:i,formViewCreator:s,requiresForm:o}){this._integrations.has(e)&&ae("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:i,formViewCreator:s,requiresForm:!!o})}_createToolbarComponent(e){const t=this.editor,i=e.t,s=this._prepareIntegrations();if(!s.length)return null;let o;const r=s[0];if(s.length==1){if(!r.requiresForm)return r.buttonViewCreator(!0);o=r.buttonViewCreator(!0)}else{const c=r.buttonViewCreator(!1);o=new ir(e,c),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",u=>i(u?"Replace image":"Insert image"))}const a=this.dropdownView=wt(e,o),l=s.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),a.once("change:isOpen",()=>{const c=s.map(({formViewCreator:d})=>d(s.length==1)),u=new tX(t.locale,c);a.panelView.children.add(u)}),a}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),i=[];if(!t.length)return ae("image-insert-integrations-not-specified"),i;for(const s of t){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||ae("image-insert-unknown-integration",{item:s});continue}i.push(this._integrations.get(s))}return i.length||ae("image-insert-integrations-not-registered"),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iX extends I{static get requires(){return[eX,os,O2,ja]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sX extends I{static get requires(){return[B2,N2,Sn,F2,Yn]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((i,s)=>{if(i.endsWith("caption")&&s.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new D2(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(HJ(r),r,t("image widget"))}),i.for("downcast").add(Rc(s,"imageInline","src")).add(Rc(s,"imageInline","alt")).add(M2(s,"imageInline")),i.for("upcast").elementToElement({view:R2(e,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isBlockImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Ym(t.schema,u)==="imageInline"){const d=new nr(i.document),h=l.map(f=>f.childCount===1?(Array.from(f.getAttributes()).forEach(m=>d.setAttribute(...m,s.findViewImgElement(f))),f.getChild(0)):f);a.content=d.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&s.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oX extends I{static get requires(){return[sX,os,O2,ja]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rX extends I{static get requires(){return[iX,oX]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function z2(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function aX(n){return new Promise((e,t)=>{const i=n.getAttribute("src");fetch(i).then(s=>s.blob()).then(s=>{const o=H2(s,i),a=`image.${o.replace("image/","")}`,l=new File([s],a,{type:o});e(l)}).catch(s=>s&&s.name==="TypeError"?cX(i).then(e).catch(t):t(s))})}function lX(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function H2(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function cX(n){return uX(n).then(e=>{const t=H2(e,n),s=`image.${t.replace("image/","")}`;return new File([e],s,{type:t})})}function uX(n){return new Promise((e,t)=>{const i=Ee.document.createElement("img");i.addEventListener("load",()=>{const s=Ee.document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s.toBlob(r=>r?e(r):t())}),i.addEventListener("error",()=>t()),i.src=n})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dX extends I{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,i=()=>{const s=this._createButton(xk);return s.set({label:t("Upload image from computer"),tooltip:!0}),s};if(e.ui.componentFactory.add("uploadImage",i),e.ui.componentFactory.add("imageUpload",i),e.ui.componentFactory.add("menuBar:uploadImage",()=>{const s=this._createButton(n2);return s.label=t("Image from computer"),s}),e.plugins.has("ImageInsertUI")){const s=e.plugins.get("ImageInsertUI");s.registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>{const o=e.ui.componentFactory.create("uploadImage");return o.bind("label").to(s,"isImageSelected",r=>t(r?"Replace image from computer":"Upload image from computer")),o},formViewCreator:()=>{const o=e.ui.componentFactory.create("uploadImage");return o.withText=!0,o.bind("label").to(s,"isImageSelected",r=>t(r?"Replace from computer":"Upload from computer")),o.on("execute",()=>{s.dropdownView.isOpen=!1}),o}})}}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),r=z2(o),a=new e(t.locale),l=i.t;return a.set({acceptedType:o.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload image from computer"),icon:j.imageUpload}),a.bind("isEnabled").to(s),a.on("done",(c,u)=>{const d=Array.from(u).filter(h=>r.test(h.type));d.length&&(t.execute("uploadImage",{file:d}),t.editing.view.focus())}),a}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hX extends ye(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((i,s)=>{t.onload=()=>{const o=t.result;this._data=o,i(o)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ys extends I{constructor(){super(...arguments),this.loaders=new Et,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[kc]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return ae("filerepository-no-upload-adapter"),null;const t=new tw(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(const s of this.loaders)i+=s.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(const s of this.loaders)s.uploadTotal&&(i+=s.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){const t=e instanceof tw?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,s)=>{i===t&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(kc);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=s=>`${t("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}class tw extends ye(){constructor(e,t){super(),this.id=Nt(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new hX,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,s)=>s?i/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new v("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new v("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((i,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,i(o)}).catch(o=>{t.isFulfilled=!0,s(o)})}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fX extends I{static get requires(){return[ys]}static get pluginName(){return"SimpleUploadAdapter"}init(){const e=this.editor.config.get("simpleUpload");if(e){if(!e.uploadUrl){ae("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(ys).createUploadAdapter=t=>new mX(t,e)}}}class mX{constructor(e,t){this.loader=e,this.options=t}upload(){return this.loader.file.then(e=>new Promise((t,i)=>{this._initRequest(),this._initListeners(t,i,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.options.uploadUrl,!0),e.responseType="json"}_initListeners(e,t,i){const s=this.xhr,o=this.loader,r=`Couldn't upload file: ${i.name}.`;s.addEventListener("error",()=>t(r)),s.addEventListener("abort",()=>t()),s.addEventListener("load",()=>{const a=s.response;if(!a||a.error)return t(a&&a.error&&a.error.message?a.error.message:r);const l=a.url?{default:a.url}:a.urls;e({...a,urls:l})});/* istanbul ignore else -- @preserve */s.upload&&s.upload.addEventListener("progress",a=>{a.lengthComputable&&(o.uploadTotal=a.total,o.uploaded=a.loaded)})}_sendRequest(e){const t=this.options.headers||{},i=this.options.withCredentials||!1;for(const o of Object.keys(t))this.xhr.setRequestHeader(o,t[o]);this.xhr.withCredentials=i;const s=new FormData;s.append("upload",e),this.xhr.send(s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gX extends I{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.uploadStatusChange=(t,i,s)=>{const o=this.editor,r=i.item,a=r.getAttribute("uploadId");if(!s.consumable.consume(i.item,t.name))return;const l=o.plugins.get("ImageUtils"),c=o.plugins.get(ys),u=a?i.attributeNewValue:null,d=this.placeholder,h=o.editing.mapper.toViewElement(r),f=s.writer;if(u=="reading"){nw(h,f),iw(l,d,h,f);return}if(u=="uploading"){const m=c.loaders.get(a);nw(h,f),m?(sw(h,f),bX(h,f,m,o.editing.view),CX(l,h,f,m)):iw(l,d,h,f);return}u=="complete"&&c.loaders.get(a)&&_X(h,f,o.editing.view),wX(h,f),sw(h,f),pX(h,f)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function nw(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function pX(n,e){e.removeClass("ck-appear",n)}function iw(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);const s=n.findViewImgElement(t);s.getAttribute("src")!==e&&i.setAttribute("src",e,s),$2(t,"placeholder")||i.insert(i.createPositionAfter(s),yX(i))}function sw(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),U2(n,e,"placeholder")}function bX(n,e,t,i){const s=vX(e);e.insert(e.createPositionAt(n,"end"),s),t.on("change:uploadedPercent",(o,r,a)=>{i.change(l=>{l.setStyle("width",a+"%",s)})})}function wX(n,e){U2(n,e,"progressBar")}function _X(n,e,t){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),i),setTimeout(()=>{t.change(s=>s.remove(s.createRangeOn(i)))},3e3)}function vX(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function yX(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function $2(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function U2(n,e,t){const i=$2(n,t);i&&e.remove(e.createRangeOn(i))}function CX(n,e,t,i){if(i.data){const s=n.findViewImgElement(e);t.setAttribute("src",i.data,s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kX extends Q{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=we(e.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(r,o,c)}else this._uploadImage(r,o)})}_uploadImage(e,t,i){const s=this.editor,r=s.plugins.get(ys).createLoader(e),a=s.plugins.get("ImageUtils");r&&a.insertImage({...t,uploadId:r.id},i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EX extends I{static get requires(){return[ys,h1,Yn,Sn]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,i=e.conversion,s=e.plugins.get(ys),o=e.plugins.get("ImageUtils"),r=e.plugins.get("ClipboardPipeline"),a=z2(e.config.get("image.upload.types")),l=new kX(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(c,u)=>{if(TX(u.dataTransfer))return;const d=Array.from(u.dataTransfer.files).filter(h=>h?a.test(h.type):!1);d.length&&(c.stop(),e.model.change(h=>{u.targetRanges&&h.setSelection(u.targetRanges.map(f=>e.editing.mapper.toModelRange(f))),e.execute("uploadImage",{file:d})}))}),this.listenTo(r,"inputTransformation",(c,u)=>{const d=Array.from(e.editing.view.createRangeIn(u.content)).map(f=>f.item).filter(f=>lX(o,f)&&!f.getAttribute("uploadProcessed")).map(f=>({promise:aX(f),imageElement:f}));if(!d.length)return;const h=new nr(e.editing.view.document);for(const f of d){h.setAttribute("uploadProcessed",!0,f.imageElement);const m=s.createLoader(f.promise);m&&(h.setAttribute("src","",f.imageElement),h.setAttribute("uploadId",m.id,f.imageElement))}}),e.editing.view.document.on("dragover",(c,u)=>{u.preventDefault()}),t.on("change",()=>{const c=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),u=new Set;for(const d of c)if(d.type=="insert"&&d.name!="$text"){const h=d.position.nodeAfter,f=d.position.root.rootName=="$graveyard";for(const m of SX(e,h)){const g=m.getAttribute("uploadId");if(!g)continue;const b=s.loaders.get(g);b&&(f?u.has(g)||b.abort():(u.add(g),this._uploadImageElements.set(g,m),b.status=="idle"&&this._readAndUpload(b)))}}}),this.on("uploadComplete",(c,{imageElement:u,data:d})=>{const h=d.urls?d.urls:d;this.editor.model.change(f=>{f.setAttribute("src",h.default,u),this._parseAndSetSrcsetAttributeOnImage(h,u,f),o.setImageNaturalSizeAttributes(u)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,i=t.model,s=t.locale.t,o=t.plugins.get(ys),r=t.plugins.get(h1),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{const u=e.upload(),d=l.get(e.id);/* istanbul ignore next -- @preserve */if(ee.isSafari){const h=t.editing.mapper.toViewElement(d),f=a.findViewImgElement(h);t.editing.view.once("render",()=>{if(!f.parent)return;const m=t.editing.view.domConverter.mapViewToDom(f.parent);if(!m)return;const g=m.style.display;m.style.display="none",m._ckHack=m.offsetHeight,m.style.display=g})}return i.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",d)}),u}).then(u=>{i.enqueueChange({isUndoable:!1},d=>{const h=l.get(e.id);d.setAttribute("uploadStatus","complete",h),this.fire("uploadComplete",{data:u,imageElement:h})}),c()}).catch(u=>{if(e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&r.showWarning(u,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},d=>{d.remove(l.get(e.id))}),c()});function c(){i.enqueueChange({isUndoable:!1},u=>{const d=l.get(e.id);u.removeAttribute("uploadId",d),u.removeAttribute("uploadStatus",d),l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let s=0;const o=Object.keys(e).filter(r=>{const a=parseInt(r,10);if(!isNaN(a))return s=Math.max(s,a),!0}).map(r=>`${e[r]} ${r}w`).join(", ");if(o!=""){const r={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(r.width=s),i.setAttributes(r,t)}}}function TX(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function SX(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W2 extends I{static get pluginName(){return"ImageUpload"}static get requires(){return[EX,dX,gX]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AX extends U{constructor(e){super(e),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusables=new ht,this.focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.urlInputView=this._createUrlInputView(),this.insertButtonView=this._createInsertButton(),this.cancelButtonView=this._createCancelButton(),this._focusables.addMany([this.urlInputView,this.insertButtonView,this.cancelButtonView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-image-insert-url"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]},children:[this.insertButtonView,this.cancelButtonView]}]})}render(){super.render();for(const e of this._focusables)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,t=e.t,i=new nt(e,_n);return i.bind("label").to(this,"isImageSelected",s=>t(s?"Update image URL":"Insert image via URL")),i.bind("isEnabled").to(this),i.fieldView.placeholder="https://example.com/image.png",i.fieldView.bind("value").to(this,"imageURLInputValue",s=>s||""),i.fieldView.on("input",()=>{this.imageURLInputValue=i.fieldView.element.value.trim()}),i}_createInsertButton(){const e=this.locale,t=e.t,i=new X(e);return i.set({icon:j.check,class:"ck-button-save",type:"submit",withText:!0}),i.bind("label").to(this,"isImageSelected",s=>t(s?"Update":"Insert")),i.bind("isEnabled").to(this,"imageURLInputValue",this,"isEnabled",(...s)=>s.every(o=>o)),i.delegate("execute").to(this,"submit"),i}_createCancelButton(){const e=this.locale,t=e.t,i=new X(e);return i.set({label:t("Cancel"),icon:j.cancel,class:"ck-button-cancel",withText:!0}),i.bind("isEnabled").to(this),i.delegate("execute").to(this,"cancel"),i}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IX extends I{static get pluginName(){return"ImageInsertViaUrlUI"}static get requires(){return[ja]}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),requiresForm:!0,buttonViewCreator:e=>this._createInsertUrlButton(e),formViewCreator:e=>this._createInsertUrlView(e)})}_createInsertUrlView(e){const t=this.editor,i=t.locale,s=i.t,o=t.commands.get("replaceImageSource"),r=t.commands.get("insertImage"),a=new AX(i),l=e?null:new Nm(i,[a]);return a.bind("isImageSelected").to(this._imageInsertUI),a.bind("isEnabled").toMany([r,o],"isEnabled",(...c)=>c.some(u=>u)),a.imageURLInputValue=o.value||"",this._imageInsertUI.dropdownView.on("change:isOpen",()=>{this._imageInsertUI.dropdownView.isOpen&&(a.imageURLInputValue=o.value||"",l&&(l.isCollapsed=!0))},{priority:"low"}),a.on("submit",()=>{o.isEnabled?t.execute("replaceImageSource",{source:a.imageURLInputValue}):t.execute("insertImage",{source:a.imageURLInputValue}),this._closePanel()}),a.on("cancel",()=>this._closePanel()),l?(l.set({isCollapsed:!0}),l.bind("label").to(this._imageInsertUI,"isImageSelected",c=>s(c?"Update image URL":"Insert image via URL")),l):a}_createInsertUrlButton(e){const t=e?Dm:X,i=this.editor,s=new t(i.locale),o=i.locale.t;return s.set({icon:j.imageUrl,tooltip:!0}),s.bind("label").to(this._imageInsertUI,"isImageSelected",r=>o(r?"Update image URL":"Insert image via URL")),s}_closePanel(){this.editor.editing.view.focus(),this._imageInsertUI.dropdownView.isOpen=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PX extends I{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[IX,ja]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xX extends I{static get pluginName(){return"ImageInsert"}static get requires(){return[W2,PX,ja]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RX extends Q{refresh(){const e=this.editor,i=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},o&&i.change(r=>{r.setAttribute("resizedWidth",e.width,o),r.removeAttribute("resizedHeight",o),s.setImageNaturalSizeAttributes(o)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j2 extends I{static get requires(){return[Sn]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new RX(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(r.item);r.attributeNewValue!==null?(l.setStyle("width",r.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),t.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(r.item),u=e==="imageInline"?i.findViewImgElement(c):c;r.attributeNewValue!==null?l.setStyle("height",r.attributeNewValue,u):l.removeStyle("height",u)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>xc(s)?null:s.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>xc(s)?null:s.getStyle("height")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vd={small:j.objectSizeSmall,medium:j.objectSizeMedium,large:j.objectSizeLarge,original:j.objectSizeFull};class LX extends I{static get requires(){return[j2]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:s,icon:o}=e,r=s?s+this._resizeUnit:null;t.ui.componentFactory.add(i,a=>{const l=new X(a),c=t.commands.get("resizeImage"),u=this._getOptionLabelValue(e,!0);if(!Vd[o])throw new v("imageresizebuttons-missing-icon",t,e);return l.set({label:u,icon:Vd[o],tooltip:u,isToggleable:!0}),l.bind("isEnabled").to(this),l.bind("isOn").to(c,"value",ow(r)),this.listenTo(l,"execute",()=>{t.execute("resizeImage",{width:r})}),l})}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,s=e.find(r=>!r.value),o=r=>{const a=t.commands.get("resizeImage"),l=wt(r,Dm),c=l.buttonView,u=i("Resize image");return c.set({tooltip:u,commandValue:s.value,icon:Vd.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button",ariaLabel:u,ariaLabelledBy:void 0}),c.bind("label").to(a,"value",d=>d&&d.width?d.width:this._getOptionLabelValue(s)),l.bind("isEnabled").to(this),Ds(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list"),role:"menu"}),this.listenTo(l,"execute",d=>{t.execute(d.source.commandName,{width:d.source.commandValue}),t.editing.view.focus()}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const i=this.editor.t;return e.label?e.label:t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const i=new Et;return e.map(s=>{const o=s.value?s.value+this._resizeUnit:null,r={type:"button",model:new sr({commandName:"resizeImage",commandValue:o,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})};r.model.bind("isOn").to(t,"value",ow(o)),i.add(r)}),i}}function ow(n){return e=>{const t=e;return n===null&&t===n?!0:t!==null&&t.width===n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const VX="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",Od="image_resized";class OX extends I{static get requires(){return[Id,Sn]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils");t.addObserver(Qm),this.listenTo(t.document,"imageLoaded",(s,o)=>{if(!o.target.matches(VX))return;const r=e.editing.view.domConverter,a=r.domToView(o.target),l=i.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(Id).getResizerByViewElement(l);if(c){c.redraw();return}const u=e.editing.mapper,d=u.toModelElement(l);c=e.plugins.get(Id).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:e,getHandleHost(h){return h.querySelector("img")},getResizeHost(){return r.mapViewToDom(u.toViewElement(d.parent))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(h){t.change(f=>{f.removeClass(Od,l)}),e.execute("resizeImage",{width:h})}}),c.on("updateSize",()=>{l.hasClass(Od)||t.change(f=>{f.addClass(Od,l)});const h=d.name==="imageInline"?a:l;h.getStyle("height")&&t.change(f=>{f.removeStyle("height",h)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MX extends I{static get requires(){return[j2,OX,LX]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BX extends Q{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(const s of i.modelElements)this._defaultStyles[s]=i.name;return[i.name,i]}))}refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled?i.hasAttribute("imageStyle")?this.value=i.getAttribute("imageStyle"):this.value=this._defaultStyles[i.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils");i.change(o=>{const r=e.value,{setImageSizes:a=!0}=e;let l=s.getClosestSelectedImageElement(i.document.selection);r&&this.shouldConvertImageType(r,l)&&(this.editor.execute(s.isBlockImage(l)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),l=s.getClosestSelectedImageElement(i.document.selection)),!r||this._styles.get(r).isDefault?o.removeAttribute("imageStyle",l):o.setAttribute("imageStyle",r,l),a&&s.setImageNaturalSizeAttributes(l)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:NX,objectInline:q2,objectLeft:G2,objectRight:of,objectCenter:rf,objectBlockLeft:K2,objectBlockRight:Z2}=j,Jl={get inline(){return{name:"inline",title:"In line",icon:q2,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:G2,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:K2,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:rf,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:of,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:Z2,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:rf,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:of,modelElements:["imageBlock"],className:"image-style-side"}}},J2={full:NX,left:K2,right:Z2,center:rf,inlineLeft:G2,inlineRight:of,inline:q2},X2=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function DX(n){return(n.configuredStyles.options||[]).map(i=>HX(i)).filter(i=>$X(i,n))}function FX(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function zX(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...X2]:[]}function HX(n){return typeof n=="string"?Jl[n]?n={...Jl[n]}:n={name:n}:n=UX(Jl[n.name],n),typeof n.icon=="string"&&(n.icon=J2[n.icon]||n.icon),n}function $X(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:i,name:s}=n;if(!i||!i.length||!s)return Y2({style:n}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!i.some(r=>o.includes(r)))return ae("image-style-missing-dependency",{style:n,missingPlugins:i.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function UX(n,e){const t={...e};for(const i in n)Object.prototype.hasOwnProperty.call(e,i)||(t[i]=n[i]);return t}function Y2(n){ae("image-style-configuration-definition-invalid",n)}const af={normalizeStyles:DX,getDefaultStylesConfiguration:FX,getDefaultDropdownDefinitions:zX,warnInvalidStyle:Y2,DEFAULT_OPTIONS:Jl,DEFAULT_ICONS:J2,DEFAULT_DROPDOWN_DEFINITIONS:X2};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function WX(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=rw(t.attributeNewValue,n),o=rw(t.attributeOldValue,n),r=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function jX(n){const e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,i,s)=>{if(!i.modelRange)return;const o=i.viewItem,r=$e(i.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of e[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function rw(n,e){for(const t of e)if(t.name===n)return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q2 extends I{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[Sn]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=af,i=this.editor,s=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(s,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:o}),this._setupConversion(s,o),this._setupPostFixer(),i.commands.add("imageStyle",new BX(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,s=i.model.schema,o=WX(this.normalizedStyles),r=jX(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(Sn),s=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let r=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!i.isImage(l))continue;const c=l.getAttribute("imageStyle");if(!c)continue;const u=s.get(c);(!u||!u.modelElements.includes(l.name))&&(o.removeAttribute("imageStyle",l),r=!0)}return r})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qX extends I{static get requires(){return[Q2]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=e.get("ImageStyleEditing"),s=aw(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const r of s)this._createButton(r);const o=aw([...t.filter(Re),...af.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const r of o)this._createDropdown(r,s)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,s=>{let o;const{defaultItem:r,items:a,title:l}=e,c=a.filter(f=>t.find(({name:m})=>lw(m)===f)).map(f=>{const m=i.create(f);return f===r&&(o=m),m});a.length!==c.length&&af.warnInvalidStyle({dropdown:e});const u=wt(s,ir),d=u.buttonView,h=d.arrowView;return vu(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:cw(l,o.label),class:null,tooltip:!0}),h.unbind("label"),h.set({label:l}),d.bind("icon").toMany(c,"isOn",(...f)=>{const m=f.findIndex(Hi);return m<0?o.icon:c[m].icon}),d.bind("label").toMany(c,"isOn",(...f)=>{const m=f.findIndex(Hi);return cw(l,m<0?o.label:c[m].label)}),d.bind("isOn").toMany(c,"isOn",(...f)=>f.some(Hi)),d.bind("class").toMany(c,"isOn",(...f)=>f.some(Hi)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{c.some(({isOn:f})=>f)?u.isOpen=!u.isOpen:o.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...f)=>f.some(Hi)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(lw(t),i=>{const s=this.editor.commands.get("imageStyle"),o=new X(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function aw(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function lw(n){return`imageStyle:${n}`}function cw(n,e){return(n?n+": ":"")+e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GX extends I{static get requires(){return[Q2,qX]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KX extends I{static get requires(){return[Ho,Sn]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Ho),s=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:ZX(e.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function ZX(n){return n.map(e=>Re(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JX{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,s)=>{if(!s.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||s.schema.isInline(i.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(r.getFirstRange(),l):o.wrap(s.mapper.toViewRange(i.range),l):o.unwrap(s.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:s,mapper:o})=>{const r=o.toViewElement(i.item),a=Array.from(r.getChildren()).find(l=>l.is("element","a"));for(const l of this._definitions){const c=ci(l.attributes);if(l.callback(i.attributeNewValue)){for(const[u,d]of c)u==="class"?s.addClass(d,a):s.setAttribute(u,d,a);l.classes&&s.addClass(l.classes,a);for(const u in l.styles)s.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?s.removeClass(d,a):s.removeAttribute(u,a);l.classes&&s.removeClass(l.classes,a);for(const u in l.styles)s.removeStyle(u,a)}}})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const XX=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,YX="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",QX=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,eY=/^((\w+:(\/{2,})?)|(\W))/i,tY=["https?","ftps?","mailto"],Rr="Ctrl+K";function nY(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function uw(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function eE(n,e=tY){const t=String(n),i=e.join("|"),s=new RegExp(`${YX.replace("<protocols>",i)}`,"i");return iY(t,s)?t:"#"}function iY(n,e){return!!n.replace(XX,"").match(e)}function sY(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>("label"in i&&t[i.label]&&(i.label=t[i.label]),i)),e}function oY(n){const e=[];if(n)for(const[t,i]of Object.entries(n)){const s=Object.assign({},i,{id:`link${My(t)}`});e.push(s)}return e}function lf(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function rY(n){return QX.test(n)}function eg(n,e){const t=rY(n)?"mailto:":e,i=!!t&&!tE(n);return n&&i?t+n:n}function tE(n){return eY.test(n)}function dw(n){window.open(n,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aY extends Q{constructor(){super(...arguments),this.manualDecorators=new Et,this.automaticDecorators=new JX}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||$e(t.getSelectedBlocks());lf(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const i=this.editor.model,s=i.document.selection,o=[],r=[];for(const a in t)t[a]?o.push(a):r.push(a);i.change(a=>{if(s.isCollapsed){const l=s.getFirstPosition();if(s.hasAttribute("linkHref")){const c=hw(s);let u=ku(l,"linkHref",s.getAttribute("linkHref"),i);s.getAttribute("linkHref")===c&&(u=this._updateLinkContent(i,a,u,e)),a.setAttribute("linkHref",e,u),o.forEach(d=>{a.setAttribute(d,!0,u)}),r.forEach(d=>{a.removeAttribute(d,u)}),a.setSelection(a.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const c=ci(s.getAttributes());c.set("linkHref",e),o.forEach(d=>{c.set(d,!0)});const{end:u}=i.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...o,...r].forEach(c=>{a.removeSelectionAttribute(c)})}else{const l=i.schema.getValidRanges(s.getRanges(),"linkHref"),c=[];for(const d of s.getSelectedBlocks())i.schema.checkAttribute(d,"linkHref")&&c.push(a.createRangeOn(d));const u=c.slice();for(const d of l)this._isRangeToUpdate(d,c)&&u.push(d);for(const d of u){let h=d;if(u.length===1){const f=hw(s);s.getAttribute("linkHref")===f&&(h=this._updateLinkContent(i,a,d,e),a.setSelection(a.createSelection(h)))}a.setAttribute("linkHref",e,h),o.forEach(f=>{a.setAttribute(f,!0,h)}),r.forEach(f=>{a.removeAttribute(f,h)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,s=i.getSelectedElement();return lf(s,t.schema)?s.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}_updateLinkContent(e,t,i,s){const o=t.createText(s,{linkHref:s});return e.insertContent(o,i)}}function hw(n){if(n.isCollapsed){const e=n.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(n.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lY extends Q{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();lf(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,s=e.commands.get("link");t.change(o=>{const r=i.isCollapsed?[ku(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)o.removeAttribute(l.id,a)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cY extends ye(){constructor({id:e,label:t,attributes:i,classes:s,styles:o,defaultValue:r}){super(),this.id=e,this.set("value",void 0),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uY="ck-link_selected",fw="automatic",dY="manual",hY=/^(https?:)?\/\//;class Su extends I{static get pluginName(){return"LinkEditing"}static get requires(){return[Sc,u2,Yn]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:uw}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,r)=>uw(eE(o,t),r)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new aY(e)),e.commands.add("unlink",new lY(e));const i=sY(e.t,oY(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(o=>o.mode===fw)),this._enableManualDecorators(i.filter(o=>o.mode===dY)),e.plugins.get(Sc).registerAttribute("linkHref"),f2(e,"linkHref","a",uY),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,s=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:fw,callback:o=>!!o&&hY.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&t.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,s=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const r=new cY(o);s.add(r),t.conversion.for("downcast").attributeToElement({model:r.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){const d=l.createAttributeElement("a",r.attributes,{priority:5});r.classes&&l.addClass(r.classes,d);for(const h in r.styles)l.setStyle(h,r.styles[h],d);return l.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...r._createPattern()},model:{key:r.id}})})}_enableLinkOpen(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",(s,o)=>{if(!(ee.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(s.stop(),o.preventDefault(),dw(l))},{context:"$capture"}),this.listenTo(i,"keydown",(s,o)=>{const a=e.commands.get("link").value;a&&o.keyCode===ue.enter&&o.altKey&&(s.stop(),dw(a))})}_enableSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection;this.listenTo(i,"change:attribute",(s,{attributeKeys:o})=>{!o.includes("linkHref")||i.hasAttribute("linkHref")||t.change(r=>{fY(r,mY(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{t.change(r=>{const a=r.createRangeIn(o.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=eg(l.getAttribute("linkHref"),i);r.setAttribute("linkHref",c,l)}})})}}function fY(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function mY(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gY extends U{constructor(e,t){super(e),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusables=new ht;const i=e.t;this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),j.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),j.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const s=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&s.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:s,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),Jo({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new nt(this.locale,_n);return t.label=e("Link URL"),t}_createButton(e,t,i,s){const o=new X(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const i of e.manualDecorators){const s=new Ha(this.locale);s.set({name:i.id,label:i.label,withText:!0}),s.bind("isOn").toMany([i,e],"value",(o,r)=>r===void 0&&o===void 0?!!i.defaultValue:!!o),s.on("execute",()=>{i.set("value",!s.isOn)}),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const i=new U;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}const pY='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bY extends U{constructor(e,t={}){super(e),this.focusTracker=new Oe,this.keystrokes=new Ue,this._focusables=new ht;const i=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(i("Unlink"),pY,"unlink"),this.editButtonView=this._createButton(i("Edit link"),j.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){const s=new X(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,i),s}_createPreviewButton(){const e=new X(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",s=>s&&eE(s,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||i("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}const nE='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ni="link-ui";class iE extends I{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[Ji]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver(E$),this._balloon=e.plugins.get(Ji),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:ni,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:ni,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:Rr},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new bY(e.locale,e.config.get("link")),i=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,r)=>{this._hideUI(),r()}),t.keystrokes.set(Rr,(o,r)=>{this._addFormView(),r()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),s=e.config.get("link.allowCreatingEmptyLinks"),o=new(nm(gY))(e.locale,t);return o.urlInputView.fieldView.bind("value").to(t,"value"),o.urlInputView.bind("isEnabled").to(t,"isEnabled"),o.saveButtonView.bind("isEnabled").to(t,"isEnabled",o.urlInputView,"isEmpty",(r,a)=>r&&(s||!a)),this.listenTo(o,"submit",()=>{const{value:r}=o.urlInputView.fieldView.element,a=eg(r,i);e.execute("link",a,o.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(r,a)=>{this._closeFormView(),a()}),o}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link");e.ui.componentFactory.add("link",()=>{const i=this._createButton(X);return i.set({tooltip:!0,isToggleable:!0}),i.bind("isOn").to(t,"value",s=>!!s),i}),e.ui.componentFactory.add("menuBar:link",()=>this._createButton(et))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("link"),o=new e(t.locale),r=i.t;return o.set({label:r("Link"),icon:nE,keystroke:Rr}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(Rr,(i,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Zo({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),s=r();const o=()=>{const a=this._getSelectedLinkElement(),l=r();i&&!a||!i&&l!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,s=l};function r(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,i=e.document;let s;if(t.markers.has(ni)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(ni)),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));s=e.domConverter.viewRangeToDom(r)}else s=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Ge(i))return Md(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),o=Md(s.start),r=Md(s.end);return!o||o!=r?null:e.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(ni))t.updateMarker(ni,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(ni,{usingOperation:!1,affectsData:!1,range:t.createRange(s,i.end)})}else t.addMarker(ni,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(ni)&&e.change(t=>{t.removeMarker(ni)})}}function Md(n){return n.getAncestors().find(e=>nY(e))||null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wY=4,sE=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),_Y=2;class vY extends I{static get requires(){return[Xi,Su]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?ku(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const s=this.editor.model,o=s.document.selection,r=o.getFirstPosition(),a=o.getLastPosition();let l=t.getJoined(this._expandLinkRange(s,r)||t);l&&(l=l.getJoined(this._expandLinkRange(s,a)||t)),l&&(l.start.isBefore(r)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){const e=this.editor,t=e.model,i=t.document.selection,s=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");s.on("inputTransformation",(r,a)=>{if(!this.isEnabled||!o.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(sE);u&&u[2]===c&&(t.change(d=>{this._selectEntireLinks(d,l),o.execute(c)}),r.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new cG(e.model,i=>{if(!yY(i))return;const s=mw(i.substr(0,i.length-1));if(s)return{url:s}});t.on("matched:data",(i,s)=>{const{batch:o,range:r,url:a}=s;if(!o.isTyping)return;const l=r.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const o=t.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:s}=h2(e,t),o=mw(i);if(o){const r=t.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(e,t){const i=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=eg(e,s);!this.isEnabled||!CY(t,i)||!tE(o)||kY(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const i=this.editor.model,s=this.editor.plugins.get("Delete");i.enqueueChange(o=>{o.setAttribute("linkHref",e,t),i.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function yY(n){return n.length>wY&&n[n.length-1]===" "&&n[n.length-2]!==" "}function mw(n){const e=sE.exec(n);return e?e[_Y]:null}function CY(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function kY(n){const e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EY extends I{static get requires(){return[Su,iE,vY]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TY extends I{static get requires(){return["ImageEditing","ImageUtils",Su]}static get pluginName(){return"LinkImageEditing"}afterInit(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(SY(e)),e.conversion.for("downcast").add(AY(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,i=e.commands.get("link").automaticDecorators;i.length&&e.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const i of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:i.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:i.id}),e.conversion.for("downcast").add(IY(i)),e.conversion.for("upcast").add(PY(e,i))}}function SY(n){const e=n.plugins.has("ImageInlineEditing"),t=n.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,o,r)=>{const a=o.viewItem,l=t.findViewImgElement(a);if(!l)return;const c=l.findAncestor(f=>t.isBlockImageView(f));if(e&&!c)return;const u={attributes:["href"]};if(!r.consumable.consume(a,u))return;const d=a.getAttribute("href");if(!d)return;let h=o.modelCursor.parent;if(!h.is("element","imageBlock")){const f=r.convertItem(l,o.modelCursor);o.modelRange=f.modelRange,o.modelCursor=f.modelCursor,h=o.modelCursor.nodeBefore}h&&h.is("element","imageBlock")&&r.writer.setAttribute("linkHref",d,h)},{priority:"high"})}}function AY(n){const e=n.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=o.mapper.toViewElement(s.item),a=o.writer,l=Array.from(r.getChildren()).find(d=>d.is("element","a")),c=e.findViewImgElement(r),u=c.parent.is("element","picture")?c.parent:c;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(u),a.createPositionAt(r,0)),a.remove(l));else{const d=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(r,0),d),a.move(a.createRangeOn(u),a.createPositionAt(d,0))}},{priority:"high"})}}function IY(n){return e=>{e.on(`attribute:${n.id}:imageBlock`,(t,i,s)=>{const o=s.mapper.toViewElement(i.item),r=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(r){for(const[a,l]of ci(n.attributes))s.writer.setAttribute(a,l,r);n.classes&&s.writer.addClass(n.classes,r);for(const a in n.styles)s.writer.setStyle(a,n.styles[a],r)}})}}function PY(n,e){const t=n.plugins.has("ImageInlineEditing"),i=n.plugins.get("ImageUtils");return s=>{s.on("element:a",(o,r,a)=>{const l=r.viewItem,c=i.findViewImgElement(l);if(!c)return;const u=c.findAncestor(m=>i.isBlockImageView(m));if(t&&!u)return;const h=new Zi(e._createPattern()).match(l);if(!h||!a.consumable.consume(l,h.match))return;const f=r.modelCursor.nodeBefore||r.modelCursor.parent;a.writer.setAttribute(e.id,!0,f)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xY extends I{static get requires(){return[Su,iE,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(i,s)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(s.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",i=>{const s=new X(i),o=e.plugins.get("LinkUI"),r=e.commands.get("link");return s.set({isEnabled:!0,label:t("Link image"),icon:nE,keystroke:Rr,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addActionsView():o._showUI(!0)}),s})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RY extends I{static get requires(){return[TY,xY]}static get pluginName(){return"LinkImage"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mn{constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=we(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const s=new this(e,t)[Symbol.iterator]();return $e(s)}*[Symbol.iterator](){const e=[];for(const{node:t}of qa(this._getStartNode(),this._isForward?"forward":"backward")){const i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(s=>t.getAttribute(s)!==this._startElement.getAttribute(s)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*qa(n,e="forward"){const t=e=="forward",i=[];let s=null;for(;ze(n);){let o=null;if(s){const r=n.getAttribute("listIndent"),a=s.getAttribute("listIndent");r>a?i[a]=s:r<a?(o=i[r],i.length=r):o=s}yield{node:n,previous:s,previousNodeInList:o},s=n,n=t?n.nextSibling:n.previousSibling}}class LY{constructor(e){this._listHead=e}[Symbol.iterator](){return qa(this._listHead,"forward")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uo{static next(){return Nt()}}function ze(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function tg(n,e={}){return[...Yi(n,{...e,direction:"backward"}),...Yi(n,{...e,direction:"forward"})]}function Yi(n,e={}){const t=e.direction=="forward",i=Array.from(new Mn(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?i:i.reverse()}function VY(n){return Array.from(new Mn(n,{direction:"forward",higherIndent:!0}))}function oE(n,e){const t=new Mn(n,{sameIndent:!0,sameAttributes:"listType",...e}),i=new Mn(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...i]}function Ps(n){return!Mn.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function gw(n){return!Mn.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Ga(n,e={}){n=we(n);const t=e.withNested!==!1,i=new Set;for(const s of n)for(const o of tg(s,{higherIndent:t}))i.add(o);return $s(i)}function Au(n){n=we(n);const e=new Set;for(const t of n)for(const i of oE(t))e.add(i);return $s(e)}function ng(n,e){const t=Yi(n,{direction:"forward"}),i=Uo.next();for(const s of t)e.setAttribute("listItemId",i,s);return t}function cf(n,e,t){const i={};for(const[o,r]of e.getAttributes())o.startsWith("list")&&(i[o]=r);const s=Yi(n,{direction:"forward"});for(const o of s)t.setAttributes(i,o);return s}function uf(n,e,{expand:t,indentBy:i=1}={}){n=we(n);const s=t?Ga(n):n;for(const o of s){const r=o.getAttribute("listIndent")+i;r<0?Iu(o,e):e.setAttribute("listIndent",r,o)}return s}function OY(n,e){n=we(n);const t=Ga(n),i=new Set,s=Math.min(...t.map(r=>r.getAttribute("listIndent"))),o=new Map;for(const r of t)o.set(r,Mn.first(r,{lowerIndent:!0}));for(const r of t){if(i.has(r))continue;i.add(r);const a=r.getAttribute("listIndent")-1;if(a<0){Iu(r,e);continue}if(r.getAttribute("listIndent")==s){const l=BY(r,o.get(r),e);for(const c of l)i.add(c);if(l.length)continue}e.setAttribute("listIndent",a,r)}return $s(i)}function Iu(n,e){n=we(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function Ca(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function MY(n,e){const t=[];let i=Number.POSITIVE_INFINITY;for(const{node:s}of qa(n.nextSibling,"forward")){const o=s.getAttribute("listIndent");if(o==0)break;o<i&&(i=o);const r=o-i;e.setAttribute("listIndent",r,s),t.push(s)}return t}function $s(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function ka(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function Bd(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function Lc(n){return n=="numbered"||n=="customNumbered"}function BY(n,e,t){return Yi(e,{direction:"forward"}).pop().index>n.index?cf(n,e,t):[]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pw extends Q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=bw(e.document.selection);e.change(i=>{const s=[];Ca(t)&&!Ps(t[0])?(this._direction=="forward"&&s.push(...uf(t,i)),s.push(...ng(t[0],i))):this._direction=="forward"?s.push(...uf(t,i,{expand:!0})):s.push(...OY(t,i));for(const o of s){if(!o.hasAttribute("listType"))continue;const r=Mn.first(o,{sameIndent:!0});r&&i.setAttribute("listType",r.getAttribute("listType"),o)}this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",$s(new Set(e)))}_checkEnabled(){let e=bw(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||Ca(e)&&!Ps(e[0]))return!0;e=Ga(e),t=e[0];const i=Mn.first(t,{sameIndent:!0});return i?i.getAttribute("listType")==t.getAttribute("listType"):!1}}function bw(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!ze(i));return t!=-1&&(e.length=t),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ol extends Q{constructor(e,t,i={}){super(e),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,s=ka(t),o=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||Bd(a,t.schema)),r=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(r){const l=o[o.length-1],c=Yi(l,{direction:"forward"}),u=[];c.length>1&&u.push(...ng(c[1],a)),u.push(...Iu(o,a)),u.push(...MY(l,a)),this._fireAfterExecute(u)}else if((s||i.selection.isCollapsed)&&ze(o[0])){const l=oE(s||o[0],this._listWalkerOptions);for(const c of l)a.setAttributes({...e.additionalAttributes,listType:this.type},c);this._fireAfterExecute(l)}else{const l=[];for(const c of o)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&Bd(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:Uo.next(),listType:this.type},c),l.push(c);else for(const u of Ga(c,{withNested:!1}))u.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},u),l.push(u));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",$s(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=Array.from(i.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const o of s)if(t.checkAttribute(o,"listType")||Bd(o,t))return!0;return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ww extends Q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,i=t.document.selection,s=[];t.change(o=>{const{firstElement:r,lastElement:a}=this._getMergeSubjectElements(i,e),l=r.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),u=a.getAttribute("listItemId");if(l!=c){const d=VY(a);s.push(...uf([a,...d],o,{indentBy:l-c,expand:l<c}))}if(e){let d=i;i.isCollapsed&&(d=o.createSelection(o.createRange(o.createPositionAt(r,"end"),o.createPositionAt(a,0)))),t.deleteContent(d,{doNotResetEntireContent:i.isCollapsed});const h=d.getLastPosition().parent,f=h.nextSibling;s.push(h),f&&f!==a&&f.getAttribute("listItemId")==u&&s.push(...cf(f,h,o))}else s.push(...cf(a,r,o));this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",$s(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,i=ka(e);if(t.isCollapsed||i){const s=i||t.getFirstPosition().parent;if(!ze(s))return!1;const o=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!o||Ca([s,o]))return!1}else{const s=t.getLastPosition(),o=t.getFirstPosition();if(s.parent===o.parent||!ze(s.parent))return!1}return!0}_getMergeSubjectElements(e,t){const i=this.editor.model,s=ka(i);let o,r;if(e.isCollapsed||s){const a=s||e.getFirstPosition().parent,l=Ps(a);this._direction=="backward"?(r=a,l&&!t?o=Mn.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,r=a.nextSibling)}else o=e.getFirstPosition().parent,r=e.getLastPosition().parent;return{firstElement:o,lastElement:r}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _w extends Q{constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const i=ng(this._getStartBlock(),t);this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",$s(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&ze(t)&&!Ps(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NY extends I{static get pluginName(){return"ListUtils"}expandListBlocksToCompleteList(e){return Au(e)}isFirstBlockOfListItem(e){return Ps(e)}isListItemBlock(e){return ze(e)}expandListBlocksToCompleteItems(e,t={}){return Ga(e,t)}isNumberedListType(e){return Lc(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rE(n){return n.is("element","ol")||n.is("element","ul")}function Vc(n){return n.is("element","li")}function DY(n){let e=0,t=n.parent;for(;t;){if(Vc(t))e++;else{const i=t.previousSibling;i&&Vc(i)&&e++}t=t.parent}return e}function FY(n,e,t,i=lE(t,e)){return n.createAttributeElement(aE(t),null,{priority:2*e/100-100,id:i})}function zY(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function aE(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function lE(n,e){return`list-${n}-${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wn(n,e){const t=n.nodeBefore;if(ze(t)){let i=t;for(const{node:s}of qa(i,"backward"))if(i=s,e.has(i))return;e.set(t,i)}else{const i=n.nodeAfter;ze(i)&&e.set(i,i)}}function HY(n,e){let t=0,i=-1,s=null,o=!1;for(const{node:r}of n){const a=r.getAttribute("listIndent");if(a>t){let l;s===null?(s=a-t,l=t):(s>a&&(s=a),l=a-s),l>i+1&&(l=i+1),e.setAttribute("listIndent",l,r),o=!0,i=l}else s=null,t=a+1,i=a}return o}function $Y(n,e,t){const i=new Set;let s=!1;for(const{node:o}of n){if(i.has(o))continue;let r=o.getAttribute("listType"),a=o.getAttribute("listItemId");if(e.has(a)&&(a=Uo.next()),e.add(a),o.is("element","listItem")){o.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,o),s=!0);continue}for(const l of Yi(o,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=r&&(a=Uo.next(),r=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,l),s=!0)}return s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function UY(){return(n,e,t)=>{const{writer:i,schema:s}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(d=>s.checkAttribute(d,"listItemId"));if(!o.length)return;const r=Uo.next(),a=DY(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=o[0].getAttribute("listType");c&&(l=c);const u={listItemId:r,listIndent:a,listType:l};for(const d of o)d.hasAttribute("listItemId")||i.setAttributes(u,d);o.length>1&&o[1].getAttribute("listItemId")!=u.listItemId&&t.keepEmptyElement(o[0])}}function vw(){return(n,e,t)=>{if(!t.consumable.test(e.viewItem,{name:!0}))return;const i=new nr(e.viewItem.document);for(const s of Array.from(e.viewItem.getChildren()))!Vc(s)&&!rE(s)&&i.remove(s)}}function WY(n,e,t,i){return()=>{const a=n.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")Wn(d.position,c),d.attributes.has("listItemId")?u.add(d.position.nodeAfter):Wn(d.position.getShiftedBy(d.length),c);else if(d.type=="remove"&&d.attributes.has("listItemId"))Wn(d.position,c);else if(d.type=="attribute"){const h=d.range.start.nodeAfter;t.includes(d.attributeKey)?(Wn(d.range.start,c),d.attributeNewValue===null?(Wn(d.range.start.getShiftedBy(1),c),o(h)&&l.push(h)):u.add(h)):ze(h)&&o(h)&&l.push(h)}for(const d of c.values())l.push(...s(d,u));for(const d of new Set(l))e.reconvertItem(d)};function s(a,l){const c=[],u=new Set,d=[];for(const{node:h,previous:f}of qa(a,"forward")){if(u.has(h))continue;const m=h.getAttribute("listIndent");f&&m<f.getAttribute("listIndent")&&(d.length=m+1),d[m]=Object.fromEntries(Array.from(h.getAttributes()).filter(([b])=>t.includes(b)));const g=Yi(h,{direction:"forward"});for(const b of g)u.add(b),(o(b,g)||r(b,d,l))&&c.push(b)}return c}function o(a,l){const c=e.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=uE(a,t,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function r(a,l,c){if(c.has(a))return!1;const u=e.mapper.toViewElement(a);let d=l.length-1;for(let h=u.parent;!h.is("editableElement");h=h.parent){const f=Vc(h),m=rE(h);if(!m&&!f)continue;const g=`checkAttributes:${f?"item":"list"}`;if(i.fire(g,{viewElement:h,modelAttributes:l[d]}))break;if(m&&(d--,d<0))return!1}return!0}}function yw(n,e,t,{dataPipeline:i}={}){const s=XY(n);return(o,r,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=r.item;if(!n.includes(r.attributeKey)||!s(d,u))return;const h=qY(d,c,t);cE(h,l,c),ZY(h,l);const f=KY(d,h,e,l,{dataPipeline:i});JY(d,f,e,l)}}function jY(n){return(e,t,i)=>{const{writer:s,mapper:o}=i,r=e.name.split(":")[1];if(!n.checkAttribute(r,"listItemId"))return;const a=o.toViewPosition(t.position),l=t.position.getShiftedBy(t.length),c=o.toViewPosition(l,{isPhantom:!0}),d=s.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&cE(d,s,o)}}function Cw(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!uE(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function qY(n,e,t){const i=t.createRangeOn(n);return e.toViewRange(i).getTrimmed().end.nodeBefore}function GY(n,e){return(t,i)=>{if(i.modelPosition.offset>0)return;const s=i.modelPosition.parent;if(!ze(s)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(s)))return;const o=i.mapper.toViewElement(s),r=e.createRangeIn(o),a=r.getWalker();let l=r.start;for(const{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}i.viewPosition=l}}function cE(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const i=[];s(e.createPositionBefore(n).getWalker({direction:"backward"})),s(e.createRangeIn(n).getWalker());for(const o of i)e.remove(o);function s(o){for(const{item:r}of o){if(r.is("element")&&t.toModelElement(r))break;r.is("element")&&r.getCustomProperty("listItemMarker")&&i.push(r)}}}function KY(n,e,t,i,{dataPipeline:s}){let o=i.createRangeOn(e);if(!Ps(n))return o;for(const r of t){if(r.scope!="itemMarker")continue;const a=r.createElement(i,n,{dataPipeline:s});if(!a||(i.setCustomProperty("listItemMarker",!0,a),r.canInjectMarkerIntoElement&&r.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(e,0),a):(i.insert(o.start,a),o=i.createRange(i.createPositionBefore(a),i.createPositionAfter(e))),!r.createWrapperElement||!r.canWrapElement))continue;const l=r.createWrapperElement(i,n,{dataPipeline:s});i.setCustomProperty("listItemWrapper",!0,l),r.canWrapElement(n)?o=i.wrap(o,l):(o=i.wrap(i.createRangeOn(a),l),o=i.createRange(o.start,i.createPositionAfter(e)))}return o}function ZY(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const i=t.parent;e.unwrap(e.createRangeOn(n),t),t=i}}function JY(n,e,t,i){if(!n.hasAttribute("listIndent"))return;const s=n.getAttribute("listIndent");let o=n;for(let r=s;r>=0;r--){const a=zY(i,r,o.getAttribute("listItemId")),l=FY(i,r,o.getAttribute("listType"));for(const c of t)(c.scope=="list"||c.scope=="item")&&o.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,o.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=i.wrap(e,a),e=i.wrap(e,l),r==0||(o=Mn.first(o,{lowerIndent:!0}),!o))break}}function XY(n){return(e,t)=>{const i=[];for(const s of n)e.hasAttribute(s)&&i.push(`attribute:${s}`);return i.every(s=>t.test(e,s)!==!1)?(i.forEach(s=>t.consume(e,s)),!0):!1}}function uE(n,e,t=tg(n)){if(!ze(n))return!1;for(const i of n.getAttributeKeys())if(!i.startsWith("selection:")&&!e.includes(i))return!1;return t.length<2}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xl=["listType","listIndent","listItemId"];class df extends I{static get pluginName(){return"ListEditing"}static get requires(){return[Ua,Xi,NY,Yn]}constructor(e){super(e),this._downcastStrategies=[],e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new v("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:Xl}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of Xl)t.schema.setAttributeProperties(s,{copyOnReplace:!0});e.commands.add("numberedList",new Ol(e,"numbered")),e.commands.add("bulletedList",new Ol(e,"bulleted")),e.commands.add("customNumberedList",new Ol(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Ol(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new pw(e,"forward")),e.commands.add("outdentList",new pw(e,"backward")),e.commands.add("splitListItemBefore",new _w(e,"before")),e.commands.add("splitListItemAfter",new _w(e,"after")),i&&(e.commands.add("mergeListItemBackward",new ww(e,"backward")),e.commands.add("mergeListItemForward",new ww(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const t=this.editor.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Xl,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(s,o)=>{const r=e.model.document.selection;ka(e.model)||e.model.change(()=>{const a=r.getFirstPosition();if(r.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const l=a.parent;if(!ze(l))return;if(!Mn.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)gw(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:kw(e.model,"backward")})}o.preventDefault(),s.stop()}else{if(r.isCollapsed&&!r.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:kw(e.model,"forward")}),o.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,i=e.commands,s=i.get("enter");this.listenTo(e.editing.view.document,"enter",(o,r)=>{const a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&ze(l)&&l.isEmpty&&!r.isSoft){const c=Ps(l),u=gw(l);c&&u?(e.execute("outdentList"),r.preventDefault(),o.stop()):c&&!u?(e.execute("splitListItemAfter"),r.preventDefault(),o.stop()):u&&(e.execute("splitListItemBefore"),r.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const o=i.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;tg(a).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{const s=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(e.execute(s),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,i=this.getListAttributeNames(),s=e.config.get("list.multiBlock"),o=s?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(o,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(o,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",UY()),a.on("element:ul",vw(),{priority:"high"}),a.on("element:ol",vw(),{priority:"high"})}),s||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:Cw(i),converterPriority:"high"}).add(a=>{a.on("attribute",yw(i,this._downcastStrategies,t)),a.on("remove",jY(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:Cw(i,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",yw(i,this._downcastStrategies,t,{dataPipeline:!0}))});const r=GY(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",r),e.data.mapper.on("modelToViewPosition",r),this.listenTo(t.document,"change:data",WY(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=aE(c.listType)||l.id!=lE(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>YY(e,i,t,this)),this.on("postFixer",(i,{listNodes:s,writer:o})=>{i.return=HY(s,o)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:s,writer:o,seenIds:r})=>{i.return=$Y(s,r,o)||i.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",QY(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,s)=>{e.change(o=>{const r=Array.from(s.content.getChildren()),a=r[r.length-1];if(r.length>1&&a.is("element")&&a.isEmpty&&r.slice(0,-1).every(ze)&&o.remove(a),s.method=="copy"||s.method=="cut"){const l=Array.from(s.content.getChildren());Ca(l)&&Iu(l,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function YY(n,e,t,i){const s=n.document.differ.getChanges(),o=new Map,r=i.editor.config.get("list.multiBlock");let a=!1;for(const c of s){if(c.type=="insert"&&c.name!="$text"){const u=c.position.nodeAfter;if(!n.schema.checkAttribute(u,"listItemId"))for(const d of Array.from(u.getAttributeKeys()))t.includes(d)&&(e.removeAttribute(d,u),a=!0);Wn(c.position,o),c.attributes.has("listItemId")||Wn(c.position.getShiftedBy(c.length),o);for(const{item:d,previousPosition:h}of n.createRangeIn(u))ze(d)&&Wn(h,o)}else c.type=="remove"?Wn(c.position,o):c.type=="attribute"&&t.includes(c.attributeKey)&&(Wn(c.range.start,o),c.attributeNewValue===null&&Wn(c.range.start.getShiftedBy(1),o));if(!r&&c.type=="attribute"&&Xl.includes(c.attributeKey)){const u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(e.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(e.rename(u,"listItem"),a=!0)}}const l=new Set;for(const c of o.values())a=i.fire("postFixer",{listNodes:new LY(c),listHead:c,writer:e,seenIds:l})||a;return a}function QY(n){return(e,[t,i])=>{const s=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!s.length)return;const r=(i?n.createSelection(i):n.document.selection).getFirstPosition();let a;if(ze(r.parent))a=r.parent;else if(ze(r.nodeBefore))a=r.nodeBefore;else return;n.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=s[0].getAttribute("listIndent")||0,h=Math.max(u-d,0);for(const f of s){const m=ze(f);a.is("element","listItem")&&f.is("element","paragraph")&&l.rename(f,"listItem"),l.setAttributes({listIndent:(m?f.getAttribute("listIndent"):0)+h,listItemId:m?f.getAttribute("listItemId"):Uo.next(),listType:c},f)}})}}function kw(n,e){const t=n.document.selection;if(!t.isCollapsed)return!ka(n);if(e==="forward")return!0;const s=t.getFirstPosition().parent,o=s.previousSibling;return n.schema.isObject(o)?!1:o.isEmpty?!0:Ca([s,o])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ew(n,e,t,i){n.ui.componentFactory.add(e,()=>{const s=Tw(X,n,e,t,i);return s.set({tooltip:!0,isToggleable:!0}),s}),n.ui.componentFactory.add(`menuBar:${e}`,()=>Tw(et,n,e,t,i))}function Tw(n,e,t,i,s){const o=e.commands.get(t),r=new n(e.locale);return r.set({label:i,icon:s}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",()=>{e.execute(t),e.editing.view.focus()}),r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eQ extends I{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;Ew(this.editor,"numberedList",e("Numbered List"),j.numberedList),Ew(this.editor,"bulletedList",e("Bulleted List"),j.bulletedList)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tQ extends I{static get requires(){return[df,eQ]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nQ extends Q{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const t=this.editor.model,i=t.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(o=>ze(o)&&Lc(o.getAttribute("listType")));s=Au(s),t.change(o=>{for(const r of s)o.setAttribute("listStart",e>=0?e:1,r)})}_getValue(){const t=this.editor.model.document,i=$e(t.selection.getSelectedBlocks());return i&&ze(i)&&Lc(i.getAttribute("listType"))?i.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const dE={},hE={},fE={},mE=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of mE)dE[n]=t,hE[n]=e,e&&(fE[e]=n);function gE(){return mE.map(n=>n.listStyle)}function ig(n){return dE[n]||null}function pE(n){return fE[n]||null}function hf(n){return hE[n]||null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iQ extends Q{constructor(e,t,i){super(e),this.defaultType=t,this._supportedTypes=i}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document;t.change(s=>{this._tryToConvertItemsToList(e);let o=Array.from(i.selection.getSelectedBlocks()).filter(r=>r.hasAttribute("listType"));if(o.length){o=Au(o);for(const r of o)s.setAttribute("listStyle",e.type||this.defaultType,r)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=$e(this.editor.model.document.selection.getSelectedBlocks());return ze(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedList"),i=e.commands.get("bulletedList");return t.isEnabled||i.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const t=ig(e.type);if(!t)return;const i=this.editor,s=`${t}List`;i.commands.get(s).value||i.execute(s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sQ extends Q{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const t=this.editor.model,i=t.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(o=>ze(o)&&o.getAttribute("listType")=="numbered");s=Au(s),t.change(o=>{for(const r of s)o.setAttribute("listReversed",!!e.reversed,r)})}_getValue(){const t=this.editor.model.document,i=$e(t.selection.getSelectedBlocks());return ze(i)&&i.getAttribute("listType")=="numbered"?i.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sw(n){return(e,t,i)=>{const{writer:s,schema:o,consumable:r}=i;if(r.test(t.viewItem,n.viewConsumables)===!1)return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor));let a=!1;for(const l of t.modelRange.getItems({shallow:!0}))o.checkAttribute(l,n.attributeName)&&n.appliesToListItem(l)&&(l.hasAttribute(n.attributeName)||(s.setAttribute(n.attributeName,n.getAttributeOnUpcast(t.viewItem),l),a=!0));a&&r.consume(t.viewItem,n.viewConsumables)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oQ extends I{static get pluginName(){return"ListPropertiesUtils"}getAllSupportedStyleTypes(){return gE()}getListTypeFromListStyleType(e){return ig(e)}getListStyleTypeFromTypeAttribute(e){return pE(e)}getTypeAttributeFromListStyleType(e){return hf(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sr="default";class rQ extends I{static get requires(){return[df,oQ]}static get pluginName(){return"ListPropertiesEditing"}constructor(e){super(e),e.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const e=this.editor,t=e.model,i=e.plugins.get(df),s=e.config.get("list.properties"),o=aQ(s);for(const r of o)r.addCommand(e),t.schema.extend("$listItem",{allowAttributes:r.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:r.attributeName,setAttributeOnDowncast(a,l,c){r.setAttributeOnDowncast(a,l,c)}});e.conversion.for("upcast").add(r=>{for(const a of o)r.on("element:ol",Sw(a)),r.on("element:ul",Sw(a))}),i.on("checkAttributes:list",(r,{viewElement:a,modelAttributes:l})=>{for(const c of o)c.getAttributeOnUpcast(a)!=l[c.attributeName]&&(r.return=!0,r.stop())}),this.listenTo(e.commands.get("indentList"),"afterExecute",(r,a)=>{t.change(l=>{for(const c of a)for(const u of o)u.appliesToListItem(c)&&l.setAttribute(u.attributeName,u.defaultValue,c)})}),i.on("postFixer",(r,{listNodes:a,writer:l})=>{for(const{node:c}of a)for(const u of o)u.hasValidAttribute(c)||(u.appliesToListItem(c)?l.setAttribute(u.attributeName,u.defaultValue,c):l.removeAttribute(u.attributeName,c),r.return=!0)}),i.on("postFixer",(r,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:u}of a)if(u&&u.getAttribute("listType")==c.getAttribute("listType"))for(const d of o){const{attributeName:h}=d;if(!d.appliesToListItem(c))continue;const f=u.getAttribute(h);c.getAttribute(h)!=f&&(l.setAttribute(h,f,c),r.return=!0)}})}}function aQ(n){const e=[];if(n.styles){const t=typeof n.styles=="object"&&n.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:Sr,viewConsumables:{styles:"list-style-type"},addCommand(i){let s=gE();t&&(s=s.filter(o=>!!hf(o))),i.commands.add("listStyle",new iQ(i,Sr,s))},appliesToListItem(i){return i.getAttribute("listType")=="numbered"||i.getAttribute("listType")=="bulleted"},hasValidAttribute(i){if(!this.appliesToListItem(i))return!i.hasAttribute("listStyle");if(!i.hasAttribute("listStyle"))return!1;const s=i.getAttribute("listStyle");return s==Sr?!0:ig(s)==i.getAttribute("listType")},setAttributeOnDowncast(i,s,o){if(s&&s!==Sr)if(t){const r=hf(s);if(r){i.setAttribute("type",r,o);return}}else{i.setStyle("list-style-type",s,o);return}i.removeStyle("list-style-type",o),i.removeAttribute("type",o)},getAttributeOnUpcast(i){const s=i.getStyle("list-style-type");if(s)return s;const o=i.getAttribute("type");return o?pE(o):Sr}})}return n.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(t){t.commands.add("listReversed",new sQ(t))},appliesToListItem(t){return t.getAttribute("listType")=="numbered"},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listReversed")},setAttributeOnDowncast(t,i,s){i?t.setAttribute("reversed","reversed",s):t.removeAttribute("reversed",s)},getAttributeOnUpcast(t){return t.hasAttribute("reversed")}}),n.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(t){t.commands.add("listStart",new nQ(t))},appliesToListItem(t){return Lc(t.getAttribute("listType"))},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listStart")},setAttributeOnDowncast(t,i,s){i==0||i>1?t.setAttribute("start",i,s):t.removeAttribute("start",s)},getAttributeOnUpcast(t){const i=t.getAttribute("start");return i>=0?i:1}}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bE extends U{constructor(e,{enabledProperties:t,styleButtonViews:i,styleGridAriaLabel:s}){super(e),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new Oe,this.keystrokes=new Ue,this.focusables=new ht;const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new ft({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.styles?(this.stylesView=this._createStylesView(i,s),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(t.startIndex||t.reversed)&&(this._addNumberedListPropertyViews(t),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);im({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Ee.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,t){const i=new U(this.locale);return i.children=i.createCollection(),i.children.addMany(e),i.setTemplate({tag:"div",attributes:{"aria-label":t,class:["ck","ck-list-styles-list"]},children:i.children}),i.children.delegate("execute").to(this),i.focus=function(){this.children.first.focus()},i.focusTracker=new Oe,i.keystrokes=new Ue,i.render(),i.keystrokes.listenTo(i.element),i}_addNumberedListPropertyViews(e){const t=this.locale.t,i=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),i.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),i.push(this.reversedSwitchButtonView)),e.styles?(this.additionalPropertiesCollapsibleView=new Nm(this.locale,i),this.additionalPropertiesCollapsibleView.set({label:t("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(i,"isEnabled",(...s)=>s.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(s,o,r)=>{r||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(i)}_createStartIndexField(){const e=this.locale.t,t=new nt(this.locale,hj);return t.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const i=t.fieldView.element,s=i.valueAsNumber;if(Number.isNaN(s)){t.errorText=e("Invalid start index value.");return}i.checkValidity()?this.fire("listStart",{startIndex:s}):t.errorText=e("Start index must be greater than 0.")}),t}_createReversedSwitchButton(){const e=this.locale.t,t=new Ha(this.locale);return t.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),t.delegate("execute").to(this,"listReversed"),t}}const lQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',cQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',uQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',dQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',hQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',fQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',mQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',gQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',pQ='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bQ extends I{static get pluginName(){return"ListPropertiesUI"}init(){const e=this.editor,t=e.locale.t,i=e.config.get("list.properties");if(i.styles){const s=[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:lQ},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:cQ},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:uQ}],o=t("Bulleted List"),r=t("Bulleted list styles toolbar"),a="bulletedList";e.ui.componentFactory.add(a,Aw({editor:e,propertiesConfig:i,parentCommandName:a,buttonLabel:o,buttonIcon:j.bulletedList,styleGridAriaLabel:r,styleDefinitions:s})),e.ui.componentFactory.add(`menuBar:${a}`,Iw({editor:e,propertiesConfig:i,parentCommandName:a,buttonLabel:o,styleGridAriaLabel:r,styleDefinitions:s}))}if(i.styles||i.startIndex||i.reversed){const s=[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:dQ},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:hQ},{label:t("Toggle the lower–roman list style"),tooltip:t("Lower–roman"),type:"lower-roman",icon:fQ},{label:t("Toggle the upper–roman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:mQ},{label:t("Toggle the lower–latin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:gQ},{label:t("Toggle the upper–latin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:pQ}],o=t("Numbered List"),r=t("Numbered list styles toolbar"),a="numberedList";e.ui.componentFactory.add(a,Aw({editor:e,propertiesConfig:i,parentCommandName:a,buttonLabel:o,buttonIcon:j.numberedList,styleGridAriaLabel:r,styleDefinitions:s})),i.styles&&e.ui.componentFactory.add(`menuBar:${a}`,Iw({editor:e,propertiesConfig:i,parentCommandName:a,buttonLabel:o,styleGridAriaLabel:r,styleDefinitions:s}))}}}function Aw({editor:n,propertiesConfig:e,parentCommandName:t,buttonLabel:i,buttonIcon:s,styleGridAriaLabel:o,styleDefinitions:r}){const a=n.commands.get(t);return l=>{const c=wt(l,ir),u=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",u.on("execute",()=>{n.execute(t),n.editing.view.focus()}),u.set({label:i,icon:s,tooltip:!0,isToggleable:!0}),u.bind("isOn").to(a,"value",d=>!!d),c.once("change:isOpen",()=>{const d=wQ({editor:n,propertiesConfig:e,dropdownView:c,parentCommandName:t,styleGridAriaLabel:o,styleDefinitions:r});c.panelView.children.add(d)}),c.on("execute",()=>{n.editing.view.focus()}),c}}function wE({editor:n,listStyleCommand:e,parentCommandName:t}){const i=n.locale,s=n.commands.get(t);return({label:o,type:r,icon:a,tooltip:l})=>{const c=new X(i);return c.set({label:o,icon:a,tooltip:l}),e.on("change:value",()=>{c.isOn=e.value===r}),c.on("execute",()=>{s.value?e.value===r?n.execute(t):e.value!==r&&n.execute("listStyle",{type:r}):n.model.change(()=>{n.execute("listStyle",{type:r})})}),c}}function wQ({editor:n,propertiesConfig:e,dropdownView:t,parentCommandName:i,styleDefinitions:s,styleGridAriaLabel:o}){const r=n.locale,a={...e};i!="numberedList"&&(a.startIndex=!1,a.reversed=!1);let l=null;if(a.styles){const u=n.commands.get("listStyle"),d=wE({editor:n,parentCommandName:i,listStyleCommand:u}),h=_E(u);l=s.filter(h).map(d)}const c=new bE(r,{styleGridAriaLabel:o,enabledProperties:a,styleButtonViews:l});if(a.styles&&yu(t,()=>c.stylesView.children.find(u=>u.isOn)),a.startIndex){const u=n.commands.get("listStart");c.startIndexFieldView.bind("isEnabled").to(u),c.startIndexFieldView.fieldView.bind("value").to(u),c.on("listStart",(d,h)=>n.execute("listStart",h))}if(a.reversed){const u=n.commands.get("listReversed");c.reversedSwitchButtonView.bind("isEnabled").to(u),c.reversedSwitchButtonView.bind("isOn").to(u,"value",d=>!!d),c.on("listReversed",()=>{const d=u.value;n.execute("listReversed",{reversed:!d})})}return c.delegate("execute").to(t),c}function Iw({editor:n,propertiesConfig:e,parentCommandName:t,buttonLabel:i,styleGridAriaLabel:s,styleDefinitions:o}){return r=>{const a=new vn(r),l=n.commands.get(t),c=n.commands.get("listStyle"),u=_E(c),d=wE({editor:n,parentCommandName:t,listStyleCommand:c}),h=o.filter(u).map(d),f=new bE(r,{styleGridAriaLabel:s,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:h});return f.delegate("execute").to(a),a.buttonView.set({label:i,icon:j[t]}),a.panelView.children.add(f),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{n.editing.view.focus()}),a}}function _E(n){return typeof n.isStyleTypeSupported=="function"?e=>n.isStyleTypeSupported(e.type):()=>!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _Q extends I{static get requires(){return[rQ,bQ]}static get pluginName(){return"ListProperties"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Fa("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Fa("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pw(n,e){const t=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=s.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(s.item),c=[...l.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(c);const u=n.getMediaViewElement(a,r,e);a.insert(a.createPositionAt(l,0),u)};return i=>{i.on("attribute:url:media",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vQ(n,e,t){return e.setCustomProperty("media",!0,n),Hs(n,e,{label:t})}function yQ(n){const e=n.getSelectedElement();return e&&CQ(e)?e:null}function CQ(n){return!!n.getCustomProperty("media")&&Ge(n)}function xw(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function Rw(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function vE(n,e,t,i){n.change(s=>{const o=s.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kQ extends Q{refresh(){const e=this.editor.model,t=e.document.selection,i=Rw(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=TQ(t)||EQ(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,s=Rw(i);s?t.change(o=>{o.setAttribute("url",e,s)}):vE(t,e,i,!0)}}function EQ(n,e){let i=Eu(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function TQ(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}const SQ='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const AQ="0 0 64 42";class IQ{constructor(e,t){const i=t.providers,s=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(s).filter(a=>{const l=a.name;return l?!o.has(l):(ae("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=r}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new Lw(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,s=we(t.url);for(const o of s){const r=this._getUrlMatches(e,o);if(r)return new Lw(this.locale,e,r,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let s=e.replace(/^https?:\/\//,"");return i=s.match(t),i||(s=s.replace(/^www\./,""),i=s.match(t),i)?i:null}}class Lw{constructor(e,t,i,s){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=s}getViewElement(e,t){const i={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const o=this._getPreviewHtml(t);s=e.createRawElement("div",i,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(i.url=this.url),s=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new ei,t=this._locale.t;return e.content=SQ,e.viewBox=AQ,new Mt({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oc extends I{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const i=t[1],s=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new IQ(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new kQ(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url");return xw(c,a,u,{elementName:r,renderMediaPreview:!!u&&o})}}),s.for("dataDowncast").add(Pw(a,{elementName:r,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url"),d=xw(c,a,u,{elementName:r,renderForEditingView:!0});return vQ(d,c,i("media widget"))}}),s.for("editingDowncast").add(Pw(a,{elementName:r,renderForEditingView:!0})),s.for("upcast").elementToElement({view:l=>["oembed",r].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{const u=l.getAttribute("url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{const u=l.getAttribute("data-oembed-url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).add(l=>{const c=(u,d,h)=>{if(!h.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:f,modelCursor:m}=h.convertChildren(d.viewItem,d.modelCursor);d.modelRange=f,d.modelCursor=m,$e(f.getItems())||h.consumable.revert(d.viewItem,{name:!0,classes:"media"})};l.on("element:figure",c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const PQ=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class xQ extends I{static get requires(){return[T2,Xi,Km]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const o=t.selection.getFirstRange(),r=mt.fromPosition(o.start);r.stickiness="toPrevious";const a=mt.fromPosition(o.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(r,a),r.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Ee.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,s=i.plugins.get(Oc).registry,o=new Rn(e,t),r=o.getWalker({ignoreElementEnd:!0});let a="";for(const c of r)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(PQ)){o.detach();return}if(!s.hasMedia(a)){o.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=mt.fromPosition(e),this._timeoutId=Ee.window.setTimeout(()=>{i.model.change(c=>{this._timeoutId=null,c.remove(o),o.detach();let u=null;this._positionToInsert.root.rootName!=="$graveyard"&&(u=this._positionToInsert),vE(i.model,a,u,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(Xi).requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RQ extends U{constructor(e,t){super(t);const i=t.t;this.focusTracker=new Oe,this.keystrokes=new Ue,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),j.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",s=>!!s),this.cancelButtonView=this._createButton(i("Cancel"),j.cancel,"ck-button-cancel","cancel"),this._focusables=new ht,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),Jo({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element);const t=i=>i.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new nt(this.locale,_n),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}_createButton(e,t,i,s){const o=new X(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}}const LQ='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VQ extends I{static get requires(){return[Oc]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed");e.ui.componentFactory.add("mediaEmbed",i=>{const s=wt(i);return this._setUpDropdown(s,t),s})}_setUpDropdown(e,t){const i=this.editor,s=i.t,o=e.buttonView,r=i.plugins.get(Oc).registry;e.once("change:isOpen",()=>{const a=new(nm(RQ))(OQ(i.t,r),i.locale);e.panelView.children.add(a),o.on("open",()=>{a.disableCssTransitions(),a.url=t.value||"",a.urlInputView.fieldView.select(),a.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{a.isValid()&&(i.execute("mediaEmbed",a.url),i.editing.view.focus())}),e.on("change:isOpen",()=>a.resetFormStatus()),e.on("cancel",()=>{i.editing.view.focus()}),a.delegate("submit","cancel").to(e),a.urlInputView.fieldView.bind("value").to(t,"value"),a.urlInputView.bind("isEnabled").to(t,"isEnabled")}),e.bind("isEnabled").to(t),o.set({label:s("Insert media"),icon:LQ,tooltip:!0})}}function OQ(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MQ extends I{static get requires(){return[Oc,VQ,xQ,os]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BQ extends I{static get requires(){return[Ho]}static get pluginName(){return"MediaEmbedToolbar"}afterInit(){const e=this.editor,t=e.t;e.plugins.get(Ho).register("mediaEmbed",{ariaLabel:t("Media toolbar"),items:e.config.get("mediaEmbed.toolbar")||[],getRelatedElement:yQ})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function NQ(n){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(r=>r.name).join("|"),i=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let s=0,o=!1;return i.filter(r=>r.length).map(r=>(o=zQ(r,o),DQ(r,e)?Nd(r,s++):FQ(r,e)?Nd(r,--s):o==="middle"||o==="last"?r:Nd(r,s))).join(`
`)}function DQ(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function FQ(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function Nd(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}`}function zQ(n,e){return new RegExp("<pre( .*?)?>").test(n)?"first":new RegExp("</pre>").test(n)?"last":e==="first"||e==="middle"?"middle":!1}const HQ='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ml="SourceEditingMode";class $Q extends I{static get pluginName(){return"SourceEditing"}static get requires(){return[kc]}constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new fC,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{const i=this._createButton(X);return i.set({label:t("Source"),icon:HQ,tooltip:!0,class:"ck-source-editing-button"}),i}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{const i=this._createButton(et);return i.set({label:t("Show source")}),i}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,s,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,s,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(i,s,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const e=this.editor,t={};for(const[i,s]of this._replacedRoots){const o=this._dataFromRoots.get(i),r=s.dataset.value;o!==r&&(t[i]=r,this._dataFromRoots.set(i,r))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new v("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(s=>e.plugins.has(s))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,t=e.editing.view,i=e.model;i.change(s=>{s.setSelection(null),s.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(const[s,o]of t.domRoots){const r=UQ(e.data.get({rootName:s})),a=lt(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),l=lt(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":r},[a]);a.value=r,a.setSelectionRange(0,0),a.addEventListener("input",()=>{l.dataset.value=a.value,e.ui.update()}),t.change(c=>{const u=t.document.getRoot(s);c.addClass("ck-hidden",u)}),e.ui.setEditableElement("sourceEditing:"+s,a),this._replacedRoots.set(s,l),this._elementReplacer.replace(o,l),this._dataFromRoots.set(s,r)}this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this.updateEditorData(),t.change(i=>{for(const[s]of this._replacedRoots)i.removeClass("ck-hidden",t.document.getRoot(s))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_focusSourceEditing(){const e=this.editor,[t]=this._replacedRoots.values(),i=t.querySelector("textarea");e.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){const e=this.editor;for(const t of e.commands.commands())t.forceDisabled(Ml);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Ml)}_enableCommands(){const e=this.editor;for(const t of e.commands.commands())t.clearForceDisabled(Ml);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Ml)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){const t=this.editor,i=new e(t.locale);return i.set({withText:!0}),i.bind("isOn").to(this,"isSourceEditingMode"),i.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(kc),"hasAny",(s,o,r)=>!(!s||o||r)),this.listenTo(i,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),i}}function UQ(n){return WQ(n)?NQ(n):n}function WQ(n){return n.startsWith("<")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sg(n,e){const{modelAttribute:t,styleName:i,viewElement:s,defaultValue:o,reduceBoxSides:r=!1,shouldUpcast:a=()=>!0}=e;n.for("upcast").attributeToAttribute({view:{name:s,styles:{[i]:/[\s\S]+/}},model:{key:t,value:l=>{if(!a(l))return;const c=l.getNormalizedStyle(i),u=r?Ql(c):c;if(o!==u)return u}}})}function ff(n,e,t,i){n.for("upcast").add(s=>s.on("element:"+e,(o,r,a)=>{if(!r.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(f=>r.viewItem.hasStyle(f));if(!l.length)return;const c={styles:l};if(!a.consumable.test(r.viewItem,c))return;const u=[...r.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(r.viewItem,c);const d={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},h={style:Ql(d.style),color:Ql(d.color),width:Ql(d.width)};h.style!==i.style&&a.writer.setAttribute(t.style,h.style,u),h.color!==i.color&&a.writer.setAttribute(t.color,h.color,u),h.width!==i.width&&a.writer.setAttribute(t.width,h.width,u)}))}function qr(n,e){const{modelElement:t,modelAttribute:i,styleName:s}=e;n.for("downcast").attributeToAttribute({model:{name:t,key:i},view:o=>({key:"style",value:{[s]:o}})})}function Yl(n,e){const{modelAttribute:t,styleName:i}=e;n.for("downcast").add(s=>s.on(`attribute:${t}:table`,(o,r,a)=>{const{item:l,attributeNewValue:c}=r,{mapper:u,writer:d}=a;if(!a.consumable.consume(r.item,o.name))return;const h=[...u.toViewElement(l).getChildren()].find(f=>f.is("element","table"));c?d.setStyle(i,c,h):d.removeStyle(i,h)}))}function Ql(n){if(!n)return;const e=["top","right","bottom","left"];if(!e.every(o=>n[o]))return n;const i=n.top;return e.every(o=>n[o]===i)?i:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qe(n,e,t,i,s=1){e!=null&&s!==void 0&&s!==null&&e>s?i.setAttribute(n,e,t):i.removeAttribute(n,t)}function Us(n,e,t={}){const i=n.createElement("tableCell",t);return n.insertElement("paragraph",i),n.insert(i,e),i}function mf(n,e){const t=e.parent.parent,i=parseInt(t.getAttribute("headingColumns")||"0"),{column:s}=n.getCellLocation(e);return!!i&&s<i}function ec(n,e,t){const{modelAttribute:i}=t;n.extend("tableCell",{allowAttributes:[i]}),sg(e,{viewElement:/^(td|th)$/,...t}),qr(e,{modelElement:"tableCell",...t})}function gf(n){const e=n.getSelectedElement();return e&&e.is("element","table")?e:n.getFirstPosition().findAncestor("table")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jQ(){return n=>{n.on("element:figure",(e,t,i)=>{if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=KQ(t.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=i.convertItem(s,t.modelCursor),r=$e(o.modelRange.getItems());if(!r){i.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}i.convertChildren(t.viewItem,i.writer.createPositionAt(r,"end")),i.updateConversionResult(r,t)})}}function qQ(){return n=>{n.on("element:table",(e,t,i)=>{const s=t.viewItem;if(!i.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:a}=ZQ(s),l={};a&&(l.headingColumns=a),r&&(l.headingRows=r);const c=i.writer.createElement("table",l);if(i.safeInsert(c,t.modelCursor)){if(i.consumable.consume(s,{name:!0}),o.forEach(u=>i.convertItem(u,i.writer.createPositionAt(c,"end"))),i.convertChildren(s,i.writer.createPositionAt(c,"end")),c.isEmpty){const u=i.writer.createElement("tableRow");i.writer.insert(u,i.writer.createPositionAt(c,"end")),Us(i.writer,i.writer.createPositionAt(u,"end"))}i.updateConversionResult(c,t)}})}}function GQ(){return n=>{n.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function Vw(n){return e=>{e.on(`element:${n}`,(t,i,{writer:s})=>{if(!i.modelRange)return;const o=i.modelRange.start.nodeAfter,r=s.createPositionAt(o,0);if(i.viewItem.isEmpty){s.insertElement("paragraph",r);return}const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(o,0));for(const c of a)s.move(s.createRangeOn(c),s.createPositionAt(l,"end"))}},{priority:"low"})}}function KQ(n){for(const e of n.getChildren())if(e.is("element","table"))return e}function ZQ(n){let e=0,t;const i=[],s=[];let o;for(const r of Array.from(n.getChildren())){if(r.name!=="tbody"&&r.name!=="thead"&&r.name!=="tfoot")continue;r.name==="thead"&&!o&&(o=r);const a=Array.from(r.getChildren()).filter(l=>l.is("element","tr"));for(const l of a)if(o&&r===o||r.name==="tbody"&&Array.from(l.getChildren()).length&&Array.from(l.getChildren()).every(c=>c.is("element","th")))e++,i.push(l);else{s.push(l);const c=JQ(l);(!t||c<t)&&(t=c)}}return{headingRows:e,headingColumns:t||0,rows:[...i,...s]}}function JQ(n){let e=0,t=0;const i=Array.from(n.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;t<i.length&&i[t].name==="th";){const s=i[t],o=parseInt(s.getAttribute("colspan")||"1");e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ve{constructor(e,t={}){this._jumpedToStartRow=!1,this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const s=e.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const o=parseInt(s.getAttribute("colspan")||"1"),r=parseInt(s.getAttribute("rowspan")||"1");(o>1||r>1)&&this._recordSpans(s,r,o),this._shouldSkipSlot()||(t=this._formatOutValue(s)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new XQ(this,e,t,i)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||i||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,i){const s={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let r=this._column;r<this._column+i;r++)(o!=this._row||r!=this._column)&&this._markSpannedCell(o,r,s)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((i,s)=>i+parseInt(s.getAttribute("colspan")||"1"),0)}}class XQ{constructor(e,t,i,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ow(n,e){return(t,{writer:i})=>{const s=t.getAttribute("headingRows")||0,o=i.createContainerElement("table",null,[]),r=i.createContainerElement("figure",{class:"table"},o);s>0&&i.insert(i.createPositionAt(o,"end"),i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<n.getRows(t)&&i.insert(i.createPositionAt(o,"end"),i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of e.additionalSlots)i.insert(i.createPositionAt(o,a),i.createSlot(l));return i.insert(i.createPositionAt(o,"after"),i.createSlot(a=>a.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:l})=>l(a)))),e.asWidget?QQ(r,i):r}}function YQ(){return(n,{writer:e})=>n.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function Mw(n={}){return(e,{writer:t})=>{const i=e.parent,s=i.parent,o=s.getChildIndex(i),r=new ve(s,{row:o}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let c=null;for(const u of r)if(u.cell==e){const h=u.row<a||u.column<l?"th":"td";c=n.asWidget?wK(t.createEditableElement(h),t):t.createContainerElement(h);break}return c}}function Bw(n={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!yE(e))return null;if(n.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function yE(n){return n.parent.childCount==1&&!eee(n)}function QQ(n,e){return e.setCustomProperty("table",!0,n),Hs(n,e,{hasSelectionHandle:!0})}function eee(n){return!n.getAttributeKeys().next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tee extends Q{refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=nee(t,i)}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),r=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&r&&(e.headingColumns=r),i.change(a=>{const l=s.createTable(a,e);i.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function nee(n,e){const t=n.getFirstPosition().parent,i=t===t.root?t:t.parent;return e.checkChild(i,"table")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nw extends Q{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="above",o=i.getSelectionAffectedTableCells(t),r=i.getRowIndexes(o),a=s?r.first:r.last,l=o[0].findAncestor("table");i.insertRows(l,{at:s?a:a+1,copyStructureFromAbove:!s})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dw extends Q{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="left",o=i.getSelectionAffectedTableCells(t),r=i.getColumnIndexes(o),a=s?r.first:r.last,l=o[0].findAncestor("table");i.insertColumns(l,{columns:1,at:s?a:a+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fw extends Q{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function CE(n,e,t){const{startRow:i,startColumn:s,endRow:o,endColumn:r}=e,a=t.createElement("table"),l=o-i+1;for(let u=0;u<l;u++)t.insertElement("tableRow",a,"end");const c=[...new ve(n,{startRow:i,endRow:o,startColumn:s,endColumn:r,includeAllSlots:!0})];for(const{row:u,column:d,cell:h,isAnchor:f,cellAnchorRow:m,cellAnchorColumn:g}of c){const b=u-i,p=a.getChild(b);if(!f)(m<i||g<s)&&Us(t,t.createPositionAt(p,"end"));else{const w=t.cloneElement(h);t.append(w,p),AE(w,u,d,o,r,t)}}return iee(a,n,i,s,t),a}function kE(n,e,t=0){const i=[],s=new ve(n,{startRow:t,endRow:e-1});for(const o of s){const{row:r,cellHeight:a}=o,l=r+a-1;r<e&&e<=l&&i.push(o)}return i}function EE(n,e,t){const i=n.parent,s=i.parent,o=i.index,r=parseInt(n.getAttribute("rowspan")),a=e-o,l={},c=r-a;c>1&&(l.rowspan=c);const u=parseInt(n.getAttribute("colspan")||"1");u>1&&(l.colspan=u);const d=o,h=d+a,f=[...new ve(s,{startRow:d,endRow:h,includeAllSlots:!0})];let m=null,g;for(const b of f){const{row:p,column:w,cell:E}=b;E===n&&g===void 0&&(g=w),g!==void 0&&g===w&&p===h&&(m=Us(t,b.getPositionBefore(),l))}return qe("rowspan",a,n,t),m}function TE(n,e){const t=[],i=new ve(n);for(const s of i){const{column:o,cellWidth:r}=s,a=o+r-1;o<e&&e<=a&&t.push(s)}return t}function SE(n,e,t,i){const s=parseInt(n.getAttribute("colspan")),o=t-e,r={},a=s-o;a>1&&(r.colspan=a);const l=parseInt(n.getAttribute("rowspan")||"1");l>1&&(r.rowspan=l);const c=Us(i,i.createPositionAfter(n),r);return qe("colspan",o,n,i),c}function AE(n,e,t,i,s,o){const r=parseInt(n.getAttribute("colspan")||"1"),a=parseInt(n.getAttribute("rowspan")||"1");if(t+r-1>s){const u=s-t+1;qe("colspan",u,n,o,1)}if(e+a-1>i){const u=i-e+1;qe("rowspan",u,n,o,1)}}function iee(n,e,t,i,s){const o=parseInt(e.getAttribute("headingRows")||"0");if(o>0){const a=o-t;qe("headingRows",a,n,s,0)}const r=parseInt(e.getAttribute("headingColumns")||"0");if(r>0){const a=r-i;qe("headingColumns",a,n,s,0)}}function pf(n,e){const t=e.getColumns(n),i=new Array(t).fill(0);for(const{column:o}of new ve(n))i[o]++;const s=i.reduce((o,r,a)=>r?o:[...o,a],[]);if(s.length>0){const o=s[s.length-1];return e.removeColumns(n,{at:o}),!0}return!1}function bf(n,e){const t=[],i=e.getRows(n);for(let s=0;s<i;s++)n.getChild(s).isEmpty&&t.push(s);if(t.length>0){const s=t[t.length-1];return e.removeRows(n,{at:s}),!0}return!1}function og(n,e){pf(n,e)||bf(n,e)}function IE(n,e){const t=Array.from(new ve(n,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const s=t[0].cellHeight-1;return e.lastRow+s}function PE(n,e){const t=Array.from(new ve(n,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const s=t[0].cellWidth-1;return e.lastColumn+s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bl extends Q{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],o=this.value,r=this.direction;e.change(a=>{const l=r=="right"||r=="down",c=l?s:o,u=l?o:s,d=u.parent;ree(u,c,a);const h=this.isHorizontal?"colspan":"rowspan",f=parseInt(s.getAttribute(h)||"1"),m=parseInt(o.getAttribute(h)||"1");a.setAttribute(h,f+m,c),a.setSelection(a.createRangeIn(c));const g=this.editor.plugins.get("TableUtils"),b=d.findAncestor("table");og(b,g)})}_getMergeableCell(){const t=this.editor.model.document,i=this.editor.plugins.get("TableUtils"),s=i.getTableCellsContainingSelection(t.selection)[0];if(!s)return;const o=this.isHorizontal?see(s,this.direction,i):oee(s,this.direction,i);if(!o)return;const r=this.isHorizontal?"rowspan":"colspan",a=parseInt(s.getAttribute(r)||"1");if(parseInt(o.getAttribute(r)||"1")===a)return o}}function see(n,e,t){const s=n.parent.parent,o=e=="right"?n.nextSibling:n.previousSibling,r=(s.getAttribute("headingColumns")||0)>0;if(!o)return;const a=e=="right"?n:o,l=e=="right"?o:n,{column:c}=t.getCellLocation(a),{column:u}=t.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||"1"),h=mf(t,a),f=mf(t,l);return r&&h!=f?void 0:c+d===u?o:void 0}function oee(n,e,t){const i=n.parent,s=i.parent,o=s.getChildIndex(i);if(e=="down"&&o===t.getRows(s)-1||e=="up"&&o===0)return null;const r=parseInt(n.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=e=="down"&&o+r===a,c=e=="up"&&o===a;if(a&&(l||c))return null;const u=parseInt(n.getAttribute("rowspan")||"1"),d=e=="down"?o+u:o,h=[...new ve(s,{endRow:d})],m=h.find(b=>b.cell===n).column,g=h.find(({row:b,cellHeight:p,column:w})=>w!==m?!1:e=="down"?b===d:d===b+p);return g&&g.cell?g.cell:null}function ree(n,e,t){zw(n)||(zw(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function zw(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aee extends Q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),r=e.getRows(s)-1,a=e.getRowIndexes(t),l=a.first===0&&a.last===r;this.isEnabled=!l}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),o=i[0],r=o.findAncestor("table"),a=t.getCellLocation(o).column;e.change(l=>{const c=s.last-s.first+1;t.removeRows(r,{at:s.first,rows:c});const u=lee(r,s.first,a,t.getRows(r));l.setSelection(l.createPositionAt(u,0))})}}function lee(n,e,t,i){const s=n.getChild(Math.min(e,i-1));let o=s.getChild(0),r=0;for(const a of s.getChildren()){if(r>t)return o;o=a,r+=parseInt(a.getAttribute("colspan")||"1")}return o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cee extends Q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),o=e.getColumns(s),{first:r,last:a}=e.getColumnIndexes(t);this.isEnabled=a-r<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,i]=dee(this.editor.model.document.selection,e),s=t.parent.parent,o=[...new ve(s)],r={first:o.find(l=>l.cell===t).column,last:o.find(l=>l.cell===i).column},a=uee(o,t,i,r);this.editor.model.change(l=>{const c=r.last-r.first+1;e.removeColumns(s,{at:r.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function uee(n,e,t,i){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:i.first?n.reverse().find(({column:o})=>o<i.first).cell:n.reverse().find(({column:o})=>o>i.last).cell}function dee(n,e){const t=e.getSelectionAffectedTableCells(n),i=t[0],s=t.pop(),o=[i,s];return i.isBefore(s)?o:o.reverse()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hee extends Q{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getRowIndexes(s),l=this.value?r:a+1,c=o.getAttribute("headingRows")||0;i.change(u=>{if(l){const d=l>c?c:0,h=kE(o,l,d);for(const{cell:f}of h)EE(f,l,u)}qe("headingRows",l,o,u,0)})}_isInHeading(e,t){const i=parseInt(t.getAttribute("headingRows")||"0");return!!i&&e.parent.index<i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fee extends Q{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(o=>mf(t,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getColumnIndexes(s),l=this.value?r:a+1;i.change(c=>{if(l){const u=TE(o,l);for(const{cell:d,column:h}of u)SE(d,h,l,c)}qe("headingColumns",l,o,c,0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mee=5,wf=40,gee=2;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pee(n){const e=new Set;for(const t of n.document.differ.getChanges()){let i=null;switch(t.type){case"insert":i=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":i=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!i)continue;const s=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const o of n.createRangeOn(s).getItems())o.is("element","table")&&Ka(o)&&e.add(o)}return e}function bee(n,e){return wf*100/xE(n,e)}function xE(n,e){const t=Hw(n,"tbody",e)||Hw(n,"thead",e),i=e.editing.view.domConverter.mapViewToDom(t);return _f(i)}function Hw(n,e,t){return[...[...t.editing.mapper.toViewElement(n).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",e))}function _f(n){const e=Ee.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function wee(n,e){const t=e.getCellLocation(n).column,i=n.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+i-1}}function Rt(n){const e=Math.pow(10,gee),t=typeof n=="number"?n:parseFloat(n);return Math.round(t*e)/e}function _ee(n,e,t){return n<=e?Rt(e):n>=t?Rt(t):Rt(n)}function vee(n,e){return Array(n).fill(e)}function Ea(n){return n.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function rg(n){const e=n.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let t=yee(e);const i=Ea(t);return i!==100&&(t=t.map(s=>Rt(s*100/i)).map((s,o,r)=>{if(!(o===r.length-1))return s;const l=Ea(r);return Rt(s+100-l)})),t.map(s=>s+"%")}function yee(n){const e=n.filter(s=>s==="auto").length;if(e===0)return n.map(s=>Rt(s));const t=Ea(n),i=Math.max((100-t)/e,mee);return n.map(s=>s==="auto"?i:s).map(s=>Rt(s))}function Cee(n){const e=Ee.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function RE(n,e,t,i){for(let s=0;s<Math.max(t.length,n.length);s++){const o=n[s],r=t[s];r?o?i.setAttribute("columnWidth",r,o):i.appendElement("tableColumn",{columnWidth:r},e):i.remove(o)}}function Ka(n){if(n.is("element","tableColumnGroup"))return n;const e=n.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Za(n){const e=Ka(n);return e?Array.from(e.getChildren()):[]}function kee(n){return Za(n).map(e=>e.getAttribute("columnWidth"))}function Eee(n,e){return Za(n).reduce((i,s)=>{const o=s.getAttribute("columnWidth"),r=s.getAttribute("colSpan");if(!r)return i.push(o),i;for(let a=0;a<r;a++)i.push(o);return e.removeAttribute("colSpan",s),i},[])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ut extends I{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,s=i.getChildIndex(t),o=new ve(i,{row:s});for(const{cell:r,row:a,column:l}of o)if(r===e)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(e,t){const i=e.createElement("table"),s=t.rows||2,o=t.columns||2;return Dd(e,i,0,s,o),t.headingRows&&qe("headingRows",Math.min(t.headingRows,s),i,e,0),t.headingColumns&&qe("headingColumns",Math.min(t.headingColumns,o),i,e,0),i}insertRows(e,t={}){const i=this.editor.model,s=t.at||0,o=t.rows||1,r=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?s-1:s,l=this.getRows(e),c=this.getColumns(e);if(s>l)throw new v("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(u=>{const d=e.getAttribute("headingRows")||0;if(d>s&&qe("headingRows",d+o,e,u,0),!r&&(s===0||s===l)){Dd(u,e,s,o,c);return}const h=r?Math.max(s,a):s,f=new ve(e,{endRow:h}),m=new Array(c).fill(1);for(const{row:g,column:b,cellHeight:p,cellWidth:w,cell:E}of f){const C=g+p-1,T=g<s&&s<=C,k=g<=a&&a<=C;T?(u.setAttribute("rowspan",p+o,E),m[b]=-w):r&&k&&(m[b]=w)}for(let g=0;g<o;g++){const b=u.createElement("tableRow");u.insert(b,e,s);for(let p=0;p<m.length;p++){const w=m[p],E=u.createPositionAt(b,"end");w>0&&Us(u,E,w>1?{colspan:w}:void 0),p+=Math.abs(w)-1}}})}insertColumns(e,t={}){const i=this.editor.model,s=t.at||0,o=t.columns||1;i.change(r=>{const a=e.getAttribute("headingColumns");s<a&&r.setAttribute("headingColumns",a+o,e);const l=this.getColumns(e);if(s===0||l===s){for(const u of e.getChildren())u.is("element","tableRow")&&fo(o,r,r.createPositionAt(u,s?"end":0));return}const c=new ve(e,{column:s,includeAllSlots:!0});for(const u of c){const{row:d,cell:h,cellAnchorColumn:f,cellAnchorRow:m,cellWidth:g,cellHeight:b}=u;if(f<s){r.setAttribute("colspan",g+o,h);const p=m+b-1;for(let w=d;w<=p;w++)c.skipRow(w)}else fo(o,r,u.getPositionBefore())}})}removeRows(e,t){const i=this.editor.model,s=t.rows||1,o=this.getRows(e),r=t.at,a=r+s-1;if(a>o-1)throw new v("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(l=>{const c={first:r,last:a},{cellsToMove:u,cellsToTrim:d}=Aee(e,c);if(u.size){const h=a+1;Iee(e,h,u,l)}for(let h=a;h>=r;h--)l.remove(e.getChild(h));for(const{rowspan:h,cell:f}of d)qe("rowspan",h,f,l);See(e,c,l),pf(e,this)||bf(e,this)})}removeColumns(e,t){const i=this.editor.model,s=t.at,o=t.columns||1,r=t.at+o-1;i.change(a=>{Tee(e,{first:s,last:r},a);const l=Za(e);for(let c=r;c>=s;c--){for(const{cell:u,column:d,cellWidth:h}of[...new ve(e)])d<=c&&h>1&&d+h>c?qe("colspan",h-1,u,a):d===c&&a.remove(u);if(l[c]){const u=c===0?l[1]:l[c-1],d=parseFloat(l[c].getAttribute("columnWidth")),h=parseFloat(u.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",d+h+"%",u)}}bf(e,this)||pf(e,this)})}splitCellVertically(e,t=2){const i=this.editor.model,o=e.parent.parent,r=parseInt(e.getAttribute("rowspan")||"1"),a=parseInt(e.getAttribute("colspan")||"1");i.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:u}=$w(a,t);qe("colspan",u,e,l);const d={};c>1&&(d.colspan=c),r>1&&(d.rowspan=r);const h=a>t?t-1:a-1;fo(h,l,l.createPositionAfter(e),d)}if(a<t){const c=t-a,u=[...new ve(o)],{column:d}=u.find(({cell:g})=>g===e),h=u.filter(({cell:g,cellWidth:b,column:p})=>{const w=g!==e&&p===d,E=p<d&&p+b>d;return w||E});for(const{cell:g,cellWidth:b}of h)l.setAttribute("colspan",b+c,g);const f={};r>1&&(f.rowspan=r),fo(c,l,l.createPositionAfter(e),f);const m=o.getAttribute("headingColumns")||0;m>d&&qe("headingColumns",m+c,o,l)}})}splitCellHorizontally(e,t=2){const i=this.editor.model,s=e.parent,o=s.parent,r=o.getChildIndex(s),a=parseInt(e.getAttribute("rowspan")||"1"),l=parseInt(e.getAttribute("colspan")||"1");i.change(c=>{if(a>1){const u=[...new ve(o,{startRow:r,endRow:r+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:h}=$w(a,t);qe("rowspan",h,e,c);const{column:f}=u.find(({cell:g})=>g===e),m={};d>1&&(m.rowspan=d),l>1&&(m.colspan=l);for(const g of u){const{column:b,row:p}=g,w=p>=r+h,E=b===f,C=(p+r+h)%d===0;w&&E&&C&&fo(1,c,g.getPositionBefore(),m)}}if(a<t){const u=t-a,d=[...new ve(o,{startRow:0,endRow:r})];for(const{cell:m,cellHeight:g,row:b}of d)if(m!==e&&b+g>r){const p=g+u;c.setAttribute("rowspan",p,m)}const h={};l>1&&(h.colspan=l),Dd(c,o,r+1,u,1,h);const f=o.getAttribute("headingRows")||0;f>r&&qe("headingRows",f+u,o,c)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(i=>i.is("element","tableCell")).reduce((i,s)=>{const o=parseInt(s.getAttribute("colspan")||"1");return i+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,i)=>i.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new ve(e,t)}getSelectedTableCells(e){const t=[];for(const i of this.sortRanges(e.getRanges())){const s=i.getContainedElement();s&&s.is("element","tableCell")&&t.push(s)}return t}getTableCellsContainingSelection(e){const t=[];for(const i of e.getRanges()){const s=i.start.findAncestor("tableCell");s&&t.push(s)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(i=>i.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),s=[...new ve(t)].filter(o=>e.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,i=new Set;let s=0;for(const r of e){const{row:a,column:l}=this.getCellLocation(r),c=parseInt(r.getAttribute("rowspan"))||1,u=parseInt(r.getAttribute("colspan"))||1;t.add(a),i.add(l),c>1&&t.add(a+c-1),u>1&&i.add(l+u-1),s+=c*u}return xee(t,i)==s}sortRanges(e){return Array.from(e).sort(Pee)}_getFirstLastIndexesObject(e){const t=e.sort((o,r)=>o-r),i=t[0],s=t[t.length-1];return{first:i,last:s}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),i=this.getRowIndexes(e),s=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,s))return!1;const o=this.getColumnIndexes(e),r=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:e,last:t},i){const s=e<i,o=t<i;return s===o}}function Dd(n,e,t,i,s,o={}){for(let r=0;r<i;r++){const a=n.createElement("tableRow");n.insert(a,e,t),fo(s,n,n.createPositionAt(a,"end"),o)}}function fo(n,e,t,i={}){for(let s=0;s<n;s++)Us(e,t,i)}function $w(n,e){if(n<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(n/e),i=n-t*e+t;return{newCellsSpan:t,updatedSpan:i}}function Tee(n,e,t){const i=n.getAttribute("headingColumns")||0;if(i&&e.first<i){const s=Math.min(i-1,e.last)-e.first+1;t.setAttribute("headingColumns",i-s,n)}}function See(n,{first:e,last:t},i){const s=n.getAttribute("headingRows")||0;if(e<s){const o=t<s?s-(t-e+1):e;qe("headingRows",o,n,i,0)}}function Aee(n,{first:e,last:t}){const i=new Map,s=[];for(const{row:o,column:r,cellHeight:a,cell:l}of new ve(n,{endRow:t})){const c=o+a-1;if(o>=e&&o<=t&&c>t){const h=t-o+1,f=a-h;i.set(r,{cell:l,rowspan:f})}if(o<e&&c>=e){let h;c>=t?h=t-e+1:h=c-e+1,s.push({cell:l,rowspan:a-h})}}return{cellsToMove:i,cellsToTrim:s}}function Iee(n,e,t,i){const o=[...new ve(n,{includeAllSlots:!0,row:e})],r=n.getChild(e);let a;for(const{column:l,cell:c,isAnchor:u}of o)if(t.has(l)){const{cell:d,rowspan:h}=t.get(l),f=a?i.createPositionAfter(a):i.createPositionAt(r,0);i.move(i.createRangeOn(d),f),qe("rowspan",h,d,i),a=d}else u&&(a=c)}function Pee(n,e){const t=n.start,i=e.start;return t.isBefore(i)?-1:1}function xee(n,e){const t=Array.from(n.values()),i=Array.from(e.values()),s=Math.max(...t),o=Math.min(...t),r=Math.max(...i),a=Math.min(...i);return(s-o+1)*(r-a+1)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ree extends Q{refresh(){const e=this.editor.plugins.get(ut),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(ut);e.change(i=>{const s=t.getSelectedTableCells(e.document.selection),o=s.shift(),{mergeWidth:r,mergeHeight:a}=Vee(o,s,t);qe("colspan",r,o,i),qe("rowspan",a,o,i);for(const c of s)Lee(c,o,i);const l=o.findAncestor("table");og(l,t),i.setSelection(o,"in")})}}function Lee(n,e,t){Uw(n)||(Uw(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function Uw(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function Vee(n,e,t){let i=0,s=0;for(const c of e){const{row:u,column:d}=t.getCellLocation(c);i=Ww(c,d,i,"colspan"),s=Ww(c,u,s,"rowspan")}const{row:o,column:r}=t.getCellLocation(n),a=i-r,l=s-o;return{mergeWidth:a,mergeHeight:l}}function Ww(n,e,t,i){const s=parseInt(n.getAttribute(i)||"1");return Math.max(t,e+s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oee extends Q{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),o=i[0].findAncestor("table"),r=[];for(let a=s.first;a<=s.last;a++)for(const l of o.getChild(a).getChildren())r.push(e.createRangeOn(l));e.change(a=>{a.setSelection(r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mee extends Q{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),s=i[0],o=i.pop(),r=s.findAncestor("table"),a=e.getCellLocation(s),l=e.getCellLocation(o),c=Math.min(a.column,l.column),u=Math.max(a.column,l.column),d=[];for(const h of new ve(r,{startColumn:c,endColumn:u}))d.push(t.createRangeOn(h.cell));t.change(h=>{h.setSelection(d)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bee(n){n.document.registerPostFixer(e=>Nee(e,n))}function Nee(n,e){const t=e.document.differ.getChanges();let i=!1;const s=new Set;for(const o of t){let r=null;o.type=="insert"&&o.name=="table"&&(r=o.position.nodeAfter),(o.type=="insert"||o.type=="remove")&&(o.name=="tableRow"||o.name=="tableCell")&&(r=o.position.findAncestor("table")),$ee(o)&&(r=o.range.start.findAncestor("table")),r&&!s.has(r)&&(i=Dee(r,n)||i,i=Fee(r,n)||i,s.add(r))}return i}function Dee(n,e){let t=!1;const i=zee(n);if(i.length){t=!0;for(const s of i)qe("rowspan",s.rowspan,s.cell,e,1)}return t}function Fee(n,e){let t=!1;const i=Hee(n),s=[];for(const[l,c]of i.entries())!c&&n.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){t=!0;for(const l of s.reverse())e.remove(n.getChild(l)),i.splice(l,1)}const o=i.filter((l,c)=>n.getChild(c).is("element","tableRow")),r=o[0];if(!o.every(l=>l===r)){const l=o.reduce((c,u)=>u>c?u:c,0);for(const[c,u]of o.entries()){const d=l-u;if(d){for(let h=0;h<d;h++)Us(e,e.createPositionAt(n.getChild(c),"end"));t=!0}}}return t}function zee(n){const e=parseInt(n.getAttribute("headingRows")||"0"),t=Array.from(n.getChildren()).reduce((s,o)=>o.is("element","tableRow")?s+1:s,0),i=[];for(const{row:s,cell:o,cellHeight:r}of new ve(n)){if(r<2)continue;const l=s<e?e:t;if(s+r>l){const c=l-s;i.push({cell:o,rowspan:c})}}return i}function Hee(n){const e=new Array(n.childCount).fill(0);for(const{rowIndex:t}of new ve(n,{includeAllSlots:!0}))e[t]++;return e}function $ee(n){if(n.type!=="attribute")return!1;const e=n.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Uee(n){n.document.registerPostFixer(e=>Wee(e,n))}function Wee(n,e){const t=e.document.differ.getChanges();let i=!1;for(const s of t)s.type=="insert"&&s.name=="table"&&(i=jee(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableRow"&&(i=LE(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableCell"&&(i=vf(s.position.nodeAfter,n)||i),(s.type=="remove"||s.type=="insert")&&qee(s)&&(i=vf(s.position.parent,n)||i);return i}function jee(n,e){let t=!1;for(const i of n.getChildren())i.is("element","tableRow")&&(t=LE(i,e)||t);return t}function LE(n,e){let t=!1;for(const i of n.getChildren())t=vf(i,e)||t;return t}function vf(n,e){if(n.childCount==0)return e.insertElement("paragraph",n),!0;const t=Array.from(n.getChildren()).filter(i=>i.is("$text"));for(const i of t)e.wrap(e.createRangeOn(i),"paragraph");return!!t.length}function qee(n){return n.position.parent.is("element","tableCell")?n.type=="insert"&&n.name=="$text"||n.type=="remove":!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gee(n,e){const t=n.document.differ;for(const i of t.getChanges()){let s,o=!1;if(i.type=="attribute"){const c=i.range.start.nodeAfter;if(!c||!c.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;s=c,o=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(s=i.position.findAncestor("table"),o=i.name=="tableRow");if(!s)continue;const r=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new ve(s);for(const c of l){const d=c.row<r||c.column<a?"th":"td",h=e.mapper.toViewElement(c.cell);h&&h.is("element")&&h.name!=d&&e.reconvertItem(o?c.cell.parent:c.cell)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kee(n,e){const t=n.document.differ,i=new Set;for(const s of t.getChanges()){const o=s.type=="attribute"?s.range.start.parent:s.position.parent;o.is("element","tableCell")&&i.add(o)}for(const s of i.values()){const o=Array.from(s.getChildren()).filter(r=>Zee(r,e.mapper));for(const r of o)e.reconvertItem(r)}}function Zee(n,e){if(!n.is("element","paragraph"))return!1;const t=e.toViewElement(n);return t?yE(n)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ja extends I{static get pluginName(){return"TableEditing"}static get requires(){return[ut]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,i=t.schema,s=e.conversion,o=e.plugins.get(ut);i.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(jQ()),s.for("upcast").add(qQ()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ow(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ow(o,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(GQ()),s.for("downcast").elementToElement({model:"tableRow",view:YQ()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(Vw("td")),s.for("upcast").add(Vw("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:Mw({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:Mw()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:Bw({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:Bw(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:jw("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:jw("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new tee(e)),e.commands.add("insertTableRowAbove",new Nw(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Nw(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Dw(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Dw(e,{order:"right"})),e.commands.add("removeTableRow",new aee(e)),e.commands.add("removeTableColumn",new cee(e)),e.commands.add("splitTableCellVertically",new Fw(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Fw(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Ree(e)),e.commands.add("mergeTableCellRight",new Bl(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Bl(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Bl(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Bl(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new fee(e)),e.commands.add("setTableRowHeader",new hee(e)),e.commands.add("selectTableRow",new Oee(e)),e.commands.add("selectTableColumn",new Mee(e)),Bee(t),Uee(t),this.listenTo(t.document,"change:data",()=>{Gee(t,e.editing),Kee(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function jw(n){return e=>{const t=parseInt(e.getAttribute(n));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qw extends U{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ue,this.focusTracker=new Oe,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(i,s)=>`${s} × ${i}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(i=>{i.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(i,s)=>{const{row:o,column:r}=s.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(r,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(i,s,o)=>{if(!o)return;const{row:r,column:a}=o.dataset;this.set({rows:parseInt(r),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),im({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((i,s)=>{const o=Math.floor(s/10),r=s%10,a=o<e&&r<t;i.set("isOn",a)})}_createGridButton(e,t,i,s){const o=new X(e);return o.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":i}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const i=Math.floor(t/10),s=t%10,o=`${i+1} × ${s+1}`;e.push(this._createGridButton(this.locale,i+1,s+1,o))}return this.createCollection(e)}}const Jee='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',Xee='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',Yee='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qee extends I{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,s=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const r=e.commands.get("insertTable"),a=wt(o);a.bind("isEnabled").to(r),a.buttonView.set({icon:j.table,label:t("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new qw(o),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()}))}),a}),e.ui.componentFactory.add("menuBar:insertTable",o=>{const r=e.commands.get("insertTable"),a=new vn(o),l=new qw(o);return l.delegate("execute").to(a),a.on("change:isOpen",(c,u,d)=>{d||l.reset()}),l.on("execute",()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()}),a.buttonView.set({label:t("Table"),icon:j.table}),a.panelView.children.add(l),a.bind("isEnabled").to(r),a}),e.ui.componentFactory.add("tableColumn",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),Jee,r,o)}),e.ui.componentFactory.add("tableRow",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),Xee,r,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),Yee,r,o)})}_prepareDropdown(e,t,i,s){const o=this.editor,r=wt(s),a=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(r,"execute",l=>{o.execute(l.source.commandName),l.source instanceof Ha||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(e,t,i,s){const o=this.editor,r=wt(s,ir),a="mergeTableCells",l=o.commands.get(a),c=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([l,...c],"isEnabled",(...u)=>u.some(d=>d)),this.listenTo(r.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(r,"execute",u=>{o.execute(u.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(e,t){const i=this.editor,s=[],o=new Et;for(const r of t)ete(r,i,s,o);return Ds(e,o),s}}function ete(n,e,t,i){if(n.type==="button"||n.type==="switchbutton"){const s=n.model=new sr(n.model),{commandName:o,bindIsOn:r}=n.model,a=e.commands.get(o);t.push(a),s.set({commandName:o}),s.bind("isEnabled").to(a),r&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}i.add(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cs extends I{static get pluginName(){return"TableSelection"}static get requires(){return[ut,ut]}init(){const e=this.editor,t=e.model,i=e.editing.view;this.listenTo(t,"deleteContent",(s,o)=>this._handleDeleteContent(s,o),{priority:"high"}),this.listenTo(i.document,"insertText",(s,o)=>this._handleInsertTextEvent(s,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(ut),t=this.editor.model.document.selection,i=e.getSelectedTableCells(t);return i.length==0?null:i}getSelectionAsFragment(){const e=this.editor.plugins.get(ut),t=this.getSelectedTableCells();return t?this.editor.model.change(i=>{const s=i.createDocumentFragment(),{first:o,last:r}=e.getColumnIndexes(t),{first:a,last:l}=e.getRowIndexes(t),c=t[0].findAncestor("table");let u=l,d=r;if(e.isSelectionRectangular(t)){const m={firstColumn:o,lastColumn:r,firstRow:a,lastRow:l};u=IE(c,m),d=PE(c,m)}const f=CE(c,{startRow:a,startColumn:o,endRow:u,endColumn:d},i);return i.insert(f,s,0),s}):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change(s=>{s.setSelection(i.cells.map(o=>s.createRangeOn(o)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const e=this.editor.model.document.selection,i=$e(e.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(s=>s.on("selection",(o,r,a)=>{const l=a.writer;i(l);const c=this.getSelectedTableCells();if(!c)return;for(const d of c){const h=a.mapper.toViewElement(d);l.addClass("ck-editor__editable_selected",h),t.add(h)}const u=a.mapper.toViewElement(c[c.length-1]);l.setSelection(u,0)},{priority:"lowest"}));function i(s){for(const o of t)s.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(i=>{const s=i.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(s);i.setSelection(o)})}})}_handleDeleteContent(e,t){const i=this.editor.plugins.get(ut),s=t[0],o=t[1],r=this.editor.model,a=!o||o.direction=="backward",l=i.getSelectedTableCells(s);l.length&&(e.stop(),r.change(c=>{const u=l[a?l.length-1:0];r.change(h=>{for(const f of l)r.deleteContent(h.createSelection(f,"in"))});const d=r.schema.getNearestSelectionRange(c.createPositionAt(u,0));s.is("documentSelection")?c.setSelection(d):s.setTo(d)}))}_handleInsertTextEvent(e,t){const i=this.editor,s=this.getSelectedTableCells();if(!s)return;const o=i.editing.view,r=i.editing.mapper,a=s.map(l=>o.createRangeOn(r.toViewElement(l)));t.selection=o.createSelection(a)}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),s=i.getCellLocation(e),o=i.getCellLocation(t),r=Math.min(s.row,o.row),a=Math.max(s.row,o.row),l=Math.min(s.column,o.column),c=Math.max(s.column,o.column),u=new Array(a-r+1).fill(null).map(()=>[]),d={startRow:r,endRow:a,startColumn:l,endColumn:c};for(const{row:m,cell:g}of new ve(e.findAncestor("table"),d))u[m-r].push(g);const h=o.row<s.row,f=o.column<s.column;return h&&u.reverse(),f&&u.forEach(m=>m.reverse()),{cells:u.flat(),backward:h||f}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tte extends I{static get pluginName(){return"TableClipboard"}static get requires(){return[jr,Yn,Cs,ut]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(i,s)=>this._onCopyCut(i,s)),this.listenTo(t,"cut",(i,s)=>this._onCopyCut(i,s)),this.listenTo(e.model,"insertContent",(i,[s,o])=>this._onInsertContent(i,s,o),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const i=this.editor.editing.view,s=this.editor.plugins.get(Cs),o=this.editor.plugins.get(jr);s.getSelectedTableCells()&&(e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const r=o._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(r),method:e.name})})))}_onInsertContent(e,t,i){if(i&&!i.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(ut),r=this.editor.plugins.get(jr),a=this.getTableIfOnlyTableInContent(t,s);if(!a)return;const l=o.getSelectionAffectedTableCells(s.document.selection);if(!l.length){og(a,o);return}e.stop(),t.is("documentFragment")?r._pasteMarkersIntoTransformedElement(t.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})}_replaceSelectedCells(e,t,i){const s=this.editor.plugins.get(ut),o={width:s.getColumns(e),height:s.getRows(e)},r=nte(t,o,i,s),a=r.lastRow-r.firstRow+1,l=r.lastColumn-r.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,o.height)-1,endColumn:Math.min(l,o.width)-1};e=CE(e,c,i);const u=t[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(e,o,u,r,i);if(this.editor.plugins.get("TableSelection").isEnabled){const h=s.sortRanges(d.map(f=>i.createRangeOn(f)));i.setSelection(h)}else i.setSelection(d[0],0);return u}_replaceSelectedCellsWithPasted(e,t,i,s,o){const{width:r,height:a}=t,l=ste(e,r,a),c=[...new ve(i,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],u=[];let d;for(const b of c){const{row:p,column:w}=b;w===s.firstColumn&&(d=b.getPositionBefore());const E=p-s.firstRow,C=w-s.firstColumn,T=l[E%a][C%r],k=T?o.cloneElement(T):null,S=this._replaceTableSlotCell(b,k,d,o);S&&(AE(S,p,w,s.lastRow,s.lastColumn,o),u.push(S),d=o.createPositionAfter(S))}const h=parseInt(i.getAttribute("headingRows")||"0"),f=parseInt(i.getAttribute("headingColumns")||"0"),m=s.firstRow<h&&h<=s.lastRow,g=s.firstColumn<f&&f<=s.lastColumn;if(m){const b={first:s.firstColumn,last:s.lastColumn},p=yf(i,h,b,o,s.firstRow);u.push(...p)}if(g){const b={first:s.firstRow,last:s.lastRow},p=Cf(i,f,b,o);u.push(...p)}return u}_replaceTableSlotCell(e,t,i,s){const{cell:o,isAnchor:r}=e;return r&&s.remove(o),t?(s.insert(t,i),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const i=t.createRangeIn(e);for(const s of i.getItems())if(s.is("element","table")){const o=t.createRange(i.start,t.createPositionBefore(s));if(t.hasContent(o,{ignoreWhitespaces:!0}))return null;const r=t.createRange(t.createPositionAfter(s),i.end);return t.hasContent(r,{ignoreWhitespaces:!0})?null:s}return null}}function nte(n,e,t,i){const s=n[0].findAncestor("table"),o=i.getColumnIndexes(n),r=i.getRowIndexes(n),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},l=n.length===1;return l&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,ite(s,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(n)?ote(s,a,t):(a.lastRow=IE(s,a),a.lastColumn=PE(s,a)),a}function ite(n,e,t,i){const s=i.getColumns(n),o=i.getRows(n);t>s&&i.insertColumns(n,{at:s,columns:t-s}),e>o&&i.insertRows(n,{at:o,rows:e-o})}function ste(n,e,t){const i=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:s,row:o,cell:r}of new ve(n))i[o][s]=r;return i}function ote(n,e,t){const{firstRow:i,lastRow:s,firstColumn:o,lastColumn:r}=e,a={first:i,last:s},l={first:o,last:r};Cf(n,o,a,t),Cf(n,r+1,a,t),yf(n,i,l,t),yf(n,s+1,l,t,i)}function yf(n,e,t,i,s=0){return e<1?void 0:kE(n,e,s).filter(({column:a,cellWidth:l})=>VE(a,l,t)).map(({cell:a})=>EE(a,e,i))}function Cf(n,e,t,i){return e<1?void 0:TE(n,e).filter(({row:r,cellHeight:a})=>VE(r,a,t)).map(({cell:r,column:a})=>SE(r,a,e,i))}function VE(n,e,t){const i=n+e-1,{first:s,last:o}=t,r=n>=s&&n<=o,a=n<s&&i>=s;return r||a}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rte extends I{static get pluginName(){return"TableKeyboard"}static get requires(){return[Cs,ut]}init(){const e=this.editor,i=e.editing.view.document,s=e.t;this.listenTo(i,"arrowKey",(...o)=>this._onArrowKey(...o),{context:"table"}),this.listenTo(i,"tab",(...o)=>this._handleTabOnSelectedTable(...o),{context:"figure"}),this.listenTo(i,"tab",(...o)=>this._handleTab(...o),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const i=this.editor,o=i.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),i.model.change(r=>{r.setSelection(r.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(e,t){const i=this.editor,s=this.editor.plugins.get(ut),o=this.editor.plugins.get("TableSelection"),r=i.model.document.selection,a=!t.shiftKey;let l=s.getTableCellsContainingSelection(r)[0];if(l||(l=o.getFocusCell()),!l)return;t.preventDefault(),t.stopPropagation(),e.stop();const c=l.parent,u=c.parent,d=u.getChildIndex(c),h=c.getChildIndex(l),f=h===0;if(!a&&f&&d===0){i.model.change(p=>{p.setSelection(p.createRangeOn(u))});return}const m=h===c.childCount-1,g=d===s.getRows(u)-1;if(a&&g&&m&&(i.execute("insertTableRowBelow"),d===s.getRows(u)-1)){i.model.change(p=>{p.setSelection(p.createRangeOn(u))});return}let b;if(a&&m)b=u.getChild(d+1).getChild(0);else if(!a&&f){const p=u.getChild(d-1);b=p.getChild(p.childCount-1)}else b=c.getChild(h+(a?1:-1));i.model.change(p=>{p.setSelection(p.createRangeIn(b))})}_onArrowKey(e,t){const i=this.editor,s=t.keyCode,o=vm(s,i.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.plugins.get(ut),s=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,a=["right","down"].includes(e),l=i.getSelectedTableCells(r);if(l.length){let u;return t?u=s.getFocusCell():u=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(u,e,t),!0}const c=r.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!r.isCollapsed)if(t){if(r.isBackward==a&&!r.containsEntireContent(c))return!1}else{const u=r.getSelectedElement();if(!u||!o.schema.isObject(u))return!1}return this._isSelectionAtCellEdge(r,c,a)?(this._navigateFromCellInDirection(c,e,t),!0):!1}_isSelectionAtCellEdge(e,t,i){const s=this.editor.model,o=this.editor.model.schema,r=i?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return s.createPositionAt(t,i?"end":0).isTouching(r);const a=s.createSelection(r);return s.modifySelection(a,{direction:i?"forward":"backward"}),r.isEqual(a.focus)}_navigateFromCellInDirection(e,t,i=!1){const s=this.editor.model,o=e.findAncestor("table"),r=[...new ve(o,{includeAllSlots:!0})],{row:a,column:l}=r[r.length-1],c=r.find(({cell:w})=>w==e);let{row:u,column:d}=c;switch(t){case"left":d--;break;case"up":u--;break;case"right":d+=c.cellWidth;break;case"down":u+=c.cellHeight;break}const h=u<0||u>a,f=d<0&&u<=0,m=d>l&&u>=a;if(h||f||m){s.change(w=>{w.setSelection(w.createRangeOn(o))});return}d<0?(d=i?0:l,u--):d>l&&(d=i?l:0,u++);const g=r.find(w=>w.row==u&&w.column==d).cell,b=["right","down"].includes(t),p=this.editor.plugins.get("TableSelection");if(i&&p.isEnabled){const w=p.getAnchorCell()||e;p.setCellSelection(w,g)}else{const w=s.createPositionAt(g,b?0:"end");s.change(E=>{E.setSelection(w)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OE extends is{constructor(){super(...arguments),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ate extends I{static get pluginName(){return"TableMouse"}static get requires(){return[Cs,ut]}init(){this.editor.editing.view.addObserver(OE),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(ut);let i=!1;const s=e.plugins.get(Cs);this.listenTo(e.editing.view.document,"mousedown",(o,r)=>{const a=e.model.document.selection;if(!this.isEnabled||!s.isEnabled||!r.domEvent.shiftKey)return;const l=s.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(r);c&&Gw(l,c)&&(i=!0,s.setCellSelection(l,c),r.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{i&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,i,s=!1,o=!1;const r=e.plugins.get(Cs);this.listenTo(e.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!r.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(l))}),this.listenTo(e.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!t)return;const c=this._getModelTableCellFromDomEvent(l);c&&Gw(t,c)&&(i=c,!s&&i!=t&&(s=!0)),s&&(o=!0,r.setCellSelection(t,i),l.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{s=!1,o=!1,t=null,i=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function Gw(n,e){return n.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lte extends I{static get requires(){return[Ja,Qee,Cs,ate,rte,tte,os]}static get pluginName(){return"Table"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ME(n){const e=BE(n);return e||Pu(n)}function BE(n){const e=n.getSelectedElement();return e&&NE(e)?e:null}function Pu(n){const e=n.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&NE(t))return t;t=t.parent}return null}function NE(n){return!!n.getCustomProperty("table")&&Ge(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cte extends I{static get requires(){return[Ho]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Ho),s=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");s&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:s,getRelatedElement:Pu}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:BE})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ute extends U{constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new Oe,this._focusables=new ht,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Ue,this._stillTyping=!1,this.focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(i,s,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,i=this.bindTemplate,s=this._createColorSelector(e),o=wt(e),r=new U;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:i.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",i.if("value","ck-hidden",a=>a!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(r),o.buttonView.label=t("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(s),o.bind("isEnabled").to(this,"isReadOnly",a=>!a),o.on("change:isOpen",(a,l,c)=>{c&&(s.updateSelectedColors(),s.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,t=new zk(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const i=t.element.value,s=this.options.colorDefinitions.find(o=>i===o.label);this._stillTyping=!0,this.value=s&&s.color||i}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createColorSelector(e){const t=e.t,i=this.options.defaultColorValue||"",s=t(i?"Restore default":"Remove color"),o=new $m(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:s,colorPickerLabel:t("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(a,l)=>{if(l.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=l.value||i,this.fire("input"),l.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let r=this.value;return o.on("colorPicker:cancel",()=>{this.value=r,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{r=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const t=Kw(e),i=this.options.colorDefinitions.find(s=>t===Kw(s.color));i?this.inputView.value=i.label:this.inputView.value=e||""}}}function Kw(n){return n.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ag=n=>n==="";function lg(n){return{none:n("None"),solid:n("Solid"),dotted:n("Dotted"),dashed:n("Dashed"),double:n("Double"),groove:n("Groove"),ridge:n("Ridge"),inset:n("Inset"),outset:n("Outset")}}function DE(n){return n('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function FE(n){return n('The value is invalid. Try "10px" or "2em" or simply "2".')}function Mc(n){return n=n.trim().toLowerCase(),ag(n)||yk(n)}function Gr(n){return n=n.trim(),ag(n)||$E(n)||wu(n)||Ck(n)}function zE(n){return n=n.trim(),ag(n)||$E(n)||wu(n)}function HE(n,e){const t=new Et,i=lg(n.t);for(const s in i){const o={type:"button",model:new sr({_borderStyleValue:s,label:i[s],role:"menuitemradio",withText:!0})};s==="none"?o.model.bind("isOn").to(n,"borderStyle",r=>e==="none"?!r:r===s):o.model.bind("isOn").to(n,"borderStyle",r=>r===s),t.add(o)}return t}function kf(n){const{view:e,icons:t,toolbar:i,labels:s,propertyName:o,nameToValue:r,defaultValue:a}=n;for(const l in s){const c=new X(e.locale);c.set({label:s[l],icon:t[l],tooltip:s[l]});const u=r?r(l):l;c.bind("isOn").to(e,o,d=>{let h=d;return d===""&&a&&(h=a),u===h}),c.on("execute",()=>{e[o]=u}),i.items.add(c)}}const Bc=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Nc(n){return(e,t,i)=>{const s=new ute(e.locale,{colorDefinitions:dte(n.colorConfig),columns:n.columns,defaultColorValue:n.defaultColorValue,colorPickerConfig:n.colorPickerConfig});return s.inputView.set({id:t,ariaDescribedById:i}),s.bind("isReadOnly").to(e,"isEnabled",o=>!o),s.bind("hasError").to(e,"errorText",o=>!!o),s.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(s),s}}function $E(n){const e=parseFloat(n);return!Number.isNaN(e)&&n===String(e)}function dte(n){return n.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hn extends U{constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("class",t.class||null),this.children=this.createCollection(),t.children&&t.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",i.to("class")],role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zw={left:j.alignLeft,center:j.alignCenter,right:j.alignRight,justify:j.alignJustify,top:j.alignTop,middle:j.alignMiddle,bottom:j.alignBottom};class hte extends U{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:l}=this._createBackgroundFields(),{widthInput:c,operatorLabel:u,heightInput:d,dimensionsLabel:h}=this._createDimensionFields(),{horizontalAlignmentToolbar:f,verticalAlignmentToolbar:m,alignmentLabel:g}=this._createAlignmentFields();this.focusTracker=new Oe,this.keystrokes=new Ue,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=l,this.paddingInput=this._createPaddingField(),this.widthInput=c,this.heightInput=d,this.horizontalAlignmentToolbar=f,this.verticalAlignmentToolbar=m;const{saveButtonView:b,cancelButtonView:p}=this._createActionButtons();this.saveButtonView=b,this.cancelButtonView=p,this._focusables=new ht,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Um(e,{label:this.t("Cell properties")})),this.children.add(new hn(e,{labelView:r,children:[r,i,o,s],class:"ck-table-form__border-row"})),this.children.add(new hn(e,{labelView:a,children:[a,l],class:"ck-table-form__background-row"})),this.children.add(new hn(e,{children:[new hn(e,{labelView:h,children:[h,c,u,d],class:"ck-table-form__dimensions-row"}),new hn(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new hn(e,{labelView:g,children:[g,f,m],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new hn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Jo({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{e.fieldView.focusCycler.on("forwardCycle",t=>{this._focusCycler.focusNext(),t.stop()}),e.fieldView.focusCycler.on("backwardCycle",t=>{this._focusCycler.focusPrevious(),t.stop()})}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=Nc({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,r=o("Style"),a=new wn(s);a.text=o("Border");const l=lg(o),c=new nt(s,jk);c.set({label:r,class:"ck-table-form__border-style"}),c.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),c.fieldView.buttonView.bind("label").to(this,"borderStyle",h=>l[h||"none"]),c.fieldView.on("execute",h=>{this.borderStyle=h.source._borderStyleValue}),c.bind("isEmpty").to(this,"borderStyle",h=>!h),Ds(c.fieldView,HE(this,t.style),{role:"menu",ariaLabel:r});const u=new nt(s,_n);u.set({label:o("Width"),class:"ck-table-form__border-width"}),u.fieldView.bind("value").to(this,"borderWidth"),u.bind("isEnabled").to(this,"borderStyle",Nl),u.fieldView.on("input",()=>{this.borderWidth=u.fieldView.element.value});const d=new nt(s,i);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",Nl),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(h,f,m,g)=>{Nl(m)||(this.borderColor="",this.borderWidth=""),Nl(g)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:c,borderColorInput:d,borderWidthInput:u}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Background");const s=Nc({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new nt(e,s);return o.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:i,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Dimensions");const s=new nt(e,_n);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new U(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new nt(e,_n);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:o,heightInput:r}}_createPaddingField(){const e=this.locale,t=this.t,i=new nt(e,_n);return i.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),i.fieldView.bind("value").to(this,"padding"),i.fieldView.on("input",()=>{this.padding=i.fieldView.element.value}),i}_createAlignmentFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Table cell text alignment");const s=new No(e),o=e.contentLanguageDirection==="rtl";s.set({isCompact:!0,ariaLabel:t("Horizontal text alignment toolbar")}),kf({view:this,icons:Zw,toolbar:s,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:a=>{if(o){if(a==="left")return"right";if(a==="right")return"left"}return a},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const r=new No(e);return r.set({isCompact:!0,ariaLabel:t("Vertical text alignment toolbar")}),kf({view:this,icons:Zw,toolbar:r,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:s,verticalAlignmentToolbar:r,alignmentLabel:i}}_createActionButtons(){const e=this.locale,t=this.t,i=new X(e),s=new X(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return i.set({label:t("Save"),icon:j.check,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:j.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,i=t("Align cell text to the left"),s=t("Align cell text to the center"),o=t("Align cell text to the right"),r=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:i,justify:r}:{left:i,center:s,right:o,justify:r}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Nl(n){return n!=="none"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ms=_t.defaultPositions,Ef=[ms.northArrowSouth,ms.northArrowSouthWest,ms.northArrowSouthEast,ms.southArrowNorth,ms.southArrowNorthWest,ms.southArrowNorthEast,ms.viewportStickyNorth];function UE(n,e){const t=n.plugins.get("ContextualBalloon"),i=n.editing.view.document.selection;let s;e==="cell"?Pu(i)&&(s=jE(n)):ME(i)&&(s=WE(n)),s&&t.updatePosition(s)}function WE(n){const e=n.model.document.selection,t=gf(e),i=n.editing.mapper.toViewElement(t);return{target:n.editing.view.domConverter.mapViewToDom(i),positions:Ef}}function jE(n){const e=n.editing.mapper,t=n.editing.view.domConverter,i=n.model.document.selection;if(i.rangeCount>1)return{target:()=>fte(i.getRanges(),n),positions:Ef};const s=qE(i.getFirstPosition()),o=e.toViewElement(s);return{target:t.mapViewToDom(o),positions:Ef}}function qE(n){return n.nodeAfter&&n.nodeAfter.is("element","tableCell")?n.nodeAfter:n.findAncestor("tableCell")}function fte(n,e){const t=e.editing.mapper,i=e.editing.view.domConverter,s=Array.from(n).map(o=>{const r=qE(o.start),a=t.toViewElement(r);return new te(i.mapViewToDom(a))});return te.getBoundingRect(s)}const mte='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ws(n){if(!n||!Re(n))return n;const{top:e,right:t,bottom:i,left:s}=n;if(e==t&&t==i&&i==s)return e}function js(n,e){const t=parseFloat(n);return Number.isNaN(t)||String(t)!==String(n)?n:`${t}${e}`}function Xa(n,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...n};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gte=500,Jw={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class pte extends I{static get requires(){return[Ji]}static get pluginName(){return"TableCellPropertiesUI"}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:Bc,backgroundColors:Bc})}init(){const e=this.editor,t=e.t;this._defaultTableCellProperties=Xa(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(Ji),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",i=>{const s=new X(i);s.set({label:t("Cell properties"),icon:mte,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(Jw).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableCellProperties"),i=ga(t.borderColors),s=ma(e.locale,i),o=ga(t.backgroundColors),r=ma(e.locale,o),a=t.colorPicker!==!1,l=new hte(e.locale,{borderColors:s,backgroundColors:r,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:a?t.colorPicker||{}:!1}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(h,f)=>{this._hideView(),f()}),Zo({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=DE(c),d=FE(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableCellBorderColor",errorText:u,validator:Mc})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:zE})),l.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:l.paddingInput,commandName:"tableCellPadding",errorText:d,validator:Gr})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableCellWidth",errorText:d,validator:Gr})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableCellHeight",errorText:d,validator:Gr})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableCellBackgroundColor",errorText:u,validator:Mc})),l.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),l.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),l}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(Jw).map(([i,s])=>{const o=this._defaultTableCellProperties[i]||"";return[i,e.get(s).value||o]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:jE(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;Pu(t.selection)?this._isViewVisible&&UE(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:o}=e,r=Ii(()=>{i.errorText=o},gte);return(a,l,c)=>{r.cancel(),this._isReady&&(s(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),i.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ri extends Q{constructor(e,t,i){super(e),this.attributeName=t,this._defaultValue=i}refresh(){const e=this.editor,i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!i.length,this.value=this._getSingleValue(i)}execute(e={}){const{value:t,batch:i}=e,s=this.editor.model,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),a=this._getValueToSet(t);s.enqueueChange(i,l=>{a?r.forEach(c=>l.setAttribute(this.attributeName,a,c)):r.forEach(c=>l.removeAttribute(this.attributeName,c))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(s=>this._getAttribute(s)===t)?t:void 0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bte extends Ri{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GE extends I{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[Ja]}init(){const e=this.editor,t=Xa(e.config.get("table.tableCellProperties.defaultProperties"));ec(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new bte(e,t.width))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wte extends Ri{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=js(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _te extends Ri{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){const t=js(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vte extends Ri{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yte extends Ri{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cte extends Ri{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kte extends Ri{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ete extends Ri{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tte extends Ri{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=js(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xw=/^(top|middle|bottom)$/,Yw=/^(left|center|right|justify)$/;class Ste extends I{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[Ja,GE]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const s=Xa(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(kk),Ate(t,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableCellBorderStyle",new kte(e,s.borderStyle)),e.commands.add("tableCellBorderColor",new Ete(e,s.borderColor)),e.commands.add("tableCellBorderWidth",new Tte(e,s.borderWidth)),ec(t,i,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableCellHeight",new _te(e,s.height)),e.data.addStyleProcessorRules(Y$),ec(t,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),e.commands.add("tableCellPadding",new wte(e,s.padding)),e.data.addStyleProcessorRules(Om),ec(t,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableCellBackgroundColor",new vte(e,s.backgroundColor)),Ite(t,i,s.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new Cte(e,s.horizontalAlignment)),Pte(t,i,s.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new yte(e,s.verticalAlignment))}}function Ate(n,e,t){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};n.extend("tableCell",{allowAttributes:Object.values(i)}),ff(e,"td",i,t),ff(e,"th",i,t),qr(e,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),qr(e,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),qr(e,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function Ite(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":Yw}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getStyle("text-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:Yw}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getAttribute("align");return s===t?null:s}}})}function Pte(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":Xw}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getStyle("vertical-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:Xw}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getAttribute("valign");return s===t?null:s}}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xte extends I{static get pluginName(){return"TableCellProperties"}static get requires(){return[Ste,pte]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qs extends Q{constructor(e,t,i){super(e),this.attributeName=t,this._defaultValue=i}refresh(){const t=this.editor.model.document.selection,i=gf(t);this.isEnabled=!!i,this.value=this._getValue(i)}execute(e={}){const t=this.editor.model,i=t.document.selection,{value:s,batch:o}=e,r=gf(i),a=this._getValueToSet(s);t.enqueueChange(o,l=>{a?l.setAttribute(this.attributeName,a,r):l.removeAttribute(this.attributeName,r)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rte extends qs{constructor(e,t){super(e,"tableBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lte extends qs{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vte extends qs{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ote extends qs{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=Ws(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=js(e,"px");if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mte extends qs{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bte extends qs{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){if(e=js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nte extends qs{constructor(e,t){super(e,"tableAlignment",t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dte=/^(left|center|right)$/,Fte=/^(left|none|right)$/;class zte extends I{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[Ja]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const s=Xa(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});e.data.addStyleProcessorRules(kk),Hte(t,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableBorderColor",new Lte(e,s.borderColor)),e.commands.add("tableBorderStyle",new Vte(e,s.borderStyle)),e.commands.add("tableBorderWidth",new Ote(e,s.borderWidth)),$te(t,i,s.alignment),e.commands.add("tableAlignment",new Nte(e,s.alignment)),Qw(t,i,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),e.commands.add("tableWidth",new Mte(e,s.width)),Qw(t,i,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableHeight",new Bte(e,s.height)),e.data.addStyleProcessorRules(Om),Ute(t,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableBackgroundColor",new Rte(e,s.backgroundColor))}}function Hte(n,e,t){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};n.extend("table",{allowAttributes:Object.values(i)}),ff(e,"table",i,t),Yl(e,{modelAttribute:i.color,styleName:"border-color"}),Yl(e,{modelAttribute:i.style,styleName:"border-style"}),Yl(e,{modelAttribute:i.width,styleName:"border-width"})}function $te(n,e,t){n.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:i=>({key:"style",value:{float:i==="center"?"none":i}}),converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:Fte}},model:{key:"tableAlignment",value:i=>{let s=i.getStyle("float");return s==="none"&&(s="center"),s===t?null:s}}}).attributeToAttribute({view:{attributes:{align:Dte}},model:{name:"table",key:"tableAlignment",value:i=>{const s=i.getAttribute("align");return s===t?null:s}}})}function Ute(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),sg(e,{viewElement:"table",...t}),Yl(e,t)}function Qw(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),sg(e,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...t}),qr(e,{modelElement:"table",...t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Wte={left:j.objectLeft,center:j.objectCenter,right:j.objectRight};class jte extends U{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:l}=this._createBackgroundFields(),{widthInput:c,operatorLabel:u,heightInput:d,dimensionsLabel:h}=this._createDimensionFields(),{alignmentToolbar:f,alignmentLabel:m}=this._createAlignmentFields();this.focusTracker=new Oe,this.keystrokes=new Ue,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=l,this.widthInput=c,this.heightInput=d,this.alignmentToolbar=f;const{saveButtonView:g,cancelButtonView:b}=this._createActionButtons();this.saveButtonView=g,this.cancelButtonView=b,this._focusables=new ht,this._focusCycler=new ft({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Um(e,{label:this.t("Table properties")})),this.children.add(new hn(e,{labelView:r,children:[r,i,o,s],class:"ck-table-form__border-row"})),this.children.add(new hn(e,{labelView:a,children:[a,l],class:"ck-table-form__background-row"})),this.children.add(new hn(e,{children:[new hn(e,{labelView:h,children:[h,c,u,d],class:"ck-table-form__dimensions-row"}),new hn(e,{labelView:m,children:[m,f],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new hn(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Jo({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{e.fieldView.focusCycler.on("forwardCycle",t=>{this._focusCycler.focusNext(),t.stop()}),e.fieldView.focusCycler.on("backwardCycle",t=>{this._focusCycler.focusPrevious(),t.stop()})}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=Nc({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,r=o("Style"),a=new wn(s);a.text=o("Border");const l=lg(o),c=new nt(s,jk);c.set({label:r,class:"ck-table-form__border-style"}),c.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),c.fieldView.buttonView.bind("label").to(this,"borderStyle",h=>l[h||"none"]),c.fieldView.on("execute",h=>{this.borderStyle=h.source._borderStyleValue}),c.bind("isEmpty").to(this,"borderStyle",h=>!h),Ds(c.fieldView,HE(this,t.style),{role:"menu",ariaLabel:r});const u=new nt(s,_n);u.set({label:o("Width"),class:"ck-table-form__border-width"}),u.fieldView.bind("value").to(this,"borderWidth"),u.bind("isEnabled").to(this,"borderStyle",Dl),u.fieldView.on("input",()=>{this.borderWidth=u.fieldView.element.value});const d=new nt(s,i);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",Dl),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(h,f,m,g)=>{Dl(m)||(this.borderColor="",this.borderWidth=""),Dl(g)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:c,borderColorInput:d,borderWidthInput:u}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Background");const s=Nc({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new nt(e,s);return o.set({label:t("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:i,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Dimensions");const s=new nt(e,_n);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new U(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new nt(e,_n);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Alignment");const s=new No(e);return s.set({isCompact:!0,ariaLabel:t("Table alignment toolbar")}),kf({view:this,icons:Wte,toolbar:s,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:i,alignmentToolbar:s}}_createActionButtons(){const e=this.locale,t=this.t,i=new X(e),s=new X(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return i.set({label:t("Save"),icon:j.check,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:j.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _alignmentLabels(){const e=this.locale,t=this.t,i=t("Align table to the left"),s=t("Center table"),o=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:i}:{left:i,center:s,right:o}}}function Dl(n){return n!=="none"}const qte='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Gte=500,e_={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class Kte extends I{static get requires(){return[Ji]}static get pluginName(){return"TablePropertiesUI"}constructor(e){super(e),this.view=null,e.config.define("table.tableProperties",{borderColors:Bc,backgroundColors:Bc})}init(){const e=this.editor,t=e.t;this._defaultTableProperties=Xa(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(Ji),e.ui.componentFactory.add("tableProperties",i=>{const s=new X(i);s.set({label:t("Table properties"),icon:qte,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(e_).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableProperties"),i=ga(t.borderColors),s=ma(e.locale,i),o=ga(t.backgroundColors),r=ma(e.locale,o),a=t.colorPicker!==!1,l=new jte(e.locale,{borderColors:s,backgroundColors:r,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:a?t.colorPicker||{}:!1}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(h,f)=>{this._hideView(),f()}),Zo({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=DE(c),d=FE(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableBorderColor",errorText:u,validator:Mc})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableBorderWidth",errorText:d,validator:zE})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableBackgroundColor",errorText:u,validator:Mc})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableWidth",errorText:d,validator:Gr})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableHeight",errorText:d,validator:Gr})),l.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),l}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(e_).map(([i,s])=>{const o=i,r=this._defaultTableProperties[o]||"";return[o,e.get(s).value||r]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:WE(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;ME(t.selection)?this._isViewVisible&&UE(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:o}=e,r=Ii(()=>{i.errorText=o},Gte);return(a,l,c)=>{r.cancel(),this._isReady&&(s(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),i.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zte extends I{static get pluginName(){return"TableProperties"}static get requires(){return[zte,Kte]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jte extends Q{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:i}=this.editor;let{table:s=t.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=e;o&&(o=Array.isArray(o)?o:o.split(",")),t.change(a=>{r?a.setAttribute("tableWidth",r,s):a.removeAttribute("tableWidth",s);const l=i.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!o&&!l)return;if(!o)return a.remove(l);const c=rg(o);if(l)Array.from(l.getChildren()).forEach((u,d)=>a.setAttribute("columnWidth",c[d],u));else{const u=a.createElement("tableColumnGroup");c.forEach(d=>a.appendElement("tableColumn",{columnWidth:d},u)),a.append(u,s)}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xte(n){return e=>e.on("element:colgroup",(t,i,s)=>{const o=i.modelCursor.findAncestor("table"),r=Ka(o);if(!r)return;const a=Za(r),l=n.getColumns(o);let c=Eee(r,s.writer);c=Array.from({length:l},(u,d)=>c[d]||"auto"),(c.length!=a.length||c.includes("auto"))&&RE(a,r,rg(c),s.writer)},{priority:"low"})}function Yte(){return n=>n.on("insert:table",(e,t,i)=>{const s=i.writer,o=t.item,r=i.mapper.toViewElement(o),a=r.is("element","table")?r:Array.from(r.getChildren()).find(c=>c.is("element","table"));Ka(o)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qte extends I{static get requires(){return[Ja,ut]}static get pluginName(){return"TableColumnResizeEditing"}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Dt()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,i,s)=>{const o=s?"removeClass":"addClass";e.editing.view.change(r=>{for(const a of e.editing.view.document.roots)r[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const s=new Jte(e);e.commands.add("resizeTableWidth",s),e.commands.add("resizeColumnWidths",s),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",s,"isEnabled",(o,r,a)=>!o&&r&&a)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Ka(e)}getTableColumnElements(e){return Za(e)}getTableColumnsWidths(e){return kee(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(o=>{let r=!1;for(const a of pee(t)){const l=this.getColumnGroupElement(a),c=this.getTableColumnElements(l),u=this.getTableColumnsWidths(l);let d=rg(u);d=i(d,a,this),!Ro(u,d)&&(RE(c,l,d,o),r=!0)}return r});function i(o,r,a){const l=a._tableUtilsPlugin.getColumns(r);if(l-o.length===0)return o;const u=o.map(h=>Number(h.replace("%",""))),d=s(a.editor.model.document.differ,r);for(const h of d){const f=l-u.length;if(f===0)continue;const m=f>0,g=a._tableUtilsPlugin.getCellLocation(h).column;if(m){const b=bee(r,a.editor),p=vee(f,b);u.splice(g,0,...p)}else{const b=u.splice(g,Math.abs(f));u[g]+=Ea(b)}}return u.map(h=>h+"%")}function s(o,r){const a=new Set;for(const l of o.getChanges())if(l.type=="insert"&&l.position.nodeAfter&&l.position.nodeAfter.name=="tableCell"&&l.position.nodeAfter.getAncestors().includes(r))a.add(l.position.nodeAfter);else if(l.type=="remove"){const c=l.position.nodeBefore||l.position.nodeAfter;c.name=="tableCell"&&c.getAncestors().includes(r)&&a.add(c)}return a}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:i=>i.getStyle("width")}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:i=>({name:"figure",key:"style",value:{width:i}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(Yte()),t.for("upcast").add(Xte(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:i=>{const s=i.getStyle("width");return!s||!s.endsWith("%")&&!s.endsWith("pt")?"auto":s}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:i=>({key:"style",value:{width:i}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(OE),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(globalThis.window.document,"mousemove",Lo(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(globalThis.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,t){const i=t.target;if(!i.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const s=this.editor,o=s.editing.mapper.toModelElement(i.findAncestor("figure"));if(!s.model.canEditAt(o))return;t.preventDefault(),e.stop();const r=c(o,this._tableUtilsPlugin,s),a=i.findAncestor("table"),l=s.editing.view;Array.from(a.getChildren()).find(h=>h.is("element","colgroup"))||l.change(h=>{u(h,r,a)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,r),l.change(h=>d(h,a,this._resizingData));function c(h,f,m){const g=Array(f.getColumns(h)),b=new ve(h);for(const p of b){const w=m.editing.mapper.toViewElement(p.cell),E=m.editing.view.domConverter.mapViewToDom(w),C=Cee(E);(!g[p.column]||C<g[p.column])&&(g[p.column]=Rt(C))}return g}function u(h,f,m){const g=h.createContainerElement("colgroup");for(let b=0;b<f.length;b++){const p=h.createEmptyElement("col"),w=`${Rt(f[b]/Ea(f)*100)}%`;h.setStyle("width",w,p),h.insert(h.createPositionAt(g,"end"),p)}h.insert(h.createPositionAt(m,0),g)}function d(h,f,m){const g=m.widths.viewFigureWidth/m.widths.viewFigureParentWidth;h.addClass("ck-table-resized",f),h.addClass("ck-table-column-resizer__active",m.elements.viewResizer),h.setStyle("width",`${Rt(g*100)}%`,f.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:i,flags:{isRightEdge:s,isTableCentered:o,isLtrContent:r},elements:{viewFigure:a,viewLeftColumn:l,viewRightColumn:c},widths:{viewFigureParentWidth:u,tableWidth:d,leftColumnWidth:h,rightColumnWidth:f}}=this._resizingData,m=-h+wf,g=s?u-d:f-wf,b=(r?1:-1)*(s&&o?2:1),p=_ee((t.clientX-i)*b,Math.min(m,0),Math.max(g,0));p!==0&&this.editor.editing.view.change(w=>{const E=Rt((h+p)*100/d);if(w.setStyle("width",`${E}%`,l),s){const C=Rt((d+p)*100/u);w.setStyle("width",`${C}%`,a)}else{const C=Rt((f-p)*100/d);w.setStyle("width",`${C}%`,c)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:i,viewColgroup:s}=this._resizingData.elements,o=this.editor,r=o.editing.view,a=this.getColumnGroupElement(t),l=Array.from(s.getChildren()).filter(g=>g.is("view:element")),c=a?this.getTableColumnsWidths(a):null,u=l.map(g=>g.getStyle("width")),d=!Ro(c,u),h=t.getAttribute("tableWidth"),f=i.getStyle("width"),m=h!==f;(d||m)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:t,tableWidth:`${Rt(f)}%`,columnWidths:u}):r.change(g=>{if(c)for(const b of l)g.setStyle("width",c.shift(),b);else g.remove(s);m&&(h?g.setStyle("width",h,i):g.removeStyle("width",i)),!c&&!h&&g.removeClass("ck-table-resized",[...i.getChildren()].find(b=>b.name==="table"))})),r.change(g=>{g.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const i=this.editor,s=e.domEvent.clientX,o=e.target,r=o.findAncestor("td")||o.findAncestor("th"),a=i.editing.mapper.toModelElement(r),l=a.findAncestor("table"),c=wee(a,this._tableUtilsPlugin).rightEdge,u=this._tableUtilsPlugin.getColumns(l)-1,d=c===u,h=!l.hasAttribute("tableAlignment"),f=i.locale.contentLanguageDirection!=="rtl",m=r.findAncestor("table"),g=m.findAncestor("figure"),b=[...m.getChildren()].find(x=>x.is("element","colgroup")),p=b.getChild(c),w=d?void 0:b.getChild(c+1),E=_f(i.editing.view.domConverter.mapViewToDom(g.parent)),C=_f(i.editing.view.domConverter.mapViewToDom(g)),T=xE(l,i),k=t[c],S=d?void 0:t[c+1];return{columnPosition:s,flags:{isRightEdge:d,isTableCentered:h,isLtrContent:f},elements:{viewResizer:o,modelTable:l,viewFigure:g,viewColgroup:b,viewLeftColumn:p,viewRightColumn:w},widths:{viewFigureParentWidth:E,viewFigureWidth:C,tableWidth:T,leftColumnWidth:k,rightColumnWidth:S}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,i,s)=>{const o=i.item,r=s.mapper.toViewElement(o),a=s.writer;a.insert(a.createPositionAt(r,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ene extends I{static get requires(){return[Qte,GE]}static get pluginName(){return"TableColumnResize"}}class cg extends Cu{}cg.builtinPlugins=[Xq,UG,eG,mG,oK,mZ,NZ,LZ,AZ,DJ,WZ,XZ,zJ,iJ,rX,xX,MX,GX,KX,W2,wG,EY,RY,tQ,_Q,MQ,BQ,Wa,S2,fX,$Q,CG,SG,xG,lte,xte,ene,Zte,cte,OG,Km];cg.defaultConfig={htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},toolbar:{items:["heading","|","bold","italic","underline","strikethrough","subscript","superscript","link","bulletedList","numberedList","|","alignment","fontColor","fontBackgroundColor","fontSize","|","imageInsert","mediaEmbed","insertTable","blockQuote","codeBlock","code","|","htmlEmbed","sourceEditing","|","undo","redo"]},language:"en",image:{toolbar:["imageTextAlternative","imageStyle:inline","imageStyle:block","imageStyle:side","linkImage"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},simpleUpload:{uploadUrl:"/api/cloudinary/upload_ckeditor"}};const tne=rt(n=>(n.vueApp.use(oV),{provide:{ckeditor:{customEditor:cg}}})),nne=[yA,kA,mP,gP,pP,bP,wP,R3,L3,O3,B3,KR,XR,X4,i7,s7,eV,tV,tne];function ine(n,e){const t=e/n*100;return 2/Math.PI*100*Math.atan(t/50)}function sne(n={}){const{duration:e=2e3,throttle:t=200,hideDelay:i=500,resetDelay:s=400}=n,o=n.estimatedProgress||ine,r=xe(),a=Fe(0),l=Fe(!1);let c=!1,u,d,h,f;const m=()=>g(0);function g(k=0){if(!r.isHydrating){if(k>=100)return p();E(),a.value=k<0?0:k,t?d=setTimeout(()=>{l.value=!0,C()},t):(l.value=!0,C())}}function b(){h=setTimeout(()=>{l.value=!1,f=setTimeout(()=>{a.value=0},s)},i)}function p(k={}){a.value=100,c=!0,E(),w(),k.force?(a.value=0,l.value=!1):b()}function w(){clearTimeout(h),clearTimeout(f)}function E(){clearTimeout(d),cancelAnimationFrame(u)}function C(){c=!1;let k;function S(x){if(c)return;k??(k=x);const N=x-k;a.value=Math.max(0,Math.min(100,o(e,N))),u=requestAnimationFrame(S)}u=requestAnimationFrame(S)}let T=()=>{};{const k=r.hook("page:loading:start",()=>{m()}),S=r.hook("page:loading:end",()=>{p()}),x=r.hook("vue:error",()=>p());T=()=>{x(),k(),S(),E()}}return{_cleanup:T,progress:be(()=>a.value),isLoading:be(()=>l.value),start:m,set:g,finish:p,clear:E}}function one(n={}){const e=xe(),t=e._loadingIndicator=e._loadingIndicator||sne(n);return Sa()&&(e._loadingIndicatorDeps=e._loadingIndicatorDeps||0,e._loadingIndicatorDeps++,Eo(()=>{e._loadingIndicatorDeps--,e._loadingIndicatorDeps===0&&(t._cleanup(),delete e._loadingIndicator)})),t}const rne=Bn({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},estimatedProgress:{type:Function,required:!1}},setup(n,{slots:e,expose:t}){const{progress:i,isLoading:s,start:o,finish:r,clear:a}=one({duration:n.duration,throttle:n.throttle,estimatedProgress:n.estimatedProgress});return t({progress:i,isLoading:s,start:o,finish:r,clear:a}),()=>pt("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${n.height}px`,opacity:s.value?1:0,background:n.color||void 0,backgroundSize:`${100/i.value*100}% auto`,transform:`scaleX(${i.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},e)}}),ane=Bn({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(n){const e=n.renderKey,t=n.route,i={};for(const s in n.route)Object.defineProperty(i,s,{get:()=>e===n.renderKey?n.route[s]:t[s]});return _o(Ia,Fc(i)),()=>pt(n.vnode,{ref:n.vnodeRef})}}),lne=Bn({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(n,{attrs:e,expose:t}){const i=xe(),s=Fe(),o=Bt(Ia,null);let r;t({pageRef:s});const a=Bt(T_,null);let l;const c=i.deferHydration();if(i.isHydrating){const u=i.hooks.hookOnce("app:error",c);Nn().beforeEach(u)}return n.pageKey&&yn(()=>n.pageKey,(u,d)=>{u!==d&&i.callHook("page:loading:start")}),()=>pt(Z_,{name:n.name,route:n.route,...e},{default:u=>{const d=une(o,u.route,u.Component),h=o&&o.matched.length===u.route.matched.length;if(!u.Component){if(l&&!h)return l;c();return}if(l&&a&&!a.isCurrent(u.route))return l;if(d&&o&&(!a||a!=null&&a.isCurrent(o)))return h?l:null;const f=th(u,n.pageKey);!i.isHydrating&&!dne(o,u.route,u.Component)&&r===f&&i.callHook("page:loading:end"),r=f;const m=!!(n.transition??u.route.meta.pageTransition??Xd),g=m&&cne([n.transition,u.route.meta.pageTransition,Xd,{onAfterLeave:()=>{i.callHook("page:transition:finish",u.Component)}}].filter(Boolean)),b=n.keepalive??u.route.meta.keepalive??dA;return l=X_(a_,m&&g,II(b,pt(If,{suspensible:!0,onPending:()=>i.callHook("page:start",u.Component),onResolve:()=>{xs(()=>i.callHook("page:finish",u.Component).then(()=>i.callHook("page:loading:end")).finally(c))}},{default:()=>{const p=pt(ane,{key:f||void 0,vnode:u.Component,route:u.route,renderKey:f||void 0,trackRootNodes:m,vnodeRef:s});return b&&(p.type.name=u.Component.type.name||u.Component.type.__name||"RouteProvider"),p}}))).default(),l}})}});function cne(n){const e=n.map(t=>({...t,onAfterLeave:t.onAfterLeave?zf(t.onAfterLeave):void 0}));return Hc(...e)}function une(n,e,t){if(!n)return!1;const i=e.matched.findIndex(s=>{var o;return((o=s.components)==null?void 0:o.default)===(t==null?void 0:t.type)});return!i||i===-1?!1:e.matched.slice(0,i).some((s,o)=>{var r,a,l;return((r=s.components)==null?void 0:r.default)!==((l=(a=n.matched[o])==null?void 0:a.components)==null?void 0:l.default)})||t&&th({route:e,Component:t})!==th({route:n,Component:t})}function dne(n,e,t){return n?e.matched.findIndex(s=>{var o;return((o=s.components)==null?void 0:o.default)===(t==null?void 0:t.type)})<e.matched.length-1:!1}const hne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"icon icon--check-circle",viewBox:"0 0 24 24"};function KE(n,e){return Xe(),qi("svg",hne,e[0]||(e[0]=[jo("path",{fill:"currentColor",d:"m10.6 13.8-2.15-2.15q-.275-.275-.7-.275t-.7.275-.275.7.275.7L9.9 15.9q.3.3.7.3t.7-.3l5.65-5.65q.275-.275.275-.7t-.275-.7-.7-.275-.7.275zM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12t.788-3.9 2.137-3.175q1.35-1.35 3.175-2.137T12 2t3.9.788 3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"},null,-1)]))}const ZE={render:KE},fne=Object.freeze(Object.defineProperty({__proto__:null,default:ZE,render:KE},Symbol.toStringTag,{value:"Module"})),mne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"icon icon--warning",viewBox:"0 0 24 24"};function JE(n,e){return Xe(),qi("svg",mne,e[0]||(e[0]=[jo("path",{fill:"currentColor",d:"M2.725 21q-.275 0-.5-.138t-.35-.362q-.125-.225-.138-.488t.138-.512l9.25-16q.15-.25.388-.375T12 3t.488.125.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.713T12 16q-.425 0-.713.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.713T12 10q-.425 0-.713.288T11 11v3q0 .425.288.713T12 15"},null,-1)]))}const XE={render:JE},gne=Object.freeze(Object.defineProperty({__proto__:null,default:XE,render:JE},Symbol.toStringTag,{value:"Module"})),pne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"icon icon--error-circle",viewBox:"0 0 24 24"};function YE(n,e){return Xe(),qi("svg",pne,e[0]||(e[0]=[jo("path",{fill:"currentColor",d:"M12 17q.425 0 .713-.288T13 16q0-.425-.288-.713T12 15q-.425 0-.713.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.713T12 7q-.425 0-.713.288T11 8v4q0 .425.288.713T12 13m0 9q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12t.788-3.9 2.137-3.175q1.35-1.35 3.175-2.137T12 2t3.9.788 3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"},null,-1)]))}const QE={render:YE},bne=Object.freeze(Object.defineProperty({__proto__:null,default:QE,render:YE},Symbol.toStringTag,{value:"Module"})),wne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"icon icon--info",viewBox:"0 0 24 24"};function eT(n,e){return Xe(),qi("svg",wne,e[0]||(e[0]=[jo("path",{fill:"currentColor",d:"M13.5 4A1.5 1.5 0 0 0 12 5.5 1.5 1.5 0 0 0 13.5 7 1.5 1.5 0 0 0 15 5.5 1.5 1.5 0 0 0 13.5 4m-.36 4.77c-1.19.1-4.44 2.69-4.44 2.69-.2.15-.14.14.02.42.16.27.14.29.33.16.2-.13.53-.34 1.08-.68 2.12-1.36.34 1.78-.57 7.07-.36 2.62 2 1.27 2.61.87.6-.39 2.21-1.5 2.37-1.61.22-.15.06-.27-.11-.52-.12-.17-.24-.05-.24-.05-.65.43-1.84 1.33-2 .76-.19-.57 1.03-4.48 1.7-7.17.11-.64.41-2.04-.75-1.94"},null,-1)]))}const tT={render:eT},_ne=Object.freeze(Object.defineProperty({__proto__:null,default:tT,render:eT},Symbol.toStringTag,{value:"Module"})),vne={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"icon icon--close",viewBox:"0 0 24 24"};function nT(n,e){return Xe(),qi("svg",vne,e[0]||(e[0]=[jo("path",{fill:"currentColor",d:"M6.4 19 5 17.6l5.6-5.6L5 6.4 6.4 5l5.6 5.6L17.6 5 19 6.4 13.4 12l5.6 5.6-1.4 1.4-5.6-5.6z"},null,-1)]))}const iT={render:nT},yne=Object.freeze(Object.defineProperty({__proto__:null,default:iT,render:nT},Symbol.toStringTag,{value:"Module"})),ug=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},Cne={props:{element:{type:String,default:"button"},type:{type:String,default:"button"},label:{type:[Boolean,String],default:!1},modifiers:{type:[String,Array],default:"primary"},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1}},computed:{buttonModifiers(){let n="";return this.hideLabel&&(n+="btn--hide-label "),this.reverse&&(n+="btn--reverse "),this.singleLine&&(n+="btn--single-line "),typeof this.modifiers=="string"&&(n+=`btn--${this.modifiers} `),Array.isArray(this.modifiers)&&this.modifiers.forEach(e=>{n+=`btn--${e} `}),n},buttonType(){return this.element!=="button"?null:this.type}}},kne=["innerHTML"];function Ene(n,e,t,i,s,o){return Xe(),mn(l_(t.element),{class:Pf(`btn ${o.buttonModifiers}`),type:o.buttonType,"aria-label":t.label},{default:Kr(()=>[!t.reverse&&!t.hideIcon?dg(n.$slots,"icon",{key:0}):Ru("",!0),t.label?(Xe(),qi("span",{key:1,class:"btn__label",innerHTML:t.label},null,8,kne)):Ru("",!0),t.reverse&&!t.hideIcon?dg(n.$slots,"icon",{key:2}):Ru("",!0)]),_:3},8,["class","type","aria-label"])}const Tne=ug(Cne,[["render",Ene]]),Sne={setup(){return{messageStore:sv()}}},Ane=["innerHTML"];function Ine(n,e,t,i,s,o){const r=ZE,a=XE,l=QE,c=tT,u=iT,d=Tne;return Xe(),mn(yT,{tag:"div",name:"list",class:"system-messages"},{default:Kr(()=>[(Xe(!0),qi(Af,null,vT(i.messageStore.messages,h=>(Xe(),qi("div",{key:h.id,class:Pf(`system-messages__message system-messages__message--${h.type}`)},[h.type==="success"?(Xe(),mn(r,{key:0,class:"system-messages__icon"})):h.type==="notice"?(Xe(),mn(a,{key:1,class:"system-messages__icon"})):h.type==="error"?(Xe(),mn(l,{key:2,class:"system-messages__icon"})):(Xe(),mn(c,{key:3,class:"system-messages__icon"})),jo("span",{class:"system-messages__label",innerHTML:h.message},null,8,Ane),vo(d,{class:"system-messages__action",label:n.$t("accessibility.clear"),modifiers:["text"],"hide-label":!0,onClick:f=>i.messageStore.remove(h.id)},{icon:Kr(()=>[vo(u)]),_:2},1032,["label","onClick"])],2))),128))]),_:1})}const Pne=ug(Sne,[["render",Ine]]),xne=Bn({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(n,e){const t=await Ui[n.name]().then(i=>i.default||i);return()=>pt(t,n.layoutProps,e.slots)}}),Rne=Bn({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(n,e){const t=xe(),i=Bt(Ia),s=i===Pa()?J_():i,o=be(()=>{let l=Te(n.name)??s.meta.layout??"default";return l&&!(l in Ui)&&n.fallback&&(l=Te(n.fallback)),l}),r=Fe();e.expose({layoutRef:r});const a=t.deferHydration();if(t.isHydrating){const l=t.hooks.hookOnce("app:error",a);Nn().beforeEach(l)}return()=>{const l=o.value&&o.value in Ui,c=s.meta.layoutTransition??uA;return X_(a_,l&&c,{default:()=>pt(If,{suspensible:!0,onResolve:()=>{xs(a)}},{default:()=>pt(Lne,{layoutProps:CT(e.attrs,{ref:r}),key:o.value||void 0,name:o.value,shouldProvide:!n.name,hasTransition:!!c},e.slots)})}).default()}}}),Lne=Bn({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(n,e){const t=n.name;return n.shouldProvide&&_o(T_,{isCurrent:i=>t===(i.meta.layout??"default")}),()=>{var i,s;return!t||typeof t=="string"&&!(t in Ui)?(s=(i=e.slots).default)==null?void 0:s.call(i):pt(xne,{key:t,layoutProps:n.layoutProps,name:t},e.slots)}}}),Vne={setup(){return{route:Pa()}}};function One(n,e,t,i,s,o){const r=rne,a=lne,l=Pne,c=Rne;return Xe(),mn(c,{class:Pf(i.route.name)},{default:Kr(()=>[vo(r),vo(a),vo(l)]),_:1},8,["class"])}const Mne=ug(Vne,[["render",One]]),Bne={__name:"nuxt-error-page",props:{error:Object},setup(n){const t=n.error;t.stack&&t.stack.split(`
`).splice(1).map(d=>({text:d.replace("webpack:/","").replace(".vue",".js").trim(),internal:d.includes("node_modules")&&!d.includes(".cache")||d.includes("internal")||d.includes("new Promise")})).map(d=>`<span class="stack${d.internal?" internal":""}">${d.text}</span>`).join(`
`);const i=Number(t.statusCode||500),s=i===404,o=t.statusMessage??(s?"Page Not Found":"Internal Server Error"),r=t.message||t.toString(),a=void 0,l=O(()=>A(()=>import("./nXbM5xKm.js"),__vite__mapDeps([240,2,3,4,241]),import.meta.url).then(d=>d.default||d)),c=O(()=>A(()=>import("./CupoZTVU.js"),__vite__mapDeps([242,3,4,243]),import.meta.url).then(d=>d.default||d)),u=s?l:c;return(d,h)=>(Xe(),mn(Te(u),kT(ET({statusCode:Te(i),statusMessage:Te(o),description:Te(r),stack:Te(a)})),null,16))}},t_={__name:"nuxt-root",setup(n){const e=()=>null,t=xe(),i=t.deferHydration();if(t.isHydrating){const a=t.hooks.hookOnce("app:error",i);Nn().beforeEach(a)}const s=!1;_o(Ia,Pa()),t.hooks.callHookWith(a=>a.map(l=>l()),"vue:setup");const o=$c();TT((a,l,c)=>{if(t.hooks.callHook("vue:error",a,l,c).catch(u=>console.error("[nuxt] Error in `vue:error` hook",u)),gS(a)&&(a.fatal||a.unhandled))return t.runWithContext(()=>go(a)),!1});const r=!1;return(a,l)=>(Xe(),mn(If,{onResolve:Te(i)},{default:Kr(()=>[Te(o)?(Xe(),mn(Te(Bne),{key:0,error:Te(o)},null,8,["error"])):Te(r)?(Xe(),mn(Te(e),{key:1,context:Te(r)},null,8,["context"])):Te(s)?(Xe(),mn(l_(Te(s)),{key:2})):(Xe(),mn(Te(Mne),{key:3}))]),_:1},8,["onResolve"]))}};let n_;{let n;n_=async function(){var r,a;if(n)return n;const i=!!((r=window.__NUXT__)!=null&&r.serverRendered||((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?ST(t_):AT(t_),s=V5({vueApp:i});async function o(l){await s.callHook("app:error",l),s.payload.error=s.payload.error||xa(l)}i.config.errorHandler=o;try{await M5(s,nne)}catch(l){o(l)}try{await s.hooks.callHook("app:created",i),await s.hooks.callHook("app:beforeMount",i),i.mount(mA),await s.hooks.callHook("app:mounted",i),await xs()}catch(l){o(l)}return i.config.errorHandler===o&&(i.config.errorHandler=void 0),i},n=n_().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{zne as $,sP as A,Kne as B,A as C,eie as D,Gne as E,jne as F,tm as G,$ne as H,Nn as I,es as J,Q_ as K,Qg as L,Une as M,zc as N,Lf as O,jT as P,Hne as Q,Hd as R,Rf as S,Uc as T,Yne as U,tie as V,nie as W,s4 as X,iie as Y,Ia as Z,ug as _,sv as a,ll as a0,Xne as b,Pa as c,jI as d,HI as e,Aa as f,Tne as g,iT as h,xa as i,xe as j,O_ as k,K3 as l,Qne as m,Hc as n,lp as o,oS as p,iv as q,qne as r,Wne as s,pR as t,aA as u,S_ as v,Jne as w,Zne as x,tT as y,NI as z};
